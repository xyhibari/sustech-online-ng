const m9="modulepreload",v9=function(e){return"/"+e},bE={},Fe=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=v9(i),i in bE)return;bE[i]=!0;const a=i.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${l}`))return;const o=document.createElement("link");if(o.rel=a?"stylesheet":m9,a||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),a)return new Promise((h,d)=>{o.addEventListener("load",h),o.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())},g9={"v-8daa1a0e":()=>Fe(()=>import("./index.html.cc87eaf3.js"),[]).then(({data:e})=>e),"v-74bc627b":()=>Fe(()=>import("./index.html.31611c34.js"),[]).then(({data:e})=>e),"v-08ae5eba":()=>Fe(()=>import("./2018-2019.html.14fd1851.js"),[]).then(({data:e})=>e),"v-93cfbde4":()=>Fe(()=>import("./2019-2020.html.d505a0cd.js"),[]).then(({data:e})=>e),"v-f917537a":()=>Fe(()=>import("./2020-2021.html.11c03637.js"),[]).then(({data:e})=>e),"v-1a0de1a3":()=>Fe(()=>import("./2021-2022.html.286a08c4.js"),[]).then(({data:e})=>e),"v-190ab309":()=>Fe(()=>import("./2021fall.html.10103da6.js"),[]).then(({data:e})=>e),"v-96167c50":()=>Fe(()=>import("./index.html.bc939c40.js"),[]).then(({data:e})=>e),"v-96536bf0":()=>Fe(()=>import("./index.html.080956c8.js"),[]).then(({data:e})=>e),"v-dbd38712":()=>Fe(()=>import("./index.html.a8189774.js"),[]).then(({data:e})=>e),"v-c73889da":()=>Fe(()=>import("./index.html.5cac632f.js"),[]).then(({data:e})=>e),"v-2c5c0e04":()=>Fe(()=>import("./building-11-elevator.html.c9409b54.js"),[]).then(({data:e})=>e),"v-104cfa63":()=>Fe(()=>import("./2021.html.f6607a41.js"),[]).then(({data:e})=>e),"v-780207b9":()=>Fe(()=>import("./index.html.d0c1671e.js"),[]).then(({data:e})=>e),"v-14e6315a":()=>Fe(()=>import("./index.html.57e12579.js"),[]).then(({data:e})=>e),"v-42f2be94":()=>Fe(()=>import("./vehicle-charger.html.bfb1895c.js"),[]).then(({data:e})=>e),"v-ed48bdf8":()=>Fe(()=>import("./index.html.0c8d0748.js"),[]).then(({data:e})=>e),"v-f4bc5604":()=>Fe(()=>import("./index.html.fd078231.js"),[]).then(({data:e})=>e),"v-1500d063":()=>Fe(()=>import("./index.html.70d3e1bf.js"),[]).then(({data:e})=>e),"v-014445c8":()=>Fe(()=>import("./index.html.10076f05.js"),[]).then(({data:e})=>e),"v-461d4a7c":()=>Fe(()=>import("./registered-organization-2019.html.39b87df9.js"),[]).then(({data:e})=>e),"v-6ba7e826":()=>Fe(()=>import("./registered-organization-2020.html.a4bcb362.js"),[]).then(({data:e})=>e),"v-6d5cc0c5":()=>Fe(()=>import("./registered-organization-2021.html.0638a2c2.js"),[]).then(({data:e})=>e),"v-28ddfa13":()=>Fe(()=>import("./index.html.3b65d196.js"),[]).then(({data:e})=>e),"v-be92ea7e":()=>Fe(()=>import("./index.html.f26770e4.js"),[]).then(({data:e})=>e),"v-d7188082":()=>Fe(()=>import("./index.html.1616e1b0.js"),[]).then(({data:e})=>e),"v-d1061704":()=>Fe(()=>import("./paper-tools.html.380435e4.js"),[]).then(({data:e})=>e),"v-4322d0a7":()=>Fe(()=>import("./index.html.0c88fc53.js"),[]).then(({data:e})=>e),"v-69b23ddf":()=>Fe(()=>import("./index.html.e58078a8.js"),[]).then(({data:e})=>e),"v-1678dd6f":()=>Fe(()=>import("./bustimer-wx.html.1f4934cf.js"),[]).then(({data:e})=>e),"v-1630dfb5":()=>Fe(()=>import("./bustimer.html.06da7a48.js"),[]).then(({data:e})=>e),"v-6a28f6e0":()=>Fe(()=>import("./holiday.html.a86b78c8.js"),[]).then(({data:e})=>e),"v-48975204":()=>Fe(()=>import("./redirect.html.c057676f.js"),[]).then(({data:e})=>e),"v-8059a7a6":()=>Fe(()=>import("./workday.html.8ab74050.js"),[]).then(({data:e})=>e),"v-22cd7d0c":()=>Fe(()=>import("./index.html.e0f4ce56.js"),[]).then(({data:e})=>e),"v-0e92d420":()=>Fe(()=>import("./index.html.aa4aced9.js"),[]).then(({data:e})=>e),"v-2b8cac58":()=>Fe(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.html.8a1e73d0.js"),[]).then(({data:e})=>e),"v-66965350":()=>Fe(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.html.fb3f1959.js"),[]).then(({data:e})=>e),"v-66317da4":()=>Fe(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.html.bf5ca49a.js"),[]).then(({data:e})=>e),"v-5c3fcdf6":()=>Fe(()=>import("./index.html.e31e4c9c.js"),[]).then(({data:e})=>e),"v-04710004":()=>Fe(()=>import("./index.html.be60fc1c.js"),[]).then(({data:e})=>e),"v-5589dd0c":()=>Fe(()=>import("./dorm-floor-plan.html.540dc6bf.js"),[]).then(({data:e})=>e),"v-d42194b6":()=>Fe(()=>import("./index.html.1805cec9.js"),[]).then(({data:e})=>e),"v-20383a78":()=>Fe(()=>import("./index.html.dfea0af0.js"),[]).then(({data:e})=>e),"v-42c1fa44":()=>Fe(()=>import("./index.html.5e428f2f.js"),[]).then(({data:e})=>e),"v-76cff034":()=>Fe(()=>import("./index.html.432e1d7d.js"),[]).then(({data:e})=>e),"v-ac3449b2":()=>Fe(()=>import("./send-receive-email-by-proxy.html.571c2c6d.js"),[]).then(({data:e})=>e),"v-29860ed0":()=>Fe(()=>import("./index.html.2e4cff86.js"),[]).then(({data:e})=>e),"v-622da02f":()=>Fe(()=>import("./index.html.c9e01786.js"),[]).then(({data:e})=>e),"v-5e590ec6":()=>Fe(()=>import("./index.html.57af03a4.js"),[]).then(({data:e})=>e),"v-1fa222d4":()=>Fe(()=>import("./index.html.3151a618.js"),[]).then(({data:e})=>e),"v-48519846":()=>Fe(()=>import("./index.html.d481400a.js"),[]).then(({data:e})=>e),"v-369295b4":()=>Fe(()=>import("./index.html.2485a413.js"),[]).then(({data:e})=>e),"v-3692bb1f":()=>Fe(()=>import("./index.html.ec1da8be.js"),[]).then(({data:e})=>e),"v-425958ce":()=>Fe(()=>import("./index.html.fbde79b0.js"),[]).then(({data:e})=>e),"v-3692ee77":()=>Fe(()=>import("./index.html.dffd6115.js"),[]).then(({data:e})=>e),"v-2686552a":()=>Fe(()=>import("./index.html.d93bcb6a.js"),[]).then(({data:e})=>e),"v-45d74ec0":()=>Fe(()=>import("./index.html.f1b81ea4.js"),[]).then(({data:e})=>e),"v-772a5784":()=>Fe(()=>import("./index.html.58162bd5.js"),[]).then(({data:e})=>e),"v-8460eeb8":()=>Fe(()=>import("./advice-on-study.html.9009e622.js"),[]).then(({data:e})=>e),"v-435bd49a":()=>Fe(()=>import("./info-on-study.html.5495438f.js"),[]).then(({data:e})=>e),"v-6323734e":()=>Fe(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.html.33503560.js"),[]).then(({data:e})=>e),"v-5eb748bf":()=>Fe(()=>import("./innovative-project.html.f4c44120.js"),[]).then(({data:e})=>e),"v-2a23f022":()=>Fe(()=>import("./index.html.bf358557.js"),[]).then(({data:e})=>e),"v-66061b92":()=>Fe(()=>import("./index.html.43bedae8.js"),[]).then(({data:e})=>e),"v-89ac2bec":()=>Fe(()=>import("./index.html.a7f33103.js"),[]).then(({data:e})=>e),"v-1549b190":()=>Fe(()=>import("./index.html.aa3a5ae8.js"),[]).then(({data:e})=>e),"v-9e1961f8":()=>Fe(()=>import("./index.html.0a3d4b89.js"),[]).then(({data:e})=>e),"v-6bba5e58":()=>Fe(()=>import("./index.html.0d9facc0.js"),[]).then(({data:e})=>e),"v-83a77034":()=>Fe(()=>import("./index.html.ee748dfa.js"),[]).then(({data:e})=>e),"v-296d1d15":()=>Fe(()=>import("./index.html.ebd75eb6.js"),[]).then(({data:e})=>e),"v-fb711be8":()=>Fe(()=>import("./index.html.78fee194.js"),[]).then(({data:e})=>e),"v-3706649a":()=>Fe(()=>import("./404.html.c3e557d0.js"),[]).then(({data:e})=>e)};function Nw(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const _9="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",y9=Nw(_9);function i5(e){return!!e||e===""}function of(e){if(ir(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=rn(n)?w9(n):of(n);if(i)for(const a in i)t[a]=i[a]}return t}else{if(rn(e))return e;if(Yn(e))return e}}const x9=/;(?![^(]*\))/g,b9=/:(.+)/;function w9(e){const t={};return e.split(x9).forEach(r=>{if(r){const n=r.split(b9);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Ri(e){let t="";if(rn(e))t=e;else if(ir(e))for(let r=0;r<e.length;r++){const n=Ri(e[r]);n&&(t+=n+" ")}else if(Yn(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function S9(e){if(!e)return null;let{class:t,style:r}=e;return t&&!rn(t)&&(e.class=Ri(t)),r&&(e.style=of(r)),e}const Kr=e=>rn(e)?e:e==null?"":ir(e)||Yn(e)&&(e.toString===l5||!_r(e.toString))?JSON.stringify(e,a5,2):String(e),a5=(e,t)=>t&&t.__v_isRef?a5(e,t.value):Rh(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:o5(t)?{[`Set(${t.size})`]:[...t.values()]}:Yn(t)&&!ir(t)&&!u5(t)?String(t):t,mn={},Oh=[],To=()=>{},T9=()=>!1,E9=/^on[^a-z]/,om=e=>E9.test(e),Vw=e=>e.startsWith("onUpdate:"),xi=Object.assign,Uw=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},C9=Object.prototype.hasOwnProperty,zr=(e,t)=>C9.call(e,t),ir=Array.isArray,Rh=e=>Q_(e)==="[object Map]",o5=e=>Q_(e)==="[object Set]",_r=e=>typeof e=="function",rn=e=>typeof e=="string",$w=e=>typeof e=="symbol",Yn=e=>e!==null&&typeof e=="object",s5=e=>Yn(e)&&_r(e.then)&&_r(e.catch),l5=Object.prototype.toString,Q_=e=>l5.call(e),A9=e=>Q_(e).slice(8,-1),u5=e=>Q_(e)==="[object Object]",jw=e=>rn(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ap=Nw(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ey=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},I9=/-(\w)/g,ts=ey(e=>e.replace(I9,(t,r)=>r?r.toUpperCase():"")),P9=/\B([A-Z])/g,yc=ey(e=>e.replace(P9,"-$1").toLowerCase()),ty=ey(e=>e.charAt(0).toUpperCase()+e.slice(1)),Y0=ey(e=>e?`on${ty(e)}`:""),Pp=(e,t)=>!Object.is(e,t),K0=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},n_=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},c5=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let wE;const M9=()=>wE||(wE=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let Ta;class D9{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&Ta&&(this.parent=Ta,this.index=(Ta.scopes||(Ta.scopes=[])).push(this)-1)}run(t){if(this.active){const r=Ta;try{return Ta=this,t()}finally{Ta=r}}}on(){Ta=this}off(){Ta=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function k9(e,t=Ta){t&&t.active&&t.effects.push(e)}function L9(){return Ta}function O9(e){Ta&&Ta.cleanups.push(e)}const Hw=e=>{const t=new Set(e);return t.w=0,t.n=0,t},h5=e=>(e.w&Vl)>0,f5=e=>(e.n&Vl)>0,R9=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Vl},z9=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];h5(i)&&!f5(i)?i.delete(e):t[r++]=i,i.w&=~Vl,i.n&=~Vl}t.length=r}},Qx=new WeakMap;let Wd=0,Vl=1;const eb=30;let bo;const lc=Symbol(""),tb=Symbol("");class Gw{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,k9(this,n)}run(){if(!this.active)return this.fn();let t=bo,r=Rl;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=bo,bo=this,Rl=!0,Vl=1<<++Wd,Wd<=eb?R9(this):SE(this),this.fn()}finally{Wd<=eb&&z9(this),Vl=1<<--Wd,bo=this.parent,Rl=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){bo===this?this.deferStop=!0:this.active&&(SE(this),this.onStop&&this.onStop(),this.active=!1)}}function SE(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let Rl=!0;const d5=[];function sf(){d5.push(Rl),Rl=!1}function lf(){const e=d5.pop();Rl=e===void 0?!0:e}function Ia(e,t,r){if(Rl&&bo){let n=Qx.get(e);n||Qx.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=Hw()),p5(i)}}function p5(e,t){let r=!1;Wd<=eb?f5(e)||(e.n|=Vl,r=!h5(e)):r=!e.has(bo),r&&(e.add(bo),bo.deps.push(e))}function Fs(e,t,r,n,i,a){const l=Qx.get(e);if(!l)return;let o=[];if(t==="clear")o=[...l.values()];else if(r==="length"&&ir(e))l.forEach((h,d)=>{(d==="length"||d>=n)&&o.push(h)});else switch(r!==void 0&&o.push(l.get(r)),t){case"add":ir(e)?jw(r)&&o.push(l.get("length")):(o.push(l.get(lc)),Rh(e)&&o.push(l.get(tb)));break;case"delete":ir(e)||(o.push(l.get(lc)),Rh(e)&&o.push(l.get(tb)));break;case"set":Rh(e)&&o.push(l.get(lc));break}if(o.length===1)o[0]&&rb(o[0]);else{const h=[];for(const d of o)d&&h.push(...d);rb(Hw(h))}}function rb(e,t){const r=ir(e)?e:[...e];for(const n of r)n.computed&&TE(n);for(const n of r)n.computed||TE(n)}function TE(e,t){(e!==bo||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const B9=Nw("__proto__,__v_isRef,__isVue"),m5=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter($w)),F9=qw(),N9=qw(!1,!0),V9=qw(!0),EE=U9();function U9(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=Jr(this);for(let a=0,l=this.length;a<l;a++)Ia(n,"get",a+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(Jr)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){sf();const n=Jr(this)[t].apply(this,r);return lf(),n}}),e}function qw(e=!1,t=!1){return function(n,i,a){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&a===(e?t?nB:x5:t?y5:_5).get(n))return n;const l=ir(n);if(!e&&l&&zr(EE,i))return Reflect.get(EE,i,a);const o=Reflect.get(n,i,a);return($w(i)?m5.has(i):B9(i))||(e||Ia(n,"get",i),t)?o:fi(o)?l&&jw(i)?o:o.value:Yn(o)?e?Xw(o):uf(o):o}}const $9=v5(),j9=v5(!0);function v5(e=!1){return function(r,n,i,a){let l=r[n];if(Mp(l)&&fi(l)&&!fi(i))return!1;if(!e&&!Mp(i)&&(nb(i)||(i=Jr(i),l=Jr(l)),!ir(r)&&fi(l)&&!fi(i)))return l.value=i,!0;const o=ir(r)&&jw(n)?Number(n)<r.length:zr(r,n),h=Reflect.set(r,n,i,a);return r===Jr(a)&&(o?Pp(i,l)&&Fs(r,"set",n,i):Fs(r,"add",n,i)),h}}function H9(e,t){const r=zr(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&Fs(e,"delete",t,void 0),n}function G9(e,t){const r=Reflect.has(e,t);return(!$w(t)||!m5.has(t))&&Ia(e,"has",t),r}function q9(e){return Ia(e,"iterate",ir(e)?"length":lc),Reflect.ownKeys(e)}const g5={get:F9,set:$9,deleteProperty:H9,has:G9,ownKeys:q9},W9={get:V9,set(e,t){return!0},deleteProperty(e,t){return!0}},Z9=xi({},g5,{get:N9,set:j9}),Ww=e=>e,ry=e=>Reflect.getPrototypeOf(e);function Dv(e,t,r=!1,n=!1){e=e.__v_raw;const i=Jr(e),a=Jr(t);r||(t!==a&&Ia(i,"get",t),Ia(i,"get",a));const{has:l}=ry(i),o=n?Ww:r?Kw:Dp;if(l.call(i,t))return o(e.get(t));if(l.call(i,a))return o(e.get(a));e!==i&&e.get(t)}function kv(e,t=!1){const r=this.__v_raw,n=Jr(r),i=Jr(e);return t||(e!==i&&Ia(n,"has",e),Ia(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function Lv(e,t=!1){return e=e.__v_raw,!t&&Ia(Jr(e),"iterate",lc),Reflect.get(e,"size",e)}function CE(e){e=Jr(e);const t=Jr(this);return ry(t).has.call(t,e)||(t.add(e),Fs(t,"add",e,e)),this}function AE(e,t){t=Jr(t);const r=Jr(this),{has:n,get:i}=ry(r);let a=n.call(r,e);a||(e=Jr(e),a=n.call(r,e));const l=i.call(r,e);return r.set(e,t),a?Pp(t,l)&&Fs(r,"set",e,t):Fs(r,"add",e,t),this}function IE(e){const t=Jr(this),{has:r,get:n}=ry(t);let i=r.call(t,e);i||(e=Jr(e),i=r.call(t,e)),n&&n.call(t,e);const a=t.delete(e);return i&&Fs(t,"delete",e,void 0),a}function PE(){const e=Jr(this),t=e.size!==0,r=e.clear();return t&&Fs(e,"clear",void 0,void 0),r}function Ov(e,t){return function(n,i){const a=this,l=a.__v_raw,o=Jr(l),h=t?Ww:e?Kw:Dp;return!e&&Ia(o,"iterate",lc),l.forEach((d,m)=>n.call(i,h(d),h(m),a))}}function Rv(e,t,r){return function(...n){const i=this.__v_raw,a=Jr(i),l=Rh(a),o=e==="entries"||e===Symbol.iterator&&l,h=e==="keys"&&l,d=i[e](...n),m=r?Ww:t?Kw:Dp;return!t&&Ia(a,"iterate",h?tb:lc),{next(){const{value:g,done:_}=d.next();return _?{value:g,done:_}:{value:o?[m(g[0]),m(g[1])]:m(g),done:_}},[Symbol.iterator](){return this}}}}function pl(e){return function(...t){return e==="delete"?!1:this}}function X9(){const e={get(a){return Dv(this,a)},get size(){return Lv(this)},has:kv,add:CE,set:AE,delete:IE,clear:PE,forEach:Ov(!1,!1)},t={get(a){return Dv(this,a,!1,!0)},get size(){return Lv(this)},has:kv,add:CE,set:AE,delete:IE,clear:PE,forEach:Ov(!1,!0)},r={get(a){return Dv(this,a,!0)},get size(){return Lv(this,!0)},has(a){return kv.call(this,a,!0)},add:pl("add"),set:pl("set"),delete:pl("delete"),clear:pl("clear"),forEach:Ov(!0,!1)},n={get(a){return Dv(this,a,!0,!0)},get size(){return Lv(this,!0)},has(a){return kv.call(this,a,!0)},add:pl("add"),set:pl("set"),delete:pl("delete"),clear:pl("clear"),forEach:Ov(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=Rv(a,!1,!1),r[a]=Rv(a,!0,!1),t[a]=Rv(a,!1,!0),n[a]=Rv(a,!0,!0)}),[e,r,t,n]}const[Y9,K9,J9,Q9]=X9();function Zw(e,t){const r=t?e?Q9:J9:e?K9:Y9;return(n,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(zr(r,i)&&i in n?r:n,i,a)}const eB={get:Zw(!1,!1)},tB={get:Zw(!1,!0)},rB={get:Zw(!0,!1)},_5=new WeakMap,y5=new WeakMap,x5=new WeakMap,nB=new WeakMap;function iB(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function aB(e){return e.__v_skip||!Object.isExtensible(e)?0:iB(A9(e))}function uf(e){return Mp(e)?e:Yw(e,!1,g5,eB,_5)}function oB(e){return Yw(e,!1,Z9,tB,y5)}function Xw(e){return Yw(e,!0,W9,rB,x5)}function Yw(e,t,r,n,i){if(!Yn(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const l=aB(e);if(l===0)return e;const o=new Proxy(e,l===2?n:r);return i.set(e,o),o}function zh(e){return Mp(e)?zh(e.__v_raw):!!(e&&e.__v_isReactive)}function Mp(e){return!!(e&&e.__v_isReadonly)}function nb(e){return!!(e&&e.__v_isShallow)}function b5(e){return zh(e)||Mp(e)}function Jr(e){const t=e&&e.__v_raw;return t?Jr(t):e}function w5(e){return n_(e,"__v_skip",!0),e}const Dp=e=>Yn(e)?uf(e):e,Kw=e=>Yn(e)?Xw(e):e;function S5(e){Rl&&bo&&(e=Jr(e),p5(e.dep||(e.dep=Hw())))}function T5(e,t){e=Jr(e),e.dep&&rb(e.dep)}function fi(e){return!!(e&&e.__v_isRef===!0)}function Pn(e){return E5(e,!1)}function op(e){return E5(e,!0)}function E5(e,t){return fi(e)?e:new sB(e,t)}class sB{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Jr(t),this._value=r?t:Dp(t)}get value(){return S5(this),this._value}set value(t){t=this.__v_isShallow?t:Jr(t),Pp(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Dp(t),T5(this))}}function ht(e){return fi(e)?e.value:e}const lB={get:(e,t,r)=>ht(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return fi(i)&&!fi(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function C5(e){return zh(e)?e:new Proxy(e,lB)}function sm(e){const t=ir(e)?new Array(e.length):{};for(const r in e)t[r]=cB(e,r);return t}class uB{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function cB(e,t,r){const n=e[t];return fi(n)?n:new uB(e,t,r)}class hB{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Gw(t,()=>{this._dirty||(this._dirty=!0,T5(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=Jr(this);return S5(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function fB(e,t,r=!1){let n,i;const a=_r(e);return a?(n=e,i=To):(n=e.get,i=e.set),new hB(n,i,a||!i,r)}function zl(e,t,r,n){let i;try{i=n?e(...n):e()}catch(a){lm(a,t,r)}return i}function eo(e,t,r,n){if(_r(e)){const a=zl(e,t,r,n);return a&&s5(a)&&a.catch(l=>{lm(l,t,r)}),a}const i=[];for(let a=0;a<e.length;a++)i.push(eo(e[a],t,r,n));return i}function lm(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let a=t.parent;const l=t.proxy,o=r;for(;a;){const d=a.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,l,o)===!1)return}a=a.parent}const h=t.appContext.config.errorHandler;if(h){zl(h,null,10,[e,l,o]);return}}dB(e,r,i,n)}function dB(e,t,r,n=!0){console.error(e)}let i_=!1,ib=!1;const Ea=[];let Is=0;const sp=[];let Zd=null,xh=0;const lp=[];let Sl=null,bh=0;const A5=Promise.resolve();let Jw=null,ab=null;function cf(e){const t=Jw||A5;return e?t.then(this?e.bind(this):e):t}function pB(e){let t=Is+1,r=Ea.length;for(;t<r;){const n=t+r>>>1;kp(Ea[n])<e?t=n+1:r=n}return t}function Qw(e){(!Ea.length||!Ea.includes(e,i_&&e.allowRecurse?Is+1:Is))&&e!==ab&&(e.id==null?Ea.push(e):Ea.splice(pB(e.id),0,e),I5())}function I5(){!i_&&!ib&&(ib=!0,Jw=A5.then(M5))}function mB(e){const t=Ea.indexOf(e);t>Is&&Ea.splice(t,1)}function P5(e,t,r,n){ir(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),I5()}function vB(e){P5(e,Zd,sp,xh)}function gB(e){P5(e,Sl,lp,bh)}function ny(e,t=null){if(sp.length){for(ab=t,Zd=[...new Set(sp)],sp.length=0,xh=0;xh<Zd.length;xh++)Zd[xh]();Zd=null,xh=0,ab=null,ny(e,t)}}function a_(e){if(ny(),lp.length){const t=[...new Set(lp)];if(lp.length=0,Sl){Sl.push(...t);return}for(Sl=t,Sl.sort((r,n)=>kp(r)-kp(n)),bh=0;bh<Sl.length;bh++)Sl[bh]();Sl=null,bh=0}}const kp=e=>e.id==null?1/0:e.id;function M5(e){ib=!1,i_=!0,ny(e),Ea.sort((r,n)=>kp(r)-kp(n));const t=To;try{for(Is=0;Is<Ea.length;Is++){const r=Ea[Is];r&&r.active!==!1&&zl(r,null,14)}}finally{Is=0,Ea.length=0,a_(),i_=!1,Jw=null,(Ea.length||sp.length||lp.length)&&M5(e)}}function _B(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||mn;let i=r;const a=t.startsWith("update:"),l=a&&t.slice(7);if(l&&l in n){const m=`${l==="modelValue"?"model":l}Modifiers`,{number:g,trim:_}=n[m]||mn;_&&(i=r.map(x=>x.trim())),g&&(i=r.map(c5))}let o,h=n[o=Y0(t)]||n[o=Y0(ts(t))];!h&&a&&(h=n[o=Y0(yc(t))]),h&&eo(h,e,6,i);const d=n[o+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,eo(d,e,6,i)}}function D5(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const a=e.emits;let l={},o=!1;if(!_r(e)){const h=d=>{const m=D5(d,t,!0);m&&(o=!0,xi(l,m))};!r&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}return!a&&!o?(n.set(e,null),null):(ir(a)?a.forEach(h=>l[h]=null):xi(l,a),n.set(e,l),l)}function iy(e,t){return!e||!om(t)?!1:(t=t.slice(2).replace(/Once$/,""),zr(e,t[0].toLowerCase()+t.slice(1))||zr(e,yc(t))||zr(e,t))}let Li=null,ay=null;function o_(e){const t=Li;return Li=e,ay=e&&e.type.__scopeId||null,t}function k5(e){ay=e}function L5(){ay=null}function Xn(e,t=Li,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&UE(-1);const a=o_(t),l=e(...i);return o_(a),n._d&&UE(1),l};return n._n=!0,n._c=!0,n._d=!0,n}function J0(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:a,propsOptions:[l],slots:o,attrs:h,emit:d,render:m,renderCache:g,data:_,setupState:x,ctx:E,inheritAttrs:M}=e;let P,I;const D=o_(e);try{if(r.shapeFlag&4){const F=i||n;P=xo(m.call(F,F,g,a,x,_,E)),I=h}else{const F=t;P=xo(F.length>1?F(a,{attrs:h,slots:o,emit:d}):F(a,null)),I=t.props?h:yB(h)}}catch(F){cp.length=0,lm(F,e,1),P=lr(Ca)}let O=P;if(I&&M!==!1){const F=Object.keys(I),{shapeFlag:$}=O;F.length&&$&7&&(l&&F.some(Vw)&&(I=xB(I,l)),O=Ul(O,I))}return r.dirs&&(O=Ul(O),O.dirs=O.dirs?O.dirs.concat(r.dirs):r.dirs),r.transition&&(O.transition=r.transition),P=O,o_(D),P}const yB=e=>{let t;for(const r in e)(r==="class"||r==="style"||om(r))&&((t||(t={}))[r]=e[r]);return t},xB=(e,t)=>{const r={};for(const n in e)(!Vw(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function bB(e,t,r){const{props:n,children:i,component:a}=e,{props:l,children:o,patchFlag:h}=t,d=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&h>=0){if(h&1024)return!0;if(h&16)return n?ME(n,l,d):!!l;if(h&8){const m=t.dynamicProps;for(let g=0;g<m.length;g++){const _=m[g];if(l[_]!==n[_]&&!iy(d,_))return!0}}}else return(i||o)&&(!o||!o.$stable)?!0:n===l?!1:n?l?ME(n,l,d):!0:!!l;return!1}function ME(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==e[a]&&!iy(r,a))return!0}return!1}function wB({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const SB=e=>e.__isSuspense;function O5(e,t){t&&t.pendingBranch?ir(e)?t.effects.push(...e):t.effects.push(e):gB(e)}function Bl(e,t){if(ei){let r=ei.provides;const n=ei.parent&&ei.parent.provides;n===r&&(r=ei.provides=Object.create(n)),r[e]=t}}function zn(e,t,r=!1){const n=ei||Li;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&_r(t)?t.call(n.proxy):t}}function DE(e,t){return e2(e,null,t)}const kE={};function Oi(e,t,r){return e2(e,t,r)}function e2(e,t,{immediate:r,deep:n,flush:i,onTrack:a,onTrigger:l}=mn){const o=ei;let h,d=!1,m=!1;if(fi(e)?(h=()=>e.value,d=nb(e)):zh(e)?(h=()=>e,n=!0):ir(e)?(m=!0,d=e.some(I=>zh(I)||nb(I)),h=()=>e.map(I=>{if(fi(I))return I.value;if(zh(I))return ac(I);if(_r(I))return zl(I,o,2)})):_r(e)?t?h=()=>zl(e,o,2):h=()=>{if(!(o&&o.isUnmounted))return g&&g(),eo(e,o,3,[_])}:h=To,t&&n){const I=h;h=()=>ac(I())}let g,_=I=>{g=P.onStop=()=>{zl(I,o,4)}};if(Gh)return _=To,t?r&&eo(t,o,3,[h(),m?[]:void 0,_]):h(),To;let x=m?[]:kE;const E=()=>{if(!!P.active)if(t){const I=P.run();(n||d||(m?I.some((D,O)=>Pp(D,x[O])):Pp(I,x)))&&(g&&g(),eo(t,o,3,[I,x===kE?void 0:x,_]),x=I)}else P.run()};E.allowRecurse=!!t;let M;i==="sync"?M=E:i==="post"?M=()=>la(E,o&&o.suspense):M=()=>vB(E);const P=new Gw(h,M);return t?r?E():x=P.run():i==="post"?la(P.run.bind(P),o&&o.suspense):P.run(),()=>{P.stop(),o&&o.scope&&Uw(o.scope.effects,P)}}function TB(e,t,r){const n=this.proxy,i=rn(e)?e.includes(".")?R5(n,e):()=>n[e]:e.bind(n,n);let a;_r(t)?a=t:(a=t.handler,r=t);const l=ei;Hh(this);const o=e2(i,a.bind(n),r);return l?Hh(l):uc(),o}function R5(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function ac(e,t){if(!Yn(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),fi(e))ac(e.value,t);else if(ir(e))for(let r=0;r<e.length;r++)ac(e[r],t);else if(o5(e)||Rh(e))e.forEach(r=>{ac(r,t)});else if(u5(e))for(const r in e)ac(e[r],t);return e}function EB(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ta(()=>{e.isMounted=!0}),sy(()=>{e.isUnmounting=!0}),e}const Ba=[Function,Array],CB={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ba,onEnter:Ba,onAfterEnter:Ba,onEnterCancelled:Ba,onBeforeLeave:Ba,onLeave:Ba,onAfterLeave:Ba,onLeaveCancelled:Ba,onBeforeAppear:Ba,onAppear:Ba,onAfterAppear:Ba,onAppearCancelled:Ba},setup(e,{slots:t}){const r=uy(),n=EB();let i;return()=>{const a=t.default&&F5(t.default(),!0);if(!a||!a.length)return;let l=a[0];if(a.length>1){for(const M of a)if(M.type!==Ca){l=M;break}}const o=Jr(e),{mode:h}=o;if(n.isLeaving)return Q0(l);const d=LE(l);if(!d)return Q0(l);const m=ob(d,o,n,r);sb(d,m);const g=r.subTree,_=g&&LE(g);let x=!1;const{getTransitionKey:E}=d.type;if(E){const M=E();i===void 0?i=M:M!==i&&(i=M,x=!0)}if(_&&_.type!==Ca&&(!tc(d,_)||x)){const M=ob(_,o,n,r);if(sb(_,M),h==="out-in")return n.isLeaving=!0,M.afterLeave=()=>{n.isLeaving=!1,r.update()},Q0(l);h==="in-out"&&d.type!==Ca&&(M.delayLeave=(P,I,D)=>{const O=B5(n,_);O[String(_.key)]=_,P._leaveCb=()=>{I(),P._leaveCb=void 0,delete m.delayedLeave},m.delayedLeave=D})}return l}}},z5=CB;function B5(e,t){const{leavingVNodes:r}=e;let n=r.get(t.type);return n||(n=Object.create(null),r.set(t.type,n)),n}function ob(e,t,r,n){const{appear:i,mode:a,persisted:l=!1,onBeforeEnter:o,onEnter:h,onAfterEnter:d,onEnterCancelled:m,onBeforeLeave:g,onLeave:_,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:M,onAppear:P,onAfterAppear:I,onAppearCancelled:D}=t,O=String(e.key),F=B5(r,e),$=(Z,re)=>{Z&&eo(Z,n,9,re)},q=(Z,re)=>{const ie=re[1];$(Z,re),ir(Z)?Z.every(ce=>ce.length<=1)&&ie():Z.length<=1&&ie()},K={mode:a,persisted:l,beforeEnter(Z){let re=o;if(!r.isMounted)if(i)re=M||o;else return;Z._leaveCb&&Z._leaveCb(!0);const ie=F[O];ie&&tc(e,ie)&&ie.el._leaveCb&&ie.el._leaveCb(),$(re,[Z])},enter(Z){let re=h,ie=d,ce=m;if(!r.isMounted)if(i)re=P||h,ie=I||d,ce=D||m;else return;let le=!1;const fe=Z._enterCb=ye=>{le||(le=!0,ye?$(ce,[Z]):$(ie,[Z]),K.delayedLeave&&K.delayedLeave(),Z._enterCb=void 0)};re?q(re,[Z,fe]):fe()},leave(Z,re){const ie=String(e.key);if(Z._enterCb&&Z._enterCb(!0),r.isUnmounting)return re();$(g,[Z]);let ce=!1;const le=Z._leaveCb=fe=>{ce||(ce=!0,re(),fe?$(E,[Z]):$(x,[Z]),Z._leaveCb=void 0,F[ie]===e&&delete F[ie])};F[ie]=e,_?q(_,[Z,le]):le()},clone(Z){return ob(Z,t,r,n)}};return K}function Q0(e){if(um(e))return e=Ul(e),e.children=null,e}function LE(e){return um(e)?e.children?e.children[0]:void 0:e}function sb(e,t){e.shapeFlag&6&&e.component?sb(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function F5(e,t=!1,r){let n=[],i=0;for(let a=0;a<e.length;a++){let l=e[a];const o=r==null?l.key:String(r)+String(l.key!=null?l.key:a);l.type===Hr?(l.patchFlag&128&&i++,n=n.concat(F5(l.children,t,o))):(t||l.type!==Ca)&&n.push(o!=null?Ul(l,{key:o}):l)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function Pr(e){return _r(e)?{setup:e,name:e.name}:e}const Bh=e=>!!e.type.__asyncLoader;function kt(e){_r(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:n,delay:i=200,timeout:a,suspensible:l=!0,onError:o}=e;let h=null,d,m=0;const g=()=>(m++,h=null,_()),_=()=>{let x;return h||(x=h=t().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),o)return new Promise((M,P)=>{o(E,()=>M(g()),()=>P(E),m+1)});throw E}).then(E=>x!==h&&h?h:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),d=E,E)))};return Pr({name:"AsyncComponentWrapper",__asyncLoader:_,get __asyncResolved(){return d},setup(){const x=ei;if(d)return()=>e1(d,x);const E=D=>{h=null,lm(D,x,13,!n)};if(l&&x.suspense||Gh)return _().then(D=>()=>e1(D,x)).catch(D=>(E(D),()=>n?lr(n,{error:D}):null));const M=Pn(!1),P=Pn(),I=Pn(!!i);return i&&setTimeout(()=>{I.value=!1},i),a!=null&&setTimeout(()=>{if(!M.value&&!P.value){const D=new Error(`Async component timed out after ${a}ms.`);E(D),P.value=D}},a),_().then(()=>{M.value=!0,x.parent&&um(x.parent.vnode)&&Qw(x.parent.update)}).catch(D=>{E(D),P.value=D}),()=>{if(M.value&&d)return e1(d,x);if(P.value&&n)return lr(n,{error:P.value});if(r&&!I.value)return lr(r)}}})}function e1(e,{vnode:{ref:t,props:r,children:n,shapeFlag:i},parent:a}){const l=lr(e,r,n);return l.ref=t,l}const um=e=>e.type.__isKeepAlive;function AB(e,t){N5(e,"a",t)}function IB(e,t){N5(e,"da",t)}function N5(e,t,r=ei){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(oy(t,n,r),r){let i=r.parent;for(;i&&i.parent;)um(i.parent.vnode)&&PB(n,t,r,i),i=i.parent}}function PB(e,t,r,n){const i=oy(t,e,n,!0);cm(()=>{Uw(n[t],i)},r)}function oy(e,t,r=ei,n=!1){if(r){const i=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...l)=>{if(r.isUnmounted)return;sf(),Hh(r);const o=eo(t,r,e,l);return uc(),lf(),o});return n?i.unshift(a):i.push(a),a}}const Vs=e=>(t,r=ei)=>(!Gh||e==="sp")&&oy(e,t,r),V5=Vs("bm"),ta=Vs("m"),MB=Vs("bu"),DB=Vs("u"),sy=Vs("bum"),cm=Vs("um"),kB=Vs("sp"),LB=Vs("rtg"),OB=Vs("rtc");function RB(e,t=ei){oy("ec",e,t)}function s_(e,t){const r=Li;if(r===null)return e;const n=cy(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[l,o,h,d=mn]=t[a];_r(l)&&(l={mounted:l,updated:l}),l.deep&&ac(o),i.push({dir:l,instance:n,value:o,oldValue:void 0,arg:h,modifiers:d})}return e}function qo(e,t,r,n){const i=e.dirs,a=t&&t.dirs;for(let l=0;l<i.length;l++){const o=i[l];a&&(o.oldValue=a[l].value);let h=o.dir[n];h&&(sf(),eo(h,r,8,[e.el,o,e,t]),lf())}}const U5="components";function Xi(e,t){return BB(U5,e,!0,t)||e}const zB=Symbol();function BB(e,t,r=!0,n=!1){const i=Li||ei;if(i){const a=i.type;if(e===U5){const o=d8(a,!1);if(o&&(o===t||o===ts(t)||o===ty(ts(t))))return a}const l=OE(i[e]||a[e],t)||OE(i.appContext[e],t);return!l&&n?a:l}}function OE(e,t){return e&&(e[t]||e[ts(t)]||e[ty(ts(t))])}function Eo(e,t,r,n){let i;const a=r&&r[n];if(ir(e)||rn(e)){i=new Array(e.length);for(let l=0,o=e.length;l<o;l++)i[l]=t(e[l],l,void 0,a&&a[l])}else if(typeof e=="number"){i=new Array(e);for(let l=0;l<e;l++)i[l]=t(l+1,l,void 0,a&&a[l])}else if(Yn(e))if(e[Symbol.iterator])i=Array.from(e,(l,o)=>t(l,o,void 0,a&&a[o]));else{const l=Object.keys(e);i=new Array(l.length);for(let o=0,h=l.length;o<h;o++){const d=l[o];i[o]=t(e[d],d,o,a&&a[o])}}else i=[];return r&&(r[n]=i),i}function sn(e,t,r={},n,i){if(Li.isCE||Li.parent&&Bh(Li.parent)&&Li.parent.isCE)return lr("slot",t==="default"?null:{name:t},n&&n());let a=e[t];a&&a._c&&(a._d=!1),ft();const l=a&&$5(a(r)),o=In(Hr,{key:r.key||`_${t}`},l||(n?n():[]),l&&e._===1?64:-2);return!i&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),a&&a._c&&(a._d=!0),o}function $5(e){return e.some(t=>h_(t)?!(t.type===Ca||t.type===Hr&&!$5(t.children)):!0)?e:null}const lb=e=>e?e3(e)?cy(e)||e.proxy:lb(e.parent):null,l_=xi(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>lb(e.parent),$root:e=>lb(e.root),$emit:e=>e.emit,$options:e=>H5(e),$forceUpdate:e=>e.f||(e.f=()=>Qw(e.update)),$nextTick:e=>e.n||(e.n=cf.bind(e.proxy)),$watch:e=>TB.bind(e)}),FB={get({_:e},t){const{ctx:r,setupState:n,data:i,props:a,accessCache:l,type:o,appContext:h}=e;let d;if(t[0]!=="$"){const x=l[t];if(x!==void 0)switch(x){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return a[t]}else{if(n!==mn&&zr(n,t))return l[t]=1,n[t];if(i!==mn&&zr(i,t))return l[t]=2,i[t];if((d=e.propsOptions[0])&&zr(d,t))return l[t]=3,a[t];if(r!==mn&&zr(r,t))return l[t]=4,r[t];ub&&(l[t]=0)}}const m=l_[t];let g,_;if(m)return t==="$attrs"&&Ia(e,"get",t),m(e);if((g=o.__cssModules)&&(g=g[t]))return g;if(r!==mn&&zr(r,t))return l[t]=4,r[t];if(_=h.config.globalProperties,zr(_,t))return _[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:a}=e;return i!==mn&&zr(i,t)?(i[t]=r,!0):n!==mn&&zr(n,t)?(n[t]=r,!0):zr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:a}},l){let o;return!!r[l]||e!==mn&&zr(e,l)||t!==mn&&zr(t,l)||(o=a[0])&&zr(o,l)||zr(n,l)||zr(l_,l)||zr(i.config.globalProperties,l)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:zr(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let ub=!0;function NB(e){const t=H5(e),r=e.proxy,n=e.ctx;ub=!1,t.beforeCreate&&RE(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:l,watch:o,provide:h,inject:d,created:m,beforeMount:g,mounted:_,beforeUpdate:x,updated:E,activated:M,deactivated:P,beforeDestroy:I,beforeUnmount:D,destroyed:O,unmounted:F,render:$,renderTracked:q,renderTriggered:K,errorCaptured:Z,serverPrefetch:re,expose:ie,inheritAttrs:ce,components:le,directives:fe,filters:ye}=t;if(d&&VB(d,n,null,e.appContext.config.unwrapInjectedRef),l)for(const et in l){const tt=l[et];_r(tt)&&(n[et]=tt.bind(r))}if(i){const et=i.call(r,r);Yn(et)&&(e.data=uf(et))}if(ub=!0,a)for(const et in a){const tt=a[et],wt=_r(tt)?tt.bind(r,r):_r(tt.get)?tt.get.bind(r,r):To,Rt=!_r(tt)&&_r(tt.set)?tt.set.bind(r):To,Qt=Pt({get:wt,set:Rt});Object.defineProperty(n,et,{enumerable:!0,configurable:!0,get:()=>Qt.value,set:Ut=>Qt.value=Ut})}if(o)for(const et in o)j5(o[et],n,r,et);if(h){const et=_r(h)?h.call(r):h;Reflect.ownKeys(et).forEach(tt=>{Bl(tt,et[tt])})}m&&RE(m,e,"c");function be(et,tt){ir(tt)?tt.forEach(wt=>et(wt.bind(r))):tt&&et(tt.bind(r))}if(be(V5,g),be(ta,_),be(MB,x),be(DB,E),be(AB,M),be(IB,P),be(RB,Z),be(OB,q),be(LB,K),be(sy,D),be(cm,F),be(kB,re),ir(ie))if(ie.length){const et=e.exposed||(e.exposed={});ie.forEach(tt=>{Object.defineProperty(et,tt,{get:()=>r[tt],set:wt=>r[tt]=wt})})}else e.exposed||(e.exposed={});$&&e.render===To&&(e.render=$),ce!=null&&(e.inheritAttrs=ce),le&&(e.components=le),fe&&(e.directives=fe)}function VB(e,t,r=To,n=!1){ir(e)&&(e=cb(e));for(const i in e){const a=e[i];let l;Yn(a)?"default"in a?l=zn(a.from||i,a.default,!0):l=zn(a.from||i):l=zn(a),fi(l)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:o=>l.value=o}):t[i]=l}}function RE(e,t,r){eo(ir(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function j5(e,t,r,n){const i=n.includes(".")?R5(r,n):()=>r[n];if(rn(e)){const a=t[e];_r(a)&&Oi(i,a)}else if(_r(e))Oi(i,e.bind(r));else if(Yn(e))if(ir(e))e.forEach(a=>j5(a,t,r,n));else{const a=_r(e.handler)?e.handler.bind(r):t[e.handler];_r(a)&&Oi(i,a,e)}}function H5(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:l}}=e.appContext,o=a.get(t);let h;return o?h=o:!i.length&&!r&&!n?h=t:(h={},i.length&&i.forEach(d=>u_(h,d,l,!0)),u_(h,t,l)),a.set(t,h),h}function u_(e,t,r,n=!1){const{mixins:i,extends:a}=t;a&&u_(e,a,r,!0),i&&i.forEach(l=>u_(e,l,r,!0));for(const l in t)if(!(n&&l==="expose")){const o=UB[l]||r&&r[l];e[l]=o?o(e[l],t[l]):t[l]}return e}const UB={data:zE,props:Yu,emits:Yu,methods:Yu,computed:Yu,beforeCreate:Hi,created:Hi,beforeMount:Hi,mounted:Hi,beforeUpdate:Hi,updated:Hi,beforeDestroy:Hi,beforeUnmount:Hi,destroyed:Hi,unmounted:Hi,activated:Hi,deactivated:Hi,errorCaptured:Hi,serverPrefetch:Hi,components:Yu,directives:Yu,watch:jB,provide:zE,inject:$B};function zE(e,t){return t?e?function(){return xi(_r(e)?e.call(this,this):e,_r(t)?t.call(this,this):t)}:t:e}function $B(e,t){return Yu(cb(e),cb(t))}function cb(e){if(ir(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Hi(e,t){return e?[...new Set([].concat(e,t))]:t}function Yu(e,t){return e?xi(xi(Object.create(null),e),t):t}function jB(e,t){if(!e)return t;if(!t)return e;const r=xi(Object.create(null),e);for(const n in t)r[n]=Hi(e[n],t[n]);return r}function HB(e,t,r,n=!1){const i={},a={};n_(a,ly,1),e.propsDefaults=Object.create(null),G5(e,t,i,a);for(const l in e.propsOptions[0])l in i||(i[l]=void 0);r?e.props=n?i:oB(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function GB(e,t,r,n){const{props:i,attrs:a,vnode:{patchFlag:l}}=e,o=Jr(i),[h]=e.propsOptions;let d=!1;if((n||l>0)&&!(l&16)){if(l&8){const m=e.vnode.dynamicProps;for(let g=0;g<m.length;g++){let _=m[g];if(iy(e.emitsOptions,_))continue;const x=t[_];if(h)if(zr(a,_))x!==a[_]&&(a[_]=x,d=!0);else{const E=ts(_);i[E]=hb(h,o,E,x,e,!1)}else x!==a[_]&&(a[_]=x,d=!0)}}}else{G5(e,t,i,a)&&(d=!0);let m;for(const g in o)(!t||!zr(t,g)&&((m=yc(g))===g||!zr(t,m)))&&(h?r&&(r[g]!==void 0||r[m]!==void 0)&&(i[g]=hb(h,o,g,void 0,e,!0)):delete i[g]);if(a!==o)for(const g in a)(!t||!zr(t,g)&&!0)&&(delete a[g],d=!0)}d&&Fs(e,"set","$attrs")}function G5(e,t,r,n){const[i,a]=e.propsOptions;let l=!1,o;if(t)for(let h in t){if(ap(h))continue;const d=t[h];let m;i&&zr(i,m=ts(h))?!a||!a.includes(m)?r[m]=d:(o||(o={}))[m]=d:iy(e.emitsOptions,h)||(!(h in n)||d!==n[h])&&(n[h]=d,l=!0)}if(a){const h=Jr(r),d=o||mn;for(let m=0;m<a.length;m++){const g=a[m];r[g]=hb(i,h,g,d[g],e,!zr(d,g))}}return l}function hb(e,t,r,n,i,a){const l=e[r];if(l!=null){const o=zr(l,"default");if(o&&n===void 0){const h=l.default;if(l.type!==Function&&_r(h)){const{propsDefaults:d}=i;r in d?n=d[r]:(Hh(i),n=d[r]=h.call(null,t),uc())}else n=h}l[0]&&(a&&!o?n=!1:l[1]&&(n===""||n===yc(r))&&(n=!0))}return n}function q5(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const a=e.props,l={},o=[];let h=!1;if(!_r(e)){const m=g=>{h=!0;const[_,x]=q5(g,t,!0);xi(l,_),x&&o.push(...x)};!r&&t.mixins.length&&t.mixins.forEach(m),e.extends&&m(e.extends),e.mixins&&e.mixins.forEach(m)}if(!a&&!h)return n.set(e,Oh),Oh;if(ir(a))for(let m=0;m<a.length;m++){const g=ts(a[m]);BE(g)&&(l[g]=mn)}else if(a)for(const m in a){const g=ts(m);if(BE(g)){const _=a[m],x=l[g]=ir(_)||_r(_)?{type:_}:_;if(x){const E=VE(Boolean,x.type),M=VE(String,x.type);x[0]=E>-1,x[1]=M<0||E<M,(E>-1||zr(x,"default"))&&o.push(g)}}}const d=[l,o];return n.set(e,d),d}function BE(e){return e[0]!=="$"}function FE(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function NE(e,t){return FE(e)===FE(t)}function VE(e,t){return ir(t)?t.findIndex(r=>NE(r,e)):_r(t)&&NE(t,e)?0:-1}const W5=e=>e[0]==="_"||e==="$stable",t2=e=>ir(e)?e.map(xo):[xo(e)],qB=(e,t,r)=>{if(t._n)return t;const n=Xn((...i)=>t2(t(...i)),r);return n._c=!1,n},Z5=(e,t,r)=>{const n=e._ctx;for(const i in e){if(W5(i))continue;const a=e[i];if(_r(a))t[i]=qB(i,a,n);else if(a!=null){const l=t2(a);t[i]=()=>l}}},X5=(e,t)=>{const r=t2(t);e.slots.default=()=>r},WB=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Jr(t),n_(t,"_",r)):Z5(t,e.slots={})}else e.slots={},t&&X5(e,t);n_(e.slots,ly,1)},ZB=(e,t,r)=>{const{vnode:n,slots:i}=e;let a=!0,l=mn;if(n.shapeFlag&32){const o=t._;o?r&&o===1?a=!1:(xi(i,t),!r&&o===1&&delete i._):(a=!t.$stable,Z5(t,i)),l=t}else t&&(X5(e,t),l={default:1});if(a)for(const o in i)!W5(o)&&!(o in l)&&delete i[o]};function Y5(){return{app:null,config:{isNativeTag:T9,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let XB=0;function YB(e,t){return function(n,i=null){_r(n)||(n=Object.assign({},n)),i!=null&&!Yn(i)&&(i=null);const a=Y5(),l=new Set;let o=!1;const h=a.app={_uid:XB++,_component:n,_props:i,_container:null,_context:a,_instance:null,version:m8,get config(){return a.config},set config(d){},use(d,...m){return l.has(d)||(d&&_r(d.install)?(l.add(d),d.install(h,...m)):_r(d)&&(l.add(d),d(h,...m))),h},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),h},component(d,m){return m?(a.components[d]=m,h):a.components[d]},directive(d,m){return m?(a.directives[d]=m,h):a.directives[d]},mount(d,m,g){if(!o){const _=lr(n,i);return _.appContext=a,m&&t?t(_,d):e(_,d,g),o=!0,h._container=d,d.__vue_app__=h,cy(_.component)||_.component.proxy}},unmount(){o&&(e(null,h._container),delete h._container.__vue_app__)},provide(d,m){return a.provides[d]=m,h}};return h}}function c_(e,t,r,n,i=!1){if(ir(e)){e.forEach((_,x)=>c_(_,t&&(ir(t)?t[x]:t),r,n,i));return}if(Bh(n)&&!i)return;const a=n.shapeFlag&4?cy(n.component)||n.component.proxy:n.el,l=i?null:a,{i:o,r:h}=e,d=t&&t.r,m=o.refs===mn?o.refs={}:o.refs,g=o.setupState;if(d!=null&&d!==h&&(rn(d)?(m[d]=null,zr(g,d)&&(g[d]=null)):fi(d)&&(d.value=null)),_r(h))zl(h,o,12,[l,m]);else{const _=rn(h),x=fi(h);if(_||x){const E=()=>{if(e.f){const M=_?m[h]:h.value;i?ir(M)&&Uw(M,a):ir(M)?M.includes(a)||M.push(a):_?(m[h]=[a],zr(g,h)&&(g[h]=m[h])):(h.value=[a],e.k&&(m[e.k]=h.value))}else _?(m[h]=l,zr(g,h)&&(g[h]=l)):x&&(h.value=l,e.k&&(m[e.k]=l))};l?(E.id=-1,la(E,r)):E()}}}let ml=!1;const zv=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",Bv=e=>e.nodeType===8;function KB(e){const{mt:t,p:r,o:{patchProp:n,createText:i,nextSibling:a,parentNode:l,remove:o,insert:h,createComment:d}}=e,m=(I,D)=>{if(!D.hasChildNodes()){r(null,I,D),a_(),D._vnode=I;return}ml=!1,g(D.firstChild,I,null,null,null),a_(),D._vnode=I,ml&&console.error("Hydration completed but contains mismatches.")},g=(I,D,O,F,$,q=!1)=>{const K=Bv(I)&&I.data==="[",Z=()=>M(I,D,O,F,$,K),{type:re,ref:ie,shapeFlag:ce,patchFlag:le}=D,fe=I.nodeType;D.el=I,le===-2&&(q=!1,D.dynamicChildren=null);let ye=null;switch(re){case Lp:fe!==3?D.children===""?(h(D.el=i(""),l(I),I),ye=I):ye=Z():(I.data!==D.children&&(ml=!0,I.data=D.children),ye=a(I));break;case Ca:fe!==8||K?ye=Z():ye=a(I);break;case up:if(fe!==1&&fe!==3)ye=Z();else{ye=I;const Ne=!D.children.length;for(let be=0;be<D.staticCount;be++)Ne&&(D.children+=ye.nodeType===1?ye.outerHTML:ye.data),be===D.staticCount-1&&(D.anchor=ye),ye=a(ye);return ye}break;case Hr:K?ye=E(I,D,O,F,$,q):ye=Z();break;default:if(ce&1)fe!==1||D.type.toLowerCase()!==I.tagName.toLowerCase()?ye=Z():ye=_(I,D,O,F,$,q);else if(ce&6){D.slotScopeIds=$;const Ne=l(I);if(t(D,Ne,null,O,F,zv(Ne),q),ye=K?P(I):a(I),ye&&Bv(ye)&&ye.data==="teleport end"&&(ye=a(ye)),Bh(D)){let be;K?(be=lr(Hr),be.anchor=ye?ye.previousSibling:Ne.lastChild):be=I.nodeType===3?$l(""):lr("div"),be.el=I,D.component.subTree=be}}else ce&64?fe!==8?ye=Z():ye=D.type.hydrate(I,D,O,F,$,q,e,x):ce&128&&(ye=D.type.hydrate(I,D,O,F,zv(l(I)),$,q,e,g))}return ie!=null&&c_(ie,null,F,D),ye},_=(I,D,O,F,$,q)=>{q=q||!!D.dynamicChildren;const{type:K,props:Z,patchFlag:re,shapeFlag:ie,dirs:ce}=D,le=K==="input"&&ce||K==="option";if(le||re!==-1){if(ce&&qo(D,null,O,"created"),Z)if(le||!q||re&48)for(const ye in Z)(le&&ye.endsWith("value")||om(ye)&&!ap(ye))&&n(I,ye,null,Z[ye],!1,void 0,O);else Z.onClick&&n(I,"onClick",null,Z.onClick,!1,void 0,O);let fe;if((fe=Z&&Z.onVnodeBeforeMount)&&ja(fe,O,D),ce&&qo(D,null,O,"beforeMount"),((fe=Z&&Z.onVnodeMounted)||ce)&&O5(()=>{fe&&ja(fe,O,D),ce&&qo(D,null,O,"mounted")},F),ie&16&&!(Z&&(Z.innerHTML||Z.textContent))){let ye=x(I.firstChild,D,I,O,F,$,q);for(;ye;){ml=!0;const Ne=ye;ye=ye.nextSibling,o(Ne)}}else ie&8&&I.textContent!==D.children&&(ml=!0,I.textContent=D.children)}return I.nextSibling},x=(I,D,O,F,$,q,K)=>{K=K||!!D.dynamicChildren;const Z=D.children,re=Z.length;for(let ie=0;ie<re;ie++){const ce=K?Z[ie]:Z[ie]=xo(Z[ie]);if(I)I=g(I,ce,F,$,q,K);else{if(ce.type===Lp&&!ce.children)continue;ml=!0,r(null,ce,O,null,F,$,zv(O),q)}}return I},E=(I,D,O,F,$,q)=>{const{slotScopeIds:K}=D;K&&($=$?$.concat(K):K);const Z=l(I),re=x(a(I),D,Z,O,F,$,q);return re&&Bv(re)&&re.data==="]"?a(D.anchor=re):(ml=!0,h(D.anchor=d("]"),Z,re),re)},M=(I,D,O,F,$,q)=>{if(ml=!0,D.el=null,q){const re=P(I);for(;;){const ie=a(I);if(ie&&ie!==re)o(ie);else break}}const K=a(I),Z=l(I);return o(I),r(null,D,Z,K,O,F,zv(Z),$),K},P=I=>{let D=0;for(;I;)if(I=a(I),I&&Bv(I)&&(I.data==="["&&D++,I.data==="]")){if(D===0)return a(I);D--}return I};return[m,g]}const la=O5;function JB(e){return QB(e,KB)}function QB(e,t){const r=M9();r.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:l,createText:o,createComment:h,setText:d,setElementText:m,parentNode:g,nextSibling:_,setScopeId:x=To,cloneNode:E,insertStaticContent:M}=e,P=(oe,ve,De,Ge=null,Xe=null,Ye=null,qe=!1,Qe=null,ut=!!ve.dynamicChildren)=>{if(oe===ve)return;oe&&!tc(oe,ve)&&(Ge=dt(oe),vr(oe,Xe,Ye,!0),oe=null),ve.patchFlag===-2&&(ut=!1,ve.dynamicChildren=null);const{type:nt,ref:$t,shapeFlag:Mt}=ve;switch(nt){case Lp:I(oe,ve,De,Ge);break;case Ca:D(oe,ve,De,Ge);break;case up:oe==null&&O(ve,De,Ge,qe);break;case Hr:fe(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut);break;default:Mt&1?q(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut):Mt&6?ye(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut):(Mt&64||Mt&128)&&nt.process(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut,qt)}$t!=null&&Xe&&c_($t,oe&&oe.ref,Ye,ve||oe,!ve)},I=(oe,ve,De,Ge)=>{if(oe==null)n(ve.el=o(ve.children),De,Ge);else{const Xe=ve.el=oe.el;ve.children!==oe.children&&d(Xe,ve.children)}},D=(oe,ve,De,Ge)=>{oe==null?n(ve.el=h(ve.children||""),De,Ge):ve.el=oe.el},O=(oe,ve,De,Ge)=>{[oe.el,oe.anchor]=M(oe.children,ve,De,Ge,oe.el,oe.anchor)},F=({el:oe,anchor:ve},De,Ge)=>{let Xe;for(;oe&&oe!==ve;)Xe=_(oe),n(oe,De,Ge),oe=Xe;n(ve,De,Ge)},$=({el:oe,anchor:ve})=>{let De;for(;oe&&oe!==ve;)De=_(oe),i(oe),oe=De;i(ve)},q=(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut)=>{qe=qe||ve.type==="svg",oe==null?K(ve,De,Ge,Xe,Ye,qe,Qe,ut):ie(oe,ve,Xe,Ye,qe,Qe,ut)},K=(oe,ve,De,Ge,Xe,Ye,qe,Qe)=>{let ut,nt;const{type:$t,props:Mt,shapeFlag:It,transition:Wt,patchFlag:er,dirs:Oe}=oe;if(oe.el&&E!==void 0&&er===-1)ut=oe.el=E(oe.el);else{if(ut=oe.el=l(oe.type,Ye,Mt&&Mt.is,Mt),It&8?m(ut,oe.children):It&16&&re(oe.children,ut,null,Ge,Xe,Ye&&$t!=="foreignObject",qe,Qe),Oe&&qo(oe,null,Ge,"created"),Mt){for(const Mr in Mt)Mr!=="value"&&!ap(Mr)&&a(ut,Mr,null,Mt[Mr],Ye,oe.children,Ge,Xe,it);"value"in Mt&&a(ut,"value",null,Mt.value),(nt=Mt.onVnodeBeforeMount)&&ja(nt,Ge,oe)}Z(ut,oe,oe.scopeId,qe,Ge)}Oe&&qo(oe,null,Ge,"beforeMount");const Je=(!Xe||Xe&&!Xe.pendingBranch)&&Wt&&!Wt.persisted;Je&&Wt.beforeEnter(ut),n(ut,ve,De),((nt=Mt&&Mt.onVnodeMounted)||Je||Oe)&&la(()=>{nt&&ja(nt,Ge,oe),Je&&Wt.enter(ut),Oe&&qo(oe,null,Ge,"mounted")},Xe)},Z=(oe,ve,De,Ge,Xe)=>{if(De&&x(oe,De),Ge)for(let Ye=0;Ye<Ge.length;Ye++)x(oe,Ge[Ye]);if(Xe){let Ye=Xe.subTree;if(ve===Ye){const qe=Xe.vnode;Z(oe,qe,qe.scopeId,qe.slotScopeIds,Xe.parent)}}},re=(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut=0)=>{for(let nt=ut;nt<oe.length;nt++){const $t=oe[nt]=Qe?Cl(oe[nt]):xo(oe[nt]);P(null,$t,ve,De,Ge,Xe,Ye,qe,Qe)}},ie=(oe,ve,De,Ge,Xe,Ye,qe)=>{const Qe=ve.el=oe.el;let{patchFlag:ut,dynamicChildren:nt,dirs:$t}=ve;ut|=oe.patchFlag&16;const Mt=oe.props||mn,It=ve.props||mn;let Wt;De&&wu(De,!1),(Wt=It.onVnodeBeforeUpdate)&&ja(Wt,De,ve,oe),$t&&qo(ve,oe,De,"beforeUpdate"),De&&wu(De,!0);const er=Xe&&ve.type!=="foreignObject";if(nt?ce(oe.dynamicChildren,nt,Qe,De,Ge,er,Ye):qe||wt(oe,ve,Qe,null,De,Ge,er,Ye,!1),ut>0){if(ut&16)le(Qe,ve,Mt,It,De,Ge,Xe);else if(ut&2&&Mt.class!==It.class&&a(Qe,"class",null,It.class,Xe),ut&4&&a(Qe,"style",Mt.style,It.style,Xe),ut&8){const Oe=ve.dynamicProps;for(let Je=0;Je<Oe.length;Je++){const Mr=Oe[Je],xn=Mt[Mr],hr=It[Mr];(hr!==xn||Mr==="value")&&a(Qe,Mr,xn,hr,Xe,oe.children,De,Ge,it)}}ut&1&&oe.children!==ve.children&&m(Qe,ve.children)}else!qe&&nt==null&&le(Qe,ve,Mt,It,De,Ge,Xe);((Wt=It.onVnodeUpdated)||$t)&&la(()=>{Wt&&ja(Wt,De,ve,oe),$t&&qo(ve,oe,De,"updated")},Ge)},ce=(oe,ve,De,Ge,Xe,Ye,qe)=>{for(let Qe=0;Qe<ve.length;Qe++){const ut=oe[Qe],nt=ve[Qe],$t=ut.el&&(ut.type===Hr||!tc(ut,nt)||ut.shapeFlag&70)?g(ut.el):De;P(ut,nt,$t,null,Ge,Xe,Ye,qe,!0)}},le=(oe,ve,De,Ge,Xe,Ye,qe)=>{if(De!==Ge){for(const Qe in Ge){if(ap(Qe))continue;const ut=Ge[Qe],nt=De[Qe];ut!==nt&&Qe!=="value"&&a(oe,Qe,nt,ut,qe,ve.children,Xe,Ye,it)}if(De!==mn)for(const Qe in De)!ap(Qe)&&!(Qe in Ge)&&a(oe,Qe,De[Qe],null,qe,ve.children,Xe,Ye,it);"value"in Ge&&a(oe,"value",De.value,Ge.value)}},fe=(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut)=>{const nt=ve.el=oe?oe.el:o(""),$t=ve.anchor=oe?oe.anchor:o("");let{patchFlag:Mt,dynamicChildren:It,slotScopeIds:Wt}=ve;Wt&&(Qe=Qe?Qe.concat(Wt):Wt),oe==null?(n(nt,De,Ge),n($t,De,Ge),re(ve.children,De,$t,Xe,Ye,qe,Qe,ut)):Mt>0&&Mt&64&&It&&oe.dynamicChildren?(ce(oe.dynamicChildren,It,De,Xe,Ye,qe,Qe),(ve.key!=null||Xe&&ve===Xe.subTree)&&K5(oe,ve,!0)):wt(oe,ve,De,$t,Xe,Ye,qe,Qe,ut)},ye=(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut)=>{ve.slotScopeIds=Qe,oe==null?ve.shapeFlag&512?Xe.ctx.activate(ve,De,Ge,qe,ut):Ne(ve,De,Ge,Xe,Ye,qe,ut):be(oe,ve,ut)},Ne=(oe,ve,De,Ge,Xe,Ye,qe)=>{const Qe=oe.component=l8(oe,Ge,Xe);if(um(oe)&&(Qe.ctx.renderer=qt),u8(Qe),Qe.asyncDep){if(Xe&&Xe.registerDep(Qe,et),!oe.el){const ut=Qe.subTree=lr(Ca);D(null,ut,ve,De)}return}et(Qe,oe,ve,De,Xe,Ye,qe)},be=(oe,ve,De)=>{const Ge=ve.component=oe.component;if(bB(oe,ve,De))if(Ge.asyncDep&&!Ge.asyncResolved){tt(Ge,ve,De);return}else Ge.next=ve,mB(Ge.update),Ge.update();else ve.el=oe.el,Ge.vnode=ve},et=(oe,ve,De,Ge,Xe,Ye,qe)=>{const Qe=()=>{if(oe.isMounted){let{next:$t,bu:Mt,u:It,parent:Wt,vnode:er}=oe,Oe=$t,Je;wu(oe,!1),$t?($t.el=er.el,tt(oe,$t,qe)):$t=er,Mt&&K0(Mt),(Je=$t.props&&$t.props.onVnodeBeforeUpdate)&&ja(Je,Wt,$t,er),wu(oe,!0);const Mr=J0(oe),xn=oe.subTree;oe.subTree=Mr,P(xn,Mr,g(xn.el),dt(xn),oe,Xe,Ye),$t.el=Mr.el,Oe===null&&wB(oe,Mr.el),It&&la(It,Xe),(Je=$t.props&&$t.props.onVnodeUpdated)&&la(()=>ja(Je,Wt,$t,er),Xe)}else{let $t;const{el:Mt,props:It}=ve,{bm:Wt,m:er,parent:Oe}=oe,Je=Bh(ve);if(wu(oe,!1),Wt&&K0(Wt),!Je&&($t=It&&It.onVnodeBeforeMount)&&ja($t,Oe,ve),wu(oe,!0),Mt&&lt){const Mr=()=>{oe.subTree=J0(oe),lt(Mt,oe.subTree,oe,Xe,null)};Je?ve.type.__asyncLoader().then(()=>!oe.isUnmounted&&Mr()):Mr()}else{const Mr=oe.subTree=J0(oe);P(null,Mr,De,Ge,oe,Xe,Ye),ve.el=Mr.el}if(er&&la(er,Xe),!Je&&($t=It&&It.onVnodeMounted)){const Mr=ve;la(()=>ja($t,Oe,Mr),Xe)}(ve.shapeFlag&256||Oe&&Bh(Oe.vnode)&&Oe.vnode.shapeFlag&256)&&oe.a&&la(oe.a,Xe),oe.isMounted=!0,ve=De=Ge=null}},ut=oe.effect=new Gw(Qe,()=>Qw(nt),oe.scope),nt=oe.update=()=>ut.run();nt.id=oe.uid,wu(oe,!0),nt()},tt=(oe,ve,De)=>{ve.component=oe;const Ge=oe.vnode.props;oe.vnode=ve,oe.next=null,GB(oe,ve.props,Ge,De),ZB(oe,ve.children,De),sf(),ny(void 0,oe.update),lf()},wt=(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut=!1)=>{const nt=oe&&oe.children,$t=oe?oe.shapeFlag:0,Mt=ve.children,{patchFlag:It,shapeFlag:Wt}=ve;if(It>0){if(It&128){Qt(nt,Mt,De,Ge,Xe,Ye,qe,Qe,ut);return}else if(It&256){Rt(nt,Mt,De,Ge,Xe,Ye,qe,Qe,ut);return}}Wt&8?($t&16&&it(nt,Xe,Ye),Mt!==nt&&m(De,Mt)):$t&16?Wt&16?Qt(nt,Mt,De,Ge,Xe,Ye,qe,Qe,ut):it(nt,Xe,Ye,!0):($t&8&&m(De,""),Wt&16&&re(Mt,De,Ge,Xe,Ye,qe,Qe,ut))},Rt=(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut)=>{oe=oe||Oh,ve=ve||Oh;const nt=oe.length,$t=ve.length,Mt=Math.min(nt,$t);let It;for(It=0;It<Mt;It++){const Wt=ve[It]=ut?Cl(ve[It]):xo(ve[It]);P(oe[It],Wt,De,null,Xe,Ye,qe,Qe,ut)}nt>$t?it(oe,Xe,Ye,!0,!1,Mt):re(ve,De,Ge,Xe,Ye,qe,Qe,ut,Mt)},Qt=(oe,ve,De,Ge,Xe,Ye,qe,Qe,ut)=>{let nt=0;const $t=ve.length;let Mt=oe.length-1,It=$t-1;for(;nt<=Mt&&nt<=It;){const Wt=oe[nt],er=ve[nt]=ut?Cl(ve[nt]):xo(ve[nt]);if(tc(Wt,er))P(Wt,er,De,null,Xe,Ye,qe,Qe,ut);else break;nt++}for(;nt<=Mt&&nt<=It;){const Wt=oe[Mt],er=ve[It]=ut?Cl(ve[It]):xo(ve[It]);if(tc(Wt,er))P(Wt,er,De,null,Xe,Ye,qe,Qe,ut);else break;Mt--,It--}if(nt>Mt){if(nt<=It){const Wt=It+1,er=Wt<$t?ve[Wt].el:Ge;for(;nt<=It;)P(null,ve[nt]=ut?Cl(ve[nt]):xo(ve[nt]),De,er,Xe,Ye,qe,Qe,ut),nt++}}else if(nt>It)for(;nt<=Mt;)vr(oe[nt],Xe,Ye,!0),nt++;else{const Wt=nt,er=nt,Oe=new Map;for(nt=er;nt<=It;nt++){const wn=ve[nt]=ut?Cl(ve[nt]):xo(ve[nt]);wn.key!=null&&Oe.set(wn.key,nt)}let Je,Mr=0;const xn=It-er+1;let hr=!1,di=0;const Bn=new Array(xn);for(nt=0;nt<xn;nt++)Bn[nt]=0;for(nt=Wt;nt<=Mt;nt++){const wn=oe[nt];if(Mr>=xn){vr(wn,Xe,Ye,!0);continue}let st;if(wn.key!=null)st=Oe.get(wn.key);else for(Je=er;Je<=It;Je++)if(Bn[Je-er]===0&&tc(wn,ve[Je])){st=Je;break}st===void 0?vr(wn,Xe,Ye,!0):(Bn[st-er]=nt+1,st>=di?di=st:hr=!0,P(wn,ve[st],De,null,Xe,Ye,qe,Qe,ut),Mr++)}const ii=hr?e8(Bn):Oh;for(Je=ii.length-1,nt=xn-1;nt>=0;nt--){const wn=er+nt,st=ve[wn],ur=wn+1<$t?ve[wn+1].el:Ge;Bn[nt]===0?P(null,st,De,ur,Xe,Ye,qe,Qe,ut):hr&&(Je<0||nt!==ii[Je]?Ut(st,De,ur,2):Je--)}}},Ut=(oe,ve,De,Ge,Xe=null)=>{const{el:Ye,type:qe,transition:Qe,children:ut,shapeFlag:nt}=oe;if(nt&6){Ut(oe.component.subTree,ve,De,Ge);return}if(nt&128){oe.suspense.move(ve,De,Ge);return}if(nt&64){qe.move(oe,ve,De,qt);return}if(qe===Hr){n(Ye,ve,De);for(let Mt=0;Mt<ut.length;Mt++)Ut(ut[Mt],ve,De,Ge);n(oe.anchor,ve,De);return}if(qe===up){F(oe,ve,De);return}if(Ge!==2&&nt&1&&Qe)if(Ge===0)Qe.beforeEnter(Ye),n(Ye,ve,De),la(()=>Qe.enter(Ye),Xe);else{const{leave:Mt,delayLeave:It,afterLeave:Wt}=Qe,er=()=>n(Ye,ve,De),Oe=()=>{Mt(Ye,()=>{er(),Wt&&Wt()})};It?It(Ye,er,Oe):Oe()}else n(Ye,ve,De)},vr=(oe,ve,De,Ge=!1,Xe=!1)=>{const{type:Ye,props:qe,ref:Qe,children:ut,dynamicChildren:nt,shapeFlag:$t,patchFlag:Mt,dirs:It}=oe;if(Qe!=null&&c_(Qe,null,De,oe,!0),$t&256){ve.ctx.deactivate(oe);return}const Wt=$t&1&&It,er=!Bh(oe);let Oe;if(er&&(Oe=qe&&qe.onVnodeBeforeUnmount)&&ja(Oe,ve,oe),$t&6)pt(oe.component,De,Ge);else{if($t&128){oe.suspense.unmount(De,Ge);return}Wt&&qo(oe,null,ve,"beforeUnmount"),$t&64?oe.type.remove(oe,ve,De,Xe,qt,Ge):nt&&(Ye!==Hr||Mt>0&&Mt&64)?it(nt,ve,De,!1,!0):(Ye===Hr&&Mt&384||!Xe&&$t&16)&&it(ut,ve,De),Ge&&yr(oe)}(er&&(Oe=qe&&qe.onVnodeUnmounted)||Wt)&&la(()=>{Oe&&ja(Oe,ve,oe),Wt&&qo(oe,null,ve,"unmounted")},De)},yr=oe=>{const{type:ve,el:De,anchor:Ge,transition:Xe}=oe;if(ve===Hr){$e(De,Ge);return}if(ve===up){$(oe);return}const Ye=()=>{i(De),Xe&&!Xe.persisted&&Xe.afterLeave&&Xe.afterLeave()};if(oe.shapeFlag&1&&Xe&&!Xe.persisted){const{leave:qe,delayLeave:Qe}=Xe,ut=()=>qe(De,Ye);Qe?Qe(oe.el,Ye,ut):ut()}else Ye()},$e=(oe,ve)=>{let De;for(;oe!==ve;)De=_(oe),i(oe),oe=De;i(ve)},pt=(oe,ve,De)=>{const{bum:Ge,scope:Xe,update:Ye,subTree:qe,um:Qe}=oe;Ge&&K0(Ge),Xe.stop(),Ye&&(Ye.active=!1,vr(qe,oe,ve,De)),Qe&&la(Qe,ve),la(()=>{oe.isUnmounted=!0},ve),ve&&ve.pendingBranch&&!ve.isUnmounted&&oe.asyncDep&&!oe.asyncResolved&&oe.suspenseId===ve.pendingId&&(ve.deps--,ve.deps===0&&ve.resolve())},it=(oe,ve,De,Ge=!1,Xe=!1,Ye=0)=>{for(let qe=Ye;qe<oe.length;qe++)vr(oe[qe],ve,De,Ge,Xe)},dt=oe=>oe.shapeFlag&6?dt(oe.component.subTree):oe.shapeFlag&128?oe.suspense.next():_(oe.anchor||oe.el),Dt=(oe,ve,De)=>{oe==null?ve._vnode&&vr(ve._vnode,null,null,!0):P(ve._vnode||null,oe,ve,null,null,null,De),a_(),ve._vnode=oe},qt={p:P,um:vr,m:Ut,r:yr,mt:Ne,mc:re,pc:wt,pbc:ce,n:dt,o:e};let ot,lt;return t&&([ot,lt]=t(qt)),{render:Dt,hydrate:ot,createApp:YB(Dt,ot)}}function wu({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function K5(e,t,r=!1){const n=e.children,i=t.children;if(ir(n)&&ir(i))for(let a=0;a<n.length;a++){const l=n[a];let o=i[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[a]=Cl(i[a]),o.el=l.el),r||K5(l,o))}}function e8(e){const t=e.slice(),r=[0];let n,i,a,l,o;const h=e.length;for(n=0;n<h;n++){const d=e[n];if(d!==0){if(i=r[r.length-1],e[i]<d){t[n]=i,r.push(n);continue}for(a=0,l=r.length-1;a<l;)o=a+l>>1,e[r[o]]<d?a=o+1:l=o;d<e[r[a]]&&(a>0&&(t[n]=r[a-1]),r[a]=n)}}for(a=r.length,l=r[a-1];a-- >0;)r[a]=l,l=t[l];return r}const t8=e=>e.__isTeleport,Hr=Symbol(void 0),Lp=Symbol(void 0),Ca=Symbol(void 0),up=Symbol(void 0),cp=[];let wo=null;function ft(e=!1){cp.push(wo=e?null:[])}function r8(){cp.pop(),wo=cp[cp.length-1]||null}let Op=1;function UE(e){Op+=e}function J5(e){return e.dynamicChildren=Op>0?wo||Oh:null,r8(),Op>0&&wo&&wo.push(e),e}function Nt(e,t,r,n,i,a){return J5(cr(e,t,r,n,i,a,!0))}function In(e,t,r,n,i){return J5(lr(e,t,r,n,i,!0))}function h_(e){return e?e.__v_isVNode===!0:!1}function tc(e,t){return e.type===t.type&&e.key===t.key}const ly="__vInternal",Q5=({key:e})=>e!=null?e:null,Dg=({ref:e,ref_key:t,ref_for:r})=>e!=null?rn(e)||fi(e)||_r(e)?{i:Li,r:e,k:t,f:!!r}:e:null;function cr(e,t=null,r=null,n=0,i=null,a=e===Hr?0:1,l=!1,o=!1){const h={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Q5(t),ref:t&&Dg(t),scopeId:ay,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return o?(r2(h,r),a&128&&e.normalize(h)):r&&(h.shapeFlag|=rn(r)?8:16),Op>0&&!l&&wo&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&wo.push(h),h}const lr=n8;function n8(e,t=null,r=null,n=0,i=null,a=!1){if((!e||e===zB)&&(e=Ca),h_(e)){const o=Ul(e,t,!0);return r&&r2(o,r),Op>0&&!a&&wo&&(o.shapeFlag&6?wo[wo.indexOf(e)]=o:wo.push(o)),o.patchFlag|=-2,o}if(p8(e)&&(e=e.__vccOpts),t){t=i8(t);let{class:o,style:h}=t;o&&!rn(o)&&(t.class=Ri(o)),Yn(h)&&(b5(h)&&!ir(h)&&(h=xi({},h)),t.style=of(h))}const l=rn(e)?1:SB(e)?128:t8(e)?64:Yn(e)?4:_r(e)?2:0;return cr(e,t,r,n,i,l,a,!0)}function i8(e){return e?b5(e)||ly in e?xi({},e):e:null}function Ul(e,t,r=!1){const{props:n,ref:i,patchFlag:a,children:l}=e,o=t?f_(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&Q5(o),ref:t&&t.ref?r&&i?ir(i)?i.concat(Dg(t)):[i,Dg(t)]:Dg(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Hr?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ul(e.ssContent),ssFallback:e.ssFallback&&Ul(e.ssFallback),el:e.el,anchor:e.anchor}}function $l(e=" ",t=0){return lr(Lp,null,e,t)}function a8(e,t){const r=lr(up,null,e);return r.staticCount=t,r}function Vr(e="",t=!1){return t?(ft(),In(Ca,null,e)):lr(Ca,null,e)}function xo(e){return e==null||typeof e=="boolean"?lr(Ca):ir(e)?lr(Hr,null,e.slice()):typeof e=="object"?Cl(e):lr(Lp,null,String(e))}function Cl(e){return e.el===null||e.memo?e:Ul(e)}function r2(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(ir(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),r2(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(ly in t)?t._ctx=Li:i===3&&Li&&(Li.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else _r(t)?(t={default:t,_ctx:Li},r=32):(t=String(t),n&64?(r=16,t=[$l(t)]):r=8);e.children=t,e.shapeFlag|=r}function f_(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Ri([t.class,n.class]));else if(i==="style")t.style=of([t.style,n.style]);else if(om(i)){const a=t[i],l=n[i];l&&a!==l&&!(ir(a)&&a.includes(l))&&(t[i]=a?[].concat(a,l):l)}else i!==""&&(t[i]=n[i])}return t}function ja(e,t,r,n=null){eo(e,t,7,[r,n])}const o8=Y5();let s8=0;function l8(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||o8,a={uid:s8++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new D9(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:q5(n,i),emitsOptions:D5(n,i),emit:null,emitted:null,propsDefaults:mn,inheritAttrs:n.inheritAttrs,ctx:mn,data:mn,props:mn,attrs:mn,slots:mn,refs:mn,setupState:mn,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=_B.bind(null,a),e.ce&&e.ce(a),a}let ei=null;const uy=()=>ei||Li,Hh=e=>{ei=e,e.scope.on()},uc=()=>{ei&&ei.scope.off(),ei=null};function e3(e){return e.vnode.shapeFlag&4}let Gh=!1;function u8(e,t=!1){Gh=t;const{props:r,children:n}=e.vnode,i=e3(e);HB(e,r,i,t),WB(e,n);const a=i?c8(e,t):void 0;return Gh=!1,a}function c8(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=w5(new Proxy(e.ctx,FB));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?f8(e):null;Hh(e),sf();const a=zl(n,e,0,[e.props,i]);if(lf(),uc(),s5(a)){if(a.then(uc,uc),t)return a.then(l=>{$E(e,l,t)}).catch(l=>{lm(l,e,0)});e.asyncDep=a}else $E(e,a,t)}else t3(e,t)}function $E(e,t,r){_r(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Yn(t)&&(e.setupState=C5(t)),t3(e,r)}let jE;function t3(e,t,r){const n=e.type;if(!e.render){if(!t&&jE&&!n.render){const i=n.template;if(i){const{isCustomElement:a,compilerOptions:l}=e.appContext.config,{delimiters:o,compilerOptions:h}=n,d=xi(xi({isCustomElement:a,delimiters:o},l),h);n.render=jE(i,d)}}e.render=n.render||To}Hh(e),sf(),NB(e),lf(),uc()}function h8(e){return new Proxy(e.attrs,{get(t,r){return Ia(e,"get","$attrs"),t[r]}})}function f8(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=h8(e))},slots:e.slots,emit:e.emit,expose:t}}function cy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(C5(w5(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in l_)return l_[r](e)}}))}function d8(e,t=!0){return _r(e)?e.displayName||e.name:e.name||t&&e.__name}function p8(e){return _r(e)&&"__vccOpts"in e}const Pt=(e,t)=>fB(e,t,Gh);function Ar(e,t,r){const n=arguments.length;return n===2?Yn(t)&&!ir(t)?h_(t)?lr(e,null,[t]):lr(e,t):lr(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&h_(r)&&(r=[r]),lr(e,t,r))}const m8="3.2.37",v8="http://www.w3.org/2000/svg",rc=typeof document<"u"?document:null,HE=rc&&rc.createElement("template"),g8={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?rc.createElementNS(v8,e):rc.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>rc.createTextNode(e),createComment:e=>rc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>rc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,a){const l=r?r.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===a||!(i=i.nextSibling)););else{HE.innerHTML=n?`<svg>${e}</svg>`:e;const o=HE.content;if(n){const h=o.firstChild;for(;h.firstChild;)o.appendChild(h.firstChild);o.removeChild(h)}t.insertBefore(o,r)}return[l?l.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function _8(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function y8(e,t,r){const n=e.style,i=rn(r);if(r&&!i){for(const a in r)fb(n,a,r[a]);if(t&&!rn(t))for(const a in t)r[a]==null&&fb(n,a,"")}else{const a=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=a)}}const GE=/\s*!important$/;function fb(e,t,r){if(ir(r))r.forEach(n=>fb(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=x8(e,t);GE.test(r)?e.setProperty(yc(n),r.replace(GE,""),"important"):e[n]=r}}const qE=["Webkit","Moz","ms"],t1={};function x8(e,t){const r=t1[t];if(r)return r;let n=ts(t);if(n!=="filter"&&n in e)return t1[t]=n;n=ty(n);for(let i=0;i<qE.length;i++){const a=qE[i]+n;if(a in e)return t1[t]=a}return t}const WE="http://www.w3.org/1999/xlink";function b8(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(WE,t.slice(6,t.length)):e.setAttributeNS(WE,t,r);else{const a=y9(t);r==null||a&&!i5(r)?e.removeAttribute(t):e.setAttribute(t,a?"":r)}}function w8(e,t,r,n,i,a,l){if(t==="innerHTML"||t==="textContent"){n&&l(n,i,a),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const h=r==null?"":r;(e.value!==h||e.tagName==="OPTION")&&(e.value=h),r==null&&e.removeAttribute(t);return}let o=!1;if(r===""||r==null){const h=typeof e[t];h==="boolean"?r=i5(r):r==null&&h==="string"?(r="",o=!0):h==="number"&&(r=0,o=!0)}try{e[t]=r}catch{}o&&e.removeAttribute(t)}const[r3,S8]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let db=0;const T8=Promise.resolve(),E8=()=>{db=0},C8=()=>db||(T8.then(E8),db=r3());function A8(e,t,r,n){e.addEventListener(t,r,n)}function I8(e,t,r,n){e.removeEventListener(t,r,n)}function P8(e,t,r,n,i=null){const a=e._vei||(e._vei={}),l=a[t];if(n&&l)l.value=n;else{const[o,h]=M8(t);if(n){const d=a[t]=D8(n,i);A8(e,o,d,h)}else l&&(I8(e,o,l,h),a[t]=void 0)}}const ZE=/(?:Once|Passive|Capture)$/;function M8(e){let t;if(ZE.test(e)){t={};let r;for(;r=e.match(ZE);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[yc(e.slice(2)),t]}function D8(e,t){const r=n=>{const i=n.timeStamp||r3();(S8||i>=r.attached-1)&&eo(k8(n,r.value),t,5,[n])};return r.value=e,r.attached=C8(),r}function k8(e,t){if(ir(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const XE=/^on[a-z]/,L8=(e,t,r,n,i=!1,a,l,o,h)=>{t==="class"?_8(e,n,i):t==="style"?y8(e,r,n):om(t)?Vw(t)||P8(e,t,r,n,l):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):O8(e,t,n,i))?w8(e,t,n,a,l,o,h):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),b8(e,t,n,i))};function O8(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&XE.test(t)&&_r(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||XE.test(t)&&rn(r)?!1:t in e}const vl="transition",yd="animation",hm=(e,{slots:t})=>Ar(z5,R8(e),t);hm.displayName="Transition";const n3={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};hm.props=xi({},z5.props,n3);const Su=(e,t=[])=>{ir(e)?e.forEach(r=>r(...t)):e&&e(...t)},YE=e=>e?ir(e)?e.some(t=>t.length>1):e.length>1:!1;function R8(e){const t={};for(const le in e)le in n3||(t[le]=e[le]);if(e.css===!1)return t;const{name:r="v",type:n,duration:i,enterFromClass:a=`${r}-enter-from`,enterActiveClass:l=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:h=a,appearActiveClass:d=l,appearToClass:m=o,leaveFromClass:g=`${r}-leave-from`,leaveActiveClass:_=`${r}-leave-active`,leaveToClass:x=`${r}-leave-to`}=e,E=z8(i),M=E&&E[0],P=E&&E[1],{onBeforeEnter:I,onEnter:D,onEnterCancelled:O,onLeave:F,onLeaveCancelled:$,onBeforeAppear:q=I,onAppear:K=D,onAppearCancelled:Z=O}=t,re=(le,fe,ye)=>{Tu(le,fe?m:o),Tu(le,fe?d:l),ye&&ye()},ie=(le,fe)=>{le._isLeaving=!1,Tu(le,g),Tu(le,x),Tu(le,_),fe&&fe()},ce=le=>(fe,ye)=>{const Ne=le?K:D,be=()=>re(fe,le,ye);Su(Ne,[fe,be]),KE(()=>{Tu(fe,le?h:a),gl(fe,le?m:o),YE(Ne)||JE(fe,n,M,be)})};return xi(t,{onBeforeEnter(le){Su(I,[le]),gl(le,a),gl(le,l)},onBeforeAppear(le){Su(q,[le]),gl(le,h),gl(le,d)},onEnter:ce(!1),onAppear:ce(!0),onLeave(le,fe){le._isLeaving=!0;const ye=()=>ie(le,fe);gl(le,g),N8(),gl(le,_),KE(()=>{!le._isLeaving||(Tu(le,g),gl(le,x),YE(F)||JE(le,n,P,ye))}),Su(F,[le,ye])},onEnterCancelled(le){re(le,!1),Su(O,[le])},onAppearCancelled(le){re(le,!0),Su(Z,[le])},onLeaveCancelled(le){ie(le),Su($,[le])}})}function z8(e){if(e==null)return null;if(Yn(e))return[r1(e.enter),r1(e.leave)];{const t=r1(e);return[t,t]}}function r1(e){return c5(e)}function gl(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function Tu(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.remove(n));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function KE(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let B8=0;function JE(e,t,r,n){const i=e._endId=++B8,a=()=>{i===e._endId&&n()};if(r)return setTimeout(a,r);const{type:l,timeout:o,propCount:h}=F8(e,t);if(!l)return n();const d=l+"end";let m=0;const g=()=>{e.removeEventListener(d,_),a()},_=x=>{x.target===e&&++m>=h&&g()};setTimeout(()=>{m<h&&g()},o+1),e.addEventListener(d,_)}function F8(e,t){const r=window.getComputedStyle(e),n=E=>(r[E]||"").split(", "),i=n(vl+"Delay"),a=n(vl+"Duration"),l=QE(i,a),o=n(yd+"Delay"),h=n(yd+"Duration"),d=QE(o,h);let m=null,g=0,_=0;t===vl?l>0&&(m=vl,g=l,_=a.length):t===yd?d>0&&(m=yd,g=d,_=h.length):(g=Math.max(l,d),m=g>0?l>d?vl:yd:null,_=m?m===vl?a.length:h.length:0);const x=m===vl&&/\b(transform|all)(,|$)/.test(r[vl+"Property"]);return{type:m,timeout:g,propCount:_,hasTransform:x}}function QE(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,n)=>eC(r)+eC(e[n])))}function eC(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function N8(){return document.body.offsetHeight}const V8={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},U8=(e,t)=>r=>{if(!("key"in r))return;const n=yc(r.key);if(t.some(i=>i===n||V8[i]===n))return e(r)},d_={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):xd(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),xd(e,!0),n.enter(e)):n.leave(e,()=>{xd(e,!1)}):xd(e,t))},beforeUnmount(e,{value:t}){xd(e,t)}};function xd(e,t){e.style.display=t?e._vod:"none"}const $8=xi({patchProp:L8},g8);let n1,tC=!1;function j8(){return n1=tC?n1:JB($8),tC=!0,n1}const H8=(...e)=>{const t=j8().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=G8(n);if(i)return r(i,!0,i instanceof SVGElement)},t};function G8(e){return rn(e)?document.querySelector(e):e}const q8=JSON.parse(`{"base":"/","lang":"en-US","title":"","description":"","head":[["link",{"rel":"icon","href":"/logo-assets/touch/homescreen192.png"}],["meta",{"name":"theme-color","content":"#49BF7C"}],["link",{"rel":"manifest","href":"/manifest.webmanifest"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:type","content":"article"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:image","content":"https://mirrors.sustech.edu.cn/git/sustech-online/sustech-online-ng/-/raw/master/docs/assets/og-image.png"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:article:author","content":"sustech.online"}],["meta",{"name":"apple-mobile-web-app-capable","content":"yes"}],["meta",{"name":"apple-mobile-web-app-status-bar-style","content":"black"}],["link",{"rel":"apple-touch-icon","href":"/logo-assets/touch/homescreen168.png"}],["meta",{"name":"msapplication-TileImage","content":"/logo-assets/touch/homescreen144.png"}],["meta",{"name":"msapplication-TileColor","content":"#49BF7C"}],["meta",{"name":"google-site-verification","content":"Av-srANCmFA_yZ8Iasa1yQsIPJCF_zlP5AoD35m6_Ww"}],["script",{"async":true,"src":"https://www.googletagmanager.com/gtag/js?id=G-1BQBXDGY3R"}],["script",{},"\\n                        window.dataLayer = window.dataLayer || [];\\n                        function gtag(){dataLayer.push(arguments);}\\n                        gtag('js', new Date());\\n                        gtag('config', 'G-1BQBXDGY3R');\\n                        "],["script",{"src":"/wx_helper.js"}],["script",{"src":"https://res.wx.qq.com/open/js/jweixin-1.6.0.js"}],["script",{"src":"https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"}],["script",{"src":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"}],["script",{"src":"https://lib.baomitu.com/datatables/1.10.21/js/jquery.dataTables.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/datatables/1.10.21/css/jquery.dataTables.min.css"}]],"locales":{"/":{"title":"\u5357\u79D1\u624B\u518C","lang":"zh-CN","description":"Online manual for sustecher"}}}`);var W8=([e,t,r])=>e==="meta"&&t.name?`${e}.${t.name}`:["title","base"].includes(e)?e:e==="template"&&t.id?`${e}.${t.id}`:JSON.stringify([e,t,r]),Z8=e=>{const t=new Set,r=[];return e.forEach(n=>{const i=W8(n);t.has(i)||(t.add(i),r.push(n))}),r},fm=e=>/^(https?:)?\/\//.test(e),X8=e=>/^mailto:/.test(e),Y8=e=>/^tel:/.test(e),n2=e=>Object.prototype.toString.call(e)==="[object Object]",i3=e=>e.replace(/\/$/,""),a3=e=>e.replace(/^\//,""),o3=(e,t)=>{const r=Object.keys(e).sort((n,i)=>{const a=i.split("/").length-n.split("/").length;return a!==0?a:i.length-n.length});for(const n of r)if(t.startsWith(n))return n;return"/"},rC=(e,t="/")=>e.replace(/^(https?:)?\/\/[^/]*/,"").replace(new RegExp(`^${t}`),"/");const s3={"v-8daa1a0e":kt(()=>Fe(()=>import("./index.html.84d00e53.js"),[])),"v-74bc627b":kt(()=>Fe(()=>import("./index.html.9cdce4a3.js"),[])),"v-08ae5eba":kt(()=>Fe(()=>import("./2018-2019.html.e5fc4a7d.js"),[])),"v-93cfbde4":kt(()=>Fe(()=>import("./2019-2020.html.a793b958.js"),[])),"v-f917537a":kt(()=>Fe(()=>import("./2020-2021.html.317b6a93.js"),[])),"v-1a0de1a3":kt(()=>Fe(()=>import("./2021-2022.html.ce04bbf1.js"),[])),"v-190ab309":kt(()=>Fe(()=>import("./2021fall.html.86758f8d.js"),[])),"v-96167c50":kt(()=>Fe(()=>import("./index.html.f99f66b9.js"),[])),"v-96536bf0":kt(()=>Fe(()=>import("./index.html.903d05fb.js"),[])),"v-dbd38712":kt(()=>Fe(()=>import("./index.html.ca3777d6.js"),[])),"v-c73889da":kt(()=>Fe(()=>import("./index.html.80ffc0c1.js"),[])),"v-2c5c0e04":kt(()=>Fe(()=>import("./building-11-elevator.html.bc3c8ade.js"),[])),"v-104cfa63":kt(()=>Fe(()=>import("./2021.html.aebf94c6.js"),[])),"v-780207b9":kt(()=>Fe(()=>import("./index.html.452abe57.js"),[])),"v-14e6315a":kt(()=>Fe(()=>import("./index.html.49dbeb39.js"),[])),"v-42f2be94":kt(()=>Fe(()=>import("./vehicle-charger.html.5ead118c.js"),[])),"v-ed48bdf8":kt(()=>Fe(()=>import("./index.html.0f604d45.js"),[])),"v-f4bc5604":kt(()=>Fe(()=>import("./index.html.c56dad32.js"),[])),"v-1500d063":kt(()=>Fe(()=>import("./index.html.6d8d637d.js"),[])),"v-014445c8":kt(()=>Fe(()=>import("./index.html.3f436bd6.js"),[])),"v-461d4a7c":kt(()=>Fe(()=>import("./registered-organization-2019.html.c2c45b53.js"),[])),"v-6ba7e826":kt(()=>Fe(()=>import("./registered-organization-2020.html.2deb1f13.js"),[])),"v-6d5cc0c5":kt(()=>Fe(()=>import("./registered-organization-2021.html.8081d59e.js"),[])),"v-28ddfa13":kt(()=>Fe(()=>import("./index.html.01ab4a06.js"),[])),"v-be92ea7e":kt(()=>Fe(()=>import("./index.html.591a270c.js"),[])),"v-d7188082":kt(()=>Fe(()=>import("./index.html.cc48827c.js"),[])),"v-d1061704":kt(()=>Fe(()=>import("./paper-tools.html.00c16213.js"),[])),"v-4322d0a7":kt(()=>Fe(()=>import("./index.html.40464a3c.js"),["assets/index.html.40464a3c.js","assets/1.7455a5a6.js"])),"v-69b23ddf":kt(()=>Fe(()=>import("./index.html.5e0a4ca8.js"),["assets/index.html.5e0a4ca8.js","assets/1.7455a5a6.js"])),"v-1678dd6f":kt(()=>Fe(()=>import("./bustimer-wx.html.da0d59c7.js"),["assets/bustimer-wx.html.da0d59c7.js","assets/busline2.de4fbba4.js"])),"v-1630dfb5":kt(()=>Fe(()=>import("./bustimer.html.62666284.js"),["assets/bustimer.html.62666284.js","assets/busline2.de4fbba4.js"])),"v-6a28f6e0":kt(()=>Fe(()=>import("./holiday.html.8c60b090.js"),["assets/holiday.html.8c60b090.js","assets/busline2.de4fbba4.js"])),"v-48975204":kt(()=>Fe(()=>import("./redirect.html.58d7612d.js"),[])),"v-8059a7a6":kt(()=>Fe(()=>import("./workday.html.8dfacc66.js"),["assets/workday.html.8dfacc66.js","assets/busline2.de4fbba4.js"])),"v-22cd7d0c":kt(()=>Fe(()=>import("./index.html.71f350b0.js"),[])),"v-0e92d420":kt(()=>Fe(()=>import("./index.html.d5ab0bb5.js"),[])),"v-2b8cac58":kt(()=>Fe(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.html.ff48d3d7.js"),[])),"v-66965350":kt(()=>Fe(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.html.0465597c.js"),[])),"v-66317da4":kt(()=>Fe(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.html.4094fbe4.js"),[])),"v-5c3fcdf6":kt(()=>Fe(()=>import("./index.html.c705a3c1.js"),[])),"v-04710004":kt(()=>Fe(()=>import("./index.html.be66b2ea.js"),[])),"v-5589dd0c":kt(()=>Fe(()=>import("./dorm-floor-plan.html.105e9e31.js"),[])),"v-d42194b6":kt(()=>Fe(()=>import("./index.html.bc72c89e.js"),[])),"v-20383a78":kt(()=>Fe(()=>import("./index.html.8a878f1e.js"),[])),"v-42c1fa44":kt(()=>Fe(()=>import("./index.html.180ae160.js"),[])),"v-76cff034":kt(()=>Fe(()=>import("./index.html.7048c958.js"),[])),"v-ac3449b2":kt(()=>Fe(()=>import("./send-receive-email-by-proxy.html.5cdedd6d.js"),[])),"v-29860ed0":kt(()=>Fe(()=>import("./index.html.b6a237a4.js"),[])),"v-622da02f":kt(()=>Fe(()=>import("./index.html.98abb9de.js"),[])),"v-5e590ec6":kt(()=>Fe(()=>import("./index.html.6303e0cf.js"),[])),"v-1fa222d4":kt(()=>Fe(()=>import("./index.html.ce0abe31.js"),[])),"v-48519846":kt(()=>Fe(()=>import("./index.html.cc325b4c.js"),[])),"v-369295b4":kt(()=>Fe(()=>import("./index.html.d2e82d39.js"),[])),"v-3692bb1f":kt(()=>Fe(()=>import("./index.html.1918e71d.js"),[])),"v-425958ce":kt(()=>Fe(()=>import("./index.html.0058ceed.js"),[])),"v-3692ee77":kt(()=>Fe(()=>import("./index.html.57373b77.js"),[])),"v-2686552a":kt(()=>Fe(()=>import("./index.html.676e9693.js"),[])),"v-45d74ec0":kt(()=>Fe(()=>import("./index.html.71227b30.js"),[])),"v-772a5784":kt(()=>Fe(()=>import("./index.html.d76ae125.js"),[])),"v-8460eeb8":kt(()=>Fe(()=>import("./advice-on-study.html.1018482e.js"),[])),"v-435bd49a":kt(()=>Fe(()=>import("./info-on-study.html.2a8a574c.js"),[])),"v-6323734e":kt(()=>Fe(()=>import("./\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.html.ef394bb3.js"),[])),"v-5eb748bf":kt(()=>Fe(()=>import("./innovative-project.html.30b1a003.js"),[])),"v-2a23f022":kt(()=>Fe(()=>import("./index.html.fd8abde9.js"),[])),"v-66061b92":kt(()=>Fe(()=>import("./index.html.2f6f55e5.js"),[])),"v-89ac2bec":kt(()=>Fe(()=>import("./index.html.a331d339.js"),[])),"v-1549b190":kt(()=>Fe(()=>import("./index.html.e0b61009.js"),[])),"v-9e1961f8":kt(()=>Fe(()=>import("./index.html.9c83eec2.js"),[])),"v-6bba5e58":kt(()=>Fe(()=>import("./index.html.d2a515e5.js"),[])),"v-83a77034":kt(()=>Fe(()=>import("./index.html.7f9f088a.js"),[])),"v-296d1d15":kt(()=>Fe(()=>import("./index.html.f5cc0ed2.js"),[])),"v-fb711be8":kt(()=>Fe(()=>import("./index.html.af3b9961.js"),[])),"v-3706649a":kt(()=>Fe(()=>import("./404.html.b4e681c2.js"),[]))};var io=(e={})=>e;function i2(e,t,r){var n,i,a;t===void 0&&(t=50),r===void 0&&(r={});var l=(n=r.isImmediate)!=null&&n,o=(i=r.callback)!=null&&i,h=r.maxWait,d=Date.now(),m=[];function g(){if(h!==void 0){var x=Date.now()-d;if(x+t>=h)return h-x}return t}var _=function(){var x=[].slice.call(arguments),E=this;return new Promise(function(M,P){var I=l&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,d=Date.now(),!l){var O=e.apply(E,x);o&&o(O),m.forEach(function(F){return(0,F.resolve)(O)}),m=[]}},g()),I){var D=e.apply(E,x);return o&&o(D),M(D)}m.push({resolve:M,reject:P})})};return _.cancel=function(x){a!==void 0&&clearTimeout(a),m.forEach(function(E){return(0,E.reject)(x)}),m=[]},_}/*!
  * vue-router v4.1.5
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const wh=typeof window<"u";function K8(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const tn=Object.assign;function i1(e,t){const r={};for(const n in t){const i=t[n];r[n]=Co(i)?i.map(e):e(i)}return r}const hp=()=>{},Co=Array.isArray,J8=/\/$/,Q8=e=>e.replace(J8,"");function a1(e,t,r="/"){let n,i={},a="",l="";const o=t.indexOf("#");let h=t.indexOf("?");return o<h&&o>=0&&(h=-1),h>-1&&(n=t.slice(0,h),a=t.slice(h+1,o>-1?o:t.length),i=e(a)),o>-1&&(n=n||t.slice(0,o),l=t.slice(o,t.length)),n=nF(n!=null?n:t,r),{fullPath:n+(a&&"?")+a+l,path:n,query:i,hash:l}}function eF(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function nC(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function tF(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&qh(t.matched[n],r.matched[i])&&l3(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function qh(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function l3(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!rF(e[r],t[r]))return!1;return!0}function rF(e,t){return Co(e)?iC(e,t):Co(t)?iC(t,e):e===t}function iC(e,t){return Co(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function nF(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,a,l;for(a=0;a<n.length;a++)if(l=n[a],l!==".")if(l==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(a-(a===n.length?1:0)).join("/")}var Rp;(function(e){e.pop="pop",e.push="push"})(Rp||(Rp={}));var fp;(function(e){e.back="back",e.forward="forward",e.unknown=""})(fp||(fp={}));function iF(e){if(!e)if(wh){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Q8(e)}const aF=/^[^#]+#/;function oF(e,t){return e.replace(aF,"#")+t}function sF(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const hy=()=>({left:window.pageXOffset,top:window.pageYOffset});function lF(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=sF(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function aC(e,t){return(history.state?history.state.position-t:-1)+e}const pb=new Map;function uF(e,t){pb.set(e,t)}function cF(e){const t=pb.get(e);return pb.delete(e),t}let hF=()=>location.protocol+"//"+location.host;function u3(e,t){const{pathname:r,search:n,hash:i}=t,a=e.indexOf("#");if(a>-1){let o=i.includes(e.slice(a))?e.slice(a).length:1,h=i.slice(o);return h[0]!=="/"&&(h="/"+h),nC(h,"")}return nC(r,e)+n+i}function fF(e,t,r,n){let i=[],a=[],l=null;const o=({state:_})=>{const x=u3(e,location),E=r.value,M=t.value;let P=0;if(_){if(r.value=x,t.value=_,l&&l===E){l=null;return}P=M?_.position-M.position:0}else n(x);i.forEach(I=>{I(r.value,E,{delta:P,type:Rp.pop,direction:P?P>0?fp.forward:fp.back:fp.unknown})})};function h(){l=r.value}function d(_){i.push(_);const x=()=>{const E=i.indexOf(_);E>-1&&i.splice(E,1)};return a.push(x),x}function m(){const{history:_}=window;!_.state||_.replaceState(tn({},_.state,{scroll:hy()}),"")}function g(){for(const _ of a)_();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",m)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",m),{pauseListeners:h,listen:d,destroy:g}}function oC(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?hy():null}}function dF(e){const{history:t,location:r}=window,n={value:u3(e,r)},i={value:t.state};i.value||a(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(h,d,m){const g=e.indexOf("#"),_=g>-1?(r.host&&document.querySelector("base")?e:e.slice(g))+h:hF()+e+h;try{t[m?"replaceState":"pushState"](d,"",_),i.value=d}catch(x){console.error(x),r[m?"replace":"assign"](_)}}function l(h,d){const m=tn({},t.state,oC(i.value.back,h,i.value.forward,!0),d,{position:i.value.position});a(h,m,!0),n.value=h}function o(h,d){const m=tn({},i.value,t.state,{forward:h,scroll:hy()});a(m.current,m,!0);const g=tn({},oC(n.value,h,null),{position:m.position+1},d);a(h,g,!1),n.value=h}return{location:n,state:i,push:o,replace:l}}function pF(e){e=iF(e);const t=dF(e),r=fF(e,t.state,t.location,t.replace);function n(a,l=!0){l||r.pauseListeners(),history.go(a)}const i=tn({location:"",base:e,go:n,createHref:oF.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function mF(e){return typeof e=="string"||e&&typeof e=="object"}function c3(e){return typeof e=="string"||typeof e=="symbol"}const Es={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},h3=Symbol("");var sC;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(sC||(sC={}));function Wh(e,t){return tn(new Error,{type:e,[h3]:!0},t)}function ws(e,t){return e instanceof Error&&h3 in e&&(t==null||!!(e.type&t))}const lC="[^/]+?",vF={sensitive:!1,strict:!1,start:!0,end:!0},gF=/[.+*?^${}()[\]/\\]/g;function _F(e,t){const r=tn({},vF,t),n=[];let i=r.start?"^":"";const a=[];for(const d of e){const m=d.length?[]:[90];r.strict&&!d.length&&(i+="/");for(let g=0;g<d.length;g++){const _=d[g];let x=40+(r.sensitive?.25:0);if(_.type===0)g||(i+="/"),i+=_.value.replace(gF,"\\$&"),x+=40;else if(_.type===1){const{value:E,repeatable:M,optional:P,regexp:I}=_;a.push({name:E,repeatable:M,optional:P});const D=I||lC;if(D!==lC){x+=10;try{new RegExp(`(${D})`)}catch(F){throw new Error(`Invalid custom RegExp for param "${E}" (${D}): `+F.message)}}let O=M?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;g||(O=P&&d.length<2?`(?:/${O})`:"/"+O),P&&(O+="?"),i+=O,x+=20,P&&(x+=-8),M&&(x+=-20),D===".*"&&(x+=-50)}m.push(x)}n.push(m)}if(r.strict&&r.end){const d=n.length-1;n[d][n[d].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const l=new RegExp(i,r.sensitive?"":"i");function o(d){const m=d.match(l),g={};if(!m)return null;for(let _=1;_<m.length;_++){const x=m[_]||"",E=a[_-1];g[E.name]=x&&E.repeatable?x.split("/"):x}return g}function h(d){let m="",g=!1;for(const _ of e){(!g||!m.endsWith("/"))&&(m+="/"),g=!1;for(const x of _)if(x.type===0)m+=x.value;else if(x.type===1){const{value:E,repeatable:M,optional:P}=x,I=E in d?d[E]:"";if(Co(I)&&!M)throw new Error(`Provided param "${E}" is an array but it is not repeatable (* or + modifiers)`);const D=Co(I)?I.join("/"):I;if(!D)if(P)_.length<2&&(m.endsWith("/")?m=m.slice(0,-1):g=!0);else throw new Error(`Missing required param "${E}"`);m+=D}}return m||"/"}return{re:l,score:n,keys:a,parse:o,stringify:h}}function yF(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function xF(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const a=yF(n[r],i[r]);if(a)return a;r++}if(Math.abs(i.length-n.length)===1){if(uC(n))return 1;if(uC(i))return-1}return i.length-n.length}function uC(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const bF={type:0,value:""},wF=/[a-zA-Z0-9_]/;function SF(e){if(!e)return[[]];if(e==="/")return[[bF]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(x){throw new Error(`ERR (${r})/"${d}": ${x}`)}let r=0,n=r;const i=[];let a;function l(){a&&i.push(a),a=[]}let o=0,h,d="",m="";function g(){!d||(r===0?a.push({type:0,value:d}):r===1||r===2||r===3?(a.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:d,regexp:m,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),d="")}function _(){d+=h}for(;o<e.length;){if(h=e[o++],h==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:h==="/"?(d&&g(),l()):h===":"?(g(),r=1):_();break;case 4:_(),r=n;break;case 1:h==="("?r=2:wF.test(h)?_():(g(),r=0,h!=="*"&&h!=="?"&&h!=="+"&&o--);break;case 2:h===")"?m[m.length-1]=="\\"?m=m.slice(0,-1)+h:r=3:m+=h;break;case 3:g(),r=0,h!=="*"&&h!=="?"&&h!=="+"&&o--,m="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${d}"`),g(),l(),i}function TF(e,t,r){const n=_F(SF(e.path),r),i=tn(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function EF(e,t){const r=[],n=new Map;t=fC({strict:!1,end:!0,sensitive:!1},t);function i(m){return n.get(m)}function a(m,g,_){const x=!_,E=CF(m);E.aliasOf=_&&_.record;const M=fC(t,m),P=[E];if("alias"in m){const O=typeof m.alias=="string"?[m.alias]:m.alias;for(const F of O)P.push(tn({},E,{components:_?_.record.components:E.components,path:F,aliasOf:_?_.record:E}))}let I,D;for(const O of P){const{path:F}=O;if(g&&F[0]!=="/"){const $=g.record.path,q=$[$.length-1]==="/"?"":"/";O.path=g.record.path+(F&&q+F)}if(I=TF(O,g,M),_?_.alias.push(I):(D=D||I,D!==I&&D.alias.push(I),x&&m.name&&!hC(I)&&l(m.name)),E.children){const $=E.children;for(let q=0;q<$.length;q++)a($[q],I,_&&_.children[q])}_=_||I,h(I)}return D?()=>{l(D)}:hp}function l(m){if(c3(m)){const g=n.get(m);g&&(n.delete(m),r.splice(r.indexOf(g),1),g.children.forEach(l),g.alias.forEach(l))}else{const g=r.indexOf(m);g>-1&&(r.splice(g,1),m.record.name&&n.delete(m.record.name),m.children.forEach(l),m.alias.forEach(l))}}function o(){return r}function h(m){let g=0;for(;g<r.length&&xF(m,r[g])>=0&&(m.record.path!==r[g].record.path||!f3(m,r[g]));)g++;r.splice(g,0,m),m.record.name&&!hC(m)&&n.set(m.record.name,m)}function d(m,g){let _,x={},E,M;if("name"in m&&m.name){if(_=n.get(m.name),!_)throw Wh(1,{location:m});M=_.record.name,x=tn(cC(g.params,_.keys.filter(D=>!D.optional).map(D=>D.name)),m.params&&cC(m.params,_.keys.map(D=>D.name))),E=_.stringify(x)}else if("path"in m)E=m.path,_=r.find(D=>D.re.test(E)),_&&(x=_.parse(E),M=_.record.name);else{if(_=g.name?n.get(g.name):r.find(D=>D.re.test(g.path)),!_)throw Wh(1,{location:m,currentLocation:g});M=_.record.name,x=tn({},g.params,m.params),E=_.stringify(x)}const P=[];let I=_;for(;I;)P.unshift(I.record),I=I.parent;return{name:M,path:E,params:x,matched:P,meta:IF(P)}}return e.forEach(m=>a(m)),{addRoute:a,resolve:d,removeRoute:l,getRoutes:o,getRecordMatcher:i}}function cC(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function CF(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:AF(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function AF(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function hC(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function IF(e){return e.reduce((t,r)=>tn(t,r.meta),{})}function fC(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function f3(e,t){return t.children.some(r=>r===e||f3(e,r))}const d3=/#/g,PF=/&/g,MF=/\//g,DF=/=/g,kF=/\?/g,p3=/\+/g,LF=/%5B/g,OF=/%5D/g,m3=/%5E/g,RF=/%60/g,v3=/%7B/g,zF=/%7C/g,g3=/%7D/g,BF=/%20/g;function a2(e){return encodeURI(""+e).replace(zF,"|").replace(LF,"[").replace(OF,"]")}function FF(e){return a2(e).replace(v3,"{").replace(g3,"}").replace(m3,"^")}function mb(e){return a2(e).replace(p3,"%2B").replace(BF,"+").replace(d3,"%23").replace(PF,"%26").replace(RF,"`").replace(v3,"{").replace(g3,"}").replace(m3,"^")}function NF(e){return mb(e).replace(DF,"%3D")}function VF(e){return a2(e).replace(d3,"%23").replace(kF,"%3F")}function UF(e){return e==null?"":VF(e).replace(MF,"%2F")}function p_(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function $F(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const a=n[i].replace(p3," "),l=a.indexOf("="),o=p_(l<0?a:a.slice(0,l)),h=l<0?null:p_(a.slice(l+1));if(o in t){let d=t[o];Co(d)||(d=t[o]=[d]),d.push(h)}else t[o]=h}return t}function dC(e){let t="";for(let r in e){const n=e[r];if(r=NF(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Co(n)?n.map(a=>a&&mb(a)):[n&&mb(n)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+r,a!=null&&(t+="="+a))})}return t}function jF(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Co(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const HF=Symbol(""),pC=Symbol(""),fy=Symbol(""),o2=Symbol(""),vb=Symbol("");function bd(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function Al(e,t,r,n,i){const a=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((l,o)=>{const h=g=>{g===!1?o(Wh(4,{from:r,to:t})):g instanceof Error?o(g):mF(g)?o(Wh(2,{from:t,to:g})):(a&&n.enterCallbacks[i]===a&&typeof g=="function"&&a.push(g),l())},d=e.call(n&&n.instances[i],t,r,h);let m=Promise.resolve(d);e.length<3&&(m=m.then(h)),m.catch(g=>o(g))})}function o1(e,t,r,n){const i=[];for(const a of e)for(const l in a.components){let o=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(GF(o)){const d=(o.__vccOpts||o)[t];d&&i.push(Al(d,r,n,a,l))}else{let h=o();i.push(()=>h.then(d=>{if(!d)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${a.path}"`));const m=K8(d)?d.default:d;a.components[l]=m;const _=(m.__vccOpts||m)[t];return _&&Al(_,r,n,a,l)()}))}}return i}function GF(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function mC(e){const t=zn(fy),r=zn(o2),n=Pt(()=>t.resolve(ht(e.to))),i=Pt(()=>{const{matched:h}=n.value,{length:d}=h,m=h[d-1],g=r.matched;if(!m||!g.length)return-1;const _=g.findIndex(qh.bind(null,m));if(_>-1)return _;const x=vC(h[d-2]);return d>1&&vC(m)===x&&g[g.length-1].path!==x?g.findIndex(qh.bind(null,h[d-2])):_}),a=Pt(()=>i.value>-1&&ZF(r.params,n.value.params)),l=Pt(()=>i.value>-1&&i.value===r.matched.length-1&&l3(r.params,n.value.params));function o(h={}){return WF(h)?t[ht(e.replace)?"replace":"push"](ht(e.to)).catch(hp):Promise.resolve()}return{route:n,href:Pt(()=>n.value.href),isActive:a,isExactActive:l,navigate:o}}const qF=Pr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:mC,setup(e,{slots:t}){const r=uf(mC(e)),{options:n}=zn(fy),i=Pt(()=>({[gC(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[gC(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const a=t.default&&t.default(r);return e.custom?a:Ar("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},a)}}}),_3=qF;function WF(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function ZF(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Co(i)||i.length!==n.length||n.some((a,l)=>a!==i[l]))return!1}return!0}function vC(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const gC=(e,t,r)=>e!=null?e:t!=null?t:r,XF=Pr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=zn(vb),i=Pt(()=>e.route||n.value),a=zn(pC,0),l=Pt(()=>{let d=ht(a);const{matched:m}=i.value;let g;for(;(g=m[d])&&!g.components;)d++;return d}),o=Pt(()=>i.value.matched[l.value]);Bl(pC,Pt(()=>l.value+1)),Bl(HF,o),Bl(vb,i);const h=Pn();return Oi(()=>[h.value,o.value,e.name],([d,m,g],[_,x,E])=>{m&&(m.instances[g]=d,x&&x!==m&&d&&d===_&&(m.leaveGuards.size||(m.leaveGuards=x.leaveGuards),m.updateGuards.size||(m.updateGuards=x.updateGuards))),d&&m&&(!x||!qh(m,x)||!_)&&(m.enterCallbacks[g]||[]).forEach(M=>M(d))},{flush:"post"}),()=>{const d=i.value,m=e.name,g=o.value,_=g&&g.components[m];if(!_)return _C(r.default,{Component:_,route:d});const x=g.props[m],E=x?x===!0?d.params:typeof x=="function"?x(d):x:null,P=Ar(_,tn({},E,t,{onVnodeUnmounted:I=>{I.component.isUnmounted&&(g.instances[m]=null)},ref:h}));return _C(r.default,{Component:P,route:d})||P}}});function _C(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const y3=XF;function YF(e){const t=EF(e.routes,e),r=e.parseQuery||$F,n=e.stringifyQuery||dC,i=e.history,a=bd(),l=bd(),o=bd(),h=op(Es);let d=Es;wh&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=i1.bind(null,$e=>""+$e),g=i1.bind(null,UF),_=i1.bind(null,p_);function x($e,pt){let it,dt;return c3($e)?(it=t.getRecordMatcher($e),dt=pt):dt=$e,t.addRoute(dt,it)}function E($e){const pt=t.getRecordMatcher($e);pt&&t.removeRoute(pt)}function M(){return t.getRoutes().map($e=>$e.record)}function P($e){return!!t.getRecordMatcher($e)}function I($e,pt){if(pt=tn({},pt||h.value),typeof $e=="string"){const lt=a1(r,$e,pt.path),oe=t.resolve({path:lt.path},pt),ve=i.createHref(lt.fullPath);return tn(lt,oe,{params:_(oe.params),hash:p_(lt.hash),redirectedFrom:void 0,href:ve})}let it;if("path"in $e)it=tn({},$e,{path:a1(r,$e.path,pt.path).path});else{const lt=tn({},$e.params);for(const oe in lt)lt[oe]==null&&delete lt[oe];it=tn({},$e,{params:g($e.params)}),pt.params=g(pt.params)}const dt=t.resolve(it,pt),Dt=$e.hash||"";dt.params=m(_(dt.params));const qt=eF(n,tn({},$e,{hash:FF(Dt),path:dt.path})),ot=i.createHref(qt);return tn({fullPath:qt,hash:Dt,query:n===dC?jF($e.query):$e.query||{}},dt,{redirectedFrom:void 0,href:ot})}function D($e){return typeof $e=="string"?a1(r,$e,h.value.path):tn({},$e)}function O($e,pt){if(d!==$e)return Wh(8,{from:pt,to:$e})}function F($e){return K($e)}function $($e){return F(tn(D($e),{replace:!0}))}function q($e){const pt=$e.matched[$e.matched.length-1];if(pt&&pt.redirect){const{redirect:it}=pt;let dt=typeof it=="function"?it($e):it;return typeof dt=="string"&&(dt=dt.includes("?")||dt.includes("#")?dt=D(dt):{path:dt},dt.params={}),tn({query:$e.query,hash:$e.hash,params:"path"in dt?{}:$e.params},dt)}}function K($e,pt){const it=d=I($e),dt=h.value,Dt=$e.state,qt=$e.force,ot=$e.replace===!0,lt=q(it);if(lt)return K(tn(D(lt),{state:typeof lt=="object"?tn({},Dt,lt.state):Dt,force:qt,replace:ot}),pt||it);const oe=it;oe.redirectedFrom=pt;let ve;return!qt&&tF(n,dt,it)&&(ve=Wh(16,{to:oe,from:dt}),Rt(dt,dt,!0,!1)),(ve?Promise.resolve(ve):re(oe,dt)).catch(De=>ws(De)?ws(De,2)?De:wt(De):et(De,oe,dt)).then(De=>{if(De){if(ws(De,2))return K(tn({replace:ot},D(De.to),{state:typeof De.to=="object"?tn({},Dt,De.to.state):Dt,force:qt}),pt||oe)}else De=ce(oe,dt,!0,ot,Dt);return ie(oe,dt,De),De})}function Z($e,pt){const it=O($e,pt);return it?Promise.reject(it):Promise.resolve()}function re($e,pt){let it;const[dt,Dt,qt]=KF($e,pt);it=o1(dt.reverse(),"beforeRouteLeave",$e,pt);for(const lt of dt)lt.leaveGuards.forEach(oe=>{it.push(Al(oe,$e,pt))});const ot=Z.bind(null,$e,pt);return it.push(ot),th(it).then(()=>{it=[];for(const lt of a.list())it.push(Al(lt,$e,pt));return it.push(ot),th(it)}).then(()=>{it=o1(Dt,"beforeRouteUpdate",$e,pt);for(const lt of Dt)lt.updateGuards.forEach(oe=>{it.push(Al(oe,$e,pt))});return it.push(ot),th(it)}).then(()=>{it=[];for(const lt of $e.matched)if(lt.beforeEnter&&!pt.matched.includes(lt))if(Co(lt.beforeEnter))for(const oe of lt.beforeEnter)it.push(Al(oe,$e,pt));else it.push(Al(lt.beforeEnter,$e,pt));return it.push(ot),th(it)}).then(()=>($e.matched.forEach(lt=>lt.enterCallbacks={}),it=o1(qt,"beforeRouteEnter",$e,pt),it.push(ot),th(it))).then(()=>{it=[];for(const lt of l.list())it.push(Al(lt,$e,pt));return it.push(ot),th(it)}).catch(lt=>ws(lt,8)?lt:Promise.reject(lt))}function ie($e,pt,it){for(const dt of o.list())dt($e,pt,it)}function ce($e,pt,it,dt,Dt){const qt=O($e,pt);if(qt)return qt;const ot=pt===Es,lt=wh?history.state:{};it&&(dt||ot?i.replace($e.fullPath,tn({scroll:ot&&lt&&lt.scroll},Dt)):i.push($e.fullPath,Dt)),h.value=$e,Rt($e,pt,it,ot),wt()}let le;function fe(){le||(le=i.listen(($e,pt,it)=>{if(!yr.listening)return;const dt=I($e),Dt=q(dt);if(Dt){K(tn(Dt,{replace:!0}),dt).catch(hp);return}d=dt;const qt=h.value;wh&&uF(aC(qt.fullPath,it.delta),hy()),re(dt,qt).catch(ot=>ws(ot,12)?ot:ws(ot,2)?(K(ot.to,dt).then(lt=>{ws(lt,20)&&!it.delta&&it.type===Rp.pop&&i.go(-1,!1)}).catch(hp),Promise.reject()):(it.delta&&i.go(-it.delta,!1),et(ot,dt,qt))).then(ot=>{ot=ot||ce(dt,qt,!1),ot&&(it.delta&&!ws(ot,8)?i.go(-it.delta,!1):it.type===Rp.pop&&ws(ot,20)&&i.go(-1,!1)),ie(dt,qt,ot)}).catch(hp)}))}let ye=bd(),Ne=bd(),be;function et($e,pt,it){wt($e);const dt=Ne.list();return dt.length?dt.forEach(Dt=>Dt($e,pt,it)):console.error($e),Promise.reject($e)}function tt(){return be&&h.value!==Es?Promise.resolve():new Promise(($e,pt)=>{ye.add([$e,pt])})}function wt($e){return be||(be=!$e,fe(),ye.list().forEach(([pt,it])=>$e?it($e):pt()),ye.reset()),$e}function Rt($e,pt,it,dt){const{scrollBehavior:Dt}=e;if(!wh||!Dt)return Promise.resolve();const qt=!it&&cF(aC($e.fullPath,0))||(dt||!it)&&history.state&&history.state.scroll||null;return cf().then(()=>Dt($e,pt,qt)).then(ot=>ot&&lF(ot)).catch(ot=>et(ot,$e,pt))}const Qt=$e=>i.go($e);let Ut;const vr=new Set,yr={currentRoute:h,listening:!0,addRoute:x,removeRoute:E,hasRoute:P,getRoutes:M,resolve:I,options:e,push:F,replace:$,go:Qt,back:()=>Qt(-1),forward:()=>Qt(1),beforeEach:a.add,beforeResolve:l.add,afterEach:o.add,onError:Ne.add,isReady:tt,install($e){const pt=this;$e.component("RouterLink",_3),$e.component("RouterView",y3),$e.config.globalProperties.$router=pt,Object.defineProperty($e.config.globalProperties,"$route",{enumerable:!0,get:()=>ht(h)}),wh&&!Ut&&h.value===Es&&(Ut=!0,F(i.location).catch(Dt=>{}));const it={};for(const Dt in Es)it[Dt]=Pt(()=>h.value[Dt]);$e.provide(fy,pt),$e.provide(o2,uf(it)),$e.provide(vb,h);const dt=$e.unmount;vr.add($e),$e.unmount=function(){vr.delete($e),vr.size<1&&(d=Es,le&&le(),le=null,h.value=Es,Ut=!1,be=!1),dt()}}};return yr}function th(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function KF(e,t){const r=[],n=[],i=[],a=Math.max(t.matched.length,e.matched.length);for(let l=0;l<a;l++){const o=t.matched[l];o&&(e.matched.find(d=>qh(d,o))?n.push(o):r.push(o));const h=e.matched[l];h&&(t.matched.find(d=>qh(d,h))||i.push(h))}return[r,n,i]}function xc(){return zn(fy)}function Us(){return zn(o2)}const JF=({headerLinkSelector:e,headerAnchorSelector:t,delay:r,offset:n=5})=>{const i=xc(),l=i2(()=>{var M,P,I,D;const o=Math.max(window.scrollY,document.documentElement.scrollTop,document.body.scrollTop);if(Math.abs(o-0)<n){yC(i,"");return}const d=window.innerHeight+o,m=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),g=Math.abs(m-d)<n,_=Array.from(document.querySelectorAll(e)),E=Array.from(document.querySelectorAll(t)).filter(O=>_.some(F=>F.hash===O.hash));for(let O=0;O<E.length;O++){const F=E[O],$=E[O+1],q=o>=((P=(M=F.parentElement)==null?void 0:M.offsetTop)!=null?P:0)-n,K=!$||o<((D=(I=$.parentElement)==null?void 0:I.offsetTop)!=null?D:0)-n;if(!(q&&K))continue;const re=decodeURIComponent(i.currentRoute.value.hash),ie=decodeURIComponent(F.hash);if(re===ie)return;if(g){for(let ce=O+1;ce<E.length;ce++)if(re===decodeURIComponent(E[ce].hash))return}yC(i,ie);return}},r);ta(()=>{window.addEventListener("scroll",l)}),sy(()=>{window.removeEventListener("scroll",l)})},yC=async(e,t)=>{const{scrollBehavior:r}=e.options;e.options.scrollBehavior=void 0,await e.replace({query:e.currentRoute.value.query,hash:t,force:!0}).finally(()=>e.options.scrollBehavior=r)},QF="a.sidebar-item",e7=".header-anchor",t7=300,r7=5,n7=io({setup(){JF({headerLinkSelector:QF,headerAnchorSelector:e7,delay:t7,offset:r7})}}),xC=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,i7=()=>window.scrollTo({top:0,behavior:"smooth"});const a7=Pr({name:"BackToTop",setup(){const e=Pn(0),t=Pt(()=>e.value>300),r=i2(()=>{e.value=xC()},100);ta(()=>{e.value=xC(),window.addEventListener("scroll",()=>r())});const n=Ar("div",{class:"back-to-top",onClick:i7});return()=>Ar(hm,{name:"back-to-top"},()=>t.value?n:null)}}),o7=io({rootComponents:[a7]});const s7=Ar("svg",{class:"external-link-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[Ar("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),Ar("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),l7=Pr({name:"ExternalLinkIcon",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(e){const t=Sm(),r=Pt(()=>{var n;return(n=e.locales[t.value])!=null?n:{openInNewWindow:"open in new window"}});return()=>Ar("span",[s7,Ar("span",{class:"external-link-icon-sr-only"},r.value.openInNewWindow)])}}),u7={"/":{openInNewWindow:"\u5728\u65B0\u7A97\u53E3\u6253\u5F00"}},c7=io({enhance({app:e}){e.component("ExternalLinkIcon",Ar(l7,{locales:u7}))}});/*! medium-zoom 1.0.6 | MIT License | https://github.com/francoischalifour/medium-zoom */var Ku=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fv=function(t){return t.tagName==="IMG"},h7=function(t){return NodeList.prototype.isPrototypeOf(t)},kg=function(t){return t&&t.nodeType===1},bC=function(t){var r=t.currentSrc||t.src;return r.substr(-4).toLowerCase()===".svg"},wC=function(t){try{return Array.isArray(t)?t.filter(Fv):h7(t)?[].slice.call(t).filter(Fv):kg(t)?[t].filter(Fv):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(Fv):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},f7=function(t){var r=document.createElement("div");return r.classList.add("medium-zoom-overlay"),r.style.background=t,r},d7=function(t){var r=t.getBoundingClientRect(),n=r.top,i=r.left,a=r.width,l=r.height,o=t.cloneNode(),h=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,d=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return o.removeAttribute("id"),o.style.position="absolute",o.style.top=n+h+"px",o.style.left=i+d+"px",o.style.width=a+"px",o.style.height=l+"px",o.style.transform="",o},rh=function(t,r){var n=Ku({bubbles:!1,cancelable:!1,detail:void 0},r);if(typeof window.CustomEvent=="function")return new CustomEvent(t,n);var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i},p7=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=window.Promise||function(le){function fe(){}le(fe,fe)},i=function(le){var fe=le.target;if(fe===re){E();return}O.indexOf(fe)!==-1&&M({target:fe})},a=function(){if(!($||!Z.original)){var le=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(q-le)>K.scrollOffset&&setTimeout(E,150)}},l=function(le){var fe=le.key||le.keyCode;(fe==="Escape"||fe==="Esc"||fe===27)&&E()},o=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=le;if(le.background&&(re.style.background=le.background),le.container&&le.container instanceof Object&&(fe.container=Ku({},K.container,le.container)),le.template){var ye=kg(le.template)?le.template:document.querySelector(le.template);fe.template=ye}return K=Ku({},K,fe),O.forEach(function(Ne){Ne.dispatchEvent(rh("medium-zoom:update",{detail:{zoom:ie}}))}),ie},h=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e(Ku({},K,le))},d=function(){for(var le=arguments.length,fe=Array(le),ye=0;ye<le;ye++)fe[ye]=arguments[ye];var Ne=fe.reduce(function(be,et){return[].concat(be,wC(et))},[]);return Ne.filter(function(be){return O.indexOf(be)===-1}).forEach(function(be){O.push(be),be.classList.add("medium-zoom-image")}),F.forEach(function(be){var et=be.type,tt=be.listener,wt=be.options;Ne.forEach(function(Rt){Rt.addEventListener(et,tt,wt)})}),ie},m=function(){for(var le=arguments.length,fe=Array(le),ye=0;ye<le;ye++)fe[ye]=arguments[ye];Z.zoomed&&E();var Ne=fe.length>0?fe.reduce(function(be,et){return[].concat(be,wC(et))},[]):O;return Ne.forEach(function(be){be.classList.remove("medium-zoom-image"),be.dispatchEvent(rh("medium-zoom:detach",{detail:{zoom:ie}}))}),O=O.filter(function(be){return Ne.indexOf(be)===-1}),ie},g=function(le,fe){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.forEach(function(Ne){Ne.addEventListener("medium-zoom:"+le,fe,ye)}),F.push({type:"medium-zoom:"+le,listener:fe,options:ye}),ie},_=function(le,fe){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.forEach(function(Ne){Ne.removeEventListener("medium-zoom:"+le,fe,ye)}),F=F.filter(function(Ne){return!(Ne.type==="medium-zoom:"+le&&Ne.listener.toString()===fe.toString())}),ie},x=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=le.target,ye=function(){var be={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},et=void 0,tt=void 0;if(K.container)if(K.container instanceof Object)be=Ku({},be,K.container),et=be.width-be.left-be.right-K.margin*2,tt=be.height-be.top-be.bottom-K.margin*2;else{var wt=kg(K.container)?K.container:document.querySelector(K.container),Rt=wt.getBoundingClientRect(),Qt=Rt.width,Ut=Rt.height,vr=Rt.left,yr=Rt.top;be=Ku({},be,{width:Qt,height:Ut,left:vr,top:yr})}et=et||be.width-K.margin*2,tt=tt||be.height-K.margin*2;var $e=Z.zoomedHd||Z.original,pt=bC($e)?et:$e.naturalWidth||et,it=bC($e)?tt:$e.naturalHeight||tt,dt=$e.getBoundingClientRect(),Dt=dt.top,qt=dt.left,ot=dt.width,lt=dt.height,oe=Math.min(pt,et)/ot,ve=Math.min(it,tt)/lt,De=Math.min(oe,ve),Ge=(-qt+(et-ot)/2+K.margin+be.left)/De,Xe=(-Dt+(tt-lt)/2+K.margin+be.top)/De,Ye="scale("+De+") translate3d("+Ge+"px, "+Xe+"px, 0)";Z.zoomed.style.transform=Ye,Z.zoomedHd&&(Z.zoomedHd.style.transform=Ye)};return new n(function(Ne){if(fe&&O.indexOf(fe)===-1){Ne(ie);return}var be=function Qt(){$=!1,Z.zoomed.removeEventListener("transitionend",Qt),Z.original.dispatchEvent(rh("medium-zoom:opened",{detail:{zoom:ie}})),Ne(ie)};if(Z.zoomed){Ne(ie);return}if(fe)Z.original=fe;else if(O.length>0){var et=O;Z.original=et[0]}else{Ne(ie);return}if(Z.original.dispatchEvent(rh("medium-zoom:open",{detail:{zoom:ie}})),q=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,$=!0,Z.zoomed=d7(Z.original),document.body.appendChild(re),K.template){var tt=kg(K.template)?K.template:document.querySelector(K.template);Z.template=document.createElement("div"),Z.template.appendChild(tt.content.cloneNode(!0)),document.body.appendChild(Z.template)}if(document.body.appendChild(Z.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),Z.original.classList.add("medium-zoom-image--hidden"),Z.zoomed.classList.add("medium-zoom-image--opened"),Z.zoomed.addEventListener("click",E),Z.zoomed.addEventListener("transitionend",be),Z.original.getAttribute("data-zoom-src")){Z.zoomedHd=Z.zoomed.cloneNode(),Z.zoomedHd.removeAttribute("srcset"),Z.zoomedHd.removeAttribute("sizes"),Z.zoomedHd.src=Z.zoomed.getAttribute("data-zoom-src"),Z.zoomedHd.onerror=function(){clearInterval(wt),console.warn("Unable to reach the zoom image target "+Z.zoomedHd.src),Z.zoomedHd=null,ye()};var wt=setInterval(function(){Z.zoomedHd.complete&&(clearInterval(wt),Z.zoomedHd.classList.add("medium-zoom-image--opened"),Z.zoomedHd.addEventListener("click",E),document.body.appendChild(Z.zoomedHd),ye())},10)}else if(Z.original.hasAttribute("srcset")){Z.zoomedHd=Z.zoomed.cloneNode(),Z.zoomedHd.removeAttribute("sizes"),Z.zoomedHd.removeAttribute("loading");var Rt=Z.zoomedHd.addEventListener("load",function(){Z.zoomedHd.removeEventListener("load",Rt),Z.zoomedHd.classList.add("medium-zoom-image--opened"),Z.zoomedHd.addEventListener("click",E),document.body.appendChild(Z.zoomedHd),ye()})}else ye()})},E=function(){return new n(function(le){if($||!Z.original){le(ie);return}var fe=function ye(){Z.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(Z.zoomed),Z.zoomedHd&&document.body.removeChild(Z.zoomedHd),document.body.removeChild(re),Z.zoomed.classList.remove("medium-zoom-image--opened"),Z.template&&document.body.removeChild(Z.template),$=!1,Z.zoomed.removeEventListener("transitionend",ye),Z.original.dispatchEvent(rh("medium-zoom:closed",{detail:{zoom:ie}})),Z.original=null,Z.zoomed=null,Z.zoomedHd=null,Z.template=null,le(ie)};$=!0,document.body.classList.remove("medium-zoom--opened"),Z.zoomed.style.transform="",Z.zoomedHd&&(Z.zoomedHd.style.transform=""),Z.template&&(Z.template.style.transition="opacity 150ms",Z.template.style.opacity=0),Z.original.dispatchEvent(rh("medium-zoom:close",{detail:{zoom:ie}})),Z.zoomed.addEventListener("transitionend",fe)})},M=function(){var le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=le.target;return Z.original?E():x({target:fe})},P=function(){return K},I=function(){return O},D=function(){return Z.original},O=[],F=[],$=!1,q=0,K=r,Z={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?K=t:(t||typeof t=="string")&&d(t),K=Ku({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},K);var re=f7(K.background);document.addEventListener("click",i),document.addEventListener("keyup",l),document.addEventListener("scroll",a),window.addEventListener("resize",E);var ie={open:x,close:E,toggle:M,update:o,clone:h,attach:d,detach:m,on:g,off:_,getOptions:P,getImages:I,getZoomedImage:D};return ie};function m7(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",r==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}var v7=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";m7(v7);const g7=p7,_7=Symbol("mediumZoom");const y7=".theme-default-content > img, .theme-default-content :not(a) > img",x7={},b7=300,w7=io({enhance({app:e,router:t}){const r=g7(x7);r.refresh=(n=y7)=>{r.detach(),r.attach(n)},e.provide(_7,r),t.afterEach(()=>{setTimeout(()=>r.refresh(),b7)})}});/**
 * NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT
 */const Nr={settings:{minimum:.08,easing:"ease",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"></div>'},status:null,set:e=>{const t=Nr.isStarted();e=s1(e,Nr.settings.minimum,1),Nr.status=e===1?null:e;const r=Nr.render(!t),n=r.querySelector(Nr.settings.barSelector),i=Nr.settings.speed,a=Nr.settings.easing;return r.offsetWidth,S7(l=>{Nv(n,{transform:"translate3d("+SC(e)+"%,0,0)",transition:"all "+i+"ms "+a}),e===1?(Nv(r,{transition:"none",opacity:"1"}),r.offsetWidth,setTimeout(function(){Nv(r,{transition:"all "+i+"ms linear",opacity:"0"}),setTimeout(function(){Nr.remove(),l()},i)},i)):setTimeout(()=>l(),i)}),Nr},isStarted:()=>typeof Nr.status=="number",start:()=>{Nr.status||Nr.set(0);const e=()=>{setTimeout(()=>{!Nr.status||(Nr.trickle(),e())},Nr.settings.trickleSpeed)};return Nr.settings.trickle&&e(),Nr},done:e=>!e&&!Nr.status?Nr:Nr.inc(.3+.5*Math.random()).set(1),inc:e=>{let t=Nr.status;return t?(typeof e!="number"&&(e=(1-t)*s1(Math.random()*t,.1,.95)),t=s1(t+e,0,.994),Nr.set(t)):Nr.start()},trickle:()=>Nr.inc(Math.random()*Nr.settings.trickleRate),render:e=>{if(Nr.isRendered())return document.getElementById("nprogress");TC(document.documentElement,"nprogress-busy");const t=document.createElement("div");t.id="nprogress",t.innerHTML=Nr.settings.template;const r=t.querySelector(Nr.settings.barSelector),n=e?"-100":SC(Nr.status||0),i=document.querySelector(Nr.settings.parent);return Nv(r,{transition:"all 0 linear",transform:"translate3d("+n+"%,0,0)"}),i!==document.body&&TC(i,"nprogress-custom-parent"),i==null||i.appendChild(t),t},remove:()=>{EC(document.documentElement,"nprogress-busy"),EC(document.querySelector(Nr.settings.parent),"nprogress-custom-parent");const e=document.getElementById("nprogress");e&&T7(e)},isRendered:()=>!!document.getElementById("nprogress")},s1=(e,t,r)=>e<t?t:e>r?r:e,SC=e=>(-1+e)*100,S7=function(){const e=[];function t(){const r=e.shift();r&&r(t)}return function(r){e.push(r),e.length===1&&t()}}(),Nv=function(){const e=["Webkit","O","Moz","ms"],t={};function r(l){return l.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(o,h){return h.toUpperCase()})}function n(l){const o=document.body.style;if(l in o)return l;let h=e.length;const d=l.charAt(0).toUpperCase()+l.slice(1);let m;for(;h--;)if(m=e[h]+d,m in o)return m;return l}function i(l){return l=r(l),t[l]||(t[l]=n(l))}function a(l,o,h){o=i(o),l.style[o]=h}return function(l,o){for(const h in o){const d=o[h];d!==void 0&&Object.prototype.hasOwnProperty.call(o,h)&&a(l,h,d)}}}(),x3=(e,t)=>(typeof e=="string"?e:s2(e)).indexOf(" "+t+" ")>=0,TC=(e,t)=>{const r=s2(e),n=r+t;x3(r,t)||(e.className=n.substring(1))},EC=(e,t)=>{const r=s2(e);if(!x3(e,t))return;const n=r.replace(" "+t+" "," ");e.className=n.substring(1,n.length-1)},s2=e=>(" "+(e.className||"")+" ").replace(/\s+/gi," "),T7=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)};const E7=()=>{ta(()=>{const e=xc(),t=new Set;t.add(e.currentRoute.value.path),e.beforeEach(r=>{t.has(r.path)||Nr.start()}),e.afterEach(r=>{t.add(r.path),Nr.done()})})},C7=io({setup(){E7()}}),A7=JSON.parse('{"navbar":[{"text":"\u4E3B\u9875","link":"/"},{"text":"\u5FEB\u8BAF\u7F51","link":"https://daily.sustech.online/"},{"text":"\u5C0F\u7A0B\u5E8F","link":"/miniapp/"},{"text":"\u5173\u4E8E","link":"/about/"},{"text":"\u7AD9\u70B9\u5E2E\u52A9","link":"/site-help/"}],"repo":"sustech-cra/sustech-online-ng","repoLabel":"\u5728Github\u4E0A\u67E5\u770B","docsRepo":"sustech-cra/sustech-online-ng","docsDir":"docs","editLinkText":"\u4E00\u8D77\u5B8C\u5584\u8FD9\u672C\u624B\u518C\uFF01","lastUpdatedText":"\u4E0A\u6B21\u66F4\u65B0","contributorsText":"\u8D21\u732E\u8005","editLink":true,"docsBranch":"master","tip":"\u63D0\u793A","warning":"\u6CE8\u610F","danger":"\u8B66\u544A","notFound":["\u8FD9\u91CC\u4EC0\u4E48\u90FD\u6CA1\u6709","\u6211\u4EEC\u600E\u4E48\u5230\u8FD9\u6765\u4E86\uFF1F","\u8FD9\u662F\u4E00\u4E2A 404 \u9875\u9762","\u770B\u8D77\u6765\u6211\u4EEC\u8FDB\u5165\u4E86\u9519\u8BEF\u7684\u94FE\u63A5"],"backToHome":"\u8FD4\u56DE\u9996\u9875","openInNewWindow":"\u5728\u65B0\u7A97\u53E3\u6253\u5F00","toggleColorMode":"\u5207\u6362\u591C\u95F4\u6A21\u5F0F","toggleSidebar":"\u5207\u6362\u4FA7\u8FB9\u680F","sidebarDepth":2,"sidebar":["/","/facility/","/contact/","/calendar/","/service/","/life/","/study/","/organizations/","/media/",{"text":"\u{1F684}\u4EA4\u901A","link":"/transport/","children":[{"text":"\u{1F68C}\u65B0\u7248\u5DF4\u58EB\u65F6\u523B\u8868","link":"/transport/bustimer.md","children":[]},{"text":"\u{1F68C}\u6821\u56ED\u5DF4\u58EB-\u5DE5\u4F5C\u65E5","link":"/transport/workday.md","children":[]},{"text":"\u{1F68C}\u6821\u56ED\u5DF4\u58EB-\u8282\u5047\u65E5","link":"/transport/holiday.md","children":[]},{"text":"\u5468\u56F4\u4EA4\u901A","link":"/transport/","children":[]}]},"/surroundings/"],"locales":{"/":{"selectLanguageName":"English"}},"colorMode":"auto","colorModeSwitch":true,"logo":null,"selectLanguageText":"Languages","selectLanguageAriaLabel":"Select language","lastUpdated":true,"contributors":true}'),b3=Pn(A7),I7=()=>b3;import.meta.webpackHot&&(__VUE_HMR_RUNTIME__.updateThemeData=e=>{b3.value=e});const w3=Symbol(""),P7=()=>{const e=zn(w3);if(!e)throw new Error("useThemeLocaleData() is called without provider.");return e},M7=(e,t)=>{var r;return{...e,...(r=e.locales)==null?void 0:r[t]}},D7=io({enhance({app:e}){const t=I7(),r=e._context.provides[XS],n=Pt(()=>M7(t.value,r.value));e.provide(w3,n),Object.defineProperties(e.config.globalProperties,{$theme:{get(){return t.value}},$themeLocale:{get(){return n.value}}})}}),k7=Pr({__name:"Badge",props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(e){return(t,r)=>(ft(),Nt("span",{class:Ri(["badge",e.type]),style:of({verticalAlign:e.vertical})},[sn(t.$slots,"default",{},()=>[$l(Kr(e.text),1)])],6))}}),qr=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},L7=qr(k7,[["__file","Badge.vue"]]),O7=Pr({name:"CodeGroup",setup(e,{slots:t}){const r=Pn(-1),n=Pn([]),i=(o=r.value)=>{o<n.value.length-1?r.value=o+1:r.value=0,n.value[r.value].focus()},a=(o=r.value)=>{o>0?r.value=o-1:r.value=n.value.length-1,n.value[r.value].focus()},l=(o,h)=>{o.key===" "||o.key==="Enter"?(o.preventDefault(),r.value=h):o.key==="ArrowRight"?(o.preventDefault(),i(h)):o.key==="ArrowLeft"&&(o.preventDefault(),a(h))};return()=>{var h;const o=(((h=t.default)==null?void 0:h.call(t))||[]).filter(d=>d.type.name==="CodeGroupItem").map(d=>(d.props===null&&(d.props={}),d));return o.length===0?null:(r.value<0||r.value>o.length-1?(r.value=o.findIndex(d=>d.props.active===""||d.props.active===!0),r.value===-1&&(r.value=0)):o.forEach((d,m)=>{d.props.active=m===r.value}),Ar("div",{class:"code-group"},[Ar("div",{class:"code-group__nav"},Ar("ul",{class:"code-group__ul"},o.map((d,m)=>{const g=m===r.value;return Ar("li",{class:"code-group__li"},Ar("button",{ref:_=>{_&&(n.value[m]=_)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":g},ariaPressed:g,ariaExpanded:g,onClick:()=>r.value=m,onKeydown:_=>l(_,m)},d.props.title))}))),o]))}}}),R7=["aria-selected"],z7=Pr({name:"CodeGroupItem"}),B7=Pr({...z7,props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup(e){return(t,r)=>(ft(),Nt("div",{class:Ri(["code-group-item",{"code-group-item__active":e.active}]),"aria-selected":e.active},[sn(t.$slots,"default")],10,R7))}}),F7=qr(B7,[["__file","CodeGroupItem.vue"]]);var CC;const S3=typeof window<"u",N7=e=>typeof e=="function",V7=e=>typeof e=="string",l1=()=>{};S3&&((CC=window==null?void 0:window.navigator)==null?void 0:CC.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function m_(e){return typeof e=="function"?e():ht(e)}function U7(e,t){function r(...n){e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})}return r}const T3=e=>e();function $7(e=T3){const t=Pn(!0);function r(){t.value=!1}function n(){t.value=!0}return{isActive:t,pause:r,resume:n,eventFilter:(...a)=>{t.value&&e(...a)}}}function j7(e){return e}function E3(e){return L9()?(O9(e),!0):!1}function H7(e,t=!0){uy()?V5(e):t?e():cf(e)}function G7(e,t=!0){uy()?ta(e):t?e():cf(e)}function q7(e=!1,t={}){const{truthyValue:r=!0,falsyValue:n=!1}=t,i=fi(e),a=Pn(e);function l(o){if(arguments.length)return a.value=o,a.value;{const h=m_(r);return a.value=a.value===h?m_(n):h,a.value}}return i?l:[a,l]}var AC=Object.getOwnPropertySymbols,W7=Object.prototype.hasOwnProperty,Z7=Object.prototype.propertyIsEnumerable,X7=(e,t)=>{var r={};for(var n in e)W7.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&AC)for(var n of AC(e))t.indexOf(n)<0&&Z7.call(e,n)&&(r[n]=e[n]);return r};function Y7(e,t,r={}){const n=r,{eventFilter:i=T3}=n,a=X7(n,["eventFilter"]);return Oi(e,U7(i,t),a)}var K7=Object.defineProperty,J7=Object.defineProperties,Q7=Object.getOwnPropertyDescriptors,v_=Object.getOwnPropertySymbols,C3=Object.prototype.hasOwnProperty,A3=Object.prototype.propertyIsEnumerable,IC=(e,t,r)=>t in e?K7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,eN=(e,t)=>{for(var r in t||(t={}))C3.call(t,r)&&IC(e,r,t[r]);if(v_)for(var r of v_(t))A3.call(t,r)&&IC(e,r,t[r]);return e},tN=(e,t)=>J7(e,Q7(t)),rN=(e,t)=>{var r={};for(var n in e)C3.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&v_)for(var n of v_(e))t.indexOf(n)<0&&A3.call(e,n)&&(r[n]=e[n]);return r};function nN(e,t,r={}){const n=r,{eventFilter:i}=n,a=rN(n,["eventFilter"]),{eventFilter:l,pause:o,resume:h,isActive:d}=$7(i);return{stop:Y7(e,t,tN(eN({},a),{eventFilter:l})),pause:o,resume:h,isActive:d}}function iN(e){var t;const r=m_(e);return(t=r==null?void 0:r.$el)!=null?t:r}const g_=S3?window:void 0;function aN(...e){let t,r,n,i;if(V7(e[0])?([r,n,i]=e,t=g_):[t,r,n,i]=e,!t)return l1;let a=l1;const l=Oi(()=>iN(t),h=>{a(),h&&(h.addEventListener(r,n,i),a=()=>{h.removeEventListener(r,n,i),a=l1})},{immediate:!0,flush:"post"}),o=()=>{l(),a()};return E3(o),o}function oN(e,t=!1){const r=Pn(),n=()=>r.value=Boolean(e());return n(),G7(n,t),r}function sN(e,t={}){const{window:r=g_}=t,n=oN(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let i;const a=Pn(!1),l=()=>{!n.value||(i||(i=r.matchMedia(e)),a.value=i.matches)};return H7(()=>{l(),i&&("addEventListener"in i?i.addEventListener("change",l):i.addListener(l),E3(()=>{"removeEventListener"in i?i.removeEventListener("change",l):i.removeListener(l)}))}),a}const gb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_b="__vueuse_ssr_handlers__";gb[_b]=gb[_b]||{};const lN=gb[_b];function uN(e,t){return lN[e]||t}function cN(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"||Array.isArray(e)?"object":Number.isNaN(e)?"any":"number"}var hN=Object.defineProperty,PC=Object.getOwnPropertySymbols,fN=Object.prototype.hasOwnProperty,dN=Object.prototype.propertyIsEnumerable,MC=(e,t,r)=>t in e?hN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,DC=(e,t)=>{for(var r in t||(t={}))fN.call(t,r)&&MC(e,r,t[r]);if(PC)for(var r of PC(t))dN.call(t,r)&&MC(e,r,t[r]);return e};const pN={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}};function mN(e,t,r,n={}){var i;const{flush:a="pre",deep:l=!0,listenToStorageChanges:o=!0,writeDefaults:h=!0,mergeDefaults:d=!1,shallow:m,window:g=g_,eventFilter:_,onError:x=K=>{console.error(K)}}=n,E=(m?op:Pn)(t);if(!r)try{r=uN("getDefaultStorage",()=>{var K;return(K=g_)==null?void 0:K.localStorage})()}catch(K){x(K)}if(!r)return E;const M=m_(t),P=cN(M),I=(i=n.serializer)!=null?i:pN[P],{pause:D,resume:O}=nN(E,()=>F(E.value),{flush:a,deep:l,eventFilter:_});return g&&o&&aN(g,"storage",q),q(),E;function F(K){try{K==null?r.removeItem(e):r.setItem(e,I.write(K))}catch(Z){x(Z)}}function $(K){if(!(K&&K.key!==e)){D();try{const Z=K?K.newValue:r.getItem(e);if(Z==null)return h&&M!==null&&r.setItem(e,I.write(M)),M;if(!K&&d){const re=I.read(Z);return N7(d)?d(re,M):P==="object"&&!Array.isArray(re)?DC(DC({},M),re):re}else return typeof Z!="string"?Z:I.read(Z)}catch(Z){x(Z)}finally{O()}}}function q(K){K&&K.key!==e||(E.value=$(K))}}function vN(e){return sN("(prefers-color-scheme: dark)",e)}var kC;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(kC||(kC={}));var gN=Object.defineProperty,LC=Object.getOwnPropertySymbols,_N=Object.prototype.hasOwnProperty,yN=Object.prototype.propertyIsEnumerable,OC=(e,t,r)=>t in e?gN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,xN=(e,t)=>{for(var r in t||(t={}))_N.call(t,r)&&OC(e,r,t[r]);if(LC)for(var r of LC(t))yN.call(t,r)&&OC(e,r,t[r]);return e};const bN={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};xN({linear:j7},bN);const Yi=()=>P7(),I3=Symbol(""),l2=()=>{const e=zn(I3);if(!e)throw new Error("useDarkMode() is called without provider.");return e},wN=()=>{const e=Yi(),t=vN(),r=mN("vuepress-color-scheme",e.value.colorMode),n=Pt({get(){return e.value.colorModeSwitch?r.value==="auto"?t.value:r.value==="dark":e.value.colorMode==="dark"},set(i){i===t.value?r.value="auto":r.value=i?"dark":"light"}});Bl(I3,n),SN(n)},SN=e=>{const t=(r=e.value)=>{const n=window==null?void 0:window.document.querySelector("html");n==null||n.classList.toggle("dark",r)};ta(()=>{Oi(e,t,{immediate:!0})}),cm(()=>t())},P3=(...e)=>{const r=xc().resolve(...e),n=r.matched[r.matched.length-1];if(!(n!=null&&n.redirect))return r;const{redirect:i}=n,a=_r(i)?i(r):i,l=rn(a)?{path:a}:a;return P3({hash:r.hash,query:r.query,params:r.params,...l})},u2=e=>{const t=P3(encodeURI(e));return{text:t.meta.title||e,link:t.name==="404"?e:t.fullPath}};let u1=null,wd=null;const TN={wait:()=>u1,pending:()=>{u1=new Promise(e=>wd=e)},resolve:()=>{wd==null||wd(),u1=null,wd=null}},M3=()=>TN,D3=Symbol("sidebarItems"),c2=()=>{const e=zn(D3);if(!e)throw new Error("useSidebarItems() is called without provider.");return e},EN=()=>{const e=Yi(),t=Bs(),r=Pt(()=>CN(t.value,e.value));Bl(D3,r)},CN=(e,t)=>{var i,a,l,o;const r=(a=(i=e.sidebar)!=null?i:t.sidebar)!=null?a:"auto",n=(o=(l=e.sidebarDepth)!=null?l:t.sidebarDepth)!=null?o:2;return e.home||r===!1?[]:r==="auto"?IN(n):ir(r)?k3(r,n):n2(r)?PN(r,n):[]},AN=(e,t)=>({text:e.title,link:e.link,children:h2(e.children,t)}),h2=(e,t)=>t>0?e.map(r=>AN(r,t-1)):[],IN=e=>{const t=zs();return[{text:t.value.title,children:h2(t.value.headers,e)}]},k3=(e,t)=>{const r=Us(),n=zs(),i=a=>{var o;let l;if(rn(a)?l=u2(a):l=a,l.children)return{...l,children:l.children.map(h=>i(h))};if(l.link===r.path){const h=((o=n.value.headers[0])==null?void 0:o.level)===1?n.value.headers[0].children:n.value.headers;return{...l,children:h2(h,t)}}return l};return e.map(a=>i(a))},PN=(e,t)=>{var a;const r=Us(),n=o3(e,r.path),i=(a=e[n])!=null?a:[];return k3(i,t)},MN={},DN={class:"theme-default-content"};function kN(e,t){const r=Xi("Content");return ft(),Nt("div",DN,[lr(r)])}const LN=qr(MN,[["render",kN],["__file","HomeContent.vue"]]),ON={key:0,class:"features"},RN=Pr({__name:"HomeFeatures",setup(e){const t=Bs(),r=Pt(()=>ir(t.value.features)?t.value.features:[]);return(n,i)=>ht(r).length?(ft(),Nt("div",ON,[(ft(!0),Nt(Hr,null,Eo(ht(r),a=>(ft(),Nt("div",{key:a.title,class:"feature"},[cr("h2",null,Kr(a.title),1),cr("p",null,Kr(a.details),1)]))),128))])):Vr("v-if",!0)}}),zN=qr(RN,[["__file","HomeFeatures.vue"]]),BN=["innerHTML"],FN=["textContent"],NN=Pr({__name:"HomeFooter",setup(e){const t=Bs(),r=Pt(()=>t.value.footer),n=Pt(()=>t.value.footerHtml);return(i,a)=>ht(r)?(ft(),Nt(Hr,{key:0},[Vr(" eslint-disable-next-line vue/no-v-html "),ht(n)?(ft(),Nt("div",{key:0,class:"footer",innerHTML:ht(r)},null,8,BN)):(ft(),Nt("div",{key:1,class:"footer",textContent:Kr(ht(r))},null,8,FN))],64)):Vr("v-if",!0)}}),VN=qr(NN,[["__file","HomeFooter.vue"]]),UN=["href","rel","target","aria-label"],$N=Pr({inheritAttrs:!1}),jN=Pr({...$N,__name:"AutoLink",props:{item:{type:Object,required:!0}},setup(e){const t=e,r=Us(),n=YS(),{item:i}=sm(t),a=Pt(()=>fm(i.value.link)),l=Pt(()=>X8(i.value.link)||Y8(i.value.link)),o=Pt(()=>{if(!l.value){if(i.value.target)return i.value.target;if(a.value)return"_blank"}}),h=Pt(()=>o.value==="_blank"),d=Pt(()=>!a.value&&!l.value&&!h.value),m=Pt(()=>{if(!l.value){if(i.value.rel)return i.value.rel;if(h.value)return"noopener noreferrer"}}),g=Pt(()=>i.value.ariaLabel||i.value.text),_=Pt(()=>{const M=Object.keys(n.value.locales);return M.length?!M.some(P=>P===i.value.link):i.value.link!=="/"}),x=Pt(()=>_.value?r.path.startsWith(i.value.link):!1),E=Pt(()=>d.value?i.value.activeMatch?new RegExp(i.value.activeMatch).test(r.path):x.value:!1);return(M,P)=>{const I=Xi("RouterLink"),D=Xi("AutoLinkExternalIcon");return ht(d)?(ft(),In(I,f_({key:0,class:{"router-link-active":ht(E)},to:ht(i).link,"aria-label":ht(g)},M.$attrs),{default:Xn(()=>[sn(M.$slots,"before"),$l(" "+Kr(ht(i).text)+" ",1),sn(M.$slots,"after")]),_:3},16,["class","to","aria-label"])):(ft(),Nt("a",f_({key:1,class:"external-link",href:ht(i).link,rel:ht(m),target:ht(o),"aria-label":ht(g)},M.$attrs),[sn(M.$slots,"before"),$l(" "+Kr(ht(i).text)+" ",1),ht(h)?(ft(),In(D,{key:0})):Vr("v-if",!0),sn(M.$slots,"after")],16,UN))}}}),Ls=qr(jN,[["__file","AutoLink.vue"]]),HN={class:"hero"},GN={key:0,id:"main-title"},qN={key:1,class:"description"},WN={key:2,class:"actions"},ZN=Pr({__name:"HomeHero",setup(e){const t=Bs(),r=KS(),n=l2(),i=Pt(()=>n.value&&t.value.heroImageDark!==void 0?t.value.heroImageDark:t.value.heroImage),a=Pt(()=>t.value.heroText===null?null:t.value.heroText||r.value.title||"Hello"),l=Pt(()=>t.value.heroAlt||a.value||"hero"),o=Pt(()=>t.value.tagline===null?null:t.value.tagline||r.value.description||"Welcome to your VuePress site"),h=Pt(()=>ir(t.value.actions)?t.value.actions.map(({text:m,link:g,type:_="primary"})=>({text:m,link:g,type:_})):[]),d=()=>{if(!i.value)return null;const m=Ar("img",{src:Gy(i.value),alt:l.value});return t.value.heroImageDark===void 0?m:Ar(JS,()=>m)};return(m,g)=>(ft(),Nt("header",HN,[lr(d),ht(a)?(ft(),Nt("h1",GN,Kr(ht(a)),1)):Vr("v-if",!0),ht(o)?(ft(),Nt("p",qN,Kr(ht(o)),1)):Vr("v-if",!0),ht(h).length?(ft(),Nt("p",WN,[(ft(!0),Nt(Hr,null,Eo(ht(h),_=>(ft(),In(Ls,{key:_.text,class:Ri(["action-button",[_.type]]),item:_},null,8,["class","item"]))),128))])):Vr("v-if",!0)]))}}),XN=qr(ZN,[["__file","HomeHero.vue"]]),YN={class:"home"},KN=Pr({__name:"Home",setup(e){return(t,r)=>(ft(),Nt("main",YN,[lr(XN),lr(zN),lr(LN),lr(VN)]))}}),JN=qr(KN,[["__file","Home.vue"]]),QN=Pr({__name:"NavbarBrand",setup(e){const t=Sm(),r=KS(),n=Yi(),i=l2(),a=Pt(()=>n.value.home||t.value),l=Pt(()=>r.value.title),o=Pt(()=>i.value&&n.value.logoDark!==void 0?n.value.logoDark:n.value.logo),h=()=>{if(!o.value)return null;const d=Ar("img",{class:"logo",src:Gy(o.value),alt:l.value});return n.value.logoDark===void 0?d:Ar(JS,()=>d)};return(d,m)=>{const g=Xi("RouterLink");return ft(),In(g,{to:ht(a)},{default:Xn(()=>[lr(h),ht(l)?(ft(),Nt("span",{key:0,class:Ri(["site-name",{"can-hide":ht(o)}])},Kr(ht(l)),3)):Vr("v-if",!0)]),_:1},8,["to"])}}}),eV=qr(QN,[["__file","NavbarBrand.vue"]]),tV=Pr({__name:"DropdownTransition",setup(e){const t=n=>{n.style.height=n.scrollHeight+"px"},r=n=>{n.style.height=""};return(n,i)=>(ft(),In(hm,{name:"dropdown",onEnter:t,onAfterEnter:r,onBeforeLeave:t},{default:Xn(()=>[sn(n.$slots,"default")]),_:3}))}}),L3=qr(tV,[["__file","DropdownTransition.vue"]]),rV=["aria-label"],nV={class:"title"},iV=cr("span",{class:"arrow down"},null,-1),aV=["aria-label"],oV={class:"title"},sV={class:"navbar-dropdown"},lV={class:"navbar-dropdown-subtitle"},uV={key:1},cV={class:"navbar-dropdown-subitem-wrapper"},hV=Pr({__name:"NavbarDropdown",props:{item:{type:Object,required:!0}},setup(e){const t=e,{item:r}=sm(t),n=Pt(()=>r.value.ariaLabel||r.value.text),i=Pn(!1),a=Us();Oi(()=>a.path,()=>{i.value=!1});const l=h=>{h.detail===0?i.value=!i.value:i.value=!1},o=(h,d)=>d[d.length-1]===h;return(h,d)=>(ft(),Nt("div",{class:Ri(["navbar-dropdown-wrapper",{open:i.value}])},[cr("button",{class:"navbar-dropdown-title",type:"button","aria-label":ht(n),onClick:l},[cr("span",nV,Kr(ht(r).text),1),iV],8,rV),cr("button",{class:"navbar-dropdown-title-mobile",type:"button","aria-label":ht(n),onClick:d[0]||(d[0]=m=>i.value=!i.value)},[cr("span",oV,Kr(ht(r).text),1),cr("span",{class:Ri(["arrow",i.value?"down":"right"])},null,2)],8,aV),lr(L3,null,{default:Xn(()=>[s_(cr("ul",sV,[(ft(!0),Nt(Hr,null,Eo(ht(r).children,m=>(ft(),Nt("li",{key:m.text,class:"navbar-dropdown-item"},[m.children?(ft(),Nt(Hr,{key:0},[cr("h4",lV,[m.link?(ft(),In(Ls,{key:0,item:m,onFocusout:g=>o(m,ht(r).children)&&m.children.length===0&&(i.value=!1)},null,8,["item","onFocusout"])):(ft(),Nt("span",uV,Kr(m.text),1))]),cr("ul",cV,[(ft(!0),Nt(Hr,null,Eo(m.children,g=>(ft(),Nt("li",{key:g.link,class:"navbar-dropdown-subitem"},[lr(Ls,{item:g,onFocusout:_=>o(g,m.children)&&o(m,ht(r).children)&&(i.value=!1)},null,8,["item","onFocusout"])]))),128))])],64)):(ft(),In(Ls,{key:1,item:m,onFocusout:g=>o(m,ht(r).children)&&(i.value=!1)},null,8,["item","onFocusout"]))]))),128))],512),[[d_,i.value]])]),_:1})],2))}}),fV=qr(hV,[["__file","NavbarDropdown.vue"]]),RC=e=>decodeURI(e).replace(/#.*$/,"").replace(/(index)?\.(md|html)$/,""),dV=(e,t)=>{if(t.hash===e)return!0;const r=RC(t.path),n=RC(e);return r===n},O3=(e,t)=>e.link&&dV(e.link,t)?!0:e.children?e.children.some(r=>O3(r,t)):!1,R3=e=>!fm(e)||/github\.com/.test(e)?"GitHub":/bitbucket\.org/.test(e)?"Bitbucket":/gitlab\.com/.test(e)?"GitLab":/gitee\.com/.test(e)?"Gitee":null,pV={GitHub:":repo/edit/:branch/:path",GitLab:":repo/-/edit/:branch/:path",Gitee:":repo/edit/:branch/:path",Bitbucket:":repo/src/:branch/:path?mode=edit&spa=0&at=:branch&fileviewer=file-view-default"},mV=({docsRepo:e,editLinkPattern:t})=>{if(t)return t;const r=R3(e);return r!==null?pV[r]:null},vV=({docsRepo:e,docsBranch:t,docsDir:r,filePathRelative:n,editLinkPattern:i})=>{if(!n)return null;const a=mV({docsRepo:e,editLinkPattern:i});return a?a.replace(/:repo/,fm(e)?e:`https://github.com/${e}`).replace(/:branch/,t).replace(/:path/,a3(`${i3(r)}/${n}`)):null},gV={key:0,class:"navbar-items"},_V=Pr({__name:"NavbarItems",setup(e){const t=()=>{const d=xc(),m=Sm(),g=KS(),_=Yi();return Pt(()=>{var D,O,F;const x=Object.keys(g.value.locales);if(x.length<2)return[];const E=d.currentRoute.value.path,M=d.currentRoute.value.fullPath,P=d.currentRoute.value.hash;return[{text:(D=_.value.selectLanguageText)!=null?D:"unknown language",ariaLabel:(F=(O=_.value.selectLanguageAriaLabel)!=null?O:_.value.selectLanguageText)!=null?F:"unknown language",children:x.map($=>{var ce,le,fe,ye,Ne,be;const q=(le=(ce=g.value.locales)==null?void 0:ce[$])!=null?le:{},K=(ye=(fe=_.value.locales)==null?void 0:fe[$])!=null?ye:{},Z=`${q.lang}`,re=(Ne=K.selectLanguageName)!=null?Ne:Z;let ie;if(Z===g.value.lang)ie=M;else{const et=E.replace(m.value,$);d.getRoutes().some(tt=>tt.path===et)?ie=`${et}${P}`:ie=(be=K.home)!=null?be:$}return{text:re,link:ie}})}]})},r=()=>{const d=Yi(),m=Pt(()=>d.value.repo),g=Pt(()=>m.value?R3(m.value):null),_=Pt(()=>m.value&&!fm(m.value)?`https://github.com/${m.value}`:m.value),x=Pt(()=>_.value?d.value.repoLabel?d.value.repoLabel:g.value===null?"Source":g.value:null);return Pt(()=>!_.value||!x.value?[]:[{text:x.value,link:_.value}])},n=d=>rn(d)?u2(d):d.children?{...d,children:d.children.map(n)}:d,a=(()=>{const d=Yi();return Pt(()=>(d.value.navbar||[]).map(n))})(),l=t(),o=r(),h=Pt(()=>[...a.value,...l.value,...o.value]);return(d,m)=>ht(h).length?(ft(),Nt("nav",gV,[(ft(!0),Nt(Hr,null,Eo(ht(h),g=>(ft(),Nt("div",{key:g.text,class:"navbar-item"},[g.children?(ft(),In(fV,{key:0,item:g},null,8,["item"])):(ft(),In(Ls,{key:1,item:g},null,8,["item"]))]))),128))])):Vr("v-if",!0)}}),z3=qr(_V,[["__file","NavbarItems.vue"]]),yV=["title"],xV={class:"icon",focusable:"false",viewBox:"0 0 32 32"},bV=a8('<path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path>',9),wV=[bV],SV={class:"icon",focusable:"false",viewBox:"0 0 32 32"},TV=cr("path",{d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z",fill:"currentColor"},null,-1),EV=[TV],CV=Pr({__name:"ToggleColorModeButton",setup(e){const t=Yi(),r=l2(),n=()=>{r.value=!r.value};return(i,a)=>(ft(),Nt("button",{class:"toggle-color-mode-button",title:ht(t).toggleColorMode,onClick:n},[s_((ft(),Nt("svg",xV,wV,512)),[[d_,!ht(r)]]),s_((ft(),Nt("svg",SV,EV,512)),[[d_,ht(r)]])],8,yV))}}),AV=qr(CV,[["__file","ToggleColorModeButton.vue"]]),IV=["title"],PV=cr("div",{class:"icon","aria-hidden":"true"},[cr("span"),cr("span"),cr("span")],-1),MV=[PV],DV=Pr({__name:"ToggleSidebarButton",emits:["toggle"],setup(e){const t=Yi();return(r,n)=>(ft(),Nt("div",{class:"toggle-sidebar-button",title:ht(t).toggleSidebar,"aria-expanded":"false",role:"button",tabindex:"0",onClick:n[0]||(n[0]=i=>r.$emit("toggle"))},MV,8,IV))}}),kV=qr(DV,[["__file","ToggleSidebarButton.vue"]]),LV=Pr({__name:"Navbar",emits:["toggle-sidebar"],setup(e){const t=Yi(),r=Pn(null),n=Pn(null),i=Pn(0),a=Pt(()=>i.value?{maxWidth:i.value+"px"}:{});ta(()=>{const h=l(r.value,"paddingLeft")+l(r.value,"paddingRight"),d=()=>{var m;window.innerWidth<=719?i.value=0:i.value=r.value.offsetWidth-h-(((m=n.value)==null?void 0:m.offsetWidth)||0)};d(),window.addEventListener("resize",d,!1),window.addEventListener("orientationchange",d,!1)});function l(o,h){var g,_,x;const d=(x=(_=(g=o==null?void 0:o.ownerDocument)==null?void 0:g.defaultView)==null?void 0:_.getComputedStyle(o,null))==null?void 0:x[h],m=Number.parseInt(d,10);return Number.isNaN(m)?0:m}return(o,h)=>{const d=Xi("NavbarSearch");return ft(),Nt("header",{ref_key:"navbar",ref:r,class:"navbar"},[lr(kV,{onToggle:h[0]||(h[0]=m=>o.$emit("toggle-sidebar"))}),cr("span",{ref_key:"navbarBrand",ref:n},[lr(eV)],512),cr("div",{class:"navbar-items-wrapper",style:of(ht(a))},[sn(o.$slots,"before"),lr(z3,{class:"can-hide"}),sn(o.$slots,"after"),ht(t).colorModeSwitch?(ft(),In(AV,{key:0})):Vr("v-if",!0),lr(d)],4)],512)}}}),OV=qr(LV,[["__file","Navbar.vue"]]),RV={class:"page-meta"},zV={key:0,class:"meta-item edit-link"},BV={key:1,class:"meta-item last-updated"},FV={class:"meta-item-label"},NV={class:"meta-item-info"},VV={key:2,class:"meta-item contributors"},UV={class:"meta-item-label"},$V={class:"meta-item-info"},jV=["title"],HV=$l(", "),GV=Pr({__name:"PageMeta",setup(e){const t=()=>{const h=Yi(),d=zs(),m=Bs();return Pt(()=>{var D,O,F;if(!((O=(D=m.value.editLink)!=null?D:h.value.editLink)!=null?O:!0))return null;const{repo:_,docsRepo:x=_,docsBranch:E="main",docsDir:M="",editLinkText:P}=h.value;if(!x)return null;const I=vV({docsRepo:x,docsBranch:E,docsDir:M,filePathRelative:d.value.filePathRelative,editLinkPattern:(F=m.value.editLinkPattern)!=null?F:h.value.editLinkPattern});return I?{text:P!=null?P:"Edit this page",link:I}:null})},r=()=>{const h=Yi(),d=zs(),m=Bs();return Pt(()=>{var x,E,M,P;return!((E=(x=m.value.lastUpdated)!=null?x:h.value.lastUpdated)!=null?E:!0)||!((M=d.value.git)!=null&&M.updatedTime)?null:new Date((P=d.value.git)==null?void 0:P.updatedTime).toLocaleString()})},n=()=>{const h=Yi(),d=zs(),m=Bs();return Pt(()=>{var _,x,E,M;return((x=(_=m.value.contributors)!=null?_:h.value.contributors)!=null?x:!0)&&(M=(E=d.value.git)==null?void 0:E.contributors)!=null?M:null})},i=Yi(),a=t(),l=r(),o=n();return(h,d)=>{const m=Xi("ClientOnly");return ft(),Nt("footer",RV,[ht(a)?(ft(),Nt("div",zV,[lr(Ls,{class:"meta-item-label",item:ht(a)},null,8,["item"])])):Vr("v-if",!0),ht(l)?(ft(),Nt("div",BV,[cr("span",FV,Kr(ht(i).lastUpdatedText)+": ",1),lr(m,null,{default:Xn(()=>[cr("span",NV,Kr(ht(l)),1)]),_:1})])):Vr("v-if",!0),ht(o)&&ht(o).length?(ft(),Nt("div",VV,[cr("span",UV,Kr(ht(i).contributorsText)+": ",1),cr("span",$V,[(ft(!0),Nt(Hr,null,Eo(ht(o),(g,_)=>(ft(),Nt(Hr,{key:_},[cr("span",{class:"contributor",title:`email: ${g.email}`},Kr(g.name),9,jV),_!==ht(o).length-1?(ft(),Nt(Hr,{key:0},[HV],64)):Vr("v-if",!0)],64))),128))])])):Vr("v-if",!0)])}}}),qV=qr(GV,[["__file","PageMeta.vue"]]),WV={key:0,class:"page-nav"},ZV={class:"inner"},XV={key:0,class:"prev"},YV={key:1,class:"next"},KV=Pr({__name:"PageNav",setup(e){const t=h=>h===!1?null:rn(h)?u2(h):n2(h)?h:!1,r=(h,d,m)=>{const g=h.findIndex(_=>_.link===d);if(g!==-1){const _=h[g+m];return _!=null&&_.link?_:null}for(const _ of h)if(_.children){const x=r(_.children,d,m);if(x)return x}return null},n=Bs(),i=c2(),a=Us(),l=Pt(()=>{const h=t(n.value.prev);return h!==!1?h:r(i.value,a.path,-1)}),o=Pt(()=>{const h=t(n.value.next);return h!==!1?h:r(i.value,a.path,1)});return(h,d)=>ht(l)||ht(o)?(ft(),Nt("nav",WV,[cr("p",ZV,[ht(l)?(ft(),Nt("span",XV,[lr(Ls,{item:ht(l)},null,8,["item"])])):Vr("v-if",!0),ht(o)?(ft(),Nt("span",YV,[lr(Ls,{item:ht(o)},null,8,["item"])])):Vr("v-if",!0)])])):Vr("v-if",!0)}}),JV=qr(KV,[["__file","PageNav.vue"]]),QV={class:"page"},eU={class:"theme-default-content"},tU=Pr({__name:"Page",setup(e){return(t,r)=>{const n=Xi("Content");return ft(),Nt("main",QV,[sn(t.$slots,"top"),cr("div",eU,[sn(t.$slots,"content-top"),lr(n),sn(t.$slots,"content-bottom")]),lr(qV),lr(JV),sn(t.$slots,"bottom")])}}}),rU=qr(tU,[["__file","Page.vue"]]),nU=["onKeydown"],iU={class:"sidebar-item-children"},aU=Pr({__name:"SidebarItem",props:{item:{type:Object,required:!0},depth:{type:Number,required:!1,default:0}},setup(e){const t=e,{item:r,depth:n}=sm(t),i=Us(),a=xc(),l=Pt(()=>O3(r.value,i)),o=Pt(()=>({"sidebar-item":!0,"sidebar-heading":n.value===0,active:l.value,collapsible:r.value.collapsible})),h=Pt(()=>r.value.collapsible?l.value:!0),[d,m]=q7(h.value),g=x=>{r.value.collapsible&&(x.preventDefault(),m())},_=a.afterEach(x=>{cf(()=>{d.value=h.value})});return sy(()=>{_()}),(x,E)=>{var P;const M=Xi("SidebarItem",!0);return ft(),Nt("li",null,[ht(r).link?(ft(),In(Ls,{key:0,class:Ri(ht(o)),item:ht(r)},null,8,["class","item"])):(ft(),Nt("p",{key:1,tabindex:"0",class:Ri(ht(o)),onClick:g,onKeydown:U8(g,["enter"])},[$l(Kr(ht(r).text)+" ",1),ht(r).collapsible?(ft(),Nt("span",{key:0,class:Ri(["arrow",ht(d)?"down":"right"])},null,2)):Vr("v-if",!0)],42,nU)),(P=ht(r).children)!=null&&P.length?(ft(),In(L3,{key:2},{default:Xn(()=>[s_(cr("ul",iU,[(ft(!0),Nt(Hr,null,Eo(ht(r).children,I=>(ft(),In(M,{key:`${ht(n)}${I.text}${I.link}`,item:I,depth:ht(n)+1},null,8,["item","depth"]))),128))],512),[[d_,ht(d)]])]),_:1})):Vr("v-if",!0)])}}}),oU=qr(aU,[["__file","SidebarItem.vue"]]),sU={key:0,class:"sidebar-items"},lU=Pr({__name:"SidebarItems",setup(e){const t=Us(),r=c2();return ta(()=>{Oi(()=>t.hash,n=>{const i=document.querySelector(".sidebar");if(!i)return;const a=document.querySelector(`.sidebar a.sidebar-item[href="${t.path}${n}"]`);if(!a)return;const{top:l,height:o}=i.getBoundingClientRect(),{top:h,height:d}=a.getBoundingClientRect();h<l?a.scrollIntoView(!0):h+d>l+o&&a.scrollIntoView(!1)})}),(n,i)=>ht(r).length?(ft(),Nt("ul",sU,[(ft(!0),Nt(Hr,null,Eo(ht(r),a=>(ft(),In(oU,{key:`${a.text}${a.link}`,item:a},null,8,["item"]))),128))])):Vr("v-if",!0)}}),uU=qr(lU,[["__file","SidebarItems.vue"]]),cU={class:"sidebar"},hU=Pr({__name:"Sidebar",setup(e){return(t,r)=>(ft(),Nt("aside",cU,[lr(z3),sn(t.$slots,"top"),lr(uU),sn(t.$slots,"bottom")]))}}),fU=qr(hU,[["__file","Sidebar.vue"]]),dU=Pr({__name:"Layout",setup(e){const t=zs(),r=Bs(),n=Yi(),i=Pt(()=>r.value.navbar!==!1&&n.value.navbar!==!1),a=c2(),l=Pn(!1),o=P=>{l.value=typeof P=="boolean"?P:!l.value},h={x:0,y:0},d=P=>{h.x=P.changedTouches[0].clientX,h.y=P.changedTouches[0].clientY},m=P=>{const I=P.changedTouches[0].clientX-h.x,D=P.changedTouches[0].clientY-h.y;Math.abs(I)>Math.abs(D)&&Math.abs(I)>40&&(I>0&&h.x<=80?o(!0):o(!1))},g=Pt(()=>[{"no-navbar":!i.value,"no-sidebar":!a.value.length,"sidebar-open":l.value},r.value.pageClass]);let _;ta(()=>{_=xc().afterEach(()=>{o(!1)})}),cm(()=>{_()});const x=M3(),E=x.resolve,M=x.pending;return(P,I)=>(ft(),Nt("div",{class:Ri(["theme-container",ht(g)]),onTouchstart:d,onTouchend:m},[sn(P.$slots,"navbar",{},()=>[ht(i)?(ft(),In(OV,{key:0,onToggleSidebar:o},{before:Xn(()=>[sn(P.$slots,"navbar-before")]),after:Xn(()=>[sn(P.$slots,"navbar-after")]),_:3})):Vr("v-if",!0)]),cr("div",{class:"sidebar-mask",onClick:I[0]||(I[0]=D=>o(!1))}),sn(P.$slots,"sidebar",{},()=>[lr(fU,null,{top:Xn(()=>[sn(P.$slots,"sidebar-top")]),bottom:Xn(()=>[sn(P.$slots,"sidebar-bottom")]),_:3})]),sn(P.$slots,"page",{},()=>[ht(r).home?(ft(),In(JN,{key:0})):(ft(),In(hm,{key:1,name:"fade-slide-y",mode:"out-in",onBeforeEnter:ht(E),onBeforeLeave:ht(M)},{default:Xn(()=>[(ft(),In(rU,{key:ht(t).path},{top:Xn(()=>[sn(P.$slots,"page-top")]),"content-top":Xn(()=>[sn(P.$slots,"page-content-top")]),"content-bottom":Xn(()=>[sn(P.$slots,"page-content-bottom")]),bottom:Xn(()=>[sn(P.$slots,"page-bottom")]),_:3}))]),_:3},8,["onBeforeEnter","onBeforeLeave"]))])],34))}}),pU=qr(dU,[["__file","Layout.vue"]]),mU={class:"theme-container"},vU={class:"page"},gU={class:"theme-default-content"},_U=cr("h1",null,"404",-1),yU=Pr({__name:"NotFound",setup(e){var o,h,d;const t=Sm(),r=Yi(),n=(o=r.value.notFound)!=null?o:["Not Found"],i=()=>n[Math.floor(Math.random()*n.length)],a=(h=r.value.home)!=null?h:t.value,l=(d=r.value.backToHome)!=null?d:"Back to home";return(m,g)=>{const _=Xi("RouterLink");return ft(),Nt("div",mU,[cr("main",vU,[cr("div",gU,[_U,cr("blockquote",null,Kr(i()),1),lr(_,{to:ht(a)},{default:Xn(()=>[$l(Kr(ht(l)),1)]),_:1},8,["to"])])])])}}}),xU=qr(yU,[["__file","NotFound.vue"]]);const bU=io({enhance({app:e,router:t}){e.component("Badge",L7),e.component("CodeGroup",O7),e.component("CodeGroupItem",F7),e.component("AutoLinkExternalIcon",()=>{const n=e.component("ExternalLinkIcon");return n?Ar(n):null}),e.component("NavbarSearch",()=>{const n=e.component("Docsearch")||e.component("SearchBox");return n?Ar(n):null});const r=t.options.scrollBehavior;t.options.scrollBehavior=async(...n)=>(await M3().wait(),r(...n))},setup(){wN(),EN()},layouts:{Layout:pU,NotFound:xU}});/*! @docsearch/js 3.2.1 | MIT License |  Algolia, Inc. and contributors | https://docsearch.algolia.com */function zC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Yr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(r),!0).forEach(function(n){wU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zp(e){return zp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zp(e)}function wU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yb(){return yb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yb.apply(this,arguments)}function SU(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function __(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var a,l,o=[],h=!0,d=!1;try{for(i=i.call(r);!(h=(a=i.next()).done)&&(o.push(a.value),!n||o.length!==n);h=!0);}catch(m){d=!0,l=m}finally{try{h||i.return==null||i.return()}finally{if(d)throw l}}return o}}(e,t)||B3(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function y_(e){return function(t){if(Array.isArray(t))return xb(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||B3(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B3(e,t){if(e){if(typeof e=="string")return xb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xb(e,t):void 0}}function xb(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Kt,dp,F3,BC,N3,x_={},f2=[],TU=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ms(e,t){for(var r in t)e[r]=t[r];return e}function V3(e){var t=e.parentNode;t&&t.removeChild(e)}function Yo(e,t,r){var n,i,a,l=arguments,o={};for(a in t)a=="key"?n=t[a]:a=="ref"?i=t[a]:o[a]=t[a];if(arguments.length>3)for(r=[r],a=3;a<arguments.length;a++)r.push(l[a]);if(r!=null&&(o.children=r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)o[a]===void 0&&(o[a]=e.defaultProps[a]);return pp(e,o,n,i,null)}function pp(e,t,r,n,i){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:i==null?++Kt.__v:i};return Kt.vnode!=null&&Kt.vnode(a),a}function jl(e){return e.children}function Qo(e,t){this.props=e,this.context=t}function Bp(e,t){if(t==null)return e.__?Bp(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Bp(e):null}function U3(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return U3(e)}}function bb(e){(!e.__d&&(e.__d=!0)&&dp.push(e)&&!b_.__r++||BC!==Kt.debounceRendering)&&((BC=Kt.debounceRendering)||F3)(b_)}function b_(){for(var e;b_.__r=dp.length;)e=dp.sort(function(t,r){return t.__v.__b-r.__v.__b}),dp=[],e.some(function(t){var r,n,i,a,l,o;t.__d&&(l=(a=(r=t).__v).__e,(o=r.__P)&&(n=[],(i=Ms({},a)).__v=a.__v+1,d2(o,a,i,r.__n,o.ownerSVGElement!==void 0,a.__h!=null?[l]:null,n,l==null?Bp(a):l,a.__h),G3(n,a),a.__e!=l&&U3(a)))})}function $3(e,t,r,n,i,a,l,o,h,d){var m,g,_,x,E,M,P,I=n&&n.__k||f2,D=I.length;for(r.__k=[],m=0;m<t.length;m++)if((x=r.__k[m]=(x=t[m])==null||typeof x=="boolean"?null:typeof x=="string"||typeof x=="number"?pp(null,x,null,null,x):Array.isArray(x)?pp(jl,{children:x},null,null,null):x.__b>0?pp(x.type,x.props,x.key,null,x.__v):x)!=null){if(x.__=r,x.__b=r.__b+1,(_=I[m])===null||_&&x.key==_.key&&x.type===_.type)I[m]=void 0;else for(g=0;g<D;g++){if((_=I[g])&&x.key==_.key&&x.type===_.type){I[g]=void 0;break}_=null}d2(e,x,_=_||x_,i,a,l,o,h,d),E=x.__e,(g=x.ref)&&_.ref!=g&&(P||(P=[]),_.ref&&P.push(_.ref,null,x),P.push(g,x.__c||E,x)),E!=null?(M==null&&(M=E),typeof x.type=="function"&&x.__k!=null&&x.__k===_.__k?x.__d=h=j3(x,h,e):h=H3(e,x,_,I,E,h),d||r.type!=="option"?typeof r.type=="function"&&(r.__d=h):e.value=""):h&&_.__e==h&&h.parentNode!=e&&(h=Bp(_))}for(r.__e=M,m=D;m--;)I[m]!=null&&(typeof r.type=="function"&&I[m].__e!=null&&I[m].__e==r.__d&&(r.__d=Bp(n,m+1)),W3(I[m],I[m]));if(P)for(m=0;m<P.length;m++)q3(P[m],P[++m],P[++m])}function j3(e,t,r){var n,i;for(n=0;n<e.__k.length;n++)(i=e.__k[n])&&(i.__=e,t=typeof i.type=="function"?j3(i,t,r):H3(r,i,i,e.__k,i.__e,t));return t}function Os(e,t){return t=t||[],e==null||typeof e=="boolean"||(Array.isArray(e)?e.some(function(r){Os(r,t)}):t.push(e)),t}function H3(e,t,r,n,i,a){var l,o,h;if(t.__d!==void 0)l=t.__d,t.__d=void 0;else if(r==null||i!=a||i.parentNode==null)e:if(a==null||a.parentNode!==e)e.appendChild(i),l=null;else{for(o=a,h=0;(o=o.nextSibling)&&h<n.length;h+=2)if(o==i)break e;e.insertBefore(i,a),l=a}return l!==void 0?l:i.nextSibling}function FC(e,t,r){t[0]==="-"?e.setProperty(t,r):e[t]=r==null?"":typeof r!="number"||TU.test(t)?r:r+"px"}function Vv(e,t,r,n,i){var a;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||FC(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||FC(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")a=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?n||e.addEventListener(t,a?VC:NC,a):e.removeEventListener(t,a?VC:NC,a);else if(t!=="dangerouslySetInnerHTML"){if(i)t=t.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(t!=="href"&&t!=="list"&&t!=="form"&&t!=="download"&&t in e)try{e[t]=r==null?"":r;break e}catch{}typeof r=="function"||(r!=null&&(r!==!1||t[0]==="a"&&t[1]==="r")?e.setAttribute(t,r):e.removeAttribute(t))}}function NC(e){this.l[e.type+!1](Kt.event?Kt.event(e):e)}function VC(e){this.l[e.type+!0](Kt.event?Kt.event(e):e)}function d2(e,t,r,n,i,a,l,o,h){var d,m,g,_,x,E,M,P,I,D,O,F=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(h=r.__h,o=t.__e=r.__e,t.__h=null,a=[o]),(d=Kt.__b)&&d(t);try{e:if(typeof F=="function"){if(P=t.props,I=(d=F.contextType)&&n[d.__c],D=d?I?I.props.value:d.__:n,r.__c?M=(m=t.__c=r.__c).__=m.__E:("prototype"in F&&F.prototype.render?t.__c=m=new F(P,D):(t.__c=m=new Qo(P,D),m.constructor=F,m.render=CU),I&&I.sub(m),m.props=P,m.state||(m.state={}),m.context=D,m.__n=n,g=m.__d=!0,m.__h=[]),m.__s==null&&(m.__s=m.state),F.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=Ms({},m.__s)),Ms(m.__s,F.getDerivedStateFromProps(P,m.__s))),_=m.props,x=m.state,g)F.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(F.getDerivedStateFromProps==null&&P!==_&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(P,D),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(P,m.__s,D)===!1||t.__v===r.__v){m.props=P,m.state=m.__s,t.__v!==r.__v&&(m.__d=!1),m.__v=t,t.__e=r.__e,t.__k=r.__k,m.__h.length&&l.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(P,m.__s,D),m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(_,x,E)})}m.context=D,m.props=P,m.state=m.__s,(d=Kt.__r)&&d(t),m.__d=!1,m.__v=t,m.__P=e,d=m.render(m.props,m.state,m.context),m.state=m.__s,m.getChildContext!=null&&(n=Ms(Ms({},n),m.getChildContext())),g||m.getSnapshotBeforeUpdate==null||(E=m.getSnapshotBeforeUpdate(_,x)),O=d!=null&&d.type===jl&&d.key==null?d.props.children:d,$3(e,Array.isArray(O)?O:[O],t,r,n,i,a,l,o,h),m.base=t.__e,t.__h=null,m.__h.length&&l.push(m),M&&(m.__E=m.__=null),m.__e=!1}else a==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=EU(r.__e,t,r,n,i,a,l,h);(d=Kt.diffed)&&d(t)}catch($){t.__v=null,(h||a!=null)&&(t.__e=o,t.__h=!!h,a[a.indexOf(o)]=null),Kt.__e($,t,r)}}function G3(e,t){Kt.__c&&Kt.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(n){n.call(r)})}catch(n){Kt.__e(n,r.__v)}})}function EU(e,t,r,n,i,a,l,o){var h,d,m,g,_=r.props,x=t.props,E=t.type,M=0;if(E==="svg"&&(i=!0),a!=null){for(;M<a.length;M++)if((h=a[M])&&(h===e||(E?h.localName==E:h.nodeType==3))){e=h,a[M]=null;break}}if(e==null){if(E===null)return document.createTextNode(x);e=i?document.createElementNS("http://www.w3.org/2000/svg",E):document.createElement(E,x.is&&x),a=null,o=!1}if(E===null)_===x||o&&e.data===x||(e.data=x);else{if(a=a&&f2.slice.call(e.childNodes),d=(_=r.props||x_).dangerouslySetInnerHTML,m=x.dangerouslySetInnerHTML,!o){if(a!=null)for(_={},g=0;g<e.attributes.length;g++)_[e.attributes[g].name]=e.attributes[g].value;(m||d)&&(m&&(d&&m.__html==d.__html||m.__html===e.innerHTML)||(e.innerHTML=m&&m.__html||""))}if(function(P,I,D,O,F){var $;for($ in D)$==="children"||$==="key"||$ in I||Vv(P,$,null,D[$],O);for($ in I)F&&typeof I[$]!="function"||$==="children"||$==="key"||$==="value"||$==="checked"||D[$]===I[$]||Vv(P,$,I[$],D[$],O)}(e,x,_,i,o),m)t.__k=[];else if(M=t.props.children,$3(e,Array.isArray(M)?M:[M],t,r,n,i&&E!=="foreignObject",a,l,e.firstChild,o),a!=null)for(M=a.length;M--;)a[M]!=null&&V3(a[M]);o||("value"in x&&(M=x.value)!==void 0&&(M!==e.value||E==="progress"&&!M)&&Vv(e,"value",M,_.value,!1),"checked"in x&&(M=x.checked)!==void 0&&M!==e.checked&&Vv(e,"checked",M,_.checked,!1))}return e}function q3(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){Kt.__e(n,r)}}function W3(e,t,r){var n,i,a;if(Kt.unmount&&Kt.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||q3(n,null,t)),r||typeof e.type=="function"||(r=(i=e.__e)!=null),e.__e=e.__d=void 0,(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(l){Kt.__e(l,t)}n.base=n.__P=null}if(n=e.__k)for(a=0;a<n.length;a++)n[a]&&W3(n[a],t,r);i!=null&&V3(i)}function CU(e,t,r){return this.constructor(e,r)}function Fp(e,t,r){var n,i,a;Kt.__&&Kt.__(e,t),i=(n=typeof r=="function")?null:r&&r.__k||t.__k,a=[],d2(t,e=(!n&&r||t).__k=Yo(jl,null,[e]),i||x_,x_,t.ownerSVGElement!==void 0,!n&&r?[r]:i?null:t.firstChild?f2.slice.call(t.childNodes):null,a,!n&&r?r:i?i.__e:t.firstChild,n),G3(a,e)}function Z3(e,t){Fp(e,t,Z3)}function AU(e,t,r){var n,i,a,l=arguments,o=Ms({},e.props);for(a in t)a=="key"?n=t[a]:a=="ref"?i=t[a]:o[a]=t[a];if(arguments.length>3)for(r=[r],a=3;a<arguments.length;a++)r.push(l[a]);return r!=null&&(o.children=r),pp(e.type,o,n||e.key,i||e.ref,null)}Kt={__e:function(e,t){for(var r,n,i;t=t.__;)if((r=t.__c)&&!r.__)try{if((n=r.constructor)&&n.getDerivedStateFromError!=null&&(r.setState(n.getDerivedStateFromError(e)),i=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e),i=r.__d),i)return r.__E=r}catch(a){e=a}throw e},__v:0},Qo.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ms({},this.state),typeof e=="function"&&(e=e(Ms({},r),this.props)),e&&Ms(r,e),e!=null&&this.__v&&(t&&this.__h.push(t),bb(this))},Qo.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),bb(this))},Qo.prototype.render=jl,dp=[],F3=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,b_.__r=0,N3=0;var hf,Qi,UC,Fh=0,wb=[],$C=Kt.__b,jC=Kt.__r,HC=Kt.diffed,GC=Kt.__c,qC=Kt.unmount;function dm(e,t){Kt.__h&&Kt.__h(Qi,e,Fh||t),Fh=0;var r=Qi.__H||(Qi.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function X3(e){return Fh=1,Y3(J3,e)}function Y3(e,t,r){var n=dm(hf++,2);return n.t=e,n.__c||(n.__=[r?r(t):J3(void 0,t),function(i){var a=n.t(n.__[0],i);n.__[0]!==a&&(n.__=[a,n.__[1]],n.__c.setState({}))}],n.__c=Qi),n.__}function K3(e,t){var r=dm(hf++,3);!Kt.__s&&p2(r.__H,t)&&(r.__=e,r.__H=t,Qi.__H.__h.push(r))}function WC(e,t){var r=dm(hf++,4);!Kt.__s&&p2(r.__H,t)&&(r.__=e,r.__H=t,Qi.__h.push(r))}function c1(e,t){var r=dm(hf++,7);return p2(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function IU(){wb.forEach(function(e){if(e.__P)try{e.__H.__h.forEach(Lg),e.__H.__h.forEach(Sb),e.__H.__h=[]}catch(t){e.__H.__h=[],Kt.__e(t,e.__v)}}),wb=[]}Kt.__b=function(e){Qi=null,$C&&$C(e)},Kt.__r=function(e){jC&&jC(e),hf=0;var t=(Qi=e.__c).__H;t&&(t.__h.forEach(Lg),t.__h.forEach(Sb),t.__h=[])},Kt.diffed=function(e){HC&&HC(e);var t=e.__c;t&&t.__H&&t.__H.__h.length&&(wb.push(t)!==1&&UC===Kt.requestAnimationFrame||((UC=Kt.requestAnimationFrame)||function(r){var n,i=function(){clearTimeout(a),ZC&&cancelAnimationFrame(n),setTimeout(r)},a=setTimeout(i,100);ZC&&(n=requestAnimationFrame(i))})(IU)),Qi=void 0},Kt.__c=function(e,t){t.some(function(r){try{r.__h.forEach(Lg),r.__h=r.__h.filter(function(n){return!n.__||Sb(n)})}catch(n){t.some(function(i){i.__h&&(i.__h=[])}),t=[],Kt.__e(n,r.__v)}}),GC&&GC(e,t)},Kt.unmount=function(e){qC&&qC(e);var t=e.__c;if(t&&t.__H)try{t.__H.__.forEach(Lg)}catch(r){Kt.__e(r,t.__v)}};var ZC=typeof requestAnimationFrame=="function";function Lg(e){var t=Qi;typeof e.__c=="function"&&e.__c(),Qi=t}function Sb(e){var t=Qi;e.__c=e.__(),Qi=t}function p2(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function J3(e,t){return typeof t=="function"?t(e):t}function Q3(e,t){for(var r in t)e[r]=t[r];return e}function Tb(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function Eb(e){this.props=e}(Eb.prototype=new Qo).isPureReactComponent=!0,Eb.prototype.shouldComponentUpdate=function(e,t){return Tb(this.props,e)||Tb(this.state,t)};var XC=Kt.__b;Kt.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),XC&&XC(e)};var PU=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911,YC=function(e,t){return e==null?null:Os(Os(e).map(t))},MU={map:YC,forEach:YC,count:function(e){return e?Os(e).length:0},only:function(e){var t=Os(e);if(t.length!==1)throw"Children.only";return t[0]},toArray:Os},DU=Kt.__e;function Og(){this.__u=0,this.t=null,this.__b=null}function ek(e){var t=e.__.__c;return t&&t.__e&&t.__e(e)}function Xd(){this.u=null,this.o=null}Kt.__e=function(e,t,r){if(e.then){for(var n,i=t;i=i.__;)if((n=i.__c)&&n.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),n.__c(e,t)}DU(e,t,r)},(Og.prototype=new Qo).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var i=ek(n.__v),a=!1,l=function(){a||(a=!0,r.componentWillUnmount=r.__c,i?i(o):o())};r.__c=r.componentWillUnmount,r.componentWillUnmount=function(){l(),r.__c&&r.__c()};var o=function(){if(!--n.__u){if(n.state.__e){var d=n.state.__e;n.__v.__k[0]=function g(_,x,E){return _&&(_.__v=null,_.__k=_.__k&&_.__k.map(function(M){return g(M,x,E)}),_.__c&&_.__c.__P===x&&(_.__e&&E.insertBefore(_.__e,_.__d),_.__c.__e=!0,_.__c.__P=E)),_}(d,d.__c.__P,d.__c.__O)}var m;for(n.setState({__e:n.__b=null});m=n.t.pop();)m.forceUpdate()}},h=t.__h===!0;n.__u++||h||n.setState({__e:n.__b=n.__v.__k[0]}),e.then(l,l)},Og.prototype.componentWillUnmount=function(){this.t=[]},Og.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=function a(l,o,h){return l&&(l.__c&&l.__c.__H&&(l.__c.__H.__.forEach(function(d){typeof d.__c=="function"&&d.__c()}),l.__c.__H=null),(l=Q3({},l)).__c!=null&&(l.__c.__P===h&&(l.__c.__P=o),l.__c=null),l.__k=l.__k&&l.__k.map(function(d){return a(d,o,h)})),l}(this.__b,r,n.__O=n.__P)}this.__b=null}var i=t.__e&&Yo(jl,null,e.fallback);return i&&(i.__h=null),[Yo(jl,null,t.__e?null:e.children),i]};var KC=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};function kU(e){return this.getChildContext=function(){return e.context},e.children}function LU(e){var t=this,r=e.i;t.componentWillUnmount=function(){Fp(null,t.l),t.l=null,t.i=null},t.i&&t.i!==r&&t.componentWillUnmount(),e.__v?(t.l||(t.i=r,t.l={nodeType:1,parentNode:r,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,i){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),Fp(Yo(kU,{context:t.context},e.__v),t.l)):t.l&&t.componentWillUnmount()}function tk(e,t){return Yo(LU,{__v:e,i:t})}(Xd.prototype=new Qo).__e=function(e){var t=this,r=ek(t.__v),n=t.o.get(e);return n[0]++,function(i){var a=function(){t.props.revealOrder?(n.push(i),KC(t,e,n)):i()};r?r(a):a()}},Xd.prototype.render=function(e){this.u=null,this.o=new Map;var t=Os(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},Xd.prototype.componentDidUpdate=Xd.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){KC(e,r,t)})};var rk=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,OU=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,RU=function(e){return(typeof Symbol<"u"&&zp(Symbol())=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(e)};function nk(e,t,r){return t.__k==null&&(t.textContent=""),Fp(e,t),typeof r=="function"&&r(),e?e.__c:null}Qo.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(Qo.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var JC=Kt.event;function zU(){}function BU(){return this.cancelBubble}function FU(){return this.defaultPrevented}Kt.event=function(e){return JC&&(e=JC(e)),e.persist=zU,e.isPropagationStopped=BU,e.isDefaultPrevented=FU,e.nativeEvent=e};var ik,QC={configurable:!0,get:function(){return this.class}},eA=Kt.vnode;Kt.vnode=function(e){var t=e.type,r=e.props,n=r;if(typeof t=="string"){for(var i in n={},r){var a=r[i];i==="value"&&"defaultValue"in r&&a==null||(i==="defaultValue"&&"value"in r&&r.value==null?i="value":i==="download"&&a===!0?a="":/ondoubleclick/i.test(i)?i="ondblclick":/^onchange(textarea|input)/i.test(i+t)&&!RU(r.type)?i="oninput":/^on(Ani|Tra|Tou|BeforeInp)/.test(i)?i=i.toLowerCase():OU.test(i)?i=i.replace(/[A-Z0-9]/,"-$&").toLowerCase():a===null&&(a=void 0),n[i]=a)}t=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=Os(r.children).forEach(function(l){l.props.selected=n.value.indexOf(l.props.value)!=-1})),t=="select"&&n.defaultValue!=null&&(n.value=Os(r.children).forEach(function(l){l.props.selected=n.multiple?n.defaultValue.indexOf(l.props.value)!=-1:n.defaultValue==l.props.value})),e.props=n}t&&r.class!=r.className&&(QC.enumerable="className"in r,r.className!=null&&(n.class=r.className),Object.defineProperty(n,"className",QC)),e.$$typeof=rk,eA&&eA(e)};var tA=Kt.__r;Kt.__r=function(e){tA&&tA(e),ik=e.__c};var NU={ReactCurrentDispatcher:{current:{readContext:function(e){return ik.__n[e.__c].props.value}}}};(typeof performance>"u"?"undefined":zp(performance))=="object"&&typeof performance.now=="function"&&performance.now.bind(performance);function rA(e){return!!e&&e.$$typeof===rk}var Te={useState:X3,useReducer:Y3,useEffect:K3,useLayoutEffect:WC,useRef:function(e){return Fh=5,c1(function(){return{current:e}},[])},useImperativeHandle:function(e,t,r){Fh=6,WC(function(){typeof e=="function"?e(t()):e&&(e.current=t())},r==null?r:r.concat(e))},useMemo:c1,useCallback:function(e,t){return Fh=8,c1(function(){return e},t)},useContext:function(e){var t=Qi.context[e.__c],r=dm(hf++,9);return r.__c=e,t?(r.__==null&&(r.__=!0,t.sub(Qi)),t.props.value):e.__},useDebugValue:function(e,t){Kt.useDebugValue&&Kt.useDebugValue(t?t(e):e)},version:"16.8.0",Children:MU,render:nk,hydrate:function(e,t,r){return Z3(e,t),typeof r=="function"&&r(),e?e.__c:null},unmountComponentAtNode:function(e){return!!e.__k&&(Fp(null,e),!0)},createPortal:tk,createElement:Yo,createContext:function(e,t){var r={__c:t="__cC"+N3++,__:e,Consumer:function(n,i){return n.children(i)},Provider:function(n){var i,a;return this.getChildContext||(i=[],(a={})[t]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&i.some(bb)},this.sub=function(l){i.push(l);var o=l.componentWillUnmount;l.componentWillUnmount=function(){i.splice(i.indexOf(l),1),o&&o.call(l)}}),n.children}};return r.Provider.__=r.Consumer.contextType=r},createFactory:function(e){return Yo.bind(null,e)},cloneElement:function(e){return rA(e)?AU.apply(null,arguments):e},createRef:function(){return{current:null}},Fragment:jl,isValidElement:rA,findDOMNode:function(e){return e&&(e.base||e.nodeType===1&&e)||null},Component:Qo,PureComponent:Eb,memo:function(e,t){function r(i){var a=this.props.ref,l=a==i.ref;return!l&&a&&(a.call?a(null):a.current=null),t?!t(this.props,i)||!l:Tb(this.props,i)}function n(i){return this.shouldComponentUpdate=r,Yo(e,i)}return n.displayName="Memo("+(e.displayName||e.name)+")",n.prototype.isReactComponent=!0,n.__f=!0,n},forwardRef:function(e){function t(r,n){var i=Q3({},r);return delete i.ref,e(i,(n=r.ref||n)&&(zp(n)!="object"||"current"in n)?n:null)}return t.$$typeof=PU,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t},unstable_batchedUpdates:function(e,t){return e(t)},StrictMode:jl,Suspense:Og,SuspenseList:Xd,lazy:function(e){var t,r,n;function i(a){if(t||(t=e()).then(function(l){r=l.default||l},function(l){n=l}),n)throw n;if(!r)throw t;return Yo(r,a)}return i.displayName="Lazy",i.__f=!0,i},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:NU};function VU(){return Te.createElement("svg",{width:"15",height:"15",className:"DocSearch-Control-Key-Icon"},Te.createElement("path",{d:"M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953",strokeWidth:"1.2",stroke:"currentColor",fill:"none",strokeLinecap:"square"}))}function ak(){return Te.createElement("svg",{width:"20",height:"20",className:"DocSearch-Search-Icon",viewBox:"0 0 20 20"},Te.createElement("path",{d:"M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}var UU=["translations"];function Cb(){return Cb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cb.apply(this,arguments)}function $U(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var a,l,o=[],h=!0,d=!1;try{for(i=i.call(r);!(h=(a=i.next()).done)&&(o.push(a.value),!n||o.length!==n);h=!0);}catch(m){d=!0,l=m}finally{try{h||i.return==null||i.return()}finally{if(d)throw l}}return o}}(e,t)||function(r,n){if(!!r){if(typeof r=="string")return nA(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nA(r,n)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jU(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var HU=Te.forwardRef(function(e,t){var r=e.translations,n=r===void 0?{}:r,i=jU(e,UU),a=n.buttonText,l=a===void 0?"Search":a,o=n.buttonAriaLabel,h=o===void 0?"Search":o,d=$U(X3(null),2),m=d[0],g=d[1];return K3(function(){typeof navigator<"u"&&(/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?g("\u2318"):g("Ctrl"))},[]),Te.createElement("button",Cb({type:"button",className:"DocSearch DocSearch-Button","aria-label":h},i,{ref:t}),Te.createElement("span",{className:"DocSearch-Button-Container"},Te.createElement(ak,null),Te.createElement("span",{className:"DocSearch-Button-Placeholder"},l)),Te.createElement("span",{className:"DocSearch-Button-Keys"},m!==null&&Te.createElement(Te.Fragment,null,Te.createElement("kbd",{className:"DocSearch-Button-Key"},m==="Ctrl"?Te.createElement(VU,null):m),Te.createElement("kbd",{className:"DocSearch-Button-Key"},"K"))))});function Np(e){return e.reduce(function(t,r){return t.concat(r)},[])}var GU=0;function Ab(e){return e.collections.length===0?0:e.collections.reduce(function(t,r){return t+r.items.length},0)}var ok=function(){},qU=[{segment:"autocomplete-core",version:"1.7.1"}];function Rg(e,t){var r=t;return{then:function(n,i){return Rg(e.then(Uv(n,r,e),Uv(i,r,e)),r)},catch:function(n){return Rg(e.catch(Uv(n,r,e)),r)},finally:function(n){return n&&r.onCancelList.push(n),Rg(e.finally(Uv(n&&function(){return r.onCancelList=[],n()},r,e)),r)},cancel:function(){r.isCanceled=!0;var n=r.onCancelList;r.onCancelList=[],n.forEach(function(i){i()})},isCanceled:function(){return r.isCanceled===!0}}}function iA(e){return Rg(e,{isCanceled:!1,onCancelList:[]})}function Uv(e,t,r){return e?function(n){return t.isCanceled?n:e(n)}:r}function aA(e,t,r,n){if(!r)return null;if(e<0&&(t===null||n!==null&&t===0))return r+e;var i=(t===null?-1:t)+e;return i<=-1||i>=r?n===null?null:0:i}function oA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function WU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZU(e,t){var r=[];return Promise.resolve(e(t)).then(function(n){return Promise.all(n.filter(function(i){return Boolean(i)}).map(function(i){if(i.sourceId,r.includes(i.sourceId))throw new Error("[Autocomplete] The `sourceId` ".concat(JSON.stringify(i.sourceId)," is not unique."));r.push(i.sourceId);var a=function(l){for(var o=1;o<arguments.length;o++){var h=arguments[o]!=null?arguments[o]:{};o%2?oA(Object(h),!0).forEach(function(d){WU(l,d,h[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(h)):oA(Object(h)).forEach(function(d){Object.defineProperty(l,d,Object.getOwnPropertyDescriptor(h,d))})}return l}({getItemInputValue:function(l){return l.state.query},getItemUrl:function(){},onSelect:function(l){(0,l.setIsOpen)(!1)},onActive:ok},i);return Promise.resolve(a)}))})}function Ah(e){var t=function(i){var a=i.collections.map(function(l){return l.items.length}).reduce(function(l,o,h){var d=(l[h-1]||0)+o;return l.push(d),l},[]).reduce(function(l,o){return o<=i.activeItemId?l+1:l},0);return i.collections[a]}(e);if(!t)return null;var r=t.items[function(i){for(var a=i.state,l=i.collection,o=!1,h=0,d=0;o===!1;){var m=a.collections[h];if(m===l){o=!0;break}d+=m.items.length,h++}return a.activeItemId-d}({state:e,collection:t})],n=t.source;return{item:r,itemInputValue:n.getItemInputValue({item:r,state:e}),itemUrl:n.getItemUrl({item:r,state:e}),source:n}}var XU=/((gt|sm)-|galaxy nexus)|samsung[- ]/i;function sA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $v(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sA(Object(r),!0).forEach(function(n){YU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function KU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JU(e,t,r){var n,i=t.initialState;return{getState:function(){return i},dispatch:function(a,l){var o=function(h){for(var d=1;d<arguments.length;d++){var m=arguments[d]!=null?arguments[d]:{};d%2?lA(Object(m),!0).forEach(function(g){KU(h,g,m[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(m)):lA(Object(m)).forEach(function(g){Object.defineProperty(h,g,Object.getOwnPropertyDescriptor(m,g))})}return h}({},i);i=e(i,{type:a,props:t,payload:l}),r({state:i,prevState:o})},pendingRequests:(n=[],{add:function(a){return n.push(a),a.finally(function(){n=n.filter(function(l){return l!==a})})},cancelAll:function(){n.forEach(function(a){return a.cancel()})},isEmpty:function(){return n.length===0}})}}function uA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function jv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uA(Object(r),!0).forEach(function(n){QU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function QU(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function e$(e){return function(t){if(Array.isArray(t))return h1(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(!!t){if(typeof t=="string")return h1(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h1(t,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function h1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cA(Object(r),!0).forEach(function(n){t$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Hv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hA(Object(r),!0).forEach(function(n){sk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r$(e){return function(t){if(Array.isArray(t))return f1(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(!!t){if(typeof t=="string")return f1(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f1(t,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function f1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(r),!0).forEach(function(n){n$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gv(e){return Boolean(e.execute)}function i$(e,t){return r=e,Boolean(r==null?void 0:r.execute)?dA(dA({},e),{},{requests:e.queries.map(function(n){return{query:n,sourceId:t,transformResponse:e.transformResponse}})}):{items:e,sourceId:t};var r}function a$(e){var t=e.reduce(function(r,n){if(!Gv(n))return r.push(n),r;var i=n.searchClient,a=n.execute,l=n.requesterId,o=n.requests,h=r.find(function(g){return Gv(n)&&Gv(g)&&g.searchClient===i&&Boolean(l)&&g.requesterId===l});if(h){var d;(d=h.items).push.apply(d,r$(o))}else{var m={execute:a,requesterId:l,items:o,searchClient:i};r.push(m)}return r},[]).map(function(r){if(!Gv(r))return Promise.resolve(r);var n=r,i=n.execute,a=n.items;return i({searchClient:n.searchClient,requests:a})});return Promise.all(t).then(function(r){return Np(r)})}function o$(e,t){return t.map(function(r){var n=e.filter(function(o){return o.sourceId===r.sourceId}),i=n.map(function(o){return o.items}),a=n[0].transformResponse,l=a?a(function(o){var h=o.map(function(d){var m;return $v($v({},d),{},{hits:(m=d.hits)===null||m===void 0?void 0:m.map(function(g){return $v($v({},g),{},{__autocomplete_indexName:d.index,__autocomplete_queryID:d.queryID})})})});return{results:h,hits:h.map(function(d){return d.hits}).filter(Boolean),facetHits:h.map(function(d){var m;return(m=d.facetHits)===null||m===void 0?void 0:m.map(function(g){return{label:g.value,count:g.count,_highlightResult:{label:{value:g.highlighted}}}})}).filter(Boolean)}}(i)):i;return l.every(Boolean),'The `getItems` function from source "'.concat(r.sourceId,'" must return an array of items but returned ').concat(JSON.stringify(void 0),`.

Did you forget to return items?

See: https://www.algolia.com/doc/ui-libraries/autocomplete/core-concepts/sources/#param-getitems`),{source:r,items:l}})}var s$=["event","nextState","props","query","refresh","store"];function pA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Sd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pA(Object(r),!0).forEach(function(n){l$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u$(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var mA,d1,qv,Td=null,vA=(mA=-1,d1=-1,qv=void 0,function(e){var t=++mA;return Promise.resolve(e).then(function(r){return qv&&t<d1?qv:(d1=t,qv=r,r)})});function Sh(e){var t=e.event,r=e.nextState,n=r===void 0?{}:r,i=e.props,a=e.query,l=e.refresh,o=e.store,h=u$(e,s$);Td&&i.environment.clearTimeout(Td);var d=h.setCollections,m=h.setIsOpen,g=h.setQuery,_=h.setActiveItemId,x=h.setStatus;if(g(a),_(i.defaultActiveItemId),!a&&i.openOnFocus===!1){var E,M=o.getState().collections.map(function(D){return Sd(Sd({},D),{},{items:[]})});x("idle"),d(M),m((E=n.isOpen)!==null&&E!==void 0?E:i.shouldPanelOpen({state:o.getState()}));var P=iA(vA(M).then(function(){return Promise.resolve()}));return o.pendingRequests.add(P)}x("loading"),Td=i.environment.setTimeout(function(){x("stalled")},i.stallThreshold);var I=iA(vA(i.getSources(Sd({query:a,refresh:l,state:o.getState()},h)).then(function(D){return Promise.all(D.map(function(O){return Promise.resolve(O.getItems(Sd({query:a,refresh:l,state:o.getState()},h))).then(function(F){return i$(F,O.sourceId)})})).then(a$).then(function(O){return o$(O,D)}).then(function(O){return function(F){var $=F.collections,q=F.props,K=F.state,Z=$.reduce(function(re,ie){return Hv(Hv({},re),{},sk({},ie.source.sourceId,Hv(Hv({},ie.source),{},{getItems:function(){return Np(ie.items)}})))},{});return Np(q.reshape({sources:Object.values(Z),sourcesBySourceId:Z,state:K})).filter(Boolean).map(function(re){return{source:re,items:re.getItems()}})}({collections:O,props:i,state:o.getState()})})}))).then(function(D){var O;x("idle"),d(D);var F=i.shouldPanelOpen({state:o.getState()});m((O=n.isOpen)!==null&&O!==void 0?O:i.openOnFocus&&!a&&F||F);var $=Ah(o.getState());if(o.getState().activeItemId!==null&&$){var q=$.item,K=$.itemInputValue,Z=$.itemUrl,re=$.source;re.onActive(Sd({event:t,item:q,itemInputValue:K,itemUrl:Z,refresh:l,source:re,state:o.getState()},h))}}).finally(function(){x("idle"),Td&&i.environment.clearTimeout(Td)});return o.pendingRequests.add(I)}var c$=["event","props","refresh","store"];function gA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Eu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gA(Object(r),!0).forEach(function(n){h$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f$(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var d$=["props","refresh","store"],p$=["inputElement","formElement","panelElement"],m$=["inputElement"],v$=["inputElement","maxLength"],g$=["item","source"];function _A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ii(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(r),!0).forEach(function(n){_$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_A(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ed(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function y$(e){var t=e.props,r=e.refresh,n=e.store,i=Ed(e,d$);return{getEnvironmentProps:function(a){var l=a.inputElement,o=a.formElement,h=a.panelElement;function d(m){!n.getState().isOpen&&n.pendingRequests.isEmpty()||m.target===l||[o,h].some(function(g){return _=g,x=m.target,_===x||_.contains(x);var _,x})===!1&&(n.dispatch("blur",null),t.debug||n.pendingRequests.cancelAll())}return Ii({onTouchStart:d,onMouseDown:d,onTouchMove:function(m){n.getState().isOpen!==!1&&l===t.environment.document.activeElement&&m.target!==l&&l.blur()}},Ed(a,p$))},getRootProps:function(a){return Ii({role:"combobox","aria-expanded":n.getState().isOpen,"aria-haspopup":"listbox","aria-owns":n.getState().isOpen?"".concat(t.id,"-list"):void 0,"aria-labelledby":"".concat(t.id,"-label")},a)},getFormProps:function(a){return a.inputElement,Ii({action:"",noValidate:!0,role:"search",onSubmit:function(l){var o;l.preventDefault(),t.onSubmit(Ii({event:l,refresh:r,state:n.getState()},i)),n.dispatch("submit",null),(o=a.inputElement)===null||o===void 0||o.blur()},onReset:function(l){var o;l.preventDefault(),t.onReset(Ii({event:l,refresh:r,state:n.getState()},i)),n.dispatch("reset",null),(o=a.inputElement)===null||o===void 0||o.focus()}},Ed(a,m$))},getLabelProps:function(a){return Ii({htmlFor:"".concat(t.id,"-input"),id:"".concat(t.id,"-label")},a)},getInputProps:function(a){var l;function o(M){(t.openOnFocus||Boolean(n.getState().query))&&Sh(Ii({event:M,props:t,query:n.getState().completion||n.getState().query,refresh:r,store:n},i)),n.dispatch("focus",null)}var h=a||{},d=(h.inputElement,h.maxLength),m=d===void 0?512:d,g=Ed(h,v$),_=Ah(n.getState()),x=function(M){return Boolean(M&&M.match(XU))}(((l=t.environment.navigator)===null||l===void 0?void 0:l.userAgent)||""),E=_!=null&&_.itemUrl&&!x?"go":"search";return Ii({"aria-autocomplete":"both","aria-activedescendant":n.getState().isOpen&&n.getState().activeItemId!==null?"".concat(t.id,"-item-").concat(n.getState().activeItemId):void 0,"aria-controls":n.getState().isOpen?"".concat(t.id,"-list"):void 0,"aria-labelledby":"".concat(t.id,"-label"),value:n.getState().completion||n.getState().query,id:"".concat(t.id,"-input"),autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",enterKeyHint:E,spellCheck:"false",autoFocus:t.autoFocus,placeholder:t.placeholder,maxLength:m,type:"search",onChange:function(M){Sh(Ii({event:M,props:t,query:M.currentTarget.value.slice(0,m),refresh:r,store:n},i))},onKeyDown:function(M){(function(P){var I=P.event,D=P.props,O=P.refresh,F=P.store,$=f$(P,c$);if(I.key==="ArrowUp"||I.key==="ArrowDown"){var q=function(){var fe=D.environment.document.getElementById("".concat(D.id,"-item-").concat(F.getState().activeItemId));fe&&(fe.scrollIntoViewIfNeeded?fe.scrollIntoViewIfNeeded(!1):fe.scrollIntoView(!1))},K=function(){var fe=Ah(F.getState());if(F.getState().activeItemId!==null&&fe){var ye=fe.item,Ne=fe.itemInputValue,be=fe.itemUrl,et=fe.source;et.onActive(Eu({event:I,item:ye,itemInputValue:Ne,itemUrl:be,refresh:O,source:et,state:F.getState()},$))}};I.preventDefault(),F.getState().isOpen===!1&&(D.openOnFocus||Boolean(F.getState().query))?Sh(Eu({event:I,props:D,query:F.getState().query,refresh:O,store:F},$)).then(function(){F.dispatch(I.key,{nextActiveItemId:D.defaultActiveItemId}),K(),setTimeout(q,0)}):(F.dispatch(I.key,{}),K(),q())}else if(I.key==="Escape")I.preventDefault(),F.dispatch(I.key,null),F.pendingRequests.cancelAll();else if(I.key==="Tab")F.dispatch("blur",null),F.pendingRequests.cancelAll();else if(I.key==="Enter"){if(F.getState().activeItemId===null||F.getState().collections.every(function(fe){return fe.items.length===0}))return void(D.debug||F.pendingRequests.cancelAll());I.preventDefault();var Z=Ah(F.getState()),re=Z.item,ie=Z.itemInputValue,ce=Z.itemUrl,le=Z.source;if(I.metaKey||I.ctrlKey)ce!==void 0&&(le.onSelect(Eu({event:I,item:re,itemInputValue:ie,itemUrl:ce,refresh:O,source:le,state:F.getState()},$)),D.navigator.navigateNewTab({itemUrl:ce,item:re,state:F.getState()}));else if(I.shiftKey)ce!==void 0&&(le.onSelect(Eu({event:I,item:re,itemInputValue:ie,itemUrl:ce,refresh:O,source:le,state:F.getState()},$)),D.navigator.navigateNewWindow({itemUrl:ce,item:re,state:F.getState()}));else if(!I.altKey){if(ce!==void 0)return le.onSelect(Eu({event:I,item:re,itemInputValue:ie,itemUrl:ce,refresh:O,source:le,state:F.getState()},$)),void D.navigator.navigate({itemUrl:ce,item:re,state:F.getState()});Sh(Eu({event:I,nextState:{isOpen:!1},props:D,query:ie,refresh:O,store:F},$)).then(function(){le.onSelect(Eu({event:I,item:re,itemInputValue:ie,itemUrl:ce,refresh:O,source:le,state:F.getState()},$))})}}})(Ii({event:M,props:t,refresh:r,store:n},i))},onFocus:o,onBlur:ok,onClick:function(M){a.inputElement!==t.environment.document.activeElement||n.getState().isOpen||o(M)}},g)},getPanelProps:function(a){return Ii({onMouseDown:function(l){l.preventDefault()},onMouseLeave:function(){n.dispatch("mouseleave",null)}},a)},getListProps:function(a){return Ii({role:"listbox","aria-labelledby":"".concat(t.id,"-label"),id:"".concat(t.id,"-list")},a)},getItemProps:function(a){var l=a.item,o=a.source,h=Ed(a,g$);return Ii({id:"".concat(t.id,"-item-").concat(l.__autocomplete_id),role:"option","aria-selected":n.getState().activeItemId===l.__autocomplete_id,onMouseMove:function(d){if(l.__autocomplete_id!==n.getState().activeItemId){n.dispatch("mousemove",l.__autocomplete_id);var m=Ah(n.getState());if(n.getState().activeItemId!==null&&m){var g=m.item,_=m.itemInputValue,x=m.itemUrl,E=m.source;E.onActive(Ii({event:d,item:g,itemInputValue:_,itemUrl:x,refresh:r,source:E,state:n.getState()},i))}}},onMouseDown:function(d){d.preventDefault()},onClick:function(d){var m=o.getItemInputValue({item:l,state:n.getState()}),g=o.getItemUrl({item:l,state:n.getState()});(g?Promise.resolve():Sh(Ii({event:d,nextState:{isOpen:!1},props:t,query:m,refresh:r,store:n},i))).then(function(){o.onSelect(Ii({event:d,item:l,itemInputValue:m,itemUrl:g,refresh:r,source:o,state:n.getState()},i))})}},h)}}}function yA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function x$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yA(Object(r),!0).forEach(function(n){lk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b$(e){var t,r,n,i,a=e.plugins,l=e.options,o=(t=(((r=l.__autocomplete_metadata)===null||r===void 0?void 0:r.userAgents)||[])[0])===null||t===void 0?void 0:t.segment,h=o?lk({},o,Object.keys(((n=l.__autocomplete_metadata)===null||n===void 0?void 0:n.options)||{})):{};return{plugins:a.map(function(d){return{name:d.name,options:Object.keys(d.__autocomplete_pluginOptions||[])}}),options:x$({"autocomplete-core":Object.keys(l)},h),ua:qU.concat(((i=l.__autocomplete_metadata)===null||i===void 0?void 0:i.userAgents)||[])}}function xA(e){var t,r=e.state;return r.isOpen===!1||r.activeItemId===null?null:((t=Ah(r))===null||t===void 0?void 0:t.itemInputValue)||null}function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(n){w$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var S$=function(e,t){switch(t.type){case"setActiveItemId":case"mousemove":return Cr(Cr({},e),{},{activeItemId:t.payload});case"setQuery":return Cr(Cr({},e),{},{query:t.payload,completion:null});case"setCollections":return Cr(Cr({},e),{},{collections:t.payload});case"setIsOpen":return Cr(Cr({},e),{},{isOpen:t.payload});case"setStatus":return Cr(Cr({},e),{},{status:t.payload});case"setContext":return Cr(Cr({},e),{},{context:Cr(Cr({},e.context),t.payload)});case"ArrowDown":var r=Cr(Cr({},e),{},{activeItemId:t.payload.hasOwnProperty("nextActiveItemId")?t.payload.nextActiveItemId:aA(1,e.activeItemId,Ab(e),t.props.defaultActiveItemId)});return Cr(Cr({},r),{},{completion:xA({state:r})});case"ArrowUp":var n=Cr(Cr({},e),{},{activeItemId:aA(-1,e.activeItemId,Ab(e),t.props.defaultActiveItemId)});return Cr(Cr({},n),{},{completion:xA({state:n})});case"Escape":return e.isOpen?Cr(Cr({},e),{},{activeItemId:null,isOpen:!1,completion:null}):Cr(Cr({},e),{},{activeItemId:null,query:"",status:"idle",collections:[]});case"submit":return Cr(Cr({},e),{},{activeItemId:null,isOpen:!1,status:"idle"});case"reset":return Cr(Cr({},e),{},{activeItemId:t.props.openOnFocus===!0?t.props.defaultActiveItemId:null,status:"idle",query:""});case"focus":return Cr(Cr({},e),{},{activeItemId:t.props.defaultActiveItemId,isOpen:(t.props.openOnFocus||Boolean(e.query))&&t.props.shouldPanelOpen({state:e})});case"blur":return t.props.debug?e:Cr(Cr({},e),{},{isOpen:!1,activeItemId:null});case"mouseleave":return Cr(Cr({},e),{},{activeItemId:t.props.defaultActiveItemId});default:return"The reducer action ".concat(JSON.stringify(t.type)," is not supported."),e}};function wA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wA(Object(r),!0).forEach(function(n){T$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E$(e){var t=[],r=function(o,h){var d,m=typeof window<"u"?window:{},g=o.plugins||[];return nh(nh({debug:!1,openOnFocus:!1,placeholder:"",autoFocus:!1,defaultActiveItemId:null,stallThreshold:300,environment:m,shouldPanelOpen:function(_){return Ab(_.state)>0},reshape:function(_){return _.sources}},o),{},{id:(d=o.id)!==null&&d!==void 0?d:"autocomplete-".concat(GU++),plugins:g,initialState:nh({activeItemId:null,query:"",completion:null,collections:[],isOpen:!1,status:"idle",context:{}},o.initialState),onStateChange:function(_){var x;(x=o.onStateChange)===null||x===void 0||x.call(o,_),g.forEach(function(E){var M;return(M=E.onStateChange)===null||M===void 0?void 0:M.call(E,_)})},onSubmit:function(_){var x;(x=o.onSubmit)===null||x===void 0||x.call(o,_),g.forEach(function(E){var M;return(M=E.onSubmit)===null||M===void 0?void 0:M.call(E,_)})},onReset:function(_){var x;(x=o.onReset)===null||x===void 0||x.call(o,_),g.forEach(function(E){var M;return(M=E.onReset)===null||M===void 0?void 0:M.call(E,_)})},getSources:function(_){return Promise.all([].concat(e$(g.map(function(x){return x.getSources})),[o.getSources]).filter(Boolean).map(function(x){return ZU(x,_)})).then(function(x){return Np(x)}).then(function(x){return x.map(function(E){return nh(nh({},E),{},{onSelect:function(M){E.onSelect(M),h.forEach(function(P){var I;return(I=P.onSelect)===null||I===void 0?void 0:I.call(P,M)})},onActive:function(M){E.onActive(M),h.forEach(function(P){var I;return(I=P.onActive)===null||I===void 0?void 0:I.call(P,M)})}})})})},navigator:nh({navigate:function(_){var x=_.itemUrl;m.location.assign(x)},navigateNewTab:function(_){var x=_.itemUrl,E=m.open(x,"_blank","noopener");E==null||E.focus()},navigateNewWindow:function(_){var x=_.itemUrl;m.open(x,"_blank","noopener")}},o.navigator)})}(e,t),n=JU(S$,r,function(o){var h=o.prevState,d=o.state;r.onStateChange(Cu({prevState:h,state:d,refresh:l},i))}),i=function(o){var h=o.store;return{setActiveItemId:function(d){h.dispatch("setActiveItemId",d)},setQuery:function(d){h.dispatch("setQuery",d)},setCollections:function(d){var m=0,g=d.map(function(_){return jv(jv({},_),{},{items:Np(_.items).map(function(x){return jv(jv({},x),{},{__autocomplete_id:m++})})})});h.dispatch("setCollections",g)},setIsOpen:function(d){h.dispatch("setIsOpen",d)},setStatus:function(d){h.dispatch("setStatus",d)},setContext:function(d){h.dispatch("setContext",d)}}}({store:n}),a=y$(Cu({props:r,refresh:l,store:n},i));function l(){return Sh(Cu({event:new Event("input"),nextState:{isOpen:n.getState().isOpen},props:r,query:n.getState().query,refresh:l,store:n},i))}return r.plugins.forEach(function(o){var h;return(h=o.subscribe)===null||h===void 0?void 0:h.call(o,Cu(Cu({},i),{},{refresh:l,onSelect:function(d){t.push({onSelect:d})},onActive:function(d){t.push({onActive:d})}}))}),function(o){var h,d,m=o.metadata,g=o.environment;if(!((h=g.navigator)===null||h===void 0||(d=h.userAgent)===null||d===void 0)&&d.includes("Algolia Crawler")){var _=g.document.createElement("meta"),x=g.document.querySelector("head");_.name="algolia:metadata",setTimeout(function(){_.content=JSON.stringify(m),x.appendChild(_)},0)}}({metadata:b$({plugins:r.plugins,options:e}),environment:r.environment}),Cu(Cu({refresh:l},a),i)}function C$(e){var t=e.translations,r=(t===void 0?{}:t).searchByText,n=r===void 0?"Search by":r;return Te.createElement("a",{href:"https://www.algolia.com/ref/docsearch/?utm_source=".concat(window.location.hostname,"&utm_medium=referral&utm_content=powered_by&utm_campaign=docsearch"),target:"_blank",rel:"noopener noreferrer"},Te.createElement("span",{className:"DocSearch-Label"},n),Te.createElement("svg",{width:"77",height:"19","aria-label":"Algolia",role:"img"},Te.createElement("path",{d:"M2.5067 0h14.0245c1.384.001 2.5058 1.1205 2.5068 2.5017V16.5c-.0014 1.3808-1.1232 2.4995-2.5068 2.5H2.5067C1.1232 18.9995.0014 17.8808 0 16.5V2.4958A2.495 2.495 0 01.735.7294 2.505 2.505 0 012.5068 0zM37.95 15.0695c-3.7068.0168-3.7068-2.986-3.7068-3.4634L34.2372.3576 36.498 0v11.1794c0 .2715 0 1.9889 1.452 1.994v1.8961zm-9.1666-1.8388c.694 0 1.2086-.0397 1.5678-.1088v-2.2934a5.3639 5.3639 0 00-1.3303-.1679 4.8283 4.8283 0 00-.758.0582 2.2845 2.2845 0 00-.688.2024c-.2029.0979-.371.2362-.4919.4142-.1268.1788-.185.2826-.185.5533 0 .5297.185.8359.5205 1.0375.3355.2016.7928.3053 1.365.3053v-.0008zm-.1969-8.1817c.7463 0 1.3768.092 1.8856.2767.5088.1838.9195.4428 1.2204.7717.3068.334.5147.7777.6423 1.251.1327.4723.196.991.196 1.5603v5.798c-.5235.1036-1.05.192-1.5787.2649-.7048.1037-1.4976.156-2.3774.156-.5832 0-1.1215-.0582-1.6016-.167a3.385 3.385 0 01-1.2432-.5364 2.6034 2.6034 0 01-.8037-.9565c-.191-.3922-.29-.9447-.29-1.5208 0-.5533.11-.905.3246-1.2863a2.7351 2.7351 0 01.8849-.9329c.376-.242.8029-.415 1.2948-.5187a7.4517 7.4517 0 011.5381-.156 7.1162 7.1162 0 011.6667.2024V8.886c0-.259-.0296-.5061-.093-.7372a1.5847 1.5847 0 00-.3245-.6158 1.5079 1.5079 0 00-.6119-.4158 2.6788 2.6788 0 00-.966-.173c-.5206 0-.9948.0634-1.4283.1384a6.5481 6.5481 0 00-1.065.259l-.2712-1.849c.2831-.0986.7048-.1964 1.2491-.2943a9.2979 9.2979 0 011.752-.1501v.0008zm44.6597 8.1193c.6947 0 1.2086-.0405 1.567-.1097v-2.2942a5.3743 5.3743 0 00-1.3303-.1679c-.2485 0-.503.0177-.7573.0582a2.2853 2.2853 0 00-.688.2024 1.2333 1.2333 0 00-.4918.4142c-.1268.1788-.1843.2826-.1843.5533 0 .5297.1843.8359.5198 1.0375.3414.2066.7927.3053 1.365.3053v.0009zm-.191-8.1767c.7463 0 1.3768.0912 1.8856.2759.5087.1847.9195.4436 1.2204.7717.3.329.5147.7786.6414 1.251a5.7248 5.7248 0 01.197 1.562v5.7972c-.3466.0742-.874.1602-1.5788.2648-.7049.1038-1.4976.1552-2.3774.1552-.5832 0-1.1215-.0573-1.6016-.167a3.385 3.385 0 01-1.2432-.5356 2.6034 2.6034 0 01-.8038-.9565c-.191-.3922-.2898-.9447-.2898-1.5216 0-.5533.1098-.905.3245-1.2854a2.7373 2.7373 0 01.8849-.9338c.376-.2412.8029-.4141 1.2947-.5178a7.4545 7.4545 0 012.325-.1097c.2781.0287.5672.081.879.156v-.3686a2.7781 2.7781 0 00-.092-.738 1.5788 1.5788 0 00-.3246-.6166 1.5079 1.5079 0 00-.612-.415 2.6797 2.6797 0 00-.966-.1729c-.5205 0-.9947.0633-1.4282.1384a6.5608 6.5608 0 00-1.065.259l-.2712-1.8498c.283-.0979.7048-.1957 1.2491-.2935a9.8597 9.8597 0 011.752-.1494zm-6.79-1.072c-.7576.001-1.373-.6103-1.3759-1.3664 0-.755.6128-1.3664 1.376-1.3664.764 0 1.3775.6115 1.3775 1.3664s-.6195 1.3664-1.3776 1.3664zm1.1393 11.1507h-2.2726V5.3409l2.2734-.3568v10.0845l-.0008.0017zm-3.984 0c-3.707.0168-3.707-2.986-3.707-3.4642L59.7069.3576 61.9685 0v11.1794c0 .2715 0 1.9889 1.452 1.994V15.0703zm-7.3512-4.979c0-.975-.2138-1.7873-.6305-2.3516-.4167-.571-.9998-.852-1.747-.852-.7454 0-1.3302.281-1.7452.852-.4166.5702-.6195 1.3765-.6195 2.3516 0 .9851.208 1.6473.6254 2.2183.4158.576.9998.8587 1.7461.8587.7454 0 1.3303-.2885 1.747-.8595.4158-.5761.6237-1.2315.6237-2.2184v.0009zm2.3132-.006c0 .7609-.1099 1.3361-.3356 1.9654a4.654 4.654 0 01-.9533 1.6076A4.214 4.214 0 0155.613 14.69c-.579.2412-1.4697.3795-1.9143.3795-.4462-.005-1.3303-.1324-1.9033-.3795a4.307 4.307 0 01-1.474-1.0316c-.4115-.4445-.7293-.9801-.9609-1.6076a5.3423 5.3423 0 01-.3465-1.9653c0-.7608.104-1.493.3356-2.1155a4.683 4.683 0 01.9719-1.5958 4.3383 4.3383 0 011.479-1.0257c.5739-.242 1.2043-.3567 1.8864-.3567.6829 0 1.3125.1197 1.8906.3567a4.1245 4.1245 0 011.4816 1.0257 4.7587 4.7587 0 01.9592 1.5958c.2426.6225.3643 1.3547.3643 2.1155zm-17.0198 0c0 .9448.208 1.9932.6238 2.431.4166.4386.955.6579 1.6142.6579.3584 0 .6998-.0523 1.0176-.1502.3186-.0978.5721-.2134.775-.3517V7.0784a8.8706 8.8706 0 00-1.4926-.1906c-.8206-.0236-1.4452.312-1.8847.8468-.4335.5365-.6533 1.476-.6533 2.3516v-.0008zm6.2863 4.4485c0 1.5385-.3938 2.662-1.1866 3.3773-.791.7136-2.0005 1.0712-3.6308 1.0712-.5958 0-1.834-.1156-2.8228-.334l.3643-1.7865c.8282.173 1.9202.2193 2.4932.2193.9077 0 1.555-.1847 1.943-.5533.388-.3686.578-.916.578-1.643v-.3687a6.8289 6.8289 0 01-.8848.3349c-.3634.1096-.786.167-1.261.167-.6246 0-1.1917-.0979-1.7055-.2944a3.5554 3.5554 0 01-1.3244-.8645c-.3642-.3796-.6541-.8579-.8561-1.4289-.2028-.571-.3068-1.59-.3068-2.339 0-.7034.1099-1.5856.3245-2.1735.2198-.5871.5316-1.0949.9542-1.515.4167-.42.9255-.743 1.5213-.98a5.5923 5.5923 0 012.052-.3855c.7353 0 1.4114.092 2.0707.2024.6592.1088 1.2204.2236 1.6776.35v8.945-.0008zM11.5026 4.2418v-.6511c-.0005-.4553-.3704-.8241-.8266-.8241H8.749c-.4561 0-.826.3688-.8265.824v.669c0 .0742.0693.1264.1445.1096a6.0346 6.0346 0 011.6768-.2362 6.125 6.125 0 011.6202.2185.1116.1116 0 00.1386-.1097zm-5.2806.852l-.3296-.3282a.8266.8266 0 00-1.168 0l-.393.3922a.8199.8199 0 000 1.164l.3237.323c.0524.0515.1268.0397.1733-.0117.191-.259.3989-.507.6305-.7372.2374-.2362.48-.4437.7462-.6335.0575-.0354.0634-.1155.017-.1687zm3.5159 2.069v2.818c0 .081.0879.1392.1622.0987l2.5102-1.2964c.0574-.0287.0752-.0987.0464-.1552a3.1237 3.1237 0 00-2.603-1.574c-.0575 0-.115.0456-.115.1097l-.0008-.0009zm.0008 6.789c-2.0933.0005-3.7915-1.6912-3.7947-3.7804C5.9468 8.0821 7.6452 6.39 9.7387 6.391c2.0932-.0005 3.7911 1.6914 3.794 3.7804a3.7783 3.7783 0 01-1.1124 2.675 3.7936 3.7936 0 01-2.6824 1.1054h.0008zM9.738 4.8002c-1.9218 0-3.6975 1.0232-4.6584 2.6841a5.359 5.359 0 000 5.3683c.9609 1.661 2.7366 2.6841 4.6584 2.6841a5.3891 5.3891 0 003.8073-1.5725 5.3675 5.3675 0 001.578-3.7987 5.3574 5.3574 0 00-1.5771-3.797A5.379 5.379 0 009.7387 4.801l-.0008-.0008z",fill:"currentColor",fillRule:"evenodd"})))}function Wv(e){return Te.createElement("svg",{width:"15",height:"15","aria-label":e.ariaLabel,role:"img"},Te.createElement("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.2"},e.children))}function A$(e){var t=e.translations,r=t===void 0?{}:t,n=r.selectText,i=n===void 0?"to select":n,a=r.selectKeyAriaLabel,l=a===void 0?"Enter key":a,o=r.navigateText,h=o===void 0?"to navigate":o,d=r.navigateUpKeyAriaLabel,m=d===void 0?"Arrow up":d,g=r.navigateDownKeyAriaLabel,_=g===void 0?"Arrow down":g,x=r.closeText,E=x===void 0?"to close":x,M=r.closeKeyAriaLabel,P=M===void 0?"Escape key":M,I=r.searchByText,D=I===void 0?"Search by":I;return Te.createElement(Te.Fragment,null,Te.createElement("div",{className:"DocSearch-Logo"},Te.createElement(C$,{translations:{searchByText:D}})),Te.createElement("ul",{className:"DocSearch-Commands"},Te.createElement("li",null,Te.createElement("kbd",{className:"DocSearch-Commands-Key"},Te.createElement(Wv,{ariaLabel:l},Te.createElement("path",{d:"M12 3.53088v3c0 1-1 2-2 2H4M7 11.53088l-3-3 3-3"}))),Te.createElement("span",{className:"DocSearch-Label"},i)),Te.createElement("li",null,Te.createElement("kbd",{className:"DocSearch-Commands-Key"},Te.createElement(Wv,{ariaLabel:_},Te.createElement("path",{d:"M7.5 3.5v8M10.5 8.5l-3 3-3-3"}))),Te.createElement("kbd",{className:"DocSearch-Commands-Key"},Te.createElement(Wv,{ariaLabel:m},Te.createElement("path",{d:"M7.5 11.5v-8M10.5 6.5l-3-3-3 3"}))),Te.createElement("span",{className:"DocSearch-Label"},h)),Te.createElement("li",null,Te.createElement("kbd",{className:"DocSearch-Commands-Key"},Te.createElement(Wv,{ariaLabel:P},Te.createElement("path",{d:"M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993 0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016.8634 0 1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5c.032.5663-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864 0 1.6425 1.031 1.5443 2.2492h-2.956"}))),Te.createElement("span",{className:"DocSearch-Label"},E))))}function I$(e){var t=e.hit,r=e.children;return Te.createElement("a",{href:t.url},r)}function P$(){return Te.createElement("svg",{viewBox:"0 0 38 38",stroke:"currentColor",strokeOpacity:".5"},Te.createElement("g",{fill:"none",fillRule:"evenodd"},Te.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},Te.createElement("circle",{strokeOpacity:".3",cx:"18",cy:"18",r:"18"}),Te.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},Te.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))}function M$(){return Te.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},Te.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},Te.createElement("path",{d:"M3.18 6.6a8.23 8.23 0 1112.93 9.94h0a8.23 8.23 0 01-11.63 0"}),Te.createElement("path",{d:"M6.44 7.25H2.55V3.36M10.45 6v5.6M10.45 11.6L13 13"})))}function Ib(){return Te.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},Te.createElement("path",{d:"M10 10l5.09-5.09L10 10l5.09 5.09L10 10zm0 0L4.91 4.91 10 10l-5.09 5.09L10 10z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function D$(){return Te.createElement("svg",{className:"DocSearch-Hit-Select-Icon",width:"20",height:"20",viewBox:"0 0 20 20"},Te.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},Te.createElement("path",{d:"M18 3v4c0 2-2 4-4 4H2"}),Te.createElement("path",{d:"M8 17l-6-6 6-6"})))}var k$=function(){return Te.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},Te.createElement("path",{d:"M17 6v12c0 .52-.2 1-1 1H4c-.7 0-1-.33-1-1V2c0-.55.42-1 1-1h8l5 5zM14 8h-3.13c-.51 0-.87-.34-.87-.87V4",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))};function L$(e){switch(e.type){case"lvl1":return Te.createElement(k$,null);case"content":return Te.createElement(R$,null);default:return Te.createElement(O$,null)}}function O$(){return Te.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},Te.createElement("path",{d:"M13 13h4-4V8H7v5h6v4-4H7V8H3h4V3v5h6V3v5h4-4v5zm-6 0v4-4H3h4z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"}))}function R$(){return Te.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},Te.createElement("path",{d:"M17 5H3h14zm0 5H3h14zm0 5H3h14z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function SA(){return Te.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20"},Te.createElement("path",{d:"M10 14.2L5 17l1-5.6-4-4 5.5-.7 2.5-5 2.5 5 5.6.8-4 4 .9 5.5z",stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinejoin:"round"}))}function z$(){return Te.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Te.createElement("path",{d:"M19 4.8a16 16 0 00-2-1.2m-3.3-1.2A16 16 0 001.1 4.7M16.7 8a12 12 0 00-2.8-1.4M10 6a12 12 0 00-6.7 2M12.3 14.7a4 4 0 00-4.5 0M14.5 11.4A8 8 0 0010 10M3 16L18 2M10 18h0"}))}function B$(){return Te.createElement("svg",{width:"40",height:"40",viewBox:"0 0 20 20",fill:"none",fillRule:"evenodd",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"},Te.createElement("path",{d:"M15.5 4.8c2 3 1.7 7-1 9.7h0l4.3 4.3-4.3-4.3a7.8 7.8 0 01-9.8 1m-2.2-2.2A7.8 7.8 0 0113.2 2.4M2 18L18 2"}))}function F$(e){var t=e.translations,r=t===void 0?{}:t,n=r.titleText,i=n===void 0?"Unable to fetch results":n,a=r.helpText,l=a===void 0?"You might want to check your network connection.":a;return Te.createElement("div",{className:"DocSearch-ErrorScreen"},Te.createElement("div",{className:"DocSearch-Screen-Icon"},Te.createElement(z$,null)),Te.createElement("p",{className:"DocSearch-Title"},i),Te.createElement("p",{className:"DocSearch-Help"},l))}var N$=["translations"];function V$(e){return function(t){if(Array.isArray(t))return p1(t)}(e)||function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}(e)||function(t,r){if(!!t){if(typeof t=="string")return p1(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p1(t,r)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function p1(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function U$(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function $$(e){var t=e.translations,r=t===void 0?{}:t,n=U$(e,N$),i=r.noResultsText,a=i===void 0?"No results for":i,l=r.suggestedQueryText,o=l===void 0?"Try searching for":l,h=r.reportMissingResultsText,d=h===void 0?"Believe this query should return results?":h,m=r.reportMissingResultsLinkText,g=m===void 0?"Let us know.":m,_=n.state.context.searchSuggestions;return Te.createElement("div",{className:"DocSearch-NoResults"},Te.createElement("div",{className:"DocSearch-Screen-Icon"},Te.createElement(B$,null)),Te.createElement("p",{className:"DocSearch-Title"},a,' "',Te.createElement("strong",null,n.state.query),'"'),_&&_.length>0&&Te.createElement("div",{className:"DocSearch-NoResults-Prefill-List"},Te.createElement("p",{className:"DocSearch-Help"},o,":"),Te.createElement("ul",null,_.slice(0,3).reduce(function(x,E){return[].concat(V$(x),[Te.createElement("li",{key:E},Te.createElement("button",{className:"DocSearch-Prefill",key:E,type:"button",onClick:function(){n.setQuery(E.toLowerCase()+" "),n.refresh(),n.inputRef.current.focus()}},E))])},[]))),n.getMissingResultsUrl&&Te.createElement("p",{className:"DocSearch-Help"},"".concat(d," "),Te.createElement("a",{href:n.getMissingResultsUrl({query:n.state.query}),target:"_blank",rel:"noopener noreferrer"},g)))}var j$=["hit","attribute","tagName"];function TA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function EA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TA(Object(r),!0).forEach(function(n){H$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function H$(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G$(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function CA(e,t){return t.split(".").reduce(function(r,n){return r!=null&&r[n]?r[n]:null},e)}function ih(e){var t=e.hit,r=e.attribute,n=e.tagName;return Yo(n===void 0?"span":n,EA(EA({},G$(e,j$)),{},{dangerouslySetInnerHTML:{__html:CA(t,"_snippetResult.".concat(r,".value"))||CA(t,r)}}))}function AA(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var a,l,o=[],h=!0,d=!1;try{for(i=i.call(r);!(h=(a=i.next()).done)&&(o.push(a.value),!n||o.length!==n);h=!0);}catch(m){d=!0,l=m}finally{try{h||i.return==null||i.return()}finally{if(d)throw l}}return o}}(e,t)||function(r,n){if(!!r){if(typeof r=="string")return IA(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return IA(r,n)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function IA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w_(){return w_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w_.apply(this,arguments)}function Pb(e){return e.collection&&e.collection.items.length!==0?Te.createElement("section",{className:"DocSearch-Hits"},Te.createElement("div",{className:"DocSearch-Hit-source"},e.title),Te.createElement("ul",e.getListProps(),e.collection.items.map(function(t,r){return Te.createElement(q$,w_({key:[e.title,t.objectID].join(":"),item:t,index:r},e))}))):null}function q$(e){var t=e.item,r=e.index,n=e.renderIcon,i=e.renderAction,a=e.getItemProps,l=e.onItemClick,o=e.collection,h=e.hitComponent,d=AA(Te.useState(!1),2),m=d[0],g=d[1],_=AA(Te.useState(!1),2),x=_[0],E=_[1],M=Te.useRef(null),P=h;return Te.createElement("li",w_({className:["DocSearch-Hit",t.__docsearch_parent&&"DocSearch-Hit--Child",m&&"DocSearch-Hit--deleting",x&&"DocSearch-Hit--favoriting"].filter(Boolean).join(" "),onTransitionEnd:function(){M.current&&M.current()}},a({item:t,source:o.source,onClick:function(){l(t)}})),Te.createElement(P,{hit:t},Te.createElement("div",{className:"DocSearch-Hit-Container"},n({item:t,index:r}),t.hierarchy[t.type]&&t.type==="lvl1"&&Te.createElement("div",{className:"DocSearch-Hit-content-wrapper"},Te.createElement(ih,{className:"DocSearch-Hit-title",hit:t,attribute:"hierarchy.lvl1"}),t.content&&Te.createElement(ih,{className:"DocSearch-Hit-path",hit:t,attribute:"content"})),t.hierarchy[t.type]&&(t.type==="lvl2"||t.type==="lvl3"||t.type==="lvl4"||t.type==="lvl5"||t.type==="lvl6")&&Te.createElement("div",{className:"DocSearch-Hit-content-wrapper"},Te.createElement(ih,{className:"DocSearch-Hit-title",hit:t,attribute:"hierarchy.".concat(t.type)}),Te.createElement(ih,{className:"DocSearch-Hit-path",hit:t,attribute:"hierarchy.lvl1"})),t.type==="content"&&Te.createElement("div",{className:"DocSearch-Hit-content-wrapper"},Te.createElement(ih,{className:"DocSearch-Hit-title",hit:t,attribute:"content"}),Te.createElement(ih,{className:"DocSearch-Hit-path",hit:t,attribute:"hierarchy.lvl1"})),i({item:t,runDeleteTransition:function(I){g(!0),M.current=I},runFavoriteTransition:function(I){E(!0),M.current=I}}))))}function PA(e,t){return e.reduce(function(r,n){var i=t(n);return r.hasOwnProperty(i)||(r[i]=[]),r[i].length<5&&r[i].push(n),r},{})}function MA(e){return e}function W$(){}var uk=/(<mark>|<\/mark>)/g,Z$=RegExp(uk.source);function ck(e){var t,r,n,i,a,l=e;if(!l.__docsearch_parent&&!e._highlightResult)return e.hierarchy.lvl0;var o=((l.__docsearch_parent?(t=l.__docsearch_parent)===null||t===void 0||(r=t._highlightResult)===null||r===void 0||(n=r.hierarchy)===null||n===void 0?void 0:n.lvl0:(i=e._highlightResult)===null||i===void 0||(a=i.hierarchy)===null||a===void 0?void 0:a.lvl0)||{}).value;return o&&Z$.test(o)?o.replace(uk,""):o}function Mb(){return Mb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mb.apply(this,arguments)}function X$(e){return Te.createElement("div",{className:"DocSearch-Dropdown-Container"},e.state.collections.map(function(t){if(t.items.length===0)return null;var r=ck(t.items[0]);return Te.createElement(Pb,Mb({},e,{key:t.source.sourceId,title:r,collection:t,renderIcon:function(n){var i,a=n.item,l=n.index;return Te.createElement(Te.Fragment,null,a.__docsearch_parent&&Te.createElement("svg",{className:"DocSearch-Hit-Tree",viewBox:"0 0 24 54"},Te.createElement("g",{stroke:"currentColor",fill:"none",fillRule:"evenodd",strokeLinecap:"round",strokeLinejoin:"round"},a.__docsearch_parent!==((i=t.items[l+1])===null||i===void 0?void 0:i.__docsearch_parent)?Te.createElement("path",{d:"M8 6v21M20 27H8.3"}):Te.createElement("path",{d:"M8 6v42M20 27H8.3"}))),Te.createElement("div",{className:"DocSearch-Hit-icon"},Te.createElement(L$,{type:a.type})))},renderAction:function(){return Te.createElement("div",{className:"DocSearch-Hit-action"},Te.createElement(D$,null))}}))}),e.resultsFooterComponent&&Te.createElement("section",{className:"DocSearch-HitsFooter"},Te.createElement(e.resultsFooterComponent,{state:e.state})))}var Y$=["translations"];function S_(){return S_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},S_.apply(this,arguments)}function K$(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function J$(e){var t=e.translations,r=t===void 0?{}:t,n=K$(e,Y$),i=r.recentSearchesTitle,a=i===void 0?"Recent":i,l=r.noRecentSearchesText,o=l===void 0?"No recent searches":l,h=r.saveRecentSearchButtonTitle,d=h===void 0?"Save this search":h,m=r.removeRecentSearchButtonTitle,g=m===void 0?"Remove this search from history":m,_=r.favoriteSearchesTitle,x=_===void 0?"Favorite":_,E=r.removeFavoriteSearchButtonTitle,M=E===void 0?"Remove this search from favorites":E;return n.state.status==="idle"&&n.hasCollections===!1?n.disableUserPersonalization?null:Te.createElement("div",{className:"DocSearch-StartScreen"},Te.createElement("p",{className:"DocSearch-Help"},o)):n.hasCollections===!1?null:Te.createElement("div",{className:"DocSearch-Dropdown-Container"},Te.createElement(Pb,S_({},n,{title:a,collection:n.state.collections[0],renderIcon:function(){return Te.createElement("div",{className:"DocSearch-Hit-icon"},Te.createElement(M$,null))},renderAction:function(P){var I=P.item,D=P.runFavoriteTransition,O=P.runDeleteTransition;return Te.createElement(Te.Fragment,null,Te.createElement("div",{className:"DocSearch-Hit-action"},Te.createElement("button",{className:"DocSearch-Hit-action-button",title:d,type:"submit",onClick:function(F){F.preventDefault(),F.stopPropagation(),D(function(){n.favoriteSearches.add(I),n.recentSearches.remove(I),n.refresh()})}},Te.createElement(SA,null))),Te.createElement("div",{className:"DocSearch-Hit-action"},Te.createElement("button",{className:"DocSearch-Hit-action-button",title:g,type:"submit",onClick:function(F){F.preventDefault(),F.stopPropagation(),O(function(){n.recentSearches.remove(I),n.refresh()})}},Te.createElement(Ib,null))))}})),Te.createElement(Pb,S_({},n,{title:x,collection:n.state.collections[1],renderIcon:function(){return Te.createElement("div",{className:"DocSearch-Hit-icon"},Te.createElement(SA,null))},renderAction:function(P){var I=P.item,D=P.runDeleteTransition;return Te.createElement("div",{className:"DocSearch-Hit-action"},Te.createElement("button",{className:"DocSearch-Hit-action-button",title:M,type:"submit",onClick:function(O){O.preventDefault(),O.stopPropagation(),D(function(){n.favoriteSearches.remove(I),n.refresh()})}},Te.createElement(Ib,null)))}})))}var Q$=["translations"];function T_(){return T_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T_.apply(this,arguments)}function ej(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var tj=Te.memo(function(e){var t=e.translations,r=t===void 0?{}:t,n=ej(e,Q$);if(n.state.status==="error")return Te.createElement(F$,{translations:r==null?void 0:r.errorScreen});var i=n.state.collections.some(function(a){return a.items.length>0});return n.state.query?i===!1?Te.createElement($$,T_({},n,{translations:r==null?void 0:r.noResultsScreen})):Te.createElement(X$,n):Te.createElement(J$,T_({},n,{hasCollections:i,translations:r==null?void 0:r.startScreen}))},function(e,t){return t.state.status==="loading"||t.state.status==="stalled"}),rj=["translations"];function E_(){return E_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E_.apply(this,arguments)}function nj(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ij(e){var t=e.translations,r=t===void 0?{}:t,n=nj(e,rj),i=r.resetButtonTitle,a=i===void 0?"Clear the query":i,l=r.resetButtonAriaLabel,o=l===void 0?"Clear the query":l,h=r.cancelButtonText,d=h===void 0?"Cancel":h,m=r.cancelButtonAriaLabel,g=m===void 0?"Cancel":m,_=n.getFormProps({inputElement:n.inputRef.current}).onReset;return Te.useEffect(function(){n.autoFocus&&n.inputRef.current&&n.inputRef.current.focus()},[n.autoFocus,n.inputRef]),Te.useEffect(function(){n.isFromSelection&&n.inputRef.current&&n.inputRef.current.select()},[n.isFromSelection,n.inputRef]),Te.createElement(Te.Fragment,null,Te.createElement("form",{className:"DocSearch-Form",onSubmit:function(x){x.preventDefault()},onReset:_},Te.createElement("label",E_({className:"DocSearch-MagnifierLabel"},n.getLabelProps()),Te.createElement(ak,null)),Te.createElement("div",{className:"DocSearch-LoadingIndicator"},Te.createElement(P$,null)),Te.createElement("input",E_({className:"DocSearch-Input",ref:n.inputRef},n.getInputProps({inputElement:n.inputRef.current,autoFocus:n.autoFocus,maxLength:64}))),Te.createElement("button",{type:"reset",title:a,className:"DocSearch-Reset","aria-label":o,hidden:!n.state.query},Te.createElement(Ib,null))),Te.createElement("button",{className:"DocSearch-Cancel",type:"reset","aria-label":g,onClick:n.onClose},d))}var aj=["_highlightResult","_snippetResult"];function oj(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function sj(e){return function(){var t="__TEST_KEY__";try{return localStorage.setItem(t,""),localStorage.removeItem(t),!0}catch{return!1}}()===!1?{setItem:function(){},getItem:function(){return[]}}:{setItem:function(t){return window.localStorage.setItem(e,JSON.stringify(t))},getItem:function(){var t=window.localStorage.getItem(e);return t?JSON.parse(t):[]}}}function DA(e){var t=e.key,r=e.limit,n=r===void 0?5:r,i=sj(t),a=i.getItem().slice(0,n);return{add:function(l){var o=l,h=(o._highlightResult,o._snippetResult,oj(o,aj)),d=a.findIndex(function(m){return m.objectID===h.objectID});d>-1&&a.splice(d,1),a.unshift(h),a=a.slice(0,n),i.setItem(a)},remove:function(l){a=a.filter(function(o){return o.objectID!==l.objectID}),i.setItem(a)},getAll:function(){return a}}}var lj=["facetName","facetQuery"];function uj(e){var t,r="algoliasearch-client-js-".concat(e.key),n=function(){return t===void 0&&(t=e.localStorage||window.localStorage),t},i=function(){return JSON.parse(n().getItem(r)||"{}")};return{get:function(a,l){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){var h=JSON.stringify(a),d=i()[h];return Promise.all([d||l(),d!==void 0])}).then(function(h){var d=__(h,2),m=d[0],g=d[1];return Promise.all([m,g||o.miss(m)])}).then(function(h){return __(h,1)[0]})},set:function(a,l){return Promise.resolve().then(function(){var o=i();return o[JSON.stringify(a)]=l,n().setItem(r,JSON.stringify(o)),l})},delete:function(a){return Promise.resolve().then(function(){var l=i();delete l[JSON.stringify(a)],n().setItem(r,JSON.stringify(l))})},clear:function(){return Promise.resolve().then(function(){n().removeItem(r)})}}}function Yd(e){var t=y_(e.caches),r=t.shift();return r===void 0?{get:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return i().then(function(l){return Promise.all([l,a.miss(l)])}).then(function(l){return __(l,1)[0]})},set:function(n,i){return Promise.resolve(i)},delete:function(n){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(n,i,a).catch(function(){return Yd({caches:t}).get(n,i,a)})},set:function(n,i){return r.set(n,i).catch(function(){return Yd({caches:t}).set(n,i)})},delete:function(n){return r.delete(n).catch(function(){return Yd({caches:t}).delete(n)})},clear:function(){return r.clear().catch(function(){return Yd({caches:t}).clear()})}}}function m1(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(r);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var l=n(),o=i&&i.miss||function(){return Promise.resolve()};return l.then(function(h){return o(h)}).then(function(){return l})},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(r){return delete t[JSON.stringify(r)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function cj(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function hk(e,t){return t&&Object.keys(t).forEach(function(r){e[r]=t[r](e)}),e}function dy(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=0;return e.replace(/%s/g,function(){return encodeURIComponent(r[i++])})}var zg={WithinQueryParameters:0,WithinHeaders:1};function kA(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach(function(i){["timeout","headers","queryParameters","data","cacheable"].indexOf(i)===-1&&(n[i]=r[i])}),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var Ih={Read:1,Write:2,Any:3},fk=1,hj=2,dk=3;function pk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fk;return Yr(Yr({},e),{},{status:t,lastUpdate:Date.now()})}function mk(e){return typeof e=="string"?{protocol:"https",url:e,accept:Ih.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||Ih.Any}}var LA="GET",py="POST";function fj(e,t){return Promise.all(t.map(function(r){return e.get(r,function(){return Promise.resolve(pk(r))})})).then(function(r){var n=r.filter(function(l){return function(o){return o.status===fk||Date.now()-o.lastUpdate>12e4}(l)}),i=r.filter(function(l){return function(o){return o.status===dk&&Date.now()-o.lastUpdate<=12e4}(l)}),a=[].concat(y_(n),y_(i));return{getTimeout:function(l,o){return(i.length===0&&l===0?1:i.length+3+l)*o},statelessHosts:a.length>0?a.map(function(l){return mk(l)}):t}})}function OA(e,t,r,n){var i=[],a=function(_,x){if(!(_.method===LA||_.data===void 0&&x.data===void 0)){var E=Array.isArray(_.data)?_.data:Yr(Yr({},_.data),x.data);return JSON.stringify(E)}}(r,n),l=function(_,x){var E=Yr(Yr({},_.headers),x.headers),M={};return Object.keys(E).forEach(function(P){var I=E[P];M[P.toLowerCase()]=I}),M}(e,n),o=r.method,h=r.method!==LA?{}:Yr(Yr({},r.data),n.data),d=Yr(Yr(Yr({"x-algolia-agent":e.userAgent.value},e.queryParameters),h),n.queryParameters),m=0,g=function _(x,E){var M=x.pop();if(M===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:RA(i)};var P={data:a,headers:l,method:o,url:pj(M,r.path,d),connectTimeout:E(m,e.timeouts.connect),responseTimeout:E(m,n.timeout)},I=function(O){var F={request:P,response:O,host:M,triesLeft:x.length};return i.push(F),F},D={onSucess:function(O){return function(F){try{return JSON.parse(F.content)}catch($){throw function(q,K){return{name:"DeserializationError",message:q,response:K}}($.message,F)}}(O)},onRetry:function(O){var F=I(O);return O.isTimedOut&&m++,Promise.all([e.logger.info("Retryable failure",gk(F)),e.hostsCache.set(M,pk(M,O.isTimedOut?dk:hj))]).then(function(){return _(x,E)})},onFail:function(O){throw I(O),function(F,$){var q=F.content,K=F.status,Z=q;try{Z=JSON.parse(q).message}catch{}return function(re,ie,ce){return{name:"ApiError",message:re,status:ie,transporterStackTrace:ce}}(Z,K,$)}(O,RA(i))}};return e.requester.send(P).then(function(O){return function(F,$){return function(q){var K=q.status;return q.isTimedOut||function(Z){var re=Z.isTimedOut,ie=Z.status;return!re&&~~ie==0}(q)||~~(K/100)!=2&&~~(K/100)!=4}(F)?$.onRetry(F):~~(F.status/100)==2?$.onSucess(F):$.onFail(F)}(O,D)})};return fj(e.hostsCache,t).then(function(_){return g(y_(_.statelessHosts).reverse(),_.getTimeout)})}function dj(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(r){var n="; ".concat(r.segment).concat(r.version!==void 0?" (".concat(r.version,")"):"");return t.value.indexOf(n)===-1&&(t.value="".concat(t.value).concat(n)),t}};return t}function pj(e,t,r){var n=vk(r),i="".concat(e.protocol,"://").concat(e.url,"/").concat(t.charAt(0)==="/"?t.substr(1):t);return n.length&&(i+="?".concat(n)),i}function vk(e){return Object.keys(e).map(function(t){return dy("%s=%s",t,(r=e[t],Object.prototype.toString.call(r)==="[object Object]"||Object.prototype.toString.call(r)==="[object Array]"?JSON.stringify(e[t]):e[t]));var r}).join("&")}function RA(e){return e.map(function(t){return gk(t)})}function gk(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return Yr(Yr({},e),{},{request:Yr(Yr({},e.request),{},{headers:Yr(Yr({},e.request.headers),t)})})}var mj=function(e){var t=e.appId,r=function(a,l,o){var h={"x-algolia-api-key":o,"x-algolia-application-id":l};return{headers:function(){return a===zg.WithinHeaders?h:{}},queryParameters:function(){return a===zg.WithinQueryParameters?h:{}}}}(e.authMode!==void 0?e.authMode:zg.WithinHeaders,t,e.apiKey),n=function(a){var l=a.hostsCache,o=a.logger,h=a.requester,d=a.requestsCache,m=a.responsesCache,g=a.timeouts,_=a.userAgent,x=a.hosts,E=a.queryParameters,M={hostsCache:l,logger:o,requester:h,requestsCache:d,responsesCache:m,timeouts:g,userAgent:_,headers:a.headers,queryParameters:E,hosts:x.map(function(P){return mk(P)}),read:function(P,I){var D=kA(I,M.timeouts.read),O=function(){return OA(M,M.hosts.filter(function($){return($.accept&Ih.Read)!=0}),P,D)};if((D.cacheable!==void 0?D.cacheable:P.cacheable)!==!0)return O();var F={request:P,mappedRequestOptions:D,transporter:{queryParameters:M.queryParameters,headers:M.headers}};return M.responsesCache.get(F,function(){return M.requestsCache.get(F,function(){return M.requestsCache.set(F,O()).then(function($){return Promise.all([M.requestsCache.delete(F),$])},function($){return Promise.all([M.requestsCache.delete(F),Promise.reject($)])}).then(function($){var q=__($,2);return q[0],q[1]})})},{miss:function($){return M.responsesCache.set(F,$)}})},write:function(P,I){return OA(M,M.hosts.filter(function(D){return(D.accept&Ih.Write)!=0}),P,kA(I,M.timeouts.write))}};return M}(Yr(Yr({hosts:[{url:"".concat(t,"-dsn.algolia.net"),accept:Ih.Read},{url:"".concat(t,".algolia.net"),accept:Ih.Write}].concat(cj([{url:"".concat(t,"-1.algolianet.com")},{url:"".concat(t,"-2.algolianet.com")},{url:"".concat(t,"-3.algolianet.com")}]))},e),{},{headers:Yr(Yr(Yr({},r.headers()),{"content-type":"application/x-www-form-urlencoded"}),e.headers),queryParameters:Yr(Yr({},r.queryParameters()),e.queryParameters)})),i={transporter:n,appId:t,addAlgoliaAgent:function(a,l){n.userAgent.add({segment:a,version:l})},clearCache:function(){return Promise.all([n.requestsCache.clear(),n.responsesCache.clear()]).then(function(){})}};return hk(i,e.methods)},_k=function(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return hk(n,r.methods)}},zA=function(e){return function(t,r){var n=t.map(function(i){return Yr(Yr({},i),{},{params:vk(i.params||{})})});return e.transporter.read({method:py,path:"1/indexes/*/queries",data:{requests:n},cacheable:!0},r)}},BA=function(e){return function(t,r){return Promise.all(t.map(function(n){var i=n.params,a=i.facetName,l=i.facetQuery,o=SU(i,lj);return _k(e)(n.indexName,{methods:{searchForFacetValues:yk}}).searchForFacetValues(a,l,Yr(Yr({},r),o))}))}},vj=function(e){return function(t,r,n){return e.transporter.read({method:py,path:dy("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n)}},gj=function(e){return function(t,r){return e.transporter.read({method:py,path:dy("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},r)}},yk=function(e){return function(t,r,n){return e.transporter.read({method:py,path:dy("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},_j=1,yj=2,xj=3;function xk(e,t,r){var n,i={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(a){return new Promise(function(l){var o=new XMLHttpRequest;o.open(a.method,a.url,!0),Object.keys(a.headers).forEach(function(g){return o.setRequestHeader(g,a.headers[g])});var h,d=function(g,_){return setTimeout(function(){o.abort(),l({status:0,content:_,isTimedOut:!0})},1e3*g)},m=d(a.connectTimeout,"Connection timeout");o.onreadystatechange=function(){o.readyState>o.OPENED&&h===void 0&&(clearTimeout(m),h=d(a.responseTimeout,"Socket timeout"))},o.onerror=function(){o.status===0&&(clearTimeout(m),clearTimeout(h),l({content:o.responseText||"Network request failed",status:o.status,isTimedOut:!1}))},o.onload=function(){clearTimeout(m),clearTimeout(h),l({content:o.responseText,status:o.status,isTimedOut:!1})},o.send(a.data)})}},logger:(n=xj,{debug:function(a,l){return _j>=n&&console.debug(a,l),Promise.resolve()},info:function(a,l){return yj>=n&&console.info(a,l),Promise.resolve()},error:function(a,l){return console.error(a,l),Promise.resolve()}}),responsesCache:m1(),requestsCache:m1({serializable:!1}),hostsCache:Yd({caches:[uj({key:"".concat("4.8.5","-").concat(e)}),m1()]}),userAgent:dj("4.8.5").add({segment:"Browser",version:"lite"}),authMode:zg.WithinQueryParameters};return mj(Yr(Yr(Yr({},i),r),{},{methods:{search:zA,searchForFacetValues:BA,multipleQueries:zA,multipleSearchForFacetValues:BA,initIndex:function(a){return function(l){return _k(a)(l,{methods:{search:gj,searchForFacetValues:yk,findAnswers:vj}})}}}}))}xk.version="4.8.5";var bj=["footer","searchBox"];function mp(){return mp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mp.apply(this,arguments)}function FA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function v1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(r),!0).forEach(function(n){wj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sj(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var a,l,o=[],h=!0,d=!1;try{for(i=i.call(r);!(h=(a=i.next()).done)&&(o.push(a.value),!n||o.length!==n);h=!0);}catch(m){d=!0,l=m}finally{try{h||i.return==null||i.return()}finally{if(d)throw l}}return o}}(e,t)||function(r,n){if(!!r){if(typeof r=="string")return NA(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return NA(r,n)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function NA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tj(e,t){if(e==null)return{};var r,n,i=function(l,o){if(l==null)return{};var h,d,m={},g=Object.keys(l);for(d=0;d<g.length;d++)h=g[d],o.indexOf(h)>=0||(m[h]=l[h]);return m}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function Ej(e){var t=e.appId,r=e.apiKey,n=e.indexName,i=e.placeholder,a=i===void 0?"Search docs":i,l=e.searchParameters,o=e.onClose,h=o===void 0?W$:o,d=e.transformItems,m=d===void 0?MA:d,g=e.hitComponent,_=g===void 0?I$:g,x=e.resultsFooterComponent,E=x===void 0?function(){return null}:x,M=e.navigator,P=e.initialScrollY,I=P===void 0?0:P,D=e.transformSearchClient,O=D===void 0?MA:D,F=e.disableUserPersonalization,$=F!==void 0&&F,q=e.initialQuery,K=q===void 0?"":q,Z=e.translations,re=Z===void 0?{}:Z,ie=e.getMissingResultsUrl,ce=re.footer,le=re.searchBox,fe=Tj(re,bj),ye=Sj(Te.useState({query:"",collections:[],completion:null,context:{},isOpen:!1,activeItemId:null,status:"idle"}),2),Ne=ye[0],be=ye[1],et=Te.useRef(null),tt=Te.useRef(null),wt=Te.useRef(null),Rt=Te.useRef(null),Qt=Te.useRef(null),Ut=Te.useRef(10),vr=Te.useRef(typeof window<"u"?window.getSelection().toString().slice(0,64):"").current,yr=Te.useRef(K||vr).current,$e=function(oe,ve,De){return Te.useMemo(function(){var Ge=xk(oe,ve);return Ge.addAlgoliaAgent("docsearch","3.2.1"),/docsearch.js \(.*\)/.test(Ge.transporter.userAgent.value)===!1&&Ge.addAlgoliaAgent("docsearch-react","3.2.1"),De(Ge)},[oe,ve,De])}(t,r,O),pt=Te.useRef(DA({key:"__DOCSEARCH_FAVORITE_SEARCHES__".concat(n),limit:10})).current,it=Te.useRef(DA({key:"__DOCSEARCH_RECENT_SEARCHES__".concat(n),limit:pt.getAll().length===0?7:4})).current,dt=Te.useCallback(function(oe){if(!$){var ve=oe.type==="content"?oe.__docsearch_parent:oe;ve&&pt.getAll().findIndex(function(De){return De.objectID===ve.objectID})===-1&&it.add(ve)}},[pt,it,$]),Dt=Te.useMemo(function(){return E$({id:"docsearch",defaultActiveItemId:0,placeholder:a,openOnFocus:!0,initialState:{query:yr,context:{searchSuggestions:[]}},navigator:M,onStateChange:function(oe){be(oe.state)},getSources:function(oe){var ve=oe.query,De=oe.state,Ge=oe.setContext,Xe=oe.setStatus;return ve?$e.search([{query:ve,indexName:n,params:v1({attributesToRetrieve:["hierarchy.lvl0","hierarchy.lvl1","hierarchy.lvl2","hierarchy.lvl3","hierarchy.lvl4","hierarchy.lvl5","hierarchy.lvl6","content","type","url"],attributesToSnippet:["hierarchy.lvl1:".concat(Ut.current),"hierarchy.lvl2:".concat(Ut.current),"hierarchy.lvl3:".concat(Ut.current),"hierarchy.lvl4:".concat(Ut.current),"hierarchy.lvl5:".concat(Ut.current),"hierarchy.lvl6:".concat(Ut.current),"content:".concat(Ut.current)],snippetEllipsisText:"\u2026",highlightPreTag:"<mark>",highlightPostTag:"</mark>",hitsPerPage:20},l)}]).catch(function(Ye){throw Ye.name==="RetryError"&&Xe("error"),Ye}).then(function(Ye){var qe=Ye.results[0],Qe=qe.hits,ut=qe.nbHits,nt=PA(Qe,function($t){return ck($t)});return De.context.searchSuggestions.length<Object.keys(nt).length&&Ge({searchSuggestions:Object.keys(nt)}),Ge({nbHits:ut}),Object.values(nt).map(function($t,Mt){return{sourceId:"hits".concat(Mt),onSelect:function(It){var Wt=It.item,er=It.event;dt(Wt),er.shiftKey||er.ctrlKey||er.metaKey||h()},getItemUrl:function(It){return It.item.url},getItems:function(){return Object.values(PA($t,function(It){return It.hierarchy.lvl1})).map(m).map(function(It){return It.map(function(Wt){return v1(v1({},Wt),{},{__docsearch_parent:Wt.type!=="lvl1"&&It.find(function(er){return er.type==="lvl1"&&er.hierarchy.lvl1===Wt.hierarchy.lvl1})})})}).flat()}}})}):$?[]:[{sourceId:"recentSearches",onSelect:function(Ye){var qe=Ye.item,Qe=Ye.event;dt(qe),Qe.shiftKey||Qe.ctrlKey||Qe.metaKey||h()},getItemUrl:function(Ye){return Ye.item.url},getItems:function(){return it.getAll()}},{sourceId:"favoriteSearches",onSelect:function(Ye){var qe=Ye.item,Qe=Ye.event;dt(qe),Qe.shiftKey||Qe.ctrlKey||Qe.metaKey||h()},getItemUrl:function(Ye){return Ye.item.url},getItems:function(){return pt.getAll()}}]}})},[n,l,$e,h,it,pt,dt,yr,a,M,m,$]),qt=Dt.getEnvironmentProps,ot=Dt.getRootProps,lt=Dt.refresh;return function(oe){var ve=oe.getEnvironmentProps,De=oe.panelElement,Ge=oe.formElement,Xe=oe.inputElement;Te.useEffect(function(){if(De&&Ge&&Xe){var Ye=ve({panelElement:De,formElement:Ge,inputElement:Xe}),qe=Ye.onTouchStart,Qe=Ye.onTouchMove;return window.addEventListener("touchstart",qe),window.addEventListener("touchmove",Qe),function(){window.removeEventListener("touchstart",qe),window.removeEventListener("touchmove",Qe)}}},[ve,De,Ge,Xe])}({getEnvironmentProps:qt,panelElement:Rt.current,formElement:wt.current,inputElement:Qt.current}),function(oe){var ve=oe.container;Te.useEffect(function(){if(ve){var De=ve.querySelectorAll("a[href]:not([disabled]), button:not([disabled]), input:not([disabled])"),Ge=De[0],Xe=De[De.length-1];return ve.addEventListener("keydown",Ye),function(){ve.removeEventListener("keydown",Ye)}}function Ye(qe){qe.key==="Tab"&&(qe.shiftKey?document.activeElement===Ge&&(qe.preventDefault(),Xe.focus()):document.activeElement===Xe&&(qe.preventDefault(),Ge.focus()))}},[ve])}({container:et.current}),Te.useEffect(function(){return document.body.classList.add("DocSearch--active"),function(){var oe,ve;document.body.classList.remove("DocSearch--active"),(oe=(ve=window).scrollTo)===null||oe===void 0||oe.call(ve,0,I)}},[]),Te.useEffect(function(){window.matchMedia("(max-width: 768px)").matches&&(Ut.current=5)},[]),Te.useEffect(function(){Rt.current&&(Rt.current.scrollTop=0)},[Ne.query]),Te.useEffect(function(){yr.length>0&&(lt(),Qt.current&&Qt.current.focus())},[yr,lt]),Te.useEffect(function(){function oe(){if(tt.current){var ve=.01*window.innerHeight;tt.current.style.setProperty("--docsearch-vh","".concat(ve,"px"))}}return oe(),window.addEventListener("resize",oe),function(){window.removeEventListener("resize",oe)}},[]),Te.createElement("div",mp({ref:et},ot({"aria-expanded":!0}),{className:["DocSearch","DocSearch-Container",Ne.status==="stalled"&&"DocSearch-Container--Stalled",Ne.status==="error"&&"DocSearch-Container--Errored"].filter(Boolean).join(" "),role:"button",tabIndex:0,onMouseDown:function(oe){oe.target===oe.currentTarget&&h()}}),Te.createElement("div",{className:"DocSearch-Modal",ref:tt},Te.createElement("header",{className:"DocSearch-SearchBar",ref:wt},Te.createElement(ij,mp({},Dt,{state:Ne,autoFocus:yr.length===0,inputRef:Qt,isFromSelection:Boolean(yr)&&yr===vr,translations:le,onClose:h}))),Te.createElement("div",{className:"DocSearch-Dropdown",ref:Rt},Te.createElement(tj,mp({},Dt,{indexName:n,state:Ne,hitComponent:_,resultsFooterComponent:E,disableUserPersonalization:$,recentSearches:it,favoriteSearches:pt,inputRef:Qt,translations:fe,getMissingResultsUrl:ie,onItemClick:function(oe){dt(oe),h()}}))),Te.createElement("footer",{className:"DocSearch-Footer"},Te.createElement(A$,{translations:ce}))))}function Db(){return Db=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Db.apply(this,arguments)}function VA(e,t){return function(r){if(Array.isArray(r))return r}(e)||function(r,n){var i=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(i!=null){var a,l,o=[],h=!0,d=!1;try{for(i=i.call(r);!(h=(a=i.next()).done)&&(o.push(a.value),!n||o.length!==n);h=!0);}catch(m){d=!0,l=m}finally{try{h||i.return==null||i.return()}finally{if(d)throw l}}return o}}(e,t)||function(r,n){if(!!r){if(typeof r=="string")return UA(r,n);var i=Object.prototype.toString.call(r).slice(8,-1);if(i==="Object"&&r.constructor&&(i=r.constructor.name),i==="Map"||i==="Set")return Array.from(r);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return UA(r,n)}}(e,t)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function UA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Cj(e){var t,r,n=Te.useRef(null),i=VA(Te.useState(!1),2),a=i[0],l=i[1],o=VA(Te.useState((e==null?void 0:e.initialQuery)||void 0),2),h=o[0],d=o[1],m=Te.useCallback(function(){l(!0)},[l]),g=Te.useCallback(function(){l(!1)},[l]);return function(_){var x=_.isOpen,E=_.onOpen,M=_.onClose,P=_.onInput,I=_.searchButtonRef;Te.useEffect(function(){function D(O){(O.keyCode===27&&x||O.key==="k"&&(O.metaKey||O.ctrlKey)||!function(F){var $=F.target,q=$.tagName;return $.isContentEditable||q==="INPUT"||q==="SELECT"||q==="TEXTAREA"}(O)&&O.key==="/"&&!x)&&(O.preventDefault(),x?M():document.body.classList.contains("DocSearch--active")||document.body.classList.contains("DocSearch--active")||E()),I&&I.current===document.activeElement&&P&&/[a-zA-Z0-9]/.test(String.fromCharCode(O.keyCode))&&P(O)}return window.addEventListener("keydown",D),function(){window.removeEventListener("keydown",D)}},[x,E,M,P,I])}({isOpen:a,onOpen:m,onClose:g,onInput:Te.useCallback(function(_){l(!0),d(_.key)},[l,d]),searchButtonRef:n}),Te.createElement(Te.Fragment,null,Te.createElement(HU,{ref:n,translations:e==null||(t=e.translations)===null||t===void 0?void 0:t.button,onClick:m}),a&&tk(Te.createElement(Ej,Db({},e,{initialScrollY:window.scrollY,initialQuery:h,translations:e==null||(r=e.translations)===null||r===void 0?void 0:r.modal,onClose:g})),document.body))}function Aj(e){nk(Te.createElement(Cj,yb({},e,{transformSearchClient:function(t){return t.addAlgoliaAgent("docsearch.js","3.2.1"),e.transformSearchClient?e.transformSearchClient(t):t}})),function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:window;return typeof t=="string"?r.document.querySelector(t):t}(e.container,e.environment))}const Ij=e=>e.button===1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey,Pj=()=>{const e=xc(),t=YS();return{hitComponent:({hit:r,children:n})=>({type:"a",ref:void 0,constructor:void 0,key:void 0,props:{href:r.url,onClick:i=>{Ij(i)||(i.preventDefault(),e.push(rC(r.url,t.value.base)))},children:n},__v:null}),navigator:{navigate:({itemUrl:r})=>{e.push(rC(r,t.value.base))}},transformSearchClient:r=>{const n=i2(r.search,500);return{...r,search:async(...i)=>n(...i)}}}};const Mj=Pr({name:"Docsearch",props:{containerId:{type:String,required:!1,default:"docsearch-container"},options:{type:Object,required:!0}},setup(e){const t=Sm(),r=E6(),n=Pj(),i=Pt(()=>{var o;return{...e.options,...(o=e.options.locales)==null?void 0:o[t.value]}}),a=[],l=()=>{var h,d;const o=(d=(h=i.value.searchParameters)==null?void 0:h.facetFilters)!=null?d:[];a.splice(0,a.length,`lang:${r.value}`,...ir(o)?o:[o]),Aj({...n,...i.value,container:`#${e.containerId}`,searchParameters:{...i.value.searchParameters,facetFilters:a}})};return ta(()=>{l(),Oi([t,i],([o,h],[d,m])=>{o!==d&&JSON.stringify(h)!==JSON.stringify(m)&&l()}),Oi(r,(o,h)=>{if(o!==h){const d=a.findIndex(m=>m===`lang:${h}`);d>-1&&a.splice(d,1,`lang:${o}`)}})}),()=>Ar("div",{id:e.containerId})}}),Dj={appId:"6KECEJUGJH",apiKey:"9a5c8aa7cb2d5d32ebd66790e1a84789",indexName:"sustech-online-keys",locales:{"/":{placeholder:"\u641C\u7D22\u624B\u518C",translations:{button:{buttonText:"\u641C\u7D22\u624B\u518C",buttonAriaLabel:"\u641C\u7D22\u624B\u518C"},modal:{searchBox:{resetButtonTitle:"\u6E05\u9664\u67E5\u8BE2\u6761\u4EF6",resetButtonAriaLabel:"\u6E05\u9664\u67E5\u8BE2\u6761\u4EF6",cancelButtonText:"\u53D6\u6D88",cancelButtonAriaLabel:"\u53D6\u6D88"},startScreen:{recentSearchesTitle:"\u641C\u7D22\u5386\u53F2",noRecentSearchesText:"\u6CA1\u6709\u641C\u7D22\u5386\u53F2",saveRecentSearchButtonTitle:"\u4FDD\u5B58\u81F3\u641C\u7D22\u5386\u53F2",removeRecentSearchButtonTitle:"\u4ECE\u641C\u7D22\u5386\u53F2\u4E2D\u79FB\u9664",favoriteSearchesTitle:"\u6536\u85CF",removeFavoriteSearchButtonTitle:"\u4ECE\u6536\u85CF\u4E2D\u79FB\u9664"},errorScreen:{titleText:"\u65E0\u6CD5\u83B7\u53D6\u7ED3\u679C",helpText:"\u4F60\u53EF\u80FD\u9700\u8981\u68C0\u67E5\u4F60\u7684\u7F51\u7EDC\u8FDE\u63A5"},footer:{selectText:"\u9009\u62E9",navigateText:"\u5207\u6362",closeText:"\u5173\u95ED",searchByText:"\u641C\u7D22\u63D0\u4F9B\u8005"},noResultsScreen:{noResultsText:"\u65E0\u6CD5\u627E\u5230\u76F8\u5173\u7ED3\u679C",suggestedQueryText:"\u4F60\u53EF\u4EE5\u5C1D\u8BD5\u67E5\u8BE2",reportMissingResultsText:"\u4F60\u8BA4\u4E3A\u8BE5\u67E5\u8BE2\u5E94\u8BE5\u6709\u7ED3\u679C\uFF1F",reportMissingResultsLinkText:"\u70B9\u51FB\u53CD\u9988"}}}}}},kj=io({enhance({app:e}){e.component("Docsearch",()=>Ar(Mj,{options:Dj}))}}),Lj=e=>{if(window.dataLayer&&window.gtag)return;const t=document.createElement("script");t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,t.async=!0,document.head.appendChild(t),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)},Oj="G-1BQBXDGY3R",Rj=io({enhance(){Lj(Oj)}});function zj(e){return{all:e=e||new Map,on:function(t,r){var n=e.get(t);n?n.push(r):e.set(t,[r])},off:function(t,r){var n=e.get(t);n&&(r?n.splice(n.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var n=e.get(t);n&&n.slice().map(function(i){i(r)}),(n=e.get("*"))&&n.slice().map(function(i){i(t,r)})}}}const Bj=Symbol("pwaEvent"),Fj="service-worker.js",Nj=io({setup(){const e=(...r)=>console.log("[@vuepress/plugin-pwa]",...r),t=zj();Bl(Bj,t),ta(async()=>{const{register:r}=await Fe(()=>import("./index.0e8935cb.js"),[]);r(Gy(Fj),{ready(n){e("Service worker is active."),t.emit("ready",n)},registered(n){e("Service worker has been registered."),t.emit("registered",n)},cached(n){e("Content has been cached for offline use."),t.emit("cached",n)},updatefound(n){e("New content is downloading."),t.emit("updatefound",n)},updated(n){e("New content is available, please refresh."),t.emit("updated",n)},offline(){e("No internet connection found. App is running in offline mode."),t.emit("offline")},error(n){e("Error during service worker registration:",n),t.emit("error",n)}})})}}),Vj=(e,t,r)=>{const n=`#${e.slug}`,i=[t.linkClass];return t.linkActiveClass&&r.hash===n&&i.push(t.linkActiveClass),t.linkChildrenActiveClass&&e.children.some(a=>`#${a.slug}`===r.hash)&&i.push(t.linkChildrenActiveClass),t.linkTag==="RouterLink"?Ar(_3,{to:n,class:i,ariaLabel:e.title},()=>e.title):Ar("a",{href:n,class:i,ariaLabel:e.title},e.title)},bk=(e,t,r)=>e.length===0?[]:[Ar("ul",{class:t.listClass},e.map(n=>Ar("li",{class:t.itemClass},[Vj(n,t,r),bk(n.children,t,r)])))],Uj=Pr({name:"Toc",props:{headers:{type:Array,required:!1,default:null},options:{type:Object,required:!1,default:()=>({})}},setup(e){const{headers:t,options:r}=sm(e),n=Us(),i=zs(),a=Pt(()=>{var h;const o=t.value||i.value.headers;return((h=o[0])==null?void 0:h.level)===1?o[0].children:o}),l=Pt(()=>({containerTag:"nav",containerClass:"vuepress-toc",listClass:"vuepress-toc-list",itemClass:"vuepress-toc-item",linkTag:"RouterLink",linkClass:"vuepress-toc-link",linkActiveClass:"active",linkChildrenActiveClass:"active",...r.value}));return()=>{const o=bk(a.value,l.value,n);return l.value.containerTag?Ar(l.value.containerTag,{class:l.value.containerClass},o):o}}}),$j={},jj=io({enhance({app:e}){e.component("Toc",t=>Ar(Uj,{headers:t.headers,options:{...$j,...t.options}}))}});var wk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hj(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function m2(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Sk={exports:{}},v2={exports:{}},Tk=function(t,r){return function(){for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];return t.apply(r,i)}},Gj=Tk,g2=Object.prototype.toString,_2=function(e){return function(t){var r=g2.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function bc(e){return e=e.toLowerCase(),function(r){return _2(r)===e}}function y2(e){return Array.isArray(e)}function C_(e){return typeof e>"u"}function qj(e){return e!==null&&!C_(e)&&e.constructor!==null&&!C_(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var Ek=bc("ArrayBuffer");function Wj(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Ek(e.buffer),t}function Zj(e){return typeof e=="string"}function Xj(e){return typeof e=="number"}function Ck(e){return e!==null&&typeof e=="object"}function Bg(e){if(_2(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var Yj=bc("Date"),Kj=bc("File"),Jj=bc("Blob"),Qj=bc("FileList");function x2(e){return g2.call(e)==="[object Function]"}function eH(e){return Ck(e)&&x2(e.pipe)}function tH(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||g2.call(e)===t||x2(e.toString)&&e.toString()===t)}var rH=bc("URLSearchParams");function nH(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function iH(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function b2(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),y2(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function kb(){var e={};function t(i,a){Bg(e[a])&&Bg(i)?e[a]=kb(e[a],i):Bg(i)?e[a]=kb({},i):y2(i)?e[a]=i.slice():e[a]=i}for(var r=0,n=arguments.length;r<n;r++)b2(arguments[r],t);return e}function aH(e,t,r){return b2(t,function(i,a){r&&typeof i=="function"?e[a]=Gj(i,r):e[a]=i}),e}function oH(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function sH(e,t,r,n){e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function lH(e,t,r){var n,i,a,l={};t=t||{};do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)a=n[i],l[a]||(t[a]=e[a],l[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t}function uH(e,t,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;var n=e.indexOf(t,r);return n!==-1&&n===r}function cH(e){if(!e)return null;var t=e.length;if(C_(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r}var hH=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),wi={isArray:y2,isArrayBuffer:Ek,isBuffer:qj,isFormData:tH,isArrayBufferView:Wj,isString:Zj,isNumber:Xj,isObject:Ck,isPlainObject:Bg,isUndefined:C_,isDate:Yj,isFile:Kj,isBlob:Jj,isFunction:x2,isStream:eH,isURLSearchParams:rH,isStandardBrowserEnv:iH,forEach:b2,merge:kb,extend:aH,trim:nH,stripBOM:oH,inherits:sH,toFlatObject:lH,kindOf:_2,kindOfTest:bc,endsWith:uH,toArray:cH,isTypedArray:hH,isFileList:Qj},ah=wi;function $A(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Ak=function(t,r,n){if(!r)return t;var i;if(n)i=n(r);else if(ah.isURLSearchParams(r))i=r.toString();else{var a=[];ah.forEach(r,function(h,d){h===null||typeof h>"u"||(ah.isArray(h)?d=d+"[]":h=[h],ah.forEach(h,function(g){ah.isDate(g)?g=g.toISOString():ah.isObject(g)&&(g=JSON.stringify(g)),a.push($A(d)+"="+$A(g))}))}),i=a.join("&")}if(i){var l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t},fH=wi;function my(){this.handlers=[]}my.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};my.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};my.prototype.forEach=function(t){fH.forEach(this.handlers,function(n){n!==null&&t(n)})};var dH=my,pH=wi,mH=function(t,r){pH.forEach(t,function(i,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=i,delete t[a])})},Ik=wi;function Zh(e,t,r,n,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Ik.inherits(Zh,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Pk=Zh.prototype,Mk={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){Mk[e]={value:e}});Object.defineProperties(Zh,Mk);Object.defineProperty(Pk,"isAxiosError",{value:!0});Zh.from=function(e,t,r,n,i,a){var l=Object.create(Pk);return Ik.toFlatObject(e,l,function(h){return h!==Error.prototype}),Zh.call(l,e.message,t,r,n,i),l.name=e.name,a&&Object.assign(l,a),l};var ff=Zh,Dk={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},mo=wi;function vH(e,t){t=t||new FormData;var r=[];function n(a){return a===null?"":mo.isDate(a)?a.toISOString():mo.isArrayBuffer(a)||mo.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function i(a,l){if(mo.isPlainObject(a)||mo.isArray(a)){if(r.indexOf(a)!==-1)throw Error("Circular reference detected in "+l);r.push(a),mo.forEach(a,function(h,d){if(!mo.isUndefined(h)){var m=l?l+"."+d:d,g;if(h&&!l&&typeof h=="object"){if(mo.endsWith(d,"{}"))h=JSON.stringify(h);else if(mo.endsWith(d,"[]")&&(g=mo.toArray(h))){g.forEach(function(_){!mo.isUndefined(_)&&t.append(m,n(_))});return}}i(h,m)}}),r.pop()}else t.append(l,n(a))}return i(e),t}var kk=vH,g1,jA;function gH(){if(jA)return g1;jA=1;var e=ff;return g1=function(r,n,i){var a=i.config.validateStatus;!i.status||!a||a(i.status)?r(i):n(new e("Request failed with status code "+i.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))},g1}var _1,HA;function _H(){if(HA)return _1;HA=1;var e=wi;return _1=e.isStandardBrowserEnv()?function(){return{write:function(n,i,a,l,o,h){var d=[];d.push(n+"="+encodeURIComponent(i)),e.isNumber(a)&&d.push("expires="+new Date(a).toGMTString()),e.isString(l)&&d.push("path="+l),e.isString(o)&&d.push("domain="+o),h===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(n){var i=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),_1}var yH=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},xH=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},bH=yH,wH=xH,Lk=function(t,r){return t&&!bH(r)?wH(t,r):r},y1,GA;function SH(){if(GA)return y1;GA=1;var e=wi,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return y1=function(n){var i={},a,l,o;return n&&e.forEach(n.split(`
`),function(d){if(o=d.indexOf(":"),a=e.trim(d.substr(0,o)).toLowerCase(),l=e.trim(d.substr(o+1)),a){if(i[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?i[a]=(i[a]?i[a]:[]).concat([l]):i[a]=i[a]?i[a]+", "+l:l}}),i},y1}var x1,qA;function TH(){if(qA)return x1;qA=1;var e=wi;return x1=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),i;function a(l){var o=l;return r&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=a(window.location.href),function(o){var h=e.isString(o)?a(o):o;return h.protocol===i.protocol&&h.host===i.host}}():function(){return function(){return!0}}(),x1}var b1,WA;function vy(){if(WA)return b1;WA=1;var e=ff,t=wi;function r(n){e.call(this,n==null?"canceled":n,e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(r,e,{__CANCEL__:!0}),b1=r,b1}var w1,ZA;function EH(){return ZA||(ZA=1,w1=function(t){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}),w1}var S1,XA;function YA(){if(XA)return S1;XA=1;var e=wi,t=gH(),r=_H(),n=Ak,i=Lk,a=SH(),l=TH(),o=Dk,h=ff,d=vy(),m=EH();return S1=function(_){return new Promise(function(E,M){var P=_.data,I=_.headers,D=_.responseType,O;function F(){_.cancelToken&&_.cancelToken.unsubscribe(O),_.signal&&_.signal.removeEventListener("abort",O)}e.isFormData(P)&&e.isStandardBrowserEnv()&&delete I["Content-Type"];var $=new XMLHttpRequest;if(_.auth){var q=_.auth.username||"",K=_.auth.password?unescape(encodeURIComponent(_.auth.password)):"";I.Authorization="Basic "+btoa(q+":"+K)}var Z=i(_.baseURL,_.url);$.open(_.method.toUpperCase(),n(Z,_.params,_.paramsSerializer),!0),$.timeout=_.timeout;function re(){if(!!$){var le="getAllResponseHeaders"in $?a($.getAllResponseHeaders()):null,fe=!D||D==="text"||D==="json"?$.responseText:$.response,ye={data:fe,status:$.status,statusText:$.statusText,headers:le,config:_,request:$};t(function(be){E(be),F()},function(be){M(be),F()},ye),$=null}}if("onloadend"in $?$.onloadend=re:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(re)},$.onabort=function(){!$||(M(new h("Request aborted",h.ECONNABORTED,_,$)),$=null)},$.onerror=function(){M(new h("Network Error",h.ERR_NETWORK,_,$,$)),$=null},$.ontimeout=function(){var fe=_.timeout?"timeout of "+_.timeout+"ms exceeded":"timeout exceeded",ye=_.transitional||o;_.timeoutErrorMessage&&(fe=_.timeoutErrorMessage),M(new h(fe,ye.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,_,$)),$=null},e.isStandardBrowserEnv()){var ie=(_.withCredentials||l(Z))&&_.xsrfCookieName?r.read(_.xsrfCookieName):void 0;ie&&(I[_.xsrfHeaderName]=ie)}"setRequestHeader"in $&&e.forEach(I,function(fe,ye){typeof P>"u"&&ye.toLowerCase()==="content-type"?delete I[ye]:$.setRequestHeader(ye,fe)}),e.isUndefined(_.withCredentials)||($.withCredentials=!!_.withCredentials),D&&D!=="json"&&($.responseType=_.responseType),typeof _.onDownloadProgress=="function"&&$.addEventListener("progress",_.onDownloadProgress),typeof _.onUploadProgress=="function"&&$.upload&&$.upload.addEventListener("progress",_.onUploadProgress),(_.cancelToken||_.signal)&&(O=function(le){!$||(M(!le||le&&le.type?new d:le),$.abort(),$=null)},_.cancelToken&&_.cancelToken.subscribe(O),_.signal&&(_.signal.aborted?O():_.signal.addEventListener("abort",O))),P||(P=null);var ce=m(Z);if(ce&&["http","https","file"].indexOf(ce)===-1){M(new h("Unsupported protocol "+ce+":",h.ERR_BAD_REQUEST,_));return}$.send(P)})},S1}var T1,KA;function CH(){return KA||(KA=1,T1=null),T1}var ci=wi,JA=mH,QA=ff,AH=Dk,IH=kk,PH={"Content-Type":"application/x-www-form-urlencoded"};function eI(e,t){!ci.isUndefined(e)&&ci.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function MH(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=YA()),e}function DH(e,t,r){if(ci.isString(e))try{return(t||JSON.parse)(e),ci.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var gy={transitional:AH,adapter:MH(),transformRequest:[function(t,r){if(JA(r,"Accept"),JA(r,"Content-Type"),ci.isFormData(t)||ci.isArrayBuffer(t)||ci.isBuffer(t)||ci.isStream(t)||ci.isFile(t)||ci.isBlob(t))return t;if(ci.isArrayBufferView(t))return t.buffer;if(ci.isURLSearchParams(t))return eI(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n=ci.isObject(t),i=r&&r["Content-Type"],a;if((a=ci.isFileList(t))||n&&i==="multipart/form-data"){var l=this.env&&this.env.FormData;return IH(a?{"files[]":t}:t,l&&new l)}else if(n||i==="application/json")return eI(r,"application/json"),DH(t);return t}],transformResponse:[function(t){var r=this.transitional||gy.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,a=!n&&this.responseType==="json";if(a||i&&ci.isString(t)&&t.length)try{return JSON.parse(t)}catch(l){if(a)throw l.name==="SyntaxError"?QA.from(l,QA.ERR_BAD_RESPONSE,this,null,this.response):l}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:CH()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ci.forEach(["delete","get","head"],function(t){gy.headers[t]={}});ci.forEach(["post","put","patch"],function(t){gy.headers[t]=ci.merge(PH)});var w2=gy,kH=wi,LH=w2,OH=function(t,r,n){var i=this||LH;return kH.forEach(n,function(l){t=l.call(i,t,r)}),t},E1,tI;function Ok(){return tI||(tI=1,E1=function(t){return!!(t&&t.__CANCEL__)}),E1}var rI=wi,C1=OH,RH=Ok(),zH=w2,BH=vy();function A1(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new BH}var FH=function(t){A1(t),t.headers=t.headers||{},t.data=C1.call(t,t.data,t.headers,t.transformRequest),t.headers=rI.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),rI.forEach(["delete","get","head","post","put","patch","common"],function(i){delete t.headers[i]});var r=t.adapter||zH.adapter;return r(t).then(function(i){return A1(t),i.data=C1.call(t,i.data,i.headers,t.transformResponse),i},function(i){return RH(i)||(A1(t),i&&i.response&&(i.response.data=C1.call(t,i.response.data,i.response.headers,t.transformResponse))),Promise.reject(i)})},wa=wi,Rk=function(t,r){r=r||{};var n={};function i(m,g){return wa.isPlainObject(m)&&wa.isPlainObject(g)?wa.merge(m,g):wa.isPlainObject(g)?wa.merge({},g):wa.isArray(g)?g.slice():g}function a(m){if(wa.isUndefined(r[m])){if(!wa.isUndefined(t[m]))return i(void 0,t[m])}else return i(t[m],r[m])}function l(m){if(!wa.isUndefined(r[m]))return i(void 0,r[m])}function o(m){if(wa.isUndefined(r[m])){if(!wa.isUndefined(t[m]))return i(void 0,t[m])}else return i(void 0,r[m])}function h(m){if(m in r)return i(t[m],r[m]);if(m in t)return i(void 0,t[m])}var d={url:l,method:l,data:l,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:h};return wa.forEach(Object.keys(t).concat(Object.keys(r)),function(g){var _=d[g]||a,x=_(g);wa.isUndefined(x)&&_!==h||(n[g]=x)}),n},I1,nI;function zk(){return nI||(nI=1,I1={version:"0.27.2"}),I1}var NH=zk().version,Il=ff,S2={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){S2[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var iI={};S2.transitional=function(t,r,n){function i(a,l){return"[Axios v"+NH+"] Transitional option '"+a+"'"+l+(n?". "+n:"")}return function(a,l,o){if(t===!1)throw new Il(i(l," has been removed"+(r?" in "+r:"")),Il.ERR_DEPRECATED);return r&&!iI[l]&&(iI[l]=!0,console.warn(i(l," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,l,o):!0}};function VH(e,t,r){if(typeof e!="object")throw new Il("options must be an object",Il.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),i=n.length;i-- >0;){var a=n[i],l=t[a];if(l){var o=e[a],h=o===void 0||l(o,a,e);if(h!==!0)throw new Il("option "+a+" must be "+h,Il.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Il("Unknown option "+a,Il.ERR_BAD_OPTION)}}var UH={assertOptions:VH,validators:S2},Bk=wi,$H=Ak,aI=dH,oI=FH,_y=Rk,jH=Lk,Fk=UH,oh=Fk.validators;function Xh(e){this.defaults=e,this.interceptors={request:new aI,response:new aI}}Xh.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=_y(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Fk.assertOptions(n,{silentJSONParsing:oh.transitional(oh.boolean),forcedJSONParsing:oh.transitional(oh.boolean),clarifyTimeoutError:oh.transitional(oh.boolean)},!1);var i=[],a=!0;this.interceptors.request.forEach(function(x){typeof x.runWhen=="function"&&x.runWhen(r)===!1||(a=a&&x.synchronous,i.unshift(x.fulfilled,x.rejected))});var l=[];this.interceptors.response.forEach(function(x){l.push(x.fulfilled,x.rejected)});var o;if(!a){var h=[oI,void 0];for(Array.prototype.unshift.apply(h,i),h=h.concat(l),o=Promise.resolve(r);h.length;)o=o.then(h.shift(),h.shift());return o}for(var d=r;i.length;){var m=i.shift(),g=i.shift();try{d=m(d)}catch(_){g(_);break}}try{o=oI(d)}catch(_){return Promise.reject(_)}for(;l.length;)o=o.then(l.shift(),l.shift());return o};Xh.prototype.getUri=function(t){t=_y(this.defaults,t);var r=jH(t.baseURL,t.url);return $H(r,t.params,t.paramsSerializer)};Bk.forEach(["delete","get","head","options"],function(t){Xh.prototype[t]=function(r,n){return this.request(_y(n||{},{method:t,url:r,data:(n||{}).data}))}});Bk.forEach(["post","put","patch"],function(t){function r(n){return function(a,l,o){return this.request(_y(o||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Xh.prototype[t]=r(),Xh.prototype[t+"Form"]=r(!0)});var HH=Xh,P1,sI;function GH(){if(sI)return P1;sI=1;var e=vy();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(l){n=l});var i=this;this.promise.then(function(a){if(!!i._listeners){var l,o=i._listeners.length;for(l=0;l<o;l++)i._listeners[l](a);i._listeners=null}}),this.promise.then=function(a){var l,o=new Promise(function(h){i.subscribe(h),l=h}).then(a);return o.cancel=function(){i.unsubscribe(l)},o},r(function(l){i.reason||(i.reason=new e(l),n(i.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]},t.prototype.unsubscribe=function(n){if(!!this._listeners){var i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}},t.source=function(){var n,i=new t(function(l){n=l});return{token:i,cancel:n}},P1=t,P1}var M1,lI;function qH(){return lI||(lI=1,M1=function(t){return function(n){return t.apply(null,n)}}),M1}var D1,uI;function WH(){if(uI)return D1;uI=1;var e=wi;return D1=function(r){return e.isObject(r)&&r.isAxiosError===!0},D1}var cI=wi,ZH=Tk,Fg=HH,XH=Rk,YH=w2;function Nk(e){var t=new Fg(e),r=ZH(Fg.prototype.request,t);return cI.extend(r,Fg.prototype,t),cI.extend(r,t),r.create=function(i){return Nk(XH(e,i))},r}var da=Nk(YH);da.Axios=Fg;da.CanceledError=vy();da.CancelToken=GH();da.isCancel=Ok();da.VERSION=zk().version;da.toFormData=kk;da.AxiosError=ff;da.Cancel=da.CanceledError;da.all=function(t){return Promise.all(t)};da.spread=qH();da.isAxiosError=WH();v2.exports=da;v2.exports.default=da;(function(e){e.exports=v2.exports})(Sk);const qa=Hj(Sk.exports);function hI(e){let t=Math.abs(e),r=Math.floor(t/3600);t-=r*3600;let n=Math.floor(t/60);return t-=n*60,[r,n,t]}function fI(e){return e<10?"0"+e:e}const KH={props:{secondFromDispatch:{type:Number},stationEstimate:{type:String},startSecond:{type:Number}},computed:{timeToShow:function(){let e=hI(this.secondFromDispatch),t=e[2]>=30;return e[1]>0?[e[0]>0?e[0]+"\u65F6":"",e[1],"\u5206",t?"\u534A":""].join(""):t?"\u534A\u5206\u949F":"\u4E0D\u5230\u534A\u5206"},startTime:function(){let e=hI(this.startSecond);return["",fI(e[0]),":",fI(e[1])].join("")},isWaiting:function(){return this.secondFromDispatch<=0}}},JH={key:0};function QH(e,t,r,n,i,a){return r.secondFromDispatch?(ft(),Nt("tr",{key:0,class:Ri(a.isWaiting?"bus-waiting":"bus-running")},[cr("td",null,Kr(a.startTime),1),cr("td",null,Kr(a.isWaiting?"\u8DDD\u51FA\u53D1":"\u5DF2\u51FA\u53D1"),1),cr("td",null,Kr((a.isWaiting,""+a.timeToShow)),1),r.stationEstimate?(ft(),Nt("td",JH,Kr(r.stationEstimate),1)):Vr("v-if",!0)],2)):Vr("v-if",!0)}const eG=qr(KH,[["render",QH],["__scopeId","data-v-259a8620"],["__file","BusItem.vue"]]);function Vk(e,t,r){return e*3600+t*60+r}function tG(e){let t=[];for(let r of e){let n=r.split(":"),i=Vk(Number(n[0].trim()),Number(n[1].trim()),0);t.push(i)}return t.sort((r,n)=>r-n)}const rG={data(){return{secondFromZero:0,second:0,minute:0,hour:0,timeRangeAfterReach:3}},props:{times:{},stations:{},minuteOnRoad:{type:Number,default:20},timeRangeBeforeDispatch:{type:Number,default:60}},components:{BusItem:eG},mounted(){setInterval(()=>{this.tick()},1e3)},methods:{tick:function(){var e=new Date;this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds(),this.secondFromZero=Vk(this.hour,this.minute,this.second)},formatNumber:function(e){return e<10?"0"+e:e},stationEstimate:function(e){if(!this.stationNames)return"null";if(e<=0)return this.stationNames[0];let t=this.stationNames.length;if(e>=this.minuteOnRoad*60)return this.stationNames[t-1];let r=e/60/this.minuteOnRoad,n="";for(let i in this.stationPositions)if(r<this.stationPositions[i]){n=this.stationNames[i];break}return n}},computed:{secondList:function(){return tG(this.times)},busToShow:function(){if(!this.secondList)return null;let e=[],t=[];for(let r of this.secondList){let n=this.secondFromZero-r;n<0&&n>-this.timeRangeBeforeDispatch*60&&t.push([n,r]),n>0&&n<(this.minuteOnRoad+this.timeRangeAfterReach)*60&&e.push([n,r])}return e.concat(t)},stationNames:function(){let e=[];for(let t of this.stations)e.push(t[0]);return e},stationPositions:function(){let e=[];for(let t of this.stations)e.push(t[1]);return e}}},nG=e=>(k5("data-v-dc817d2c"),e=e(),L5(),e),iG={key:0,class:"bus-timer-tb"},aG={colspan:"2"},oG={colspan:"2",style:{"text-align":"right"}},sG={key:0,colspan:"4"},lG=nG(()=>cr("p",{class:"plus-note"},"* \u7AD9\u70B9\u4F30\u8BA1\u4EC5\u4F9B\u53C2\u8003",-1));function uG(e,t,r,n,i,a){const l=Xi("bus-item");return ft(),Nt("div",null,[a.busToShow?(ft(),Nt("table",iG,[cr("thead",null,[cr("tr",null,[cr("th",aG,Kr(r.stations[0][0])+" > "+Kr(r.stations[r.stations.length-1][0]),1),cr("th",oG,Kr(a.formatNumber(i.hour))+":"+Kr(a.formatNumber(i.minute))+":"+Kr(a.formatNumber(i.second)),1)]),(ft(!0),Nt(Hr,null,Eo(a.busToShow,(o,h)=>(ft(),In(l,{secondFromDispatch:o[0],stationEstimate:a.stationEstimate(o[0]),startSecond:o[1],key:h},null,8,["secondFromDispatch","stationEstimate","startSecond"]))),128)),cr("tr",null,[Object.keys(a.busToShow).length==0?(ft(),Nt("td",sG," \u77ED\u65F6\u95F4\u5185\u6CA1\u6709\u73ED\u6B21\u4E86 ")):Vr("v-if",!0)])])])):Vr("v-if",!0),lG])}const cG=qr(rG,[["render",uG],["__scopeId","data-v-dc817d2c"],["__file","BusTimer.vue"]]);const hG={data(){return{keySelected:null}},props:{objs:{},initPos:{type:Number,default:0}},mounted(){this.select(Object.keys(this.objs)[this.initPos])},watch:{objs(e){for(let t in this.objs){this.keySelected=t;break}}},computed:{},methods:{select:function(e){this.keySelected=e}}},fG=["onClick"];function dG(e,t,r,n,i,a){return ft(),Nt(Hr,null,[(ft(!0),Nt(Hr,null,Eo(r.objs,(l,o,h)=>(ft(),Nt("button",{key:h,onClick:d=>a.select(o),class:Ri(o==i.keySelected?"selected":"unselected")},Kr(o),11,fG))),128)),sn(e.$slots,"default",{selected:r.objs[i.keySelected]})],64)}const pG=qr(hG,[["render",dG],["__file","ObjectSelector.vue"]]),mG={data(){return{data:null}},props:{path:{type:String}},watch:{path(e){if(e)return qa.get(e).then(t=>{this.data=t.data})}}};function vG(e,t,r,n,i,a){return sn(e.$slots,"default",{data:i.data})}const gG=qr(mG,[["render",vG],["__file","DataRequest.vue"]]);const _G={props:["data"]},yG={class:"cards"};function xG(e,t,r,n,i,a){return ft(),Nt("div",yG,[(ft(!0),Nt(Hr,null,Eo(r.data,(l,o)=>(ft(),Nt("div",{key:o,class:"card"},Kr(l),1))),128))])}const bG=qr(_G,[["render",xG],["__scopeId","data-v-00202de1"],["__file","GridList.vue"]]),wG={name:"BusTable",components:{BusTimer:cG,ObjectSelector:pG,DataRequest:gG,GridList:bG},mounted(){function e(t){var r={};for(let g=0;g<t.days.length;g++)r[t.days[g].date]=t.days[g].isOffDay;var n=new Date,i=new Intl.DateTimeFormat("en",{year:"numeric"}).format(n),a=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(n),l=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(n),o=`${i}-${a}-${l}`,h;if(r[o]==null){console.log("Not in GOV declaration");var d=n.getDay(),m=d==6||d==0;h=m}else console.log("In GOV declaration"),h=r[o];h?(console.log("\u8282\u5047\u65E5"),document.getElementById("bustable").getElementsByTagName("button")[1].click()):(console.log("\u5DE5\u4F5C\u65E5"),document.getElementById("bustable").getElementsByTagName("button")[0].click())}qa.get("/2022.json").then(t=>{e(t.data)})}},SG={id:"bustable"},TG=cr("br",null,null,-1);function EG(e,t,r,n,i,a){const l=Xi("bus-timer"),o=Xi("grid-list"),h=Xi("data-request"),d=Xi("object-selector");return ft(),Nt("div",SG,[lr(d,{objs:{"\u5DE5\u4F5C\u65E5 Workday":!0,"\u8282\u5047\u65E5 Holiday":!1}},{default:Xn(m=>[TG,lr(d,{objs:m.selected?{"Line 1 \u53F7\u7EBF \u2502 \u5DE5\u5B66\u9662\u65B9\u5411 To COE":"/bus_times/one_down.json","Line 1 \u53F7\u7EBF \u2502 \u6B23\u56ED\u65B9\u5411 To Joy Highland":"/bus_times/one_up.json","Line 2 \u53F7\u7EBF \u2502 \u79D1\u7814\u697C\u65B9\u5411 To Research Building":"/bus_times/two_down.json","Line 2 \u53F7\u7EBF \u2502 \u6B23\u56ED\u65B9\u5411 To Joy Highland":"/bus_times/two_up.json"}:{"Line 1 \u53F7\u7EBF \u2502 \u5DE5\u5B66\u9662\u65B9\u5411  To COE":"/bus_times/one_down_holiday.json","Line 1 \u53F7\u7EBF \u2502 \u6B23\u56ED\u65B9\u5411 To Joy Highland":"/bus_times/one_up_holiday.json"}},{default:Xn(g=>[lr(h,{path:g.selected},{default:Xn(({data:_})=>[_?(ft(),In(l,S9(f_({key:0},_)),null,16)):Vr("v-if",!0),_?(ft(),In(o,{key:1,data:_.times},null,8,["data"])):Vr("v-if",!0)]),_:2},1032,["path"])]),_:2},1032,["objs"])]),_:1})])}const CG=qr(wG,[["render",EG],["__file","BusTable.vue"]]);var Uk={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(wk,function(){var r,n,i;function a(o,h){if(!r)r=h;else if(!n)n=h;else{var d="var sharedChunk = {}; ("+r+")(sharedChunk); ("+n+")(sharedChunk);",m={};r(m),i=h(m),typeof window<"u"&&(i.workerUrl=window.URL.createObjectURL(new Blob([d],{type:"text/javascript"})))}}a(["exports"],function(o){var h=d;function d(c,s,f,v){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(v-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=f,this.p2y=v}function m(c,s,f,v){const w=new h(c,s,f,v);return function(T){return w.solve(T)}}d.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,v=0;v<8;v++){var w=this.sampleCurveX(f)-c;if(Math.abs(w)<s)return f;var T=this.sampleCurveDerivativeX(f);if(Math.abs(T)<1e-6)break;f-=w/T}var A=0,L=1;for(f=c,v=0;v<20&&(w=this.sampleCurveX(f),!(Math.abs(w-c)<s));v++)c>w?A=f:L=f,f=.5*(L-A)+A;return f},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};const g=m(.25,.1,.25,1);function _(c,s,f){return Math.min(f,Math.max(s,c))}function x(c,s,f){const v=f-s,w=((c-s)%v+v)%v+s;return w===s?f:w}function E(c,...s){for(const f of s)for(const v in f)c[v]=f[v];return c}let M=1;function P(c,s){c.forEach(f=>{s[f]&&(s[f]=s[f].bind(s))})}function I(c,s,f){const v={};for(const w in c)v[w]=s.call(f||this,c[w],w,c);return v}function D(c,s,f){const v={};for(const w in c)s.call(f||this,c[w],w,c)&&(v[w]=c[w]);return v}function O(c){return Array.isArray(c)?c.map(O):typeof c=="object"&&c?I(c,O):c}const F={};function $(c){F[c]||(typeof console<"u"&&console.warn(c),F[c]=!0)}function q(c,s,f){return(f.y-c.y)*(s.x-c.x)>(s.y-c.y)*(f.x-c.x)}function K(c){let s=0;for(let f,v,w=0,T=c.length,A=T-1;w<T;A=w++)f=c[w],v=c[A],s+=(v.x-f.x)*(f.y+v.y);return s}function Z(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function re(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,v,w,T)=>{const A=w||T;return s[v]=!A||A.toLowerCase(),""}),s["max-age"]){const f=parseInt(s["max-age"],10);isNaN(f)?delete s["max-age"]:s["max-age"]=f}return s}let ie,ce,le=null;function fe(c){if(le==null){const s=c.navigator?c.navigator.userAgent:null;le=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return le}function ye(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Ne={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const s=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(c,s=0){const f=window.document.createElement("canvas"),v=f.getContext("2d");if(!v)throw new Error("failed to create canvas 2d context");return f.width=c.width,f.height=c.height,v.drawImage(c,0,0,c.width,c.height),v.getImageData(-s,-s,c.width+2*s,c.height+2*s)},resolveURL:c=>(ie||(ie=document.createElement("a")),ie.href=c,ie.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ce==null&&(ce=matchMedia("(prefers-reduced-motion: reduce)")),ce.matches)}};var be=et;function et(c,s){this.x=c,this.y=s}et.prototype={clone:function(){return new et(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,f=c.y-this.y;return s*s+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),f=Math.sin(c),v=f*this.x+s*this.y;return this.x=s*this.x-f*this.y,this.y=v,this},_rotateAround:function(c,s){var f=Math.cos(c),v=Math.sin(c),w=s.y+v*(this.x-s.x)+f*(this.y-s.y);return this.x=s.x+f*(this.x-s.x)-v*(this.y-s.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},et.convert=function(c){return c instanceof et?c:Array.isArray(c)?new et(c[0],c[1]):c};const tt={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},wt="mapbox-tiles";let Rt,Qt,Ut=500,vr=50;function yr(){typeof caches>"u"||Rt||(Rt=caches.open(wt))}let $e=1/0;const pt={supported:!1,testSupport:function(c){!Dt&&dt&&(qt?ot(c):it=c)}};let it,dt,Dt=!1,qt=!1;function ot(c){const s=c.createTexture();c.bindTexture(c.TEXTURE_2D,s);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,dt),c.isContextLost())return;pt.supported=!0}catch{}c.deleteTexture(s),Dt=!0}typeof document<"u"&&(dt=document.createElement("img"),dt.onload=function(){it&&ot(it),it=null,qt=!0},dt.onerror=function(){Dt=!0,it=null},dt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const lt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(lt);class oe extends Error{constructor(s,f,v,w){super(`AJAXError: ${f} (${s}): ${v}`),this.status=s,this.statusText=f,this.url=v,this.body=w}}const ve=Z()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function De(c,s){const f=new AbortController,v=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:ve(),signal:f.signal});let w=!1,T=!1;return c.type==="json"&&v.headers.set("Accept","application/json"),((A,L,R)=>{if(T)return;const N=Date.now();fetch(v).then(j=>j.ok?((G,Y,Q)=>{(c.type==="arrayBuffer"?G.arrayBuffer():c.type==="json"?G.json():G.text()).then(ee=>{T||(Y&&Q&&function(me,pe,Pe){if(yr(),!Rt)return;const ze={status:pe.status,statusText:pe.statusText,headers:new Headers};pe.headers.forEach((Le,Ze)=>ze.headers.set(Ze,Le));const Ie=re(pe.headers.get("Cache-Control")||"");Ie["no-store"]||(Ie["max-age"]&&ze.headers.set("Expires",new Date(Pe+1e3*Ie["max-age"]).toUTCString()),new Date(ze.headers.get("Expires")).getTime()-Pe<42e4||function(Le,Ze){if(Qt===void 0)try{new Response(new ReadableStream),Qt=!0}catch{Qt=!1}Qt?Ze(Le.body):Le.blob().then(Ze)}(pe,Le=>{const Ze=new Response(Le,ze);yr(),Rt&&Rt.then(We=>We.put(function(Et){const Ot=Et.indexOf("?");return Ot<0?Et:Et.slice(0,Ot)}(me.url),Ze)).catch(We=>$(We.message))}))}(v,Y,Q),w=!0,s(null,ee,G.headers.get("Cache-Control"),G.headers.get("Expires")))}).catch(ee=>{T||s(new Error(ee.message))})})(j,null,N):j.blob().then(G=>s(new oe(j.status,j.statusText,c.url,G)))).catch(j=>{j.code!==20&&s(new Error(j.message))})})(),{cancel:()=>{T=!0,w||f.abort()}}}const Ge=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(Z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s);if(!Z()){const v=c.url.substring(0,c.url.indexOf("://"));return(tt.REGISTERED_PROTOCOLS[v]||De)(c,s)}}if(!(/^file:/.test(f=c.url)||/^file:/.test(ve())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return De(c,s);if(Z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s,void 0,!0)}var f;return function(v,w){const T=new XMLHttpRequest;T.open(v.method||"GET",v.url,!0),v.type==="arrayBuffer"&&(T.responseType="arraybuffer");for(const A in v.headers)T.setRequestHeader(A,v.headers[A]);return v.type==="json"&&(T.responseType="text",T.setRequestHeader("Accept","application/json")),T.withCredentials=v.credentials==="include",T.onerror=()=>{w(new Error(T.statusText))},T.onload=()=>{if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let A=T.response;if(v.type==="json")try{A=JSON.parse(T.response)}catch(L){return w(L)}w(null,A,T.getResponseHeader("Cache-Control"),T.getResponseHeader("Expires"))}else{const A=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});w(new oe(T.status,T.statusText,v.url,A))}},T.send(v.body),{cancel:()=>T.abort()}}(c,s)},Xe=function(c,s){return Ge(E(c,{type:"arrayBuffer"}),s)};function Ye(c){const s=window.document.createElement("a");return s.href=c,s.protocol===window.document.location.protocol&&s.host===window.document.location.host}const qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Qe,ut;Qe=[],ut=0;const nt=function(c,s){if(pt.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),ut>=tt.MAX_PARALLEL_IMAGE_REQUESTS){const T={requestParameters:c,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return Qe.push(T),T}ut++;let f=!1;const v=()=>{if(!f)for(f=!0,ut--;Qe.length&&ut<tt.MAX_PARALLEL_IMAGE_REQUESTS;){const T=Qe.shift(),{requestParameters:A,callback:L,cancelled:R}=T;R||(T.cancel=nt(A,L).cancel)}},w=Xe(c,(T,A,L,R)=>{v(),T?s(T):A&&function(N,j){typeof createImageBitmap=="function"?function(G,Y){const Q=new Blob([new Uint8Array(G)],{type:"image/png"});createImageBitmap(Q).then(ee=>{Y(null,ee)}).catch(ee=>{Y(new Error(`Could not load image because of ${ee.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(N,j):function(G,Y){const Q=new Image;Q.onload=()=>{Y(null,Q),URL.revokeObjectURL(Q.src),Q.onload=null,window.requestAnimationFrame(()=>{Q.src=qe})},Q.onerror=()=>Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ee=new Blob([new Uint8Array(G)],{type:"image/png"});Q.src=G.byteLength?URL.createObjectURL(ee):qe}(N,j)}(A,(N,j)=>{N!=null?s(N):j!=null&&s(null,j,{cacheControl:L,expires:R})})});return{cancel:()=>{w.cancel(),v()}}};function $t(c,s,f){f[c]&&f[c].indexOf(s)!==-1||(f[c]=f[c]||[],f[c].push(s))}function Mt(c,s,f){if(f&&f[c]){const v=f[c].indexOf(s);v!==-1&&f[c].splice(v,1)}}class It{constructor(s,f={}){E(this,f),this.type=s}}class Wt extends It{constructor(s,f={}){super("error",E({error:s},f))}}class er{on(s,f){return this._listeners=this._listeners||{},$t(s,f,this._listeners),this}off(s,f){return Mt(s,f,this._listeners),Mt(s,f,this._oneTimeListeners),this}once(s,f){return this._oneTimeListeners=this._oneTimeListeners||{},$t(s,f,this._oneTimeListeners),this}fire(s,f){typeof s=="string"&&(s=new It(s,f||{}));const v=s.type;if(this.listens(v)){s.target=this;const w=this._listeners&&this._listeners[v]?this._listeners[v].slice():[];for(const L of w)L.call(this,s);const T=this._oneTimeListeners&&this._oneTimeListeners[v]?this._oneTimeListeners[v].slice():[];for(const L of T)Mt(v,L,this._oneTimeListeners),L.call(this,s);const A=this._eventedParent;A&&(E(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),A.fire(s))}else s instanceof Wt&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,f){return this._eventedParent=s,this._eventedParentData=f,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class Je{constructor(s,f,v,w){this.message=(s?`${s}: `:"")+v,w&&(this.identifier=w),f!=null&&f.__line__&&(this.line=f.__line__)}}function Mr(c){const s=c.value;return s?[new Je(c.key,s,"constants have been deprecated as of v8")]:[]}function xn(c,...s){for(const f of s)for(const v in f)c[v]=f[v];return c}function hr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function di(c){if(Array.isArray(c))return c.map(di);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const f in c)s[f]=di(c[f]);return s}return hr(c)}class Bn extends Error{constructor(s,f){super(f),this.message=f,this.key=s}}class ii{constructor(s,f=[]){this.parent=s,this.bindings={};for(const[v,w]of f)this.bindings[v]=w}concat(s){return new ii(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const wn={kind:"null"},st={kind:"number"},ur={kind:"string"},or={kind:"boolean"},Kn={kind:"color"},Mo={kind:"object"},rr={kind:"value"},oo={kind:"collator"},$n={kind:"formatted"},Ws={kind:"padding"},Dn={kind:"resolvedImage"};function pi(c,s){return{kind:"array",itemType:c,N:s}}function $r(c){if(c.kind==="array"){const s=$r(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const Zs=[wn,st,ur,or,Kn,$n,Mo,pi(rr),Ws,Dn];function Ma(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Ma(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const f of Zs)if(!Ma(f,s))return null}}return`Expected ${$r(c)} but found ${$r(s)} instead.`}function as(c,s){return s.some(f=>f.kind===c.kind)}function os(c,s){return s.some(f=>f==="null"?c===null:f==="array"?Array.isArray(c):f==="object"?c&&!Array.isArray(c)&&typeof c=="object":f===typeof c)}var Xs,ss={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ae(c){return(c=Math.round(c))<0?0:c>255?255:c}function U(c){return ae(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function W(c){return(s=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:s>1?1:s;var s}function te(c,s,f){return f<0?f+=1:f>1&&(f-=1),6*f<1?c+(s-c)*f*6:2*f<1?s:3*f<2?c+(s-c)*(2/3-f)*6:c}try{Xs={}.parseCSSColor=function(c){var s,f=c.replace(/ /g,"").toLowerCase();if(f in ss)return ss[f].slice();if(f[0]==="#")return f.length===4?(s=parseInt(f.substr(1),16))>=0&&s<=4095?[(3840&s)>>4|(3840&s)>>8,240&s|(240&s)>>4,15&s|(15&s)<<4,1]:null:f.length===7&&(s=parseInt(f.substr(1),16))>=0&&s<=16777215?[(16711680&s)>>16,(65280&s)>>8,255&s,1]:null;var v=f.indexOf("("),w=f.indexOf(")");if(v!==-1&&w+1===f.length){var T=f.substr(0,v),A=f.substr(v+1,w-(v+1)).split(","),L=1;switch(T){case"rgba":if(A.length!==4)return null;L=W(A.pop());case"rgb":return A.length!==3?null:[U(A[0]),U(A[1]),U(A[2]),L];case"hsla":if(A.length!==4)return null;L=W(A.pop());case"hsl":if(A.length!==3)return null;var R=(parseFloat(A[0])%360+360)%360/360,N=W(A[1]),j=W(A[2]),G=j<=.5?j*(N+1):j+N-j*N,Y=2*j-G;return[ae(255*te(Y,G,R+1/3)),ae(255*te(Y,G,R)),ae(255*te(Y,G,R-1/3)),L];default:return null}}return null}}catch{}class ne{constructor(s,f,v,w=1){this.r=s,this.g=f,this.b=v,this.a=w}static parse(s){if(!s)return;if(s instanceof ne)return s;if(typeof s!="string")return;const f=Xs(s);return f?new ne(f[0]/255*f[3],f[1]/255*f[3],f[2]/255*f[3],f[3]):void 0}toString(){const[s,f,v,w]=this.toArray();return`rgba(${Math.round(s)},${Math.round(f)},${Math.round(v)},${w})`}toArray(){const{r:s,g:f,b:v,a:w}=this;return w===0?[0,0,0,0]:[255*s/w,255*f/w,255*v/w,w]}}ne.black=new ne(0,0,0,1),ne.white=new ne(1,1,1,1),ne.transparent=new ne(0,0,0,0),ne.red=new ne(1,0,0,1);class ge{constructor(s,f,v){this.sensitivity=s?f?"variant":"case":f?"accent":"base",this.locale=v,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,f){return this.collator.compare(s,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Se{constructor(s,f,v,w,T){this.text=s,this.image=f,this.scale=v,this.fontStack=w,this.textColor=T}}class xe{constructor(s){this.sections=s}static fromString(s){return new xe([new Se(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof xe?s:xe.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class _e{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof _e)return s;if(typeof s=="number")return new _e([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const f of s)if(typeof f!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new _e(s)}}toString(){return JSON.stringify(this.values)}}class Ee{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Ee({name:s,available:!1}):null}}function Ve(c,s,f,v){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof f=="number"&&f>=0&&f<=255?v===void 0||typeof v=="number"&&v>=0&&v<=1?null:`Invalid rgba value [${[c,s,f,v].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof v=="number"?[c,s,f,v]:[c,s,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ke(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof ne||c instanceof ge||c instanceof xe||c instanceof _e||c instanceof Ee)return!0;if(Array.isArray(c)){for(const s of c)if(!Ke(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!Ke(c[s]))return!1;return!0}return!1}function Be(c){if(c===null)return wn;if(typeof c=="string")return ur;if(typeof c=="boolean")return or;if(typeof c=="number")return st;if(c instanceof ne)return Kn;if(c instanceof ge)return oo;if(c instanceof xe)return $n;if(c instanceof _e)return Ws;if(c instanceof Ee)return Dn;if(Array.isArray(c)){const s=c.length;let f;for(const v of c){const w=Be(v);if(f){if(f===w)continue;f=rr;break}f=w}return pi(f||rr,s)}return Mo}function Lt(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof ne||c instanceof xe||c instanceof _e||c instanceof Ee?c.toString():JSON.stringify(c)}class zt{constructor(s,f){this.type=s,this.value=f}static parse(s,f){if(s.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Ke(s[1]))return f.error("invalid value");const v=s[1];let w=Be(v);const T=f.expectedType;return w.kind!=="array"||w.N!==0||!T||T.kind!=="array"||typeof T.N=="number"&&T.N!==0||(w=T),new zt(w,v)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class bt{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const Zt={string:ur,number:st,boolean:or,object:Mo};class Yt{constructor(s,f){this.type=s,this.args=f}static parse(s,f){if(s.length<2)return f.error("Expected at least one argument.");let v,w=1;const T=s[0];if(T==="array"){let L,R;if(s.length>2){const N=s[1];if(typeof N!="string"||!(N in Zt)||N==="object")return f.error('The item type argument of "array" must be one of string, number, boolean',1);L=Zt[N],w++}else L=rr;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return f.error('The length argument to "array" must be a positive integer literal',2);R=s[2],w++}v=pi(L,R)}else{if(!Zt[T])throw new Error(`Types doesn't contain name = ${T}`);v=Zt[T]}const A=[];for(;w<s.length;w++){const L=f.parse(s[w],w,rr);if(!L)return null;A.push(L)}return new Yt(v,A)}evaluate(s){for(let f=0;f<this.args.length;f++){const v=this.args[f].evaluate(s);if(!Ma(this.type,Be(v)))return v;if(f===this.args.length-1)throw new bt(`Expected value to be of type ${$r(this.type)}, but found ${$r(Be(v))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const wr={"to-boolean":or,"to-color":Kn,"to-number":st,"to-string":ur};class tr{constructor(s,f){this.type=s,this.args=f}static parse(s,f){if(s.length<2)return f.error("Expected at least one argument.");const v=s[0];if(!wr[v])throw new Error(`Can't parse ${v} as it is not part of the known types`);if((v==="to-boolean"||v==="to-string")&&s.length!==2)return f.error("Expected one argument.");const w=wr[v],T=[];for(let A=1;A<s.length;A++){const L=f.parse(s[A],A,rr);if(!L)return null;T.push(L)}return new tr(w,T)}evaluate(s){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(s));if(this.type.kind==="color"){let f,v;for(const w of this.args){if(f=w.evaluate(s),v=null,f instanceof ne)return f;if(typeof f=="string"){const T=s.parseColor(f);if(T)return T}else if(Array.isArray(f)&&(v=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Ve(f[0],f[1],f[2],f[3]),!v))return new ne(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new bt(v||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}if(this.type.kind==="padding"){let f;for(const v of this.args){f=v.evaluate(s);const w=_e.parse(f);if(w)return w}throw new bt(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}if(this.type.kind==="number"){let f=null;for(const v of this.args){if(f=v.evaluate(s),f===null)return 0;const w=Number(f);if(!isNaN(w))return w}throw new bt(`Could not convert ${JSON.stringify(f)} to number.`)}return this.type.kind==="formatted"?xe.fromString(Lt(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?Ee.fromString(Lt(this.args[0].evaluate(s))):Lt(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const fr=["Unknown","Point","LineString","Polygon"];class Sr{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?fr[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let f=this._parseColorCache[s];return f||(f=this._parseColorCache[s]=ne.parse(s)),f}}class Wr{constructor(s,f,v,w){this.name=s,this.type=f,this._evaluate=v,this.args=w}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,f){const v=s[0],w=Wr.definitions[v];if(!w)return f.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(w)?w[0]:w.type,A=Array.isArray(w)?[[w[1],w[2]]]:w.overloads,L=A.filter(([N])=>!Array.isArray(N)||N.length===s.length-1);let R=null;for(const[N,j]of L){R=new Js(f.registry,f.path,null,f.scope);const G=[];let Y=!1;for(let Q=1;Q<s.length;Q++){const ee=s[Q],me=Array.isArray(N)?N[Q-1]:N.type,pe=R.parse(ee,1+G.length,me);if(!pe){Y=!0;break}G.push(pe)}if(!Y)if(Array.isArray(N)&&N.length!==G.length)R.error(`Expected ${N.length} arguments, but found ${G.length} instead.`);else{for(let Q=0;Q<G.length;Q++){const ee=Array.isArray(N)?N[Q]:N.type,me=G[Q];R.concat(Q+1).checkSubtype(ee,me.type)}if(R.errors.length===0)return new Wr(v,T,j,G)}}if(L.length===1)f.errors.push(...R.errors);else{const N=(L.length?L:A).map(([G])=>{return Y=G,Array.isArray(Y)?`(${Y.map($r).join(", ")})`:`(${$r(Y.type)}...)`;var Y}).join(" | "),j=[];for(let G=1;G<s.length;G++){const Y=f.parse(s[G],1+j.length);if(!Y)return null;j.push($r(Y.type))}f.error(`Expected arguments of type ${N}, but found (${j.join(", ")}) instead.`)}return null}static register(s,f){Wr.definitions=f;for(const v in f)s[v]=Wr}}class jn{constructor(s,f,v){this.type=oo,this.locale=v,this.caseSensitive=s,this.diacriticSensitive=f}static parse(s,f){if(s.length!==2)return f.error("Expected one argument.");const v=s[1];if(typeof v!="object"||Array.isArray(v))return f.error("Collator options argument must be an object.");const w=f.parse(v["case-sensitive"]!==void 0&&v["case-sensitive"],1,or);if(!w)return null;const T=f.parse(v["diacritic-sensitive"]!==void 0&&v["diacritic-sensitive"],1,or);if(!T)return null;let A=null;return v.locale&&(A=f.parse(v.locale,1,ur),!A)?null:new jn(w,T,A)}evaluate(s){return new ge(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const ln=8192;function ai(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function Ys(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function Wl(c,s){const f=(180+c[0])/360,v=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,w=Math.pow(2,s.z);return[Math.round(f*w*ln),Math.round(v*w*ln)]}function Zr(c,s,f){const v=c[0]-s[0],w=c[1]-s[1],T=c[0]-f[0],A=c[1]-f[1];return v*A-T*w==0&&v*T<=0&&w*A<=0}function wf(c,s){let f=!1;for(let A=0,L=s.length;A<L;A++){const R=s[A];for(let N=0,j=R.length;N<j-1;N++){if(Zr(c,R[N],R[N+1]))return!1;(w=R[N])[1]>(v=c)[1]!=(T=R[N+1])[1]>v[1]&&v[0]<(T[0]-w[0])*(v[1]-w[1])/(T[1]-w[1])+w[0]&&(f=!f)}}var v,w,T;return f}function Sf(c,s){for(let f=0;f<s.length;f++)if(wf(c,s[f]))return!0;return!1}function Tm(c,s,f,v){const w=v[0]-f[0],T=v[1]-f[1],A=(c[0]-f[0])*T-w*(c[1]-f[1]),L=(s[0]-f[0])*T-w*(s[1]-f[1]);return A>0&&L<0||A<0&&L>0}function Em(c,s,f){for(const N of f)for(let j=0;j<N.length-1;++j)if((L=[(A=N[j+1])[0]-(T=N[j])[0],A[1]-T[1]])[0]*(R=[(w=s)[0]-(v=c)[0],w[1]-v[1]])[1]-L[1]*R[0]!=0&&Tm(v,w,T,A)&&Tm(T,A,v,w))return!0;var v,w,T,A,L,R;return!1}function Tf(c,s){for(let f=0;f<c.length;++f)if(!wf(c[f],s))return!1;for(let f=0;f<c.length-1;++f)if(Em(c[f],c[f+1],s))return!1;return!0}function qy(c,s){for(let f=0;f<s.length;f++)if(Tf(c,s[f]))return!0;return!1}function Ec(c,s,f){const v=[];for(let w=0;w<c.length;w++){const T=[];for(let A=0;A<c[w].length;A++){const L=Wl(c[w][A],f);ai(s,L),T.push(L)}v.push(T)}return v}function Ef(c,s,f){const v=[];for(let w=0;w<c.length;w++){const T=Ec(c[w],s,f);v.push(T)}return v}function Cm(c,s,f,v){if(c[0]<f[0]||c[0]>f[2]){const w=.5*v;let T=c[0]-f[0]>w?-v:f[0]-c[0]>w?v:0;T===0&&(T=c[0]-f[2]>w?-v:f[2]-c[0]>w?v:0),c[0]+=T}ai(s,c)}function Am(c,s,f,v){const w=Math.pow(2,v.z)*ln,T=[v.x*ln,v.y*ln],A=[];for(const L of c)for(const R of L){const N=[R.x+T[0],R.y+T[1]];Cm(N,s,f,w),A.push(N)}return A}function Im(c,s,f,v){const w=Math.pow(2,v.z)*ln,T=[v.x*ln,v.y*ln],A=[];for(const R of c){const N=[];for(const j of R){const G=[j.x+T[0],j.y+T[1]];ai(s,G),N.push(G)}A.push(N)}if(s[2]-s[0]<=w/2){(L=s)[0]=L[1]=1/0,L[2]=L[3]=-1/0;for(const R of A)for(const N of R)Cm(N,s,f,w)}var L;return A}class ls{constructor(s,f){this.type=or,this.geojson=s,this.geometries=f}static parse(s,f){if(s.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Ke(s[1])){const v=s[1];if(v.type==="FeatureCollection")for(let w=0;w<v.features.length;++w){const T=v.features[w].geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new ls(v,v.features[w].geometry)}else if(v.type==="Feature"){const w=v.geometry.type;if(w==="Polygon"||w==="MultiPolygon")return new ls(v,v.geometry)}else if(v.type==="Polygon"||v.type==="MultiPolygon")return new ls(v,v)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(f,v){const w=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],A=f.canonicalID();if(v.type==="Polygon"){const L=Ec(v.coordinates,T,A),R=Am(f.geometry(),w,T,A);if(!Ys(w,T))return!1;for(const N of R)if(!wf(N,L))return!1}if(v.type==="MultiPolygon"){const L=Ef(v.coordinates,T,A),R=Am(f.geometry(),w,T,A);if(!Ys(w,T))return!1;for(const N of R)if(!Sf(N,L))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(f,v){const w=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],A=f.canonicalID();if(v.type==="Polygon"){const L=Ec(v.coordinates,T,A),R=Im(f.geometry(),w,T,A);if(!Ys(w,T))return!1;for(const N of R)if(!Tf(N,L))return!1}if(v.type==="MultiPolygon"){const L=Ef(v.coordinates,T,A),R=Im(f.geometry(),w,T,A);if(!Ys(w,T))return!1;for(const N of R)if(!qy(N,L))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Zl(c){if(c instanceof Wr&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof ls)return!1;let s=!0;return c.eachChild(f=>{s&&!Zl(f)&&(s=!1)}),s}function Ks(c){if(c instanceof Wr&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(f=>{s&&!Ks(f)&&(s=!1)}),s}function Cc(c,s){if(c instanceof Wr&&s.indexOf(c.name)>=0)return!1;let f=!0;return c.eachChild(v=>{f&&!Cc(v,s)&&(f=!1)}),f}class Ac{constructor(s,f){this.type=f.type,this.name=s,this.boundExpression=f}static parse(s,f){if(s.length!==2||typeof s[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");const v=s[1];return f.scope.has(v)?new Ac(v,f.scope.get(v)):f.error(`Unknown variable "${v}". Make sure "${v}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Js{constructor(s,f=[],v,w=new ii,T=[]){this.registry=s,this.path=f,this.key=f.map(A=>`[${A}]`).join(""),this.scope=w,this.errors=T,this.expectedType=v}parse(s,f,v,w,T={}){return f?this.concat(f,v,w)._parse(s,T):this._parse(s,T)}_parse(s,f){function v(w,T,A){return A==="assert"?new Yt(T,[w]):A==="coerce"?new tr(T,[w]):w}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const w=s[0];if(typeof w!="string")return this.error(`Expression name must be a string, but found ${typeof w} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[w];if(T){let A=T.parse(s,this);if(!A)return null;if(this.expectedType){const L=this.expectedType,R=A.type;if(L.kind!=="string"&&L.kind!=="number"&&L.kind!=="boolean"&&L.kind!=="object"&&L.kind!=="array"||R.kind!=="value")if(L.kind!=="color"&&L.kind!=="formatted"&&L.kind!=="resolvedImage"||R.kind!=="value"&&R.kind!=="string")if(L.kind!=="padding"||R.kind!=="value"&&R.kind!=="number"&&R.kind!=="array"){if(this.checkSubtype(L,R))return null}else A=v(A,L,f.typeAnnotation||"coerce");else A=v(A,L,f.typeAnnotation||"coerce");else A=v(A,L,f.typeAnnotation||"assert")}if(!(A instanceof zt)&&A.type.kind!=="resolvedImage"&&Cf(A)){const L=new Sr;try{A=new zt(A.type,A.evaluate(L))}catch(R){return this.error(R.message),null}}return A}return this.error(`Unknown expression "${w}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,f,v){const w=typeof s=="number"?this.path.concat(s):this.path,T=v?this.scope.concat(v):this.scope;return new Js(this.registry,w,f||null,T,this.errors)}error(s,...f){const v=`${this.key}${f.map(w=>`[${w}]`).join("")}`;this.errors.push(new Bn(v,s))}checkSubtype(s,f){const v=Ma(s,f);return v&&this.error(v),v}}function Cf(c){if(c instanceof Ac)return Cf(c.boundExpression);if(c instanceof Wr&&c.name==="error"||c instanceof jn||c instanceof ls)return!1;const s=c instanceof tr||c instanceof Yt;let f=!0;return c.eachChild(v=>{f=s?f&&Cf(v):f&&v instanceof zt}),!!f&&Zl(c)&&Cc(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ic(c,s){const f=c.length-1;let v,w,T=0,A=f,L=0;for(;T<=A;)if(L=Math.floor((T+A)/2),v=c[L],w=c[L+1],v<=s){if(L===f||s<w)return L;T=L+1}else{if(!(v>s))throw new bt("Input is not a number.");A=L-1}return 0}class Xl{constructor(s,f,v){this.type=s,this.input=f,this.labels=[],this.outputs=[];for(const[w,T]of v)this.labels.push(w),this.outputs.push(T)}static parse(s,f){if(s.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return f.error("Expected an even number of arguments.");const v=f.parse(s[1],1,st);if(!v)return null;const w=[];let T=null;f.expectedType&&f.expectedType.kind!=="value"&&(T=f.expectedType);for(let A=1;A<s.length;A+=2){const L=A===1?-1/0:s[A],R=s[A+1],N=A,j=A+1;if(typeof L!="number")return f.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(w.length&&w[w.length-1][0]>=L)return f.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',N);const G=f.parse(R,j,T);if(!G)return null;T=T||G.type,w.push([L,G])}return new Xl(T,v,w)}evaluate(s){const f=this.labels,v=this.outputs;if(f.length===1)return v[0].evaluate(s);const w=this.input.evaluate(s);if(w<=f[0])return v[0].evaluate(s);const T=f.length;return w>=f[T-1]?v[T-1].evaluate(s):v[Ic(f,w)].evaluate(s)}eachChild(s){s(this.input);for(const f of this.outputs)s(f)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function un(c,s,f){return c*(1-f)+s*f}var Yl=Object.freeze({__proto__:null,number:un,color:function(c,s,f){return new ne(un(c.r,s.r,f),un(c.g,s.g,f),un(c.b,s.b,f),un(c.a,s.a,f))},array:function(c,s,f){return c.map((v,w)=>un(v,s[w],f))},padding:function(c,s,f){const v=c.values,w=s.values;return new _e([un(v[0],w[0],f),un(v[1],w[1],f),un(v[2],w[2],f),un(v[3],w[3],f)])}});const Pm=.95047,Mm=1.08883,Af=4/29,Pc=6/29,Dm=3*Pc*Pc,Wy=Math.PI/180,Zy=180/Math.PI;function If(c){return c>.008856451679035631?Math.pow(c,1/3):c/Dm+Af}function Pf(c){return c>Pc?c*c*c:Dm*(c-Af)}function Mf(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function Df(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Dr(c){const s=Df(c.r),f=Df(c.g),v=Df(c.b),w=If((.4124564*s+.3575761*f+.1804375*v)/Pm),T=If((.2126729*s+.7151522*f+.072175*v)/1);return{l:116*T-16,a:500*(w-T),b:200*(T-If((.0193339*s+.119192*f+.9503041*v)/Mm)),alpha:c.a}}function km(c){let s=(c.l+16)/116,f=isNaN(c.a)?s:s+c.a/500,v=isNaN(c.b)?s:s-c.b/200;return s=1*Pf(s),f=Pm*Pf(f),v=Mm*Pf(v),new ne(Mf(3.2404542*f-1.5371385*s-.4985314*v),Mf(-.969266*f+1.8760108*s+.041556*v),Mf(.0556434*f-.2040259*s+1.0572252*v),c.alpha)}function Xy(c,s,f){const v=s-c;return c+f*(v>180||v<-180?v-360*Math.round(v/360):v)}const Kl={forward:Dr,reverse:km,interpolate:function(c,s,f){return{l:un(c.l,s.l,f),a:un(c.a,s.a,f),b:un(c.b,s.b,f),alpha:un(c.alpha,s.alpha,f)}}},Jl={forward:function(c){const{l:s,a:f,b:v}=Dr(c),w=Math.atan2(v,f)*Zy;return{h:w<0?w+360:w,c:Math.sqrt(f*f+v*v),l:s,alpha:c.a}},reverse:function(c){const s=c.h*Wy,f=c.c;return km({l:c.l,a:Math.cos(s)*f,b:Math.sin(s)*f,alpha:c.alpha})},interpolate:function(c,s,f){return{h:Xy(c.h,s.h,f),c:un(c.c,s.c,f),l:un(c.l,s.l,f),alpha:un(c.alpha,s.alpha,f)}}};var Lm=Object.freeze({__proto__:null,lab:Kl,hcl:Jl});class zi{constructor(s,f,v,w,T){this.type=s,this.operator=f,this.interpolation=v,this.input=w,this.labels=[],this.outputs=[];for(const[A,L]of T)this.labels.push(A),this.outputs.push(L)}static interpolationFactor(s,f,v,w){let T=0;if(s.name==="exponential")T=kf(f,s.base,v,w);else if(s.name==="linear")T=kf(f,1,v,w);else if(s.name==="cubic-bezier"){const A=s.controlPoints;T=new h(A[0],A[1],A[2],A[3]).solve(kf(f,1,v,w))}return T}static parse(s,f){let[v,w,T,...A]=s;if(!Array.isArray(w)||w.length===0)return f.error("Expected an interpolation type expression.",1);if(w[0]==="linear")w={name:"linear"};else if(w[0]==="exponential"){const N=w[1];if(typeof N!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);w={name:"exponential",base:N}}else{if(w[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(w[0])}`,1,0);{const N=w.slice(1);if(N.length!==4||N.some(j=>typeof j!="number"||j<0||j>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);w={name:"cubic-bezier",controlPoints:N}}}if(s.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(T=f.parse(T,2,st),!T)return null;const L=[];let R=null;v==="interpolate-hcl"||v==="interpolate-lab"?R=Kn:f.expectedType&&f.expectedType.kind!=="value"&&(R=f.expectedType);for(let N=0;N<A.length;N+=2){const j=A[N],G=A[N+1],Y=N+3,Q=N+4;if(typeof j!="number")return f.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(L.length&&L[L.length-1][0]>=j)return f.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const ee=f.parse(G,Q,R);if(!ee)return null;R=R||ee.type,L.push([j,ee])}return R.kind==="number"||R.kind==="color"||R.kind==="padding"||R.kind==="array"&&R.itemType.kind==="number"&&typeof R.N=="number"?new zi(R,v,w,T,L):f.error(`Type ${$r(R)} is not interpolatable.`)}evaluate(s){const f=this.labels,v=this.outputs;if(f.length===1)return v[0].evaluate(s);const w=this.input.evaluate(s);if(w<=f[0])return v[0].evaluate(s);const T=f.length;if(w>=f[T-1])return v[T-1].evaluate(s);const A=Ic(f,w),L=zi.interpolationFactor(this.interpolation,w,f[A],f[A+1]),R=v[A].evaluate(s),N=v[A+1].evaluate(s);return this.operator==="interpolate"?Yl[this.type.kind.toLowerCase()](R,N,L):this.operator==="interpolate-hcl"?Jl.reverse(Jl.interpolate(Jl.forward(R),Jl.forward(N),L)):Kl.reverse(Kl.interpolate(Kl.forward(R),Kl.forward(N),L))}eachChild(s){s(this.input);for(const f of this.outputs)s(f)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function kf(c,s,f,v){const w=v-f,T=c-f;return w===0?0:s===1?T/w:(Math.pow(s,T)-1)/(Math.pow(s,w)-1)}class Mc{constructor(s,f){this.type=s,this.args=f}static parse(s,f){if(s.length<2)return f.error("Expectected at least one argument.");let v=null;const w=f.expectedType;w&&w.kind!=="value"&&(v=w);const T=[];for(const L of s.slice(1)){const R=f.parse(L,1+T.length,v,void 0,{typeAnnotation:"omit"});if(!R)return null;v=v||R.type,T.push(R)}if(!v)throw new Error("No output type");const A=w&&T.some(L=>Ma(w,L.type));return new Mc(A?rr:v,T)}evaluate(s){let f,v=null,w=0;for(const T of this.args)if(w++,v=T.evaluate(s),v&&v instanceof Ee&&!v.available&&(f||(f=v.name),v=null,w===this.args.length&&(v=f)),v!==null)break;return v}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class Dc{constructor(s,f){this.type=f.type,this.bindings=[].concat(s),this.result=f}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const f of this.bindings)s(f[1]);s(this.result)}static parse(s,f){if(s.length<4)return f.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const v=[];for(let T=1;T<s.length-1;T+=2){const A=s[T];if(typeof A!="string")return f.error(`Expected string, but found ${typeof A} instead.`,T);if(/[^a-zA-Z0-9_]/.test(A))return f.error("Variable names must contain only alphanumeric characters or '_'.",T);const L=f.parse(s[T+1],T+1);if(!L)return null;v.push([A,L])}const w=f.parse(s[s.length-1],s.length-1,f.expectedType,v);return w?new Dc(v,w):null}outputDefined(){return this.result.outputDefined()}}class Lf{constructor(s,f,v){this.type=s,this.index=f,this.input=v}static parse(s,f){if(s.length!==3)return f.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const v=f.parse(s[1],1,st),w=f.parse(s[2],2,pi(f.expectedType||rr));return v&&w?new Lf(w.type.itemType,v,w):null}evaluate(s){const f=this.index.evaluate(s),v=this.input.evaluate(s);if(f<0)throw new bt(`Array index out of bounds: ${f} < 0.`);if(f>=v.length)throw new bt(`Array index out of bounds: ${f} > ${v.length-1}.`);if(f!==Math.floor(f))throw new bt(`Array index must be an integer, but found ${f} instead.`);return v[f]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Of{constructor(s,f){this.type=or,this.needle=s,this.haystack=f}static parse(s,f){if(s.length!==3)return f.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const v=f.parse(s[1],1,rr),w=f.parse(s[2],2,rr);return v&&w?as(v.type,[or,ur,st,wn,rr])?new Of(v,w):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${$r(v.type)} instead`):null}evaluate(s){const f=this.needle.evaluate(s),v=this.haystack.evaluate(s);if(!v)return!1;if(!os(f,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${$r(Be(f))} instead.`);if(!os(v,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${$r(Be(v))} instead.`);return v.indexOf(f)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class kc{constructor(s,f,v){this.type=st,this.needle=s,this.haystack=f,this.fromIndex=v}static parse(s,f){if(s.length<=2||s.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const v=f.parse(s[1],1,rr),w=f.parse(s[2],2,rr);if(!v||!w)return null;if(!as(v.type,[or,ur,st,wn,rr]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${$r(v.type)} instead`);if(s.length===4){const T=f.parse(s[3],3,st);return T?new kc(v,w,T):null}return new kc(v,w)}evaluate(s){const f=this.needle.evaluate(s),v=this.haystack.evaluate(s);if(!os(f,["boolean","string","number","null"]))throw new bt(`Expected first argument to be of type boolean, string, number or null, but found ${$r(Be(f))} instead.`);if(!os(v,["string","array"]))throw new bt(`Expected second argument to be of type array or string, but found ${$r(Be(v))} instead.`);if(this.fromIndex){const w=this.fromIndex.evaluate(s);return v.indexOf(f,w)}return v.indexOf(f)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Rf{constructor(s,f,v,w,T,A){this.inputType=s,this.type=f,this.input=v,this.cases=w,this.outputs=T,this.otherwise=A}static parse(s,f){if(s.length<5)return f.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return f.error("Expected an even number of arguments.");let v,w;f.expectedType&&f.expectedType.kind!=="value"&&(w=f.expectedType);const T={},A=[];for(let N=2;N<s.length-1;N+=2){let j=s[N];const G=s[N+1];Array.isArray(j)||(j=[j]);const Y=f.concat(N);if(j.length===0)return Y.error("Expected at least one branch label.");for(const ee of j){if(typeof ee!="number"&&typeof ee!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return Y.error("Numeric branch labels must be integer values.");if(v){if(Y.checkSubtype(v,Be(ee)))return null}else v=Be(ee);if(T[String(ee)]!==void 0)return Y.error("Branch labels must be unique.");T[String(ee)]=A.length}const Q=f.parse(G,N,w);if(!Q)return null;w=w||Q.type,A.push(Q)}const L=f.parse(s[1],1,rr);if(!L)return null;const R=f.parse(s[s.length-1],s.length-1,w);return R?L.type.kind!=="value"&&f.concat(1).checkSubtype(v,L.type)?null:new Rf(v,w,L,T,A,R):null}evaluate(s){const f=this.input.evaluate(s);return(Be(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class zf{constructor(s,f,v){this.type=s,this.branches=f,this.otherwise=v}static parse(s,f){if(s.length<4)return f.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return f.error("Expected an odd number of arguments.");let v;f.expectedType&&f.expectedType.kind!=="value"&&(v=f.expectedType);const w=[];for(let A=1;A<s.length-1;A+=2){const L=f.parse(s[A],A,or);if(!L)return null;const R=f.parse(s[A+1],A+1,v);if(!R)return null;w.push([L,R]),v=v||R.type}const T=f.parse(s[s.length-1],s.length-1,v);if(!T)return null;if(!v)throw new Error("Can't infer output type");return new zf(v,w,T)}evaluate(s){for(const[f,v]of this.branches)if(f.evaluate(s))return v.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[f,v]of this.branches)s(f),s(v);s(this.otherwise)}outputDefined(){return this.branches.every(([s,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class Lc{constructor(s,f,v,w){this.type=s,this.input=f,this.beginIndex=v,this.endIndex=w}static parse(s,f){if(s.length<=2||s.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const v=f.parse(s[1],1,rr),w=f.parse(s[2],2,st);if(!v||!w)return null;if(!as(v.type,[pi(rr),ur,rr]))return f.error(`Expected first argument to be of type array or string, but found ${$r(v.type)} instead`);if(s.length===4){const T=f.parse(s[3],3,st);return T?new Lc(v.type,v,w,T):null}return new Lc(v.type,v,w)}evaluate(s){const f=this.input.evaluate(s),v=this.beginIndex.evaluate(s);if(!os(f,["string","array"]))throw new bt(`Expected first argument to be of type array or string, but found ${$r(Be(f))} instead.`);if(this.endIndex){const w=this.endIndex.evaluate(s);return f.slice(v,w)}return f.slice(v)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Om(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Rm(c,s,f,v){return v.compare(s,f)===0}function Qs(c,s,f){const v=c!=="=="&&c!=="!=";return class $k{constructor(T,A,L){this.type=or,this.lhs=T,this.rhs=A,this.collator=L,this.hasUntypedArgument=T.type.kind==="value"||A.type.kind==="value"}static parse(T,A){if(T.length!==3&&T.length!==4)return A.error("Expected two or three arguments.");const L=T[0];let R=A.parse(T[1],1,rr);if(!R)return null;if(!Om(L,R.type))return A.concat(1).error(`"${L}" comparisons are not supported for type '${$r(R.type)}'.`);let N=A.parse(T[2],2,rr);if(!N)return null;if(!Om(L,N.type))return A.concat(2).error(`"${L}" comparisons are not supported for type '${$r(N.type)}'.`);if(R.type.kind!==N.type.kind&&R.type.kind!=="value"&&N.type.kind!=="value")return A.error(`Cannot compare types '${$r(R.type)}' and '${$r(N.type)}'.`);v&&(R.type.kind==="value"&&N.type.kind!=="value"?R=new Yt(N.type,[R]):R.type.kind!=="value"&&N.type.kind==="value"&&(N=new Yt(R.type,[N])));let j=null;if(T.length===4){if(R.type.kind!=="string"&&N.type.kind!=="string"&&R.type.kind!=="value"&&N.type.kind!=="value")return A.error("Cannot use collator to compare non-string types.");if(j=A.parse(T[3],3,oo),!j)return null}return new $k(R,N,j)}evaluate(T){const A=this.lhs.evaluate(T),L=this.rhs.evaluate(T);if(v&&this.hasUntypedArgument){const R=Be(A),N=Be(L);if(R.kind!==N.kind||R.kind!=="string"&&R.kind!=="number")throw new bt(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${R.kind}, ${N.kind}) instead.`)}if(this.collator&&!v&&this.hasUntypedArgument){const R=Be(A),N=Be(L);if(R.kind!=="string"||N.kind!=="string")return s(T,A,L)}return this.collator?f(T,A,L,this.collator.evaluate(T)):s(T,A,L)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}}}const Yy=Qs("==",function(c,s,f){return s===f},Rm),Ky=Qs("!=",function(c,s,f){return s!==f},function(c,s,f,v){return!Rm(0,s,f,v)}),Jy=Qs("<",function(c,s,f){return s<f},function(c,s,f,v){return v.compare(s,f)<0}),Qy=Qs(">",function(c,s,f){return s>f},function(c,s,f,v){return v.compare(s,f)>0}),e0=Qs("<=",function(c,s,f){return s<=f},function(c,s,f,v){return v.compare(s,f)<=0}),t0=Qs(">=",function(c,s,f){return s>=f},function(c,s,f,v){return v.compare(s,f)>=0});class Bf{constructor(s,f,v,w,T){this.type=ur,this.number=s,this.locale=f,this.currency=v,this.minFractionDigits=w,this.maxFractionDigits=T}static parse(s,f){if(s.length!==3)return f.error("Expected two arguments.");const v=f.parse(s[1],1,st);if(!v)return null;const w=s[2];if(typeof w!="object"||Array.isArray(w))return f.error("NumberFormat options argument must be an object.");let T=null;if(w.locale&&(T=f.parse(w.locale,1,ur),!T))return null;let A=null;if(w.currency&&(A=f.parse(w.currency,1,ur),!A))return null;let L=null;if(w["min-fraction-digits"]&&(L=f.parse(w["min-fraction-digits"],1,st),!L))return null;let R=null;return w["max-fraction-digits"]&&(R=f.parse(w["max-fraction-digits"],1,st),!R)?null:new Bf(v,T,A,L,R)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Oc{constructor(s){this.type=$n,this.sections=s}static parse(s,f){if(s.length<2)return f.error("Expected at least one argument.");const v=s[1];if(!Array.isArray(v)&&typeof v=="object")return f.error("First argument must be an image or text section.");const w=[];let T=!1;for(let A=1;A<=s.length-1;++A){const L=s[A];if(T&&typeof L=="object"&&!Array.isArray(L)){T=!1;let R=null;if(L["font-scale"]&&(R=f.parse(L["font-scale"],1,st),!R))return null;let N=null;if(L["text-font"]&&(N=f.parse(L["text-font"],1,pi(ur)),!N))return null;let j=null;if(L["text-color"]&&(j=f.parse(L["text-color"],1,Kn),!j))return null;const G=w[w.length-1];G.scale=R,G.font=N,G.textColor=j}else{const R=f.parse(s[A],1,rr);if(!R)return null;const N=R.type.kind;if(N!=="string"&&N!=="value"&&N!=="null"&&N!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,w.push({content:R,scale:null,font:null,textColor:null})}}return new Oc(w)}evaluate(s){return new xe(this.sections.map(f=>{const v=f.content.evaluate(s);return Be(v)===Dn?new Se("",v,null,null,null):new Se(Lt(v),null,f.scale?f.scale.evaluate(s):null,f.font?f.font.evaluate(s).join(","):null,f.textColor?f.textColor.evaluate(s):null)}))}eachChild(s){for(const f of this.sections)s(f.content),f.scale&&s(f.scale),f.font&&s(f.font),f.textColor&&s(f.textColor)}outputDefined(){return!1}}class Ff{constructor(s){this.type=Dn,this.input=s}static parse(s,f){if(s.length!==2)return f.error("Expected two arguments.");const v=f.parse(s[1],1,ur);return v?new Ff(v):f.error("No image name provided.")}evaluate(s){const f=this.input.evaluate(s),v=Ee.fromString(f);return v&&s.availableImages&&(v.available=s.availableImages.indexOf(f)>-1),v}eachChild(s){s(this.input)}outputDefined(){return!1}}class Nf{constructor(s){this.type=st,this.input=s}static parse(s,f){if(s.length!==2)return f.error(`Expected 1 argument, but found ${s.length-1} instead.`);const v=f.parse(s[1],1);return v?v.type.kind!=="array"&&v.type.kind!=="string"&&v.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${$r(v.type)} instead.`):new Nf(v):null}evaluate(s){const f=this.input.evaluate(s);if(typeof f=="string"||Array.isArray(f))return f.length;throw new bt(`Expected value to be of type string or array, but found ${$r(Be(f))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const el={"==":Yy,"!=":Ky,">":Qy,"<":Jy,">=":t0,"<=":e0,array:Yt,at:Lf,boolean:Yt,case:zf,coalesce:Mc,collator:jn,format:Oc,image:Ff,in:Of,"index-of":kc,interpolate:zi,"interpolate-hcl":zi,"interpolate-lab":zi,length:Nf,let:Dc,literal:zt,match:Rf,number:Yt,"number-format":Bf,object:Yt,slice:Lc,step:Xl,string:Yt,"to-boolean":tr,"to-color":tr,"to-number":tr,"to-string":tr,var:Ac,within:ls};function zm(c,[s,f,v,w]){s=s.evaluate(c),f=f.evaluate(c),v=v.evaluate(c);const T=w?w.evaluate(c):1,A=Ve(s,f,v,T);if(A)throw new bt(A);return new ne(s/255*T,f/255*T,v/255*T,T)}function Bm(c,s){return c in s}function Rc(c,s){const f=s[c];return f===void 0?null:f}function us(c){return{type:c}}function Fm(c){return{result:"success",value:c}}function tl(c){return{result:"error",value:c}}function an(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function Nm(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function xr(c){return!!c.expression&&c.expression.interpolated}function kr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function en(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function cn(c){return c}function Ql(c,s){const f=s.type==="color",v=c.stops&&typeof c.stops[0][0]=="object",w=v||!(v||c.property!==void 0),T=c.type||(xr(s)?"exponential":"interval");if(f||s.type==="padding"){const N=f?ne.parse:_e.parse;(c=xn({},c)).stops&&(c.stops=c.stops.map(j=>[j[0],N(j[1])])),c.default=N(c.default?c.default:s.default)}if(c.colorSpace&&c.colorSpace!=="rgb"&&!Lm[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let A,L,R;if(T==="exponential")A=Vm;else if(T==="interval")A=n0;else if(T==="categorical"){A=r0,L=Object.create(null);for(const N of c.stops)L[N[0]]=N[1];R=typeof c.stops[0][0]}else{if(T!=="identity")throw new Error(`Unknown function type "${T}"`);A=i0}if(v){const N={},j=[];for(let Q=0;Q<c.stops.length;Q++){const ee=c.stops[Q],me=ee[0].zoom;N[me]===void 0&&(N[me]={zoom:me,type:c.type,property:c.property,default:c.default,stops:[]},j.push(me)),N[me].stops.push([ee[0].value,ee[1]])}const G=[];for(const Q of j)G.push([N[Q].zoom,Ql(N[Q],s)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:zi.interpolationFactor.bind(void 0,Y),zoomStops:G.map(Q=>Q[0]),evaluate:({zoom:Q},ee)=>Vm({stops:G,base:c.base},s,Q).evaluate(Q,ee)}}if(w){const N=T==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:zi.interpolationFactor.bind(void 0,N),zoomStops:c.stops.map(j=>j[0]),evaluate:({zoom:j})=>A(c,s,j,L,R)}}return{kind:"source",evaluate(N,j){const G=j&&j.properties?j.properties[c.property]:void 0;return G===void 0?rl(c.default,s.default):A(c,s,G,L,R)}}}function rl(c,s,f){return c!==void 0?c:s!==void 0?s:f!==void 0?f:void 0}function r0(c,s,f,v,w){return rl(typeof f===w?v[f]:void 0,c.default,s.default)}function n0(c,s,f){if(kr(f)!=="number")return rl(c.default,s.default);const v=c.stops.length;if(v===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[v-1][0])return c.stops[v-1][1];const w=Ic(c.stops.map(T=>T[0]),f);return c.stops[w][1]}function Vm(c,s,f){const v=c.base!==void 0?c.base:1;if(kr(f)!=="number")return rl(c.default,s.default);const w=c.stops.length;if(w===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[w-1][0])return c.stops[w-1][1];const T=Ic(c.stops.map(j=>j[0]),f),A=function(j,G,Y,Q){const ee=Q-Y,me=j-Y;return ee===0?0:G===1?me/ee:(Math.pow(G,me)-1)/(Math.pow(G,ee)-1)}(f,v,c.stops[T][0],c.stops[T+1][0]),L=c.stops[T][1],R=c.stops[T+1][1];let N=Yl[s.type]||cn;if(c.colorSpace&&c.colorSpace!=="rgb"){const j=Lm[c.colorSpace];N=(G,Y)=>j.reverse(j.interpolate(j.forward(G),j.forward(Y),A))}return typeof L.evaluate=="function"?{evaluate(...j){const G=L.evaluate.apply(void 0,j),Y=R.evaluate.apply(void 0,j);if(G!==void 0&&Y!==void 0)return N(G,Y,A)}}:N(L,R,A)}function i0(c,s,f){switch(s.type){case"color":f=ne.parse(f);break;case"formatted":f=xe.fromString(f.toString());break;case"resolvedImage":f=Ee.fromString(f.toString());break;case"padding":f=_e.parse(f);break;default:kr(f)===s.type||s.type==="enum"&&s.values[f]||(f=void 0)}return rl(f,c.default,s.default)}Wr.register(el,{error:[{kind:"error"},[ur],(c,[s])=>{throw new bt(s.evaluate(c))}],typeof:[ur,[rr],(c,[s])=>$r(Be(s.evaluate(c)))],"to-rgba":[pi(st,4),[Kn],(c,[s])=>s.evaluate(c).toArray()],rgb:[Kn,[st,st,st],zm],rgba:[Kn,[st,st,st,st],zm],has:{type:or,overloads:[[[ur],(c,[s])=>Bm(s.evaluate(c),c.properties())],[[ur,Mo],(c,[s,f])=>Bm(s.evaluate(c),f.evaluate(c))]]},get:{type:rr,overloads:[[[ur],(c,[s])=>Rc(s.evaluate(c),c.properties())],[[ur,Mo],(c,[s,f])=>Rc(s.evaluate(c),f.evaluate(c))]]},"feature-state":[rr,[ur],(c,[s])=>Rc(s.evaluate(c),c.featureState||{})],properties:[Mo,[],c=>c.properties()],"geometry-type":[ur,[],c=>c.geometryType()],id:[rr,[],c=>c.id()],zoom:[st,[],c=>c.globals.zoom],"heatmap-density":[st,[],c=>c.globals.heatmapDensity||0],"line-progress":[st,[],c=>c.globals.lineProgress||0],accumulated:[rr,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[st,us(st),(c,s)=>{let f=0;for(const v of s)f+=v.evaluate(c);return f}],"*":[st,us(st),(c,s)=>{let f=1;for(const v of s)f*=v.evaluate(c);return f}],"-":{type:st,overloads:[[[st,st],(c,[s,f])=>s.evaluate(c)-f.evaluate(c)],[[st],(c,[s])=>-s.evaluate(c)]]},"/":[st,[st,st],(c,[s,f])=>s.evaluate(c)/f.evaluate(c)],"%":[st,[st,st],(c,[s,f])=>s.evaluate(c)%f.evaluate(c)],ln2:[st,[],()=>Math.LN2],pi:[st,[],()=>Math.PI],e:[st,[],()=>Math.E],"^":[st,[st,st],(c,[s,f])=>Math.pow(s.evaluate(c),f.evaluate(c))],sqrt:[st,[st],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[st,[st],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[st,[st],(c,[s])=>Math.log(s.evaluate(c))],log2:[st,[st],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[st,[st],(c,[s])=>Math.sin(s.evaluate(c))],cos:[st,[st],(c,[s])=>Math.cos(s.evaluate(c))],tan:[st,[st],(c,[s])=>Math.tan(s.evaluate(c))],asin:[st,[st],(c,[s])=>Math.asin(s.evaluate(c))],acos:[st,[st],(c,[s])=>Math.acos(s.evaluate(c))],atan:[st,[st],(c,[s])=>Math.atan(s.evaluate(c))],min:[st,us(st),(c,s)=>Math.min(...s.map(f=>f.evaluate(c)))],max:[st,us(st),(c,s)=>Math.max(...s.map(f=>f.evaluate(c)))],abs:[st,[st],(c,[s])=>Math.abs(s.evaluate(c))],round:[st,[st],(c,[s])=>{const f=s.evaluate(c);return f<0?-Math.round(-f):Math.round(f)}],floor:[st,[st],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[st,[st],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[or,[ur,rr],(c,[s,f])=>c.properties()[s.value]===f.value],"filter-id-==":[or,[rr],(c,[s])=>c.id()===s.value],"filter-type-==":[or,[ur],(c,[s])=>c.geometryType()===s.value],"filter-<":[or,[ur,rr],(c,[s,f])=>{const v=c.properties()[s.value],w=f.value;return typeof v==typeof w&&v<w}],"filter-id-<":[or,[rr],(c,[s])=>{const f=c.id(),v=s.value;return typeof f==typeof v&&f<v}],"filter->":[or,[ur,rr],(c,[s,f])=>{const v=c.properties()[s.value],w=f.value;return typeof v==typeof w&&v>w}],"filter-id->":[or,[rr],(c,[s])=>{const f=c.id(),v=s.value;return typeof f==typeof v&&f>v}],"filter-<=":[or,[ur,rr],(c,[s,f])=>{const v=c.properties()[s.value],w=f.value;return typeof v==typeof w&&v<=w}],"filter-id-<=":[or,[rr],(c,[s])=>{const f=c.id(),v=s.value;return typeof f==typeof v&&f<=v}],"filter->=":[or,[ur,rr],(c,[s,f])=>{const v=c.properties()[s.value],w=f.value;return typeof v==typeof w&&v>=w}],"filter-id->=":[or,[rr],(c,[s])=>{const f=c.id(),v=s.value;return typeof f==typeof v&&f>=v}],"filter-has":[or,[rr],(c,[s])=>s.value in c.properties()],"filter-has-id":[or,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[or,[pi(ur)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[or,[pi(rr)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[or,[ur,pi(rr)],(c,[s,f])=>f.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[or,[ur,pi(rr)],(c,[s,f])=>function(v,w,T,A){for(;T<=A;){const L=T+A>>1;if(w[L]===v)return!0;w[L]>v?A=L-1:T=L+1}return!1}(c.properties()[s.value],f.value,0,f.value.length-1)],all:{type:or,overloads:[[[or,or],(c,[s,f])=>s.evaluate(c)&&f.evaluate(c)],[us(or),(c,s)=>{for(const f of s)if(!f.evaluate(c))return!1;return!0}]]},any:{type:or,overloads:[[[or,or],(c,[s,f])=>s.evaluate(c)||f.evaluate(c)],[us(or),(c,s)=>{for(const f of s)if(f.evaluate(c))return!0;return!1}]]},"!":[or,[or],(c,[s])=>!s.evaluate(c)],"is-supported-script":[or,[ur],(c,[s])=>{const f=c.globals&&c.globals.isSupportedScript;return!f||f(s.evaluate(c))}],upcase:[ur,[ur],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[ur,[ur],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[ur,us(rr),(c,s)=>s.map(f=>Lt(f.evaluate(c))).join("")],"resolved-locale":[ur,[oo],(c,[s])=>s.evaluate(c).resolvedLocale()]});class zc{constructor(s,f){this.expression=s,this._warningHistory={},this._evaluator=new Sr,this._defaultValue=f?function(v){return v.type==="color"&&en(v.default)?new ne(0,0,0,0):v.type==="color"?ne.parse(v.default)||null:v.type==="padding"?_e.parse(v.default)||null:v.default===void 0?null:v.default}(f):null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(s,f,v,w,T,A){return this._evaluator.globals=s,this._evaluator.feature=f,this._evaluator.featureState=v,this._evaluator.canonical=w,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=A,this.expression.evaluate(this._evaluator)}evaluate(s,f,v,w,T,A){this._evaluator.globals=s,this._evaluator.feature=f||null,this._evaluator.featureState=v||null,this._evaluator.canonical=w,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=A||null;try{const L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new bt(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(L)} instead.`);return L}catch(L){return this._warningHistory[L.message]||(this._warningHistory[L.message]=!0,typeof console<"u"&&console.warn(L.message)),this._defaultValue}}}function eu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in el}function tu(c,s){const f=new Js(el,[],s?function(w){const T={color:Kn,string:ur,number:st,enum:ur,boolean:or,formatted:$n,padding:Ws,resolvedImage:Dn};return w.type==="array"?pi(T[w.value]||rr,w.length):T[w.type]}(s):void 0),v=f.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?Fm(new zc(v,s)):tl(f.errors)}class ru{constructor(s,f){this.kind=s,this._styleExpression=f,this.isStateDependent=s!=="constant"&&!Ks(f.expression)}evaluateWithoutErrorHandling(s,f,v,w,T,A){return this._styleExpression.evaluateWithoutErrorHandling(s,f,v,w,T,A)}evaluate(s,f,v,w,T,A){return this._styleExpression.evaluate(s,f,v,w,T,A)}}class Vf{constructor(s,f,v,w){this.kind=s,this.zoomStops=v,this._styleExpression=f,this.isStateDependent=s!=="camera"&&!Ks(f.expression),this.interpolationType=w}evaluateWithoutErrorHandling(s,f,v,w,T,A){return this._styleExpression.evaluateWithoutErrorHandling(s,f,v,w,T,A)}evaluate(s,f,v,w,T,A){return this._styleExpression.evaluate(s,f,v,w,T,A)}interpolationFactor(s,f,v){return this.interpolationType?zi.interpolationFactor(this.interpolationType,s,f,v):0}}function Um(c,s){const f=tu(c,s);if(f.result==="error")return f;const v=f.value.expression,w=Zl(v);if(!w&&!an(s))return tl([new Bn("","data expressions not supported")]);const T=Cc(v,["zoom"]);if(!T&&!Nm(s))return tl([new Bn("","zoom expressions not supported")]);const A=Fc(v);return A||T?A instanceof Bn?tl([A]):A instanceof zi&&!xr(s)?tl([new Bn("",'"interpolate" expressions cannot be used with this property')]):Fm(A?new Vf(w?"camera":"composite",f.value,A.labels,A instanceof zi?A.interpolation:void 0):new ru(w?"constant":"source",f.value)):tl([new Bn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Bc{constructor(s,f){this._parameters=s,this._specification=f,xn(this,Ql(this._parameters,this._specification))}static deserialize(s){return new Bc(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Fc(c){let s=null;if(c instanceof Dc)s=Fc(c.result);else if(c instanceof Mc){for(const f of c.args)if(s=Fc(f),s)break}else(c instanceof Xl||c instanceof zi)&&c.input instanceof Wr&&c.input.name==="zoom"&&(s=c);return s instanceof Bn||c.eachChild(f=>{const v=Fc(f);v instanceof Bn?s=v:!s&&v?s=new Bn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&v&&s!==v&&(s=new Bn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function va(c){const s=c.key,f=c.value,v=c.valueSpec||{},w=c.objectElementValidators||{},T=c.style,A=c.styleSpec;let L=[];const R=kr(f);if(R!=="object")return[new Je(s,f,`object expected, ${R} found`)];for(const N in f){const j=N.split(".")[0],G=v[j]||v["*"];let Y;if(w[j])Y=w[j];else if(v[j])Y=Fi;else if(w["*"])Y=w["*"];else{if(!v["*"]){L.push(new Je(s,f[N],`unknown property "${N}"`));continue}Y=Fi}L=L.concat(Y({key:(s&&`${s}.`)+N,value:f[N],valueSpec:G,style:T,styleSpec:A,object:f,objectKey:N},f))}for(const N in v)w[N]||v[N].required&&v[N].default===void 0&&f[N]===void 0&&L.push(new Je(s,f,`missing required property "${N}"`));return L}function $m(c){const s=c.value,f=c.valueSpec,v=c.style,w=c.styleSpec,T=c.key,A=c.arrayElementValidator||Fi;if(kr(s)!=="array")return[new Je(T,s,`array expected, ${kr(s)} found`)];if(f.length&&s.length!==f.length)return[new Je(T,s,`array length ${f.length} expected, length ${s.length} found`)];if(f["min-length"]&&s.length<f["min-length"])return[new Je(T,s,`array length at least ${f["min-length"]} expected, length ${s.length} found`)];let L={type:f.value,values:f.values};w.$version<7&&(L.function=f.function),kr(f.value)==="object"&&(L=f.value);let R=[];for(let N=0;N<s.length;N++)R=R.concat(A({array:s,arrayIndex:N,value:s[N],valueSpec:L,style:v,styleSpec:w,key:`${T}[${N}]`}));return R}function Uf(c){const s=c.key,f=c.value,v=c.valueSpec;let w=kr(f);return w==="number"&&f!=f&&(w="NaN"),w!=="number"?[new Je(s,f,`number expected, ${w} found`)]:"minimum"in v&&f<v.minimum?[new Je(s,f,`${f} is less than the minimum value ${v.minimum}`)]:"maximum"in v&&f>v.maximum?[new Je(s,f,`${f} is greater than the maximum value ${v.maximum}`)]:[]}function jm(c){const s=c.valueSpec,f=hr(c.value.type);let v,w,T,A={};const L=f!=="categorical"&&c.value.property===void 0,R=!L,N=kr(c.value.stops)==="array"&&kr(c.value.stops[0])==="array"&&kr(c.value.stops[0][0])==="object",j=va({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Q){if(f==="identity")return[new Je(Q.key,Q.value,'identity function may not have a "stops" property')];let ee=[];const me=Q.value;return ee=ee.concat($m({key:Q.key,value:me,valueSpec:Q.valueSpec,style:Q.style,styleSpec:Q.styleSpec,arrayElementValidator:G})),kr(me)==="array"&&me.length===0&&ee.push(new Je(Q.key,me,"array must have at least one stop")),ee},default:function(Q){return Fi({key:Q.key,value:Q.value,valueSpec:s,style:Q.style,styleSpec:Q.styleSpec})}}});return f==="identity"&&L&&j.push(new Je(c.key,c.value,'missing required property "property"')),f==="identity"||c.value.stops||j.push(new Je(c.key,c.value,'missing required property "stops"')),f==="exponential"&&c.valueSpec.expression&&!xr(c.valueSpec)&&j.push(new Je(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(R&&!an(c.valueSpec)?j.push(new Je(c.key,c.value,"property functions not supported")):L&&!Nm(c.valueSpec)&&j.push(new Je(c.key,c.value,"zoom functions not supported"))),f!=="categorical"&&!N||c.value.property!==void 0||j.push(new Je(c.key,c.value,'"property" property is required')),j;function G(Q){let ee=[];const me=Q.value,pe=Q.key;if(kr(me)!=="array")return[new Je(pe,me,`array expected, ${kr(me)} found`)];if(me.length!==2)return[new Je(pe,me,`array length 2 expected, length ${me.length} found`)];if(N){if(kr(me[0])!=="object")return[new Je(pe,me,`object expected, ${kr(me[0])} found`)];if(me[0].zoom===void 0)return[new Je(pe,me,"object stop key must have zoom")];if(me[0].value===void 0)return[new Je(pe,me,"object stop key must have value")];if(T&&T>hr(me[0].zoom))return[new Je(pe,me[0].zoom,"stop zoom values must appear in ascending order")];hr(me[0].zoom)!==T&&(T=hr(me[0].zoom),w=void 0,A={}),ee=ee.concat(va({key:`${pe}[0]`,value:me[0],valueSpec:{zoom:{}},style:Q.style,styleSpec:Q.styleSpec,objectElementValidators:{zoom:Uf,value:Y}}))}else ee=ee.concat(Y({key:`${pe}[0]`,value:me[0],valueSpec:{},style:Q.style,styleSpec:Q.styleSpec},me));return eu(di(me[1]))?ee.concat([new Je(`${pe}[1]`,me[1],"expressions are not allowed in function stops.")]):ee.concat(Fi({key:`${pe}[1]`,value:me[1],valueSpec:s,style:Q.style,styleSpec:Q.styleSpec}))}function Y(Q,ee){const me=kr(Q.value),pe=hr(Q.value),Pe=Q.value!==null?Q.value:ee;if(v){if(me!==v)return[new Je(Q.key,Pe,`${me} stop domain type must match previous stop domain type ${v}`)]}else v=me;if(me!=="number"&&me!=="string"&&me!=="boolean")return[new Je(Q.key,Pe,"stop domain value must be a number, string, or boolean")];if(me!=="number"&&f!=="categorical"){let ze=`number expected, ${me} found`;return an(s)&&f===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Je(Q.key,Pe,ze)]}return f!=="categorical"||me!=="number"||isFinite(pe)&&Math.floor(pe)===pe?f!=="categorical"&&me==="number"&&w!==void 0&&pe<w?[new Je(Q.key,Pe,"stop domain values must appear in ascending order")]:(w=pe,f==="categorical"&&pe in A?[new Je(Q.key,Pe,"stop domain values must be unique")]:(A[pe]=!0,[])):[new Je(Q.key,Pe,`integer expected, found ${pe}`)]}}function cs(c){const s=(c.expressionContext==="property"?Um:tu)(di(c.value),c.valueSpec);if(s.result==="error")return s.value.map(v=>new Je(`${c.key}${v.key}`,c.value,v.message));const f=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!f.outputDefined())return[new Je(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Ks(f))return[new Je(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Ks(f))return[new Je(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Cc(f,["zoom","feature-state"]))return[new Je(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Zl(f))return[new Je(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nu(c){const s=c.key,f=c.value,v=c.valueSpec,w=[];return Array.isArray(v.values)?v.values.indexOf(hr(f))===-1&&w.push(new Je(s,f,`expected one of [${v.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(v.values).indexOf(hr(f))===-1&&w.push(new Je(s,f,`expected one of [${Object.keys(v.values).join(", ")}], ${JSON.stringify(f)} found`)),w}function nl(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!nl(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const a0={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Nc(c){if(c==null)return{filter:()=>!0,needGeometry:!1};nl(c)||(c=iu(c));const s=tu(c,a0);if(s.result==="error")throw new Error(s.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,v,w)=>s.value.evaluate(f,v,{},w),needGeometry:Gm(c)}}function Hm(c,s){return c<s?-1:c>s?1:0}function Gm(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let s=1;s<c.length;s++)if(Gm(c[s]))return!0;return!1}function iu(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?$f(c[1],c[2],"=="):s==="!="?il($f(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?$f(c[1],c[2],s):s==="any"?(f=c.slice(1),["any"].concat(f.map(iu))):s==="all"?["all"].concat(c.slice(1).map(iu)):s==="none"?["all"].concat(c.slice(1).map(iu).map(il)):s==="in"?Vc(c[1],c.slice(2)):s==="!in"?il(Vc(c[1],c.slice(2))):s==="has"?au(c[1]):s==="!has"?il(au(c[1])):s!=="within"||c;var f}function $f(c,s,f){switch(c){case"$type":return[`filter-type-${f}`,s];case"$id":return[`filter-id-${f}`,s];default:return[`filter-${f}`,c,s]}}function Vc(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(f=>typeof f!=typeof s[0])?["filter-in-large",c,["literal",s.sort(Hm)]]:["filter-in-small",c,["literal",s]]}}function au(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function il(c){return["!",c]}function ou(c){return nl(di(c.value))?cs(xn({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):qm(c)}function qm(c){const s=c.value,f=c.key;if(kr(s)!=="array")return[new Je(f,s,`array expected, ${kr(s)} found`)];const v=c.styleSpec;let w,T=[];if(s.length<1)return[new Je(f,s,"filter array must have at least 1 element")];switch(T=T.concat(nu({key:`${f}[0]`,value:s[0],valueSpec:v.filter_operator,style:c.style,styleSpec:c.styleSpec})),hr(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&hr(s[1])==="$type"&&T.push(new Je(f,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&T.push(new Je(f,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(w=kr(s[1]),w!=="string"&&T.push(new Je(`${f}[1]`,s[1],`string expected, ${w} found`)));for(let A=2;A<s.length;A++)w=kr(s[A]),hr(s[1])==="$type"?T=T.concat(nu({key:`${f}[${A}]`,value:s[A],valueSpec:v.geometry_type,style:c.style,styleSpec:c.styleSpec})):w!=="string"&&w!=="number"&&w!=="boolean"&&T.push(new Je(`${f}[${A}]`,s[A],`string, number, or boolean expected, ${w} found`));break;case"any":case"all":case"none":for(let A=1;A<s.length;A++)T=T.concat(qm({key:`${f}[${A}]`,value:s[A],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":w=kr(s[1]),s.length!==2?T.push(new Je(f,s,`filter array for "${s[0]}" operator must have 2 elements`)):w!=="string"&&T.push(new Je(`${f}[1]`,s[1],`string expected, ${w} found`));break;case"within":w=kr(s[1]),s.length!==2?T.push(new Je(f,s,`filter array for "${s[0]}" operator must have 2 elements`)):w!=="object"&&T.push(new Je(`${f}[1]`,s[1],`object expected, ${w} found`))}return T}function su(c,s){const f=c.key,v=c.style,w=c.styleSpec,T=c.value,A=c.objectKey,L=w[`${s}_${c.layerType}`];if(!L)return[];const R=A.match(/^(.*)-transition$/);if(s==="paint"&&R&&L[R[1]]&&L[R[1]].transition)return Fi({key:f,value:T,valueSpec:w.transition,style:v,styleSpec:w});const N=c.valueSpec||L[A];if(!N)return[new Je(f,T,`unknown property "${A}"`)];let j;if(kr(T)==="string"&&an(N)&&!N.tokens&&(j=/^{([^}]+)}$/.exec(T)))return[new Je(f,T,`"${A}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(j[1])} }\`.`)];const G=[];return c.layerType==="symbol"&&(A==="text-field"&&v&&!v.glyphs&&G.push(new Je(f,T,'use of "text-field" requires a style "glyphs" property')),A==="text-font"&&en(di(T))&&hr(T.type)==="identity"&&G.push(new Je(f,T,'"text-font" does not support identity functions'))),G.concat(Fi({key:c.key,value:T,valueSpec:N,style:v,styleSpec:w,expressionContext:"property",propertyType:s,propertyKey:A}))}function Wm(c){return su(c,"paint")}function Zm(c){return su(c,"layout")}function Xm(c){let s=[];const f=c.value,v=c.key,w=c.style,T=c.styleSpec;f.type||f.ref||s.push(new Je(v,f,'either "type" or "ref" is required'));let A=hr(f.type);const L=hr(f.ref);if(f.id){const R=hr(f.id);for(let N=0;N<c.arrayIndex;N++){const j=w.layers[N];hr(j.id)===R&&s.push(new Je(v,f.id,`duplicate layer id "${f.id}", previously used at line ${j.id.__line__}`))}}if("ref"in f){let R;["type","source","source-layer","filter","layout"].forEach(N=>{N in f&&s.push(new Je(v,f[N],`"${N}" is prohibited for ref layers`))}),w.layers.forEach(N=>{hr(N.id)===L&&(R=N)}),R?R.ref?s.push(new Je(v,f.ref,"ref cannot reference another ref layer")):A=hr(R.type):s.push(new Je(v,f.ref,`ref layer "${L}" not found`))}else if(A!=="background")if(f.source){const R=w.sources&&w.sources[f.source],N=R&&hr(R.type);R?N==="vector"&&A==="raster"?s.push(new Je(v,f.source,`layer "${f.id}" requires a raster source`)):N==="raster"&&A!=="raster"?s.push(new Je(v,f.source,`layer "${f.id}" requires a vector source`)):N!=="vector"||f["source-layer"]?N==="raster-dem"&&A!=="hillshade"?s.push(new Je(v,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):A!=="line"||!f.paint||!f.paint["line-gradient"]||N==="geojson"&&R.lineMetrics||s.push(new Je(v,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Je(v,f,`layer "${f.id}" must specify a "source-layer"`)):s.push(new Je(v,f.source,`source "${f.source}" not found`))}else s.push(new Je(v,f,'missing required property "source"'));return s=s.concat(va({key:v,value:f,valueSpec:T.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Fi({key:`${v}.type`,value:f.type,valueSpec:T.layer.type,style:c.style,styleSpec:c.styleSpec,object:f,objectKey:"type"}),filter:ou,layout:R=>va({layer:f,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":N=>Zm(xn({layerType:A},N))}}),paint:R=>va({layer:f,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":N=>Wm(xn({layerType:A},N))}})}})),s}function al(c){const s=c.value,f=c.key,v=kr(s);return v!=="string"?[new Je(f,s,`string expected, ${v} found`)]:[]}const Ym={promoteId:function({key:c,value:s}){if(kr(s)==="string")return al({key:c,value:s});{const f=[];for(const v in s)f.push(...al({key:`${c}.${v}`,value:s[v]}));return f}}};function lu(c){const s=c.value,f=c.key,v=c.styleSpec,w=c.style;if(!s.type)return[new Je(f,s,'"type" is required')];const T=hr(s.type);let A;switch(T){case"vector":case"raster":case"raster-dem":return A=va({key:f,value:s,valueSpec:v[`source_${T.replace("-","_")}`],style:c.style,styleSpec:v,objectElementValidators:Ym}),A;case"geojson":if(A=va({key:f,value:s,valueSpec:v.source_geojson,style:w,styleSpec:v,objectElementValidators:Ym}),s.cluster)for(const L in s.clusterProperties){const[R,N]=s.clusterProperties[L],j=typeof R=="string"?[R,["accumulated"],["get",L]]:R;A.push(...cs({key:`${f}.${L}.map`,value:N,expressionContext:"cluster-map"})),A.push(...cs({key:`${f}.${L}.reduce`,value:j,expressionContext:"cluster-reduce"}))}return A;case"video":return va({key:f,value:s,valueSpec:v.source_video,style:w,styleSpec:v});case"image":return va({key:f,value:s,valueSpec:v.source_image,style:w,styleSpec:v});case"canvas":return[new Je(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nu({key:`${f}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:w,styleSpec:v})}}function uu(c){const s=c.value,f=c.styleSpec,v=f.light,w=c.style;let T=[];const A=kr(s);if(s===void 0)return T;if(A!=="object")return T=T.concat([new Je("light",s,`object expected, ${A} found`)]),T;for(const L in s){const R=L.match(/^(.*)-transition$/);T=T.concat(R&&v[R[1]]&&v[R[1]].transition?Fi({key:L,value:s[L],valueSpec:f.transition,style:w,styleSpec:f}):v[L]?Fi({key:L,value:s[L],valueSpec:v[L],style:w,styleSpec:f}):[new Je(L,s[L],`unknown property "${L}"`)])}return T}function Bi(c){const s=c.value,f=c.styleSpec,v=f.terrain,w=c.style;let T=[];const A=kr(s);if(s===void 0)return T;if(A!=="object")return T=T.concat([new Je("terrain",s,`object expected, ${A} found`)]),T;for(const L in s)T=T.concat(v[L]?Fi({key:L,value:s[L],valueSpec:v[L],style:w,styleSpec:f}):[new Je(L,s[L],`unknown property "${L}"`)]);return T}const cu={"*":()=>[],array:$m,boolean:function(c){const s=c.value,f=c.key,v=kr(s);return v!=="boolean"?[new Je(f,s,`boolean expected, ${v} found`)]:[]},number:Uf,color:function(c){const s=c.key,f=c.value,v=kr(f);return v!=="string"?[new Je(s,f,`color expected, ${v} found`)]:Xs(f)===null?[new Je(s,f,`color expected, "${f}" found`)]:[]},constants:Mr,enum:nu,filter:ou,function:jm,layer:Xm,object:va,source:lu,light:uu,terrain:Bi,string:al,formatted:function(c){return al(c).length===0?[]:cs(c)},resolvedImage:function(c){return al(c).length===0?[]:cs(c)},padding:function(c){const s=c.key,f=c.value;if(kr(f)==="array"){if(f.length<1||f.length>4)return[new Je(s,f,`padding requires 1 to 4 values; ${f.length} values found`)];const v={type:"number"};let w=[];for(let T=0;T<f.length;T++)w=w.concat(Fi({key:`${s}[${T}]`,value:f[T],valueSpec:v}));return w}return Uf({key:s,value:f,valueSpec:{}})}};function Fi(c){const s=c.value,f=c.valueSpec,v=c.styleSpec;return f.expression&&en(hr(s))?jm(c):f.expression&&eu(di(s))?cs(c):f.type&&cu[f.type]?cu[f.type](c):va(xn({},c,{valueSpec:f.type?v[f.type]:f}))}function o0(c){const s=c.value,f=c.key,v=al(c);return v.length||(s.indexOf("{fontstack}")===-1&&v.push(new Je(f,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&v.push(new Je(f,s,'"glyphs" url must include a "{range}" token'))),v}function Do(c,s=Oe){let f=[];return f=f.concat(Fi({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,objectElementValidators:{glyphs:o0,"*":()=>[]}})),c.constants&&(f=f.concat(Mr({key:"constants",value:c.constants,style:c,styleSpec:s}))),Km(f)}function Km(c){return[].concat(c).sort((s,f)=>s.line-f.line)}function so(c){return function(...s){return Km(c.apply(this,s))}}Do.source=so(lu),Do.light=so(uu),Do.terrain=so(Bi),Do.layer=so(Xm),Do.filter=so(ou),Do.paintProperty=so(Wm),Do.layoutProperty=so(Zm);const hu=Do,jf=hu.light,s0=hu.paintProperty,l0=hu.layoutProperty;function Uc(c,s){let f=!1;if(s&&s.length)for(const v of s)c.fire(new Wt(new Error(v.message))),f=!0;return f}class fu{constructor(s,f,v){const w=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const A=new Int32Array(this.arrayBuffer);s=A[0],this.d=(f=A[1])+2*(v=A[2]);for(let R=0;R<this.d*this.d;R++){const N=A[3+R],j=A[3+R+1];w.push(N===j?null:A.subarray(N,j))}const L=A[3+w.length+1];this.keys=A.subarray(A[3+w.length],L),this.bboxes=A.subarray(L),this.insert=this._insertReadonly}else{this.d=f+2*v;for(let A=0;A<this.d*this.d;A++)w.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=s,this.padding=v,this.scale=f/s,this.uid=0;const T=v/f*s;this.min=-T,this.max=s+T}insert(s,f,v,w,T){this._forEachCell(f,v,w,T,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(f),this.bboxes.push(v),this.bboxes.push(w),this.bboxes.push(T)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,f,v,w,T,A){this.cells[T].push(A)}query(s,f,v,w,T){const A=this.min,L=this.max;if(s<=A&&f<=A&&L<=v&&L<=w&&!T)return Array.prototype.slice.call(this.keys);{const R=[];return this._forEachCell(s,f,v,w,this._queryCell,R,{},T),R}}_queryCell(s,f,v,w,T,A,L,R){const N=this.cells[T];if(N!==null){const j=this.keys,G=this.bboxes;for(let Y=0;Y<N.length;Y++){const Q=N[Y];if(L[Q]===void 0){const ee=4*Q;(R?R(G[ee+0],G[ee+1],G[ee+2],G[ee+3]):s<=G[ee+2]&&f<=G[ee+3]&&v>=G[ee+0]&&w>=G[ee+1])?(L[Q]=!0,A.push(j[Q])):L[Q]=!1}}}}_forEachCell(s,f,v,w,T,A,L,R){const N=this._convertToCellCoord(s),j=this._convertToCellCoord(f),G=this._convertToCellCoord(v),Y=this._convertToCellCoord(w);for(let Q=N;Q<=G;Q++)for(let ee=j;ee<=Y;ee++){const me=this.d*ee+Q;if((!R||R(this._convertFromCellCoord(Q),this._convertFromCellCoord(ee),this._convertFromCellCoord(Q+1),this._convertFromCellCoord(ee+1)))&&T.call(this,s,f,v,w,me,A,L,R))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,f=3+this.cells.length+1+1;let v=0;for(let A=0;A<this.cells.length;A++)v+=this.cells[A].length;const w=new Int32Array(f+v+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;let T=f;for(let A=0;A<s.length;A++){const L=s[A];w[3+A]=T,w.set(L,T),T+=L.length}return w[3+s.length]=T,w.set(this.keys,T),T+=this.keys.length,w[3+s.length+1]=T,w.set(this.bboxes,T),T+=this.bboxes.length,w.buffer}static serialize(s,f){const v=s.toArrayBuffer();return f&&f.push(v),{buffer:v}}static deserialize(s){return new fu(s.buffer)}}const lo={};function At(c,s,f={}){if(lo[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),lo[c]={klass:s,omit:f.omit||[],shallow:f.shallow||[]}}At("Object",Object),At("TransferableGridIndex",fu),At("Color",ne),At("Error",Error),At("AJAXError",oe),At("ResolvedImage",Ee),At("StylePropertyFunction",Bc),At("StyleExpression",zc,{omit:["_evaluator"]}),At("ZoomDependentExpression",Vf),At("ZoomConstantExpression",ru),At("CompoundExpression",Wr,{omit:["_evaluate"]});for(const c in el)el[c]._classRegistryKey||At(`Expression_${c}`,el[c]);function Jm(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function hs(c,s){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Jm(c)||ye(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const f=c;return s&&s.push(f.buffer),f}if(c instanceof ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const f=[];for(const v of c)f.push(hs(v,s));return f}if(typeof c=="object"){const f=c.constructor,v=f._classRegistryKey;if(!v)throw new Error("can't serialize object of unregistered class");if(!lo[v])throw new Error(`${v} is not registered.`);const w=f.serialize?f.serialize(c,s):{};if(f.serialize){if(s&&w===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const T in c){if(!c.hasOwnProperty(T)||lo[v].omit.indexOf(T)>=0)continue;const A=c[T];w[T]=lo[v].shallow.indexOf(T)>=0?A:hs(A,s)}c instanceof Error&&(w.message=c.message)}if(w.$name)throw new Error("$name property is reserved for worker serialization logic.");return v!=="Object"&&(w.$name=v),w}throw new Error("can't serialize object of type "+typeof c)}function ko(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Jm(c)||ye(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(ko);if(typeof c=="object"){const s=c.$name||"Object";if(!lo[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:f}=lo[s];if(!f)throw new Error(`can't deserialize unregistered class ${s}`);if(f.deserialize)return f.deserialize(c);const v=Object.create(f.prototype);for(const w of Object.keys(c)){if(w==="$name")continue;const T=c[w];v[w]=lo[s].shallow.indexOf(w)>=0?T:ko(T)}return v}throw new Error("can't deserialize object of type "+typeof c)}class Hf{constructor(){this.first=!0}update(s,f){const v=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=v,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=v,!0):(this.lastFloorZoom>v?(this.lastIntegerZoom=v+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<v&&(this.lastIntegerZoom=v,this.lastIntegerZoomTime=f),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=v,!0))}}const _t={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function $c(c){for(const s of c)if(qf(s.charCodeAt(0)))return!0;return!1}function u0(c){for(const s of c)if(!Gf(s.charCodeAt(0)))return!1;return!0}function Gf(c){return!(_t.Arabic(c)||_t["Arabic Supplement"](c)||_t["Arabic Extended-A"](c)||_t["Arabic Presentation Forms-A"](c)||_t["Arabic Presentation Forms-B"](c))}function qf(c){return!(c!==746&&c!==747&&(c<4352||!(_t["Bopomofo Extended"](c)||_t.Bopomofo(c)||_t["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||_t["CJK Compatibility Ideographs"](c)||_t["CJK Compatibility"](c)||_t["CJK Radicals Supplement"](c)||_t["CJK Strokes"](c)||!(!_t["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||_t["CJK Unified Ideographs Extension A"](c)||_t["CJK Unified Ideographs"](c)||_t["Enclosed CJK Letters and Months"](c)||_t["Hangul Compatibility Jamo"](c)||_t["Hangul Jamo Extended-A"](c)||_t["Hangul Jamo Extended-B"](c)||_t["Hangul Jamo"](c)||_t["Hangul Syllables"](c)||_t.Hiragana(c)||_t["Ideographic Description Characters"](c)||_t.Kanbun(c)||_t["Kangxi Radicals"](c)||_t["Katakana Phonetic Extensions"](c)||_t.Katakana(c)&&c!==12540||!(!_t["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!_t["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||_t["Unified Canadian Aboriginal Syllabics"](c)||_t["Unified Canadian Aboriginal Syllabics Extended"](c)||_t["Vertical Forms"](c)||_t["Yijing Hexagram Symbols"](c)||_t["Yi Syllables"](c)||_t["Yi Radicals"](c))))}function Qm(c){return!(qf(c)||function(s){return!!(_t["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||_t["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||_t["Letterlike Symbols"](s)||_t["Number Forms"](s)||_t["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||_t["Control Pictures"](s)&&s!==9251||_t["Optical Character Recognition"](s)||_t["Enclosed Alphanumerics"](s)||_t["Geometric Shapes"](s)||_t["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||_t["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||_t["CJK Symbols and Punctuation"](s)||_t.Katakana(s)||_t["Private Use Area"](s)||_t["CJK Compatibility Forms"](s)||_t["Small Form Variants"](s)||_t["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}function ev(c){return c>=1424&&c<=2303||_t["Arabic Presentation Forms-A"](c)||_t["Arabic Presentation Forms-B"](c)}function c0(c,s){return!(!s&&ev(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||_t.Khmer(c))}function tv(c){for(const s of c)if(ev(s.charCodeAt(0)))return!0;return!1}const Wf="deferred",Zf="loading",Xf="loaded";let Yf=null,Si="unavailable",Lo=null;const rv=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(Si="error"),Yf&&Yf(c)};function ol(){Kf.fire(new It("pluginStateChange",{pluginStatus:Si,pluginURL:Lo}))}const Kf=new er,du=function(){return Si},nv=function(){if(Si!==Wf||!Lo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Si=Zf,ol(),Lo&&Xe({url:Lo},c=>{c?rv(c):(Si=Xf,ol())})},ra={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Si===Xf||ra.applyArabicShaping!=null,isLoading:()=>Si===Zf,setState(c){if(!Z())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Si=c.pluginStatus,Lo=c.pluginURL},isParsed(){if(!Z())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return ra.applyArabicShaping!=null&&ra.processBidirectionalText!=null&&ra.processStyledBidirectionalText!=null},getPluginURL(){if(!Z())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Lo}};class hn{constructor(s,f){this.zoom=s,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hf,this.transition={})}isSupportedScript(s){return function(f,v){for(const w of f)if(!c0(w.charCodeAt(0),v))return!1;return!0}(s,ra.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,f=s-Math.floor(s),v=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*v}:{fromScale:.5,toScale:1,t:1-(1-v)*f}}}class pu{constructor(s,f){this.property=s,this.value=f,this.expression=function(v,w){if(en(v))return new Bc(v,w);if(eu(v)){const T=Um(v,w);if(T.result==="error")throw new Error(T.value.map(A=>`${A.key}: ${A.message}`).join(", "));return T.value}{let T=v;return w.type==="color"&&typeof v=="string"?T=ne.parse(v):w.type!=="padding"||typeof v!="number"&&!Array.isArray(v)||(T=_e.parse(v)),{kind:"constant",evaluate:()=>T}}}(f===void 0?s.specification.default:f,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,f,v){return this.property.possiblyEvaluate(this,s,f,v)}}class jc{constructor(s){this.property=s,this.value=new pu(s,void 0)}transitioned(s,f){return new av(this.property,this.value,f,E({},s.transition,this.transition),s.now)}untransitioned(){return new av(this.property,this.value,null,{},0)}}class iv{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return O(this._values[s].value.value)}setValue(s,f){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new jc(this._values[s].property)),this._values[s].value=new pu(this._values[s].property,f===null?void 0:O(f))}getTransition(s){return O(this._values[s].transition)}setTransition(s,f){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new jc(this._values[s].property)),this._values[s].transition=O(f)||void 0}serialize(){const s={};for(const f of Object.keys(this._values)){const v=this.getValue(f);v!==void 0&&(s[f]=v);const w=this.getTransition(f);w!==void 0&&(s[`${f}-transition`]=w)}return s}transitioned(s,f){const v=new ov(this._properties);for(const w of Object.keys(this._values))v._values[w]=this._values[w].transitioned(s,f._values[w]);return v}untransitioned(){const s=new ov(this._properties);for(const f of Object.keys(this._values))s._values[f]=this._values[f].untransitioned();return s}}class av{constructor(s,f,v,w,T){this.property=s,this.value=f,this.begin=T+w.delay||0,this.end=this.begin+w.duration||0,s.specification.transition&&(w.delay||w.duration)&&(this.prior=v)}possiblyEvaluate(s,f,v){const w=s.now||0,T=this.value.possiblyEvaluate(s,f,v),A=this.prior;if(A){if(w>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(w<this.begin)return A.possiblyEvaluate(s,f,v);{const L=(w-this.begin)/(this.end-this.begin);return this.property.interpolate(A.possiblyEvaluate(s,f,v),T,function(R){if(R<=0)return 0;if(R>=1)return 1;const N=R*R,j=N*R;return 4*(R<.5?j:3*(R-N)+j-.75)}(L))}}return T}}class ov{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,f,v){const w=new mu(this._properties);for(const T of Object.keys(this._values))w._values[T]=this._values[T].possiblyEvaluate(s,f,v);return w}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class h0{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}getValue(s){return O(this._values[s].value)}setValue(s,f){this._values[s]=new pu(this._values[s].property,f===null?void 0:O(f))}serialize(){const s={};for(const f of Object.keys(this._values)){const v=this.getValue(f);v!==void 0&&(s[f]=v)}return s}possiblyEvaluate(s,f,v){const w=new mu(this._properties);for(const T of Object.keys(this._values))w._values[T]=this._values[T].possiblyEvaluate(s,f,v);return w}}class Da{constructor(s,f,v){this.property=s,this.value=f,this.parameters=v}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,f,v,w){return this.property.evaluate(this.value,this.parameters,s,f,v,w)}}class mu{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Bt{constructor(s){this.specification=s}possiblyEvaluate(s,f){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(f)}interpolate(s,f,v){const w=Yl[this.specification.type];return w?w(s,f,v):s}}class Xt{constructor(s,f){this.specification=s,this.overrides=f}possiblyEvaluate(s,f,v,w){return new Da(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(f,null,{},v,w)}:s.expression,f)}interpolate(s,f,v){if(s.value.kind!=="constant"||f.value.kind!=="constant")return s;if(s.value.value===void 0||f.value.value===void 0)return new Da(this,{kind:"constant",value:void 0},s.parameters);const w=Yl[this.specification.type];return w?new Da(this,{kind:"constant",value:w(s.value.value,f.value.value,v)},s.parameters):s}evaluate(s,f,v,w,T,A){return s.kind==="constant"?s.value:s.evaluate(f,v,w,T,A)}}class sl extends Xt{possiblyEvaluate(s,f,v,w){if(s.value===void 0)return new Da(this,{kind:"constant",value:void 0},f);if(s.expression.kind==="constant"){const T=s.expression.evaluate(f,null,{},v,w),A=s.property.specification.type==="resolvedImage"&&typeof T!="string"?T.name:T,L=this._calculate(A,A,A,f);return new Da(this,{kind:"constant",value:L},f)}if(s.expression.kind==="camera"){const T=this._calculate(s.expression.evaluate({zoom:f.zoom-1}),s.expression.evaluate({zoom:f.zoom}),s.expression.evaluate({zoom:f.zoom+1}),f);return new Da(this,{kind:"constant",value:T},f)}return new Da(this,s.expression,f)}evaluate(s,f,v,w,T,A){if(s.kind==="source"){const L=s.evaluate(f,v,w,T,A);return this._calculate(L,L,L,f)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(f.zoom)-1},v,w),s.evaluate({zoom:Math.floor(f.zoom)},v,w),s.evaluate({zoom:Math.floor(f.zoom)+1},v,w),f):s.value}_calculate(s,f,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:s,to:f}:{from:v,to:f}}interpolate(s){return s}}class Jf{constructor(s){this.specification=s}possiblyEvaluate(s,f,v,w){if(s.value!==void 0){if(s.expression.kind==="constant"){const T=s.expression.evaluate(f,null,{},v,w);return this._calculate(T,T,T,f)}return this._calculate(s.expression.evaluate(new hn(Math.floor(f.zoom-1),f)),s.expression.evaluate(new hn(Math.floor(f.zoom),f)),s.expression.evaluate(new hn(Math.floor(f.zoom+1),f)),f)}}_calculate(s,f,v,w){return w.zoom>w.zoomHistory.lastIntegerZoom?{from:s,to:f}:{from:v,to:f}}interpolate(s){return s}}class Oo{constructor(s){this.specification=s}possiblyEvaluate(s,f,v,w){return!!s.expression.evaluate(f,null,{},v,w)}interpolate(){return!1}}class Jn{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const f in s){const v=s[f];v.specification.overridable&&this.overridableProperties.push(f);const w=this.defaultPropertyValues[f]=new pu(v,void 0),T=this.defaultTransitionablePropertyValues[f]=new jc(v);this.defaultTransitioningPropertyValues[f]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=w.possiblyEvaluate({})}}}At("DataDrivenProperty",Xt),At("DataConstantProperty",Bt),At("CrossFadedDataDrivenProperty",sl),At("CrossFadedProperty",Jf),At("ColorRampProperty",Oo);const Ro="-transition";class ka extends er{constructor(s,f){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),f.layout&&(this._unevaluatedLayout=new h0(f.layout)),f.paint)){this._transitionablePaint=new iv(f.paint);for(const v in s.paint)this.setPaintProperty(v,s.paint[v],{validate:!1});for(const v in s.layout)this.setLayoutProperty(v,s.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new mu(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,f,v={}){f!=null&&this._validate(l0,`layers.${this.id}.layout.${s}`,s,f,v)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,f):this.visibility=f)}getPaintProperty(s){return s.endsWith(Ro)?this._transitionablePaint.getTransition(s.slice(0,-Ro.length)):this._transitionablePaint.getValue(s)}setPaintProperty(s,f,v={}){if(f!=null&&this._validate(s0,`layers.${this.id}.paint.${s}`,s,f,v))return!1;if(s.endsWith(Ro))return this._transitionablePaint.setTransition(s.slice(0,-Ro.length),f||void 0),!1;{const w=this._transitionablePaint._values[s],T=w.property.specification["property-type"]==="cross-faded-data-driven",A=w.value.isDataDriven(),L=w.value;this._transitionablePaint.setValue(s,f),this._handleSpecialPaintPropertyUpdate(s);const R=this._transitionablePaint._values[s].value;return R.isDataDriven()||A||T||this._handleOverridablePaintPropertyUpdate(s,L,R)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,f,v){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,f){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,f)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),D(s,(f,v)=>!(f===void 0||v==="layout"&&!Object.keys(f).length||v==="paint"&&!Object.keys(f).length))}_validate(s,f,v,w,T={}){return(!T||T.validate!==!1)&&Uc(this,s.call(hu,{key:f,layerType:this.type,objectKey:v,value:w,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const f=this.paint.get(s);if(f instanceof Da&&an(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}const sv={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zo{constructor(s,f){this._structArray=s,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Sn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,f){return s._trim(),f&&(s.isTransferred=!0,f.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const f=Object.create(this.prototype);return f.arrayBuffer=s.arrayBuffer,f.length=s.length,f.capacity=s.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function kn(c,s=1){let f=0,v=0;return{members:c.map(w=>{const T=sv[w.type].BYTES_PER_ELEMENT,A=f=Qf(f,Math.max(s,T)),L=w.components||1;return v=Math.max(v,T),f+=T*L,{name:w.name,type:w.type,components:L,offset:A}}),size:Qf(f,Math.max(v,s)),alignment:s}}function Qf(c,s){return Math.ceil(c/s)*s}class fs extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,f)}emplace(s,f,v){const w=2*s;return this.int16[w+0]=f,this.int16[w+1]=v,s}}fs.prototype.bytesPerElement=4,At("StructArrayLayout2i4",fs);class b extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,v,w){const T=this.length;return this.resize(T+1),this.emplace(T,s,f,v,w)}emplace(s,f,v,w,T){const A=4*s;return this.int16[A+0]=f,this.int16[A+1]=v,this.int16[A+2]=w,this.int16[A+3]=T,s}}b.prototype.bytesPerElement=8,At("StructArrayLayout4i8",b);class u extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,v,w,T,A){const L=this.length;return this.resize(L+1),this.emplace(L,s,f,v,w,T,A)}emplace(s,f,v,w,T,A,L){const R=6*s;return this.int16[R+0]=f,this.int16[R+1]=v,this.int16[R+2]=w,this.int16[R+3]=T,this.int16[R+4]=A,this.int16[R+5]=L,s}}u.prototype.bytesPerElement=12,At("StructArrayLayout2i4i12",u);class p extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,v,w,T,A){const L=this.length;return this.resize(L+1),this.emplace(L,s,f,v,w,T,A)}emplace(s,f,v,w,T,A,L){const R=4*s,N=8*s;return this.int16[R+0]=f,this.int16[R+1]=v,this.uint8[N+4]=w,this.uint8[N+5]=T,this.uint8[N+6]=A,this.uint8[N+7]=L,s}}p.prototype.bytesPerElement=8,At("StructArrayLayout2i4ub8",p);class y extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,f)}emplace(s,f,v){const w=2*s;return this.float32[w+0]=f,this.float32[w+1]=v,s}}y.prototype.bytesPerElement=8,At("StructArrayLayout2f8",y);class S extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,v,w,T,A,L,R,N,j){const G=this.length;return this.resize(G+1),this.emplace(G,s,f,v,w,T,A,L,R,N,j)}emplace(s,f,v,w,T,A,L,R,N,j,G){const Y=10*s;return this.uint16[Y+0]=f,this.uint16[Y+1]=v,this.uint16[Y+2]=w,this.uint16[Y+3]=T,this.uint16[Y+4]=A,this.uint16[Y+5]=L,this.uint16[Y+6]=R,this.uint16[Y+7]=N,this.uint16[Y+8]=j,this.uint16[Y+9]=G,s}}S.prototype.bytesPerElement=20,At("StructArrayLayout10ui20",S);class C extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,v,w,T,A,L,R,N,j,G,Y){const Q=this.length;return this.resize(Q+1),this.emplace(Q,s,f,v,w,T,A,L,R,N,j,G,Y)}emplace(s,f,v,w,T,A,L,R,N,j,G,Y,Q){const ee=12*s;return this.int16[ee+0]=f,this.int16[ee+1]=v,this.int16[ee+2]=w,this.int16[ee+3]=T,this.uint16[ee+4]=A,this.uint16[ee+5]=L,this.uint16[ee+6]=R,this.uint16[ee+7]=N,this.int16[ee+8]=j,this.int16[ee+9]=G,this.int16[ee+10]=Y,this.int16[ee+11]=Q,s}}C.prototype.bytesPerElement=24,At("StructArrayLayout4i4ui4i24",C);class k extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,s,f,v)}emplace(s,f,v,w){const T=3*s;return this.float32[T+0]=f,this.float32[T+1]=v,this.float32[T+2]=w,s}}k.prototype.bytesPerElement=12,At("StructArrayLayout3f12",k);class z extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const f=this.length;return this.resize(f+1),this.emplace(f,s)}emplace(s,f){return this.uint32[1*s+0]=f,s}}z.prototype.bytesPerElement=4,At("StructArrayLayout1ul4",z);class B extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,v,w,T,A,L,R,N){const j=this.length;return this.resize(j+1),this.emplace(j,s,f,v,w,T,A,L,R,N)}emplace(s,f,v,w,T,A,L,R,N,j){const G=10*s,Y=5*s;return this.int16[G+0]=f,this.int16[G+1]=v,this.int16[G+2]=w,this.int16[G+3]=T,this.int16[G+4]=A,this.int16[G+5]=L,this.uint32[Y+3]=R,this.uint16[G+8]=N,this.uint16[G+9]=j,s}}B.prototype.bytesPerElement=20,At("StructArrayLayout6i1ul2ui20",B);class V extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,v,w,T,A){const L=this.length;return this.resize(L+1),this.emplace(L,s,f,v,w,T,A)}emplace(s,f,v,w,T,A,L){const R=6*s;return this.int16[R+0]=f,this.int16[R+1]=v,this.int16[R+2]=w,this.int16[R+3]=T,this.int16[R+4]=A,this.int16[R+5]=L,s}}V.prototype.bytesPerElement=12,At("StructArrayLayout2i2i2i12",V);class H extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,v,w,T){const A=this.length;return this.resize(A+1),this.emplace(A,s,f,v,w,T)}emplace(s,f,v,w,T,A){const L=4*s,R=8*s;return this.float32[L+0]=f,this.float32[L+1]=v,this.float32[L+2]=w,this.int16[R+6]=T,this.int16[R+7]=A,s}}H.prototype.bytesPerElement=16,At("StructArrayLayout2f1f2i16",H);class X extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,v,w){const T=this.length;return this.resize(T+1),this.emplace(T,s,f,v,w)}emplace(s,f,v,w,T){const A=12*s,L=3*s;return this.uint8[A+0]=f,this.uint8[A+1]=v,this.float32[L+1]=w,this.float32[L+2]=T,s}}X.prototype.bytesPerElement=12,At("StructArrayLayout2ub2f12",X);class J extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,s,f,v)}emplace(s,f,v,w){const T=3*s;return this.uint16[T+0]=f,this.uint16[T+1]=v,this.uint16[T+2]=w,s}}J.prototype.bytesPerElement=6,At("StructArrayLayout3ui6",J);class he extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,v,w,T,A,L,R,N,j,G,Y,Q,ee,me,pe,Pe){const ze=this.length;return this.resize(ze+1),this.emplace(ze,s,f,v,w,T,A,L,R,N,j,G,Y,Q,ee,me,pe,Pe)}emplace(s,f,v,w,T,A,L,R,N,j,G,Y,Q,ee,me,pe,Pe,ze){const Ie=24*s,Le=12*s,Ze=48*s;return this.int16[Ie+0]=f,this.int16[Ie+1]=v,this.uint16[Ie+2]=w,this.uint16[Ie+3]=T,this.uint32[Le+2]=A,this.uint32[Le+3]=L,this.uint32[Le+4]=R,this.uint16[Ie+10]=N,this.uint16[Ie+11]=j,this.uint16[Ie+12]=G,this.float32[Le+7]=Y,this.float32[Le+8]=Q,this.uint8[Ze+36]=ee,this.uint8[Ze+37]=me,this.uint8[Ze+38]=pe,this.uint32[Le+10]=Pe,this.int16[Ie+22]=ze,s}}he.prototype.bytesPerElement=48,At("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",he);class se extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,v,w,T,A,L,R,N,j,G,Y,Q,ee,me,pe,Pe,ze,Ie,Le,Ze,We,Et,Ot,yt,vt,ct,xt){const gt=this.length;return this.resize(gt+1),this.emplace(gt,s,f,v,w,T,A,L,R,N,j,G,Y,Q,ee,me,pe,Pe,ze,Ie,Le,Ze,We,Et,Ot,yt,vt,ct,xt)}emplace(s,f,v,w,T,A,L,R,N,j,G,Y,Q,ee,me,pe,Pe,ze,Ie,Le,Ze,We,Et,Ot,yt,vt,ct,xt,gt){const at=34*s,Ht=17*s;return this.int16[at+0]=f,this.int16[at+1]=v,this.int16[at+2]=w,this.int16[at+3]=T,this.int16[at+4]=A,this.int16[at+5]=L,this.int16[at+6]=R,this.int16[at+7]=N,this.uint16[at+8]=j,this.uint16[at+9]=G,this.uint16[at+10]=Y,this.uint16[at+11]=Q,this.uint16[at+12]=ee,this.uint16[at+13]=me,this.uint16[at+14]=pe,this.uint16[at+15]=Pe,this.uint16[at+16]=ze,this.uint16[at+17]=Ie,this.uint16[at+18]=Le,this.uint16[at+19]=Ze,this.uint16[at+20]=We,this.uint16[at+21]=Et,this.uint16[at+22]=Ot,this.uint32[Ht+12]=yt,this.float32[Ht+13]=vt,this.float32[Ht+14]=ct,this.float32[Ht+15]=xt,this.float32[Ht+16]=gt,s}}se.prototype.bytesPerElement=68,At("StructArrayLayout8i15ui1ul4f68",se);class ue extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const f=this.length;return this.resize(f+1),this.emplace(f,s)}emplace(s,f){return this.float32[1*s+0]=f,s}}ue.prototype.bytesPerElement=4,At("StructArrayLayout1f4",ue);class we extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,s,f,v)}emplace(s,f,v,w){const T=3*s;return this.int16[T+0]=f,this.int16[T+1]=v,this.int16[T+2]=w,s}}we.prototype.bytesPerElement=6,At("StructArrayLayout3i6",we);class Ae extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f,v){const w=this.length;return this.resize(w+1),this.emplace(w,s,f,v)}emplace(s,f,v,w){const T=4*s;return this.uint32[2*s+0]=f,this.uint16[T+2]=v,this.uint16[T+3]=w,s}}Ae.prototype.bytesPerElement=8,At("StructArrayLayout1ul2ui8",Ae);class Me extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,f){const v=this.length;return this.resize(v+1),this.emplace(v,s,f)}emplace(s,f,v){const w=2*s;return this.uint16[w+0]=f,this.uint16[w+1]=v,s}}Me.prototype.bytesPerElement=4,At("StructArrayLayout2ui4",Me);class de extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const f=this.length;return this.resize(f+1),this.emplace(f,s)}emplace(s,f){return this.uint16[1*s+0]=f,s}}de.prototype.bytesPerElement=2,At("StructArrayLayout1ui2",de);class Re extends Sn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,f,v,w){const T=this.length;return this.resize(T+1),this.emplace(T,s,f,v,w)}emplace(s,f,v,w,T){const A=4*s;return this.float32[A+0]=f,this.float32[A+1]=v,this.float32[A+2]=w,this.float32[A+3]=T,s}}Re.prototype.bytesPerElement=16,At("StructArrayLayout4f16",Re);class ke extends zo{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new be(this.anchorPointX,this.anchorPointY)}}ke.prototype.size=20;class je extends B{get(s){return new ke(this,s)}}At("CollisionBoxArray",je);class He extends zo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}He.prototype.size=48;class rt extends he{get(s){return new He(this,s)}}At("PlacedSymbolArray",rt);class Ue extends zo{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ue.prototype.size=68;class St extends se{get(s){return new Ue(this,s)}}At("SymbolInstanceArray",St);class mt extends ue{getoffsetX(s){return this.float32[1*s+0]}}At("GlyphOffsetArray",mt);class Tt extends we{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}At("SymbolLineVertexArray",Tt);class sr extends zo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}sr.prototype.size=8;class dr extends Ae{get(s){return new sr(this,s)}}At("FeatureIndexArray",dr);class jt extends fs{}class Br extends fs{}class Fr extends fs{}class br extends u{}class Tr extends p{}class jr extends y{}class Hn extends S{}class La extends C{}class ga extends k{}class Oa extends z{}class Bo extends V{}class na extends X{}class Ti extends J{}class uo extends Me{}const Hc=kn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Fn}=Hc;class mr{constructor(s=[]){this.segments=s}prepareSegment(s,f,v,w){let T=this.segments[this.segments.length-1];return s>mr.MAX_VERTEX_ARRAY_LENGTH&&$(`Max vertices per segment is ${mr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!T||T.vertexLength+s>mr.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==w)&&(T={vertexOffset:f.length,primitiveOffset:v.length,vertexLength:0,primitiveLength:0},w!==void 0&&(T.sortKey=w),this.segments.push(T)),T}get(){return this.segments}destroy(){for(const s of this.segments)for(const f in s.vaos)s.vaos[f].destroy()}static simpleSegment(s,f,v,w){return new mr([{vertexOffset:s,primitiveOffset:f,vertexLength:v,primitiveLength:w,vaos:{},sortKey:0}])}}function Rr(c,s){return 256*(c=_(Math.floor(c),0,255))+_(Math.floor(s),0,255)}mr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,At("SegmentVector",mr);const Gn=kn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var qn={exports:{}},fn={exports:{}};fn.exports=function(c,s){var f,v,w,T,A,L,R,N;for(v=c.length-(f=3&c.length),w=s,A=3432918353,L=461845907,N=0;N<v;)R=255&c.charCodeAt(N)|(255&c.charCodeAt(++N))<<8|(255&c.charCodeAt(++N))<<16|(255&c.charCodeAt(++N))<<24,++N,w=27492+(65535&(T=5*(65535&(w=(w^=R=(65535&(R=(R=(65535&R)*A+(((R>>>16)*A&65535)<<16)&4294967295)<<15|R>>>17))*L+(((R>>>16)*L&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(R=0,f){case 3:R^=(255&c.charCodeAt(N+2))<<16;case 2:R^=(255&c.charCodeAt(N+1))<<8;case 1:w^=R=(65535&(R=(R=(65535&(R^=255&c.charCodeAt(N)))*A+(((R>>>16)*A&65535)<<16)&4294967295)<<15|R>>>17))*L+(((R>>>16)*L&65535)<<16)&4294967295}return w^=c.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0};var ia={exports:{}};ia.exports=function(c,s){for(var f,v=c.length,w=s^v,T=0;v>=4;)f=1540483477*(65535&(f=255&c.charCodeAt(T)|(255&c.charCodeAt(++T))<<8|(255&c.charCodeAt(++T))<<16|(255&c.charCodeAt(++T))<<24))+((1540483477*(f>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),v-=4,++T;switch(v){case 3:w^=(255&c.charCodeAt(T+2))<<16;case 2:w^=(255&c.charCodeAt(T+1))<<8;case 1:w=1540483477*(65535&(w^=255&c.charCodeAt(T)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0};var ds=fn.exports,ed=ia.exports;qn.exports=ds,qn.exports.murmur3=ds,qn.exports.murmur2=ed;class ll{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,f,v,w){this.ids.push(lv(s)),this.positions.push(f,v,w)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const f=lv(s);let v=0,w=this.ids.length-1;for(;v<w;){const A=v+w>>1;this.ids[A]>=f?w=A:v=A+1}const T=[];for(;this.ids[v]===f;)T.push({index:this.positions[3*v],start:this.positions[3*v+1],end:this.positions[3*v+2]}),v++;return T}static serialize(s,f){const v=new Float64Array(s.ids),w=new Uint32Array(s.positions);return td(v,w,0,v.length-1),f&&f.push(v.buffer,w.buffer),{ids:v,positions:w}}static deserialize(s){const f=new ll;return f.ids=s.ids,f.positions=s.positions,f.indexed=!0,f}}function lv(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:qn.exports(String(c))}function td(c,s,f,v){for(;f<v;){const w=c[f+v>>1];let T=f-1,A=v+1;for(;;){do T++;while(c[T]<w);do A--;while(c[A]>w);if(T>=A)break;Fo(c,T,A),Fo(s,3*T,3*A),Fo(s,3*T+1,3*A+1),Fo(s,3*T+2,3*A+2)}A-f<v-A?(td(c,s,f,A),f=A+1):(td(c,s,A+1,v),v=A)}}function Fo(c,s,f){const v=c[s];c[s]=c[f],c[f]=v}At("FeaturePositionMap",ll);class ps{constructor(s,f){this.gl=s.gl,this.location=f}}class ms extends ps{constructor(s,f){super(s,f),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class Gc extends ps{constructor(s,f){super(s,f),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class QS extends ps{constructor(s,f){super(s,f),this.current=ne.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const A6=new Float32Array(16);function f0(c){return[Rr(255*c.r,255*c.g),Rr(255*c.b,255*c.a)]}class rd{constructor(s,f,v){this.value=s,this.uniformNames=f.map(w=>`u_${w}`),this.type=v}setUniform(s,f,v){s.set(v.constantOr(this.value))}getBinding(s,f,v){return this.type==="color"?new QS(s,f):new ms(s,f)}}class qc{constructor(s,f){this.uniformNames=f.map(v=>`u_${v}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=s.tlbr}setUniform(s,f,v,w){const T=w==="u_pattern_to"?this.patternTo:w==="u_pattern_from"?this.patternFrom:w==="u_pixel_ratio_to"?this.pixelRatioTo:w==="u_pixel_ratio_from"?this.pixelRatioFrom:null;T&&s.set(T)}getBinding(s,f,v){return v.substr(0,9)==="u_pattern"?new Gc(s,f):new ms(s,f)}}class vs{constructor(s,f,v,w){this.expression=s,this.type=v,this.maxValue=0,this.paintVertexAttributes=f.map(T=>({name:`a_${T}`,type:"Float32",components:v==="color"?2:1,offset:0})),this.paintVertexArray=new w}populatePaintArray(s,f,v,w,T){const A=this.paintVertexArray.length,L=this.expression.evaluate(new hn(0),f,{},w,[],T);this.paintVertexArray.resize(s),this._setPaintValue(A,s,L)}updatePaintArray(s,f,v,w){const T=this.expression.evaluate({zoom:0},v,w);this._setPaintValue(s,f,T)}_setPaintValue(s,f,v){if(this.type==="color"){const w=f0(v);for(let T=s;T<f;T++)this.paintVertexArray.emplace(T,w[0],w[1])}else{for(let w=s;w<f;w++)this.paintVertexArray.emplace(w,v);this.maxValue=Math.max(this.maxValue,Math.abs(v))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class co{constructor(s,f,v,w,T,A){this.expression=s,this.uniformNames=f.map(L=>`u_${L}_t`),this.type=v,this.useIntegerZoom=w,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=f.map(L=>({name:`a_${L}`,type:"Float32",components:v==="color"?4:2,offset:0})),this.paintVertexArray=new A}populatePaintArray(s,f,v,w,T){const A=this.expression.evaluate(new hn(this.zoom),f,{},w,[],T),L=this.expression.evaluate(new hn(this.zoom+1),f,{},w,[],T),R=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(R,s,A,L)}updatePaintArray(s,f,v,w){const T=this.expression.evaluate({zoom:this.zoom},v,w),A=this.expression.evaluate({zoom:this.zoom+1},v,w);this._setPaintValue(s,f,T,A)}_setPaintValue(s,f,v,w){if(this.type==="color"){const T=f0(v),A=f0(w);for(let L=s;L<f;L++)this.paintVertexArray.emplace(L,T[0],T[1],A[0],A[1])}else{for(let T=s;T<f;T++)this.paintVertexArray.emplace(T,v,w);this.maxValue=Math.max(this.maxValue,Math.abs(v),Math.abs(w))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,f){const v=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,w=_(this.expression.interpolationFactor(v,this.zoom,this.zoom+1),0,1);s.set(w)}getBinding(s,f,v){return new ms(s,f)}}class ul{constructor(s,f,v,w,T,A){this.expression=s,this.type=f,this.useIntegerZoom=v,this.zoom=w,this.layerId=A,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T}populatePaintArray(s,f,v){const w=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(w,s,f.patterns&&f.patterns[this.layerId],v)}updatePaintArray(s,f,v,w,T){this._setPaintValues(s,f,v.patterns&&v.patterns[this.layerId],T)}_setPaintValues(s,f,v,w){if(!w||!v)return;const{min:T,mid:A,max:L}=v,R=w[T],N=w[A],j=w[L];if(R&&N&&j)for(let G=s;G<f;G++)this.zoomInPaintVertexArray.emplace(G,N.tl[0],N.tl[1],N.br[0],N.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],N.pixelRatio,R.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,N.tl[0],N.tl[1],N.br[0],N.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],N.pixelRatio,j.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Gn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Gn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class eT{constructor(s,f,v){this.binders={},this._buffers=[];const w=[];for(const T in s.paint._values){if(!v(T))continue;const A=s.paint.get(T);if(!(A instanceof Da&&an(A.property.specification)))continue;const L=I6(T,s.type),R=A.value,N=A.property.specification.type,j=A.property.useIntegerZoom,G=A.property.specification["property-type"],Y=G==="cross-faded"||G==="cross-faded-data-driven";if(R.kind==="constant")this.binders[T]=Y?new qc(R.value,L):new rd(R.value,L,N),w.push(`/u_${T}`);else if(R.kind==="source"||Y){const Q=tT(T,N,"source");this.binders[T]=Y?new ul(R,N,j,f,Q,s.id):new vs(R,L,N,Q),w.push(`/a_${T}`)}else{const Q=tT(T,N,"composite");this.binders[T]=new co(R,L,N,j,f,Q),w.push(`/z_${T}`)}}this.cacheKey=w.sort().join("")}getMaxValue(s){const f=this.binders[s];return f instanceof vs||f instanceof co?f.maxValue:0}populatePaintArrays(s,f,v,w,T){for(const A in this.binders){const L=this.binders[A];(L instanceof vs||L instanceof co||L instanceof ul)&&L.populatePaintArray(s,f,v,w,T)}}setConstantPatternPositions(s,f){for(const v in this.binders){const w=this.binders[v];w instanceof qc&&w.setConstantPatternPositions(s,f)}}updatePaintArrays(s,f,v,w,T){let A=!1;for(const L in s){const R=f.getPositions(L);for(const N of R){const j=v.feature(N.index);for(const G in this.binders){const Y=this.binders[G];if((Y instanceof vs||Y instanceof co||Y instanceof ul)&&Y.expression.isStateDependent===!0){const Q=w.paint.get(G);Y.expression=Q.value,Y.updatePaintArray(N.start,N.end,j,s[L],T),A=!0}}}}return A}defines(){const s=[];for(const f in this.binders){const v=this.binders[f];(v instanceof rd||v instanceof qc)&&s.push(...v.uniformNames.map(w=>`#define HAS_UNIFORM_${w}`))}return s}getBinderAttributes(){const s=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof vs||v instanceof co)for(let w=0;w<v.paintVertexAttributes.length;w++)s.push(v.paintVertexAttributes[w].name);else if(v instanceof ul)for(let w=0;w<Gn.members.length;w++)s.push(Gn.members[w].name)}return s}getBinderUniforms(){const s=[];for(const f in this.binders){const v=this.binders[f];if(v instanceof rd||v instanceof qc||v instanceof co)for(const w of v.uniformNames)s.push(w)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,f){const v=[];for(const w in this.binders){const T=this.binders[w];if(T instanceof rd||T instanceof qc||T instanceof co){for(const A of T.uniformNames)if(f[A]){const L=T.getBinding(s,f[A],A);v.push({name:A,property:w,binding:L})}}}return v}setUniforms(s,f,v,w){for(const{name:T,property:A,binding:L}of f)this.binders[A].setUniform(L,w,v.get(A),T)}updatePaintBuffers(s){this._buffers=[];for(const f in this.binders){const v=this.binders[f];if(s&&v instanceof ul){const w=s.fromScale===2?v.zoomInPaintVertexBuffer:v.zoomOutPaintVertexBuffer;w&&this._buffers.push(w)}else(v instanceof vs||v instanceof co)&&v.paintVertexBuffer&&this._buffers.push(v.paintVertexBuffer)}}upload(s){for(const f in this.binders){const v=this.binders[f];(v instanceof vs||v instanceof co||v instanceof ul)&&v.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const f=this.binders[s];(f instanceof vs||f instanceof co||f instanceof ul)&&f.destroy()}}}class vu{constructor(s,f,v=()=>!0){this.programConfigurations={};for(const w of s)this.programConfigurations[w.id]=new eT(w,f,v);this.needsUpload=!1,this._featureMap=new ll,this._bufferOffset=0}populatePaintArrays(s,f,v,w,T,A){for(const L in this.programConfigurations)this.programConfigurations[L].populatePaintArrays(s,f,w,T,A);f.id!==void 0&&this._featureMap.add(f.id,v,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,f,v,w){for(const T of v)this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(s,this._featureMap,f,T,w)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const f in this.programConfigurations)this.programConfigurations[f].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function I6(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function tT(c,s,f){const v={color:{source:y,composite:Re},number:{source:ue,composite:y}},w=function(T){return{"line-pattern":{source:Hn,composite:Hn},"fill-pattern":{source:Hn,composite:Hn},"fill-extrusion-pattern":{source:Hn,composite:Hn}}[T]}(c);return w&&w[f]||v[s][f]}At("ConstantBinder",rd),At("CrossFadedConstantBinder",qc),At("SourceExpressionBinder",vs),At("CrossFadedCompositeBinder",ul),At("CompositeExpressionBinder",co),At("ProgramConfiguration",eT,{omit:["_buffers"]}),At("ProgramConfigurationSet",vu);var Nn=8192;const d0=Math.pow(2,14)-1,rT=-d0-1;function gu(c){const s=Nn/c.extent,f=c.loadGeometry();for(let v=0;v<f.length;v++){const w=f[v];for(let T=0;T<w.length;T++){const A=w[T],L=Math.round(A.x*s),R=Math.round(A.y*s);A.x=_(L,rT,d0),A.y=_(R,rT,d0),(L<A.x||L>A.x+1||R<A.y||R>A.y+1)&&$("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function _u(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?gu(c):[]}}function uv(c,s,f,v,w){c.emplaceBack(2*s+(v+1)/2,2*f+(w+1)/2)}class p0{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(f=>f.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Br,this.indexArray=new Ti,this.segments=new mr,this.programConfigurations=new vu(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(s,f,v){const w=this.layers[0],T=[];let A=null,L=!1;w.type==="circle"&&(A=w.layout.get("circle-sort-key"),L=!A.isConstant());for(const{feature:R,id:N,index:j,sourceLayerIndex:G}of s){const Y=this.layers[0]._featureFilter.needGeometry,Q=_u(R,Y);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),Q,v))continue;const ee=L?A.evaluate(Q,{},v):void 0,me={id:N,properties:R.properties,type:R.type,sourceLayerIndex:G,index:j,geometry:Y?Q.geometry:gu(R),patterns:{},sortKey:ee};T.push(me)}L&&T.sort((R,N)=>R.sortKey-N.sortKey);for(const R of T){const{geometry:N,index:j,sourceLayerIndex:G}=R,Y=s[j].feature;this.addFeature(R,N,j,v),f.featureIndex.insert(Y,N,j,G,this.index)}}update(s,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,f,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Fn),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,f,v,w){for(const T of f)for(const A of T){const L=A.x,R=A.y;if(L<0||L>=Nn||R<0||R>=Nn)continue;const N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),j=N.vertexLength;uv(this.layoutVertexArray,L,R,-1,-1),uv(this.layoutVertexArray,L,R,1,-1),uv(this.layoutVertexArray,L,R,1,1),uv(this.layoutVertexArray,L,R,-1,1),this.indexArray.emplaceBack(j,j+1,j+2),this.indexArray.emplaceBack(j,j+3,j+2),N.vertexLength+=4,N.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,{},w)}}function nT(c,s){for(let f=0;f<c.length;f++)if(Wc(s,c[f]))return!0;for(let f=0;f<s.length;f++)if(Wc(c,s[f]))return!0;return!!m0(c,s)}function P6(c,s,f){return!!Wc(c,s)||!!v0(s,c,f)}function iT(c,s){if(c.length===1)return oT(s,c[0]);for(let f=0;f<s.length;f++){const v=s[f];for(let w=0;w<v.length;w++)if(Wc(c,v[w]))return!0}for(let f=0;f<c.length;f++)if(oT(s,c[f]))return!0;for(let f=0;f<s.length;f++)if(m0(c,s[f]))return!0;return!1}function M6(c,s,f){if(c.length>1){if(m0(c,s))return!0;for(let v=0;v<s.length;v++)if(v0(s[v],c,f))return!0}for(let v=0;v<c.length;v++)if(v0(c[v],s,f))return!0;return!1}function m0(c,s){if(c.length===0||s.length===0)return!1;for(let f=0;f<c.length-1;f++){const v=c[f],w=c[f+1];for(let T=0;T<s.length-1;T++)if(D6(v,w,s[T],s[T+1]))return!0}return!1}function D6(c,s,f,v){return q(c,f,v)!==q(s,f,v)&&q(c,s,f)!==q(c,s,v)}function v0(c,s,f){const v=f*f;if(s.length===1)return c.distSqr(s[0])<v;for(let w=1;w<s.length;w++)if(aT(c,s[w-1],s[w])<v)return!0;return!1}function aT(c,s,f){const v=s.distSqr(f);if(v===0)return c.distSqr(s);const w=((c.x-s.x)*(f.x-s.x)+(c.y-s.y)*(f.y-s.y))/v;return c.distSqr(w<0?s:w>1?f:f.sub(s)._mult(w)._add(s))}function oT(c,s){let f,v,w,T=!1;for(let A=0;A<c.length;A++){f=c[A];for(let L=0,R=f.length-1;L<f.length;R=L++)v=f[L],w=f[R],v.y>s.y!=w.y>s.y&&s.x<(w.x-v.x)*(s.y-v.y)/(w.y-v.y)+v.x&&(T=!T)}return T}function Wc(c,s){let f=!1;for(let v=0,w=c.length-1;v<c.length;w=v++){const T=c[v],A=c[w];T.y>s.y!=A.y>s.y&&s.x<(A.x-T.x)*(s.y-T.y)/(A.y-T.y)+T.x&&(f=!f)}return f}function k6(c,s,f){const v=f[0],w=f[2];if(c.x<v.x&&s.x<v.x||c.x>w.x&&s.x>w.x||c.y<v.y&&s.y<v.y||c.y>w.y&&s.y>w.y)return!1;const T=q(c,s,f[0]);return T!==q(c,s,f[1])||T!==q(c,s,f[2])||T!==q(c,s,f[3])}function nd(c,s,f){const v=s.paint.get(c).value;return v.kind==="constant"?v.value:f.programConfigurations.get(s.id).getMaxValue(c)}function cv(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function hv(c,s,f,v,w){if(!s[0]&&!s[1])return c;const T=be.convert(s)._mult(w);f==="viewport"&&T._rotate(-v);const A=[];for(let L=0;L<c.length;L++)A.push(c[L].sub(T));return A}At("CircleBucket",p0,{omit:["layers"]});const L6=new Jn({"circle-sort-key":new Xt(Oe.layout_circle["circle-sort-key"])});var O6={paint:new Jn({"circle-radius":new Xt(Oe.paint_circle["circle-radius"]),"circle-color":new Xt(Oe.paint_circle["circle-color"]),"circle-blur":new Xt(Oe.paint_circle["circle-blur"]),"circle-opacity":new Xt(Oe.paint_circle["circle-opacity"]),"circle-translate":new Bt(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new Bt(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Bt(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Bt(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xt(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xt(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xt(Oe.paint_circle["circle-stroke-opacity"])}),layout:L6},Ei=1e-6,Ci=typeof Float32Array<"u"?Float32Array:Array;function sT(){var c=new Ci(9);return Ci!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function g0(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function lT(c,s,f){var v=s[0],w=s[1],T=s[2],A=s[3],L=s[4],R=s[5],N=s[6],j=s[7],G=s[8],Y=s[9],Q=s[10],ee=s[11],me=s[12],pe=s[13],Pe=s[14],ze=s[15],Ie=f[0],Le=f[1],Ze=f[2],We=f[3];return c[0]=Ie*v+Le*L+Ze*G+We*me,c[1]=Ie*w+Le*R+Ze*Y+We*pe,c[2]=Ie*T+Le*N+Ze*Q+We*Pe,c[3]=Ie*A+Le*j+Ze*ee+We*ze,c[4]=(Ie=f[4])*v+(Le=f[5])*L+(Ze=f[6])*G+(We=f[7])*me,c[5]=Ie*w+Le*R+Ze*Y+We*pe,c[6]=Ie*T+Le*N+Ze*Q+We*Pe,c[7]=Ie*A+Le*j+Ze*ee+We*ze,c[8]=(Ie=f[8])*v+(Le=f[9])*L+(Ze=f[10])*G+(We=f[11])*me,c[9]=Ie*w+Le*R+Ze*Y+We*pe,c[10]=Ie*T+Le*N+Ze*Q+We*Pe,c[11]=Ie*A+Le*j+Ze*ee+We*ze,c[12]=(Ie=f[12])*v+(Le=f[13])*L+(Ze=f[14])*G+(We=f[15])*me,c[13]=Ie*w+Le*R+Ze*Y+We*pe,c[14]=Ie*T+Le*N+Ze*Q+We*Pe,c[15]=Ie*A+Le*j+Ze*ee+We*ze,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var id,R6=lT;function uT(){var c=new Ci(3);return Ci!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function cT(c,s,f){var v=new Ci(3);return v[0]=c,v[1]=s,v[2]=f,v}function fv(c,s,f){var v=s[0],w=s[1],T=s[2],A=s[3];return c[0]=f[0]*v+f[4]*w+f[8]*T+f[12]*A,c[1]=f[1]*v+f[5]*w+f[9]*T+f[13]*A,c[2]=f[2]*v+f[6]*w+f[10]*T+f[14]*A,c[3]=f[3]*v+f[7]*w+f[11]*T+f[15]*A,c}function hT(){var c=new Ci(4);return Ci!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function fT(c,s){const f=fv([],[c.x,c.y,0,1],s);return new be(f[0]/f[3],f[1]/f[3])}uT(),id=new Ci(4),Ci!=Float32Array&&(id[0]=0,id[1]=0,id[2]=0,id[3]=0),uT(),cT(1,0,0),cT(0,1,0),hT(),hT(),sT(),function(){var c;c=new Ci(2),Ci!=Float32Array&&(c[0]=0,c[1]=0)}();class dT extends p0{}At("HeatmapBucket",dT,{omit:["layers"]});var z6={paint:new Jn({"heatmap-radius":new Xt(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xt(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Bt(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Oo(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Bt(Oe.paint_heatmap["heatmap-opacity"])})};function _0(c,{width:s,height:f},v,w){if(w){if(w instanceof Uint8ClampedArray)w=new Uint8Array(w.buffer);else if(w.length!==s*f*v)throw new RangeError(`mismatched image size. expected: ${w.length} but got: ${s*f*v}`)}else w=new Uint8Array(s*f*v);return c.width=s,c.height=f,c.data=w,c}function pT(c,{width:s,height:f},v){if(s===c.width&&f===c.height)return;const w=_0({},{width:s,height:f},v);y0(c,w,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,f)},v),c.width=s,c.height=f,c.data=w.data}function y0(c,s,f,v,w,T){if(w.width===0||w.height===0)return s;if(w.width>c.width||w.height>c.height||f.x>c.width-w.width||f.y>c.height-w.height)throw new RangeError("out of range source coordinates for image copy");if(w.width>s.width||w.height>s.height||v.x>s.width-w.width||v.y>s.height-w.height)throw new RangeError("out of range destination coordinates for image copy");const A=c.data,L=s.data;if(A===L)throw new Error("srcData equals dstData, so image is already copied");for(let R=0;R<w.height;R++){const N=((f.y+R)*c.width+f.x)*T,j=((v.y+R)*s.width+v.x)*T;for(let G=0;G<w.width*T;G++)L[j+G]=A[N+G]}return s}class ad{constructor(s,f){_0(this,s,1,f)}resize(s){pT(this,s,1)}clone(){return new ad({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,f,v,w,T){y0(s,f,v,w,T,1)}}class _a{constructor(s,f){_0(this,s,4,f)}resize(s){pT(this,s,4)}replace(s,f){f?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new _a({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,f,v,w,T){y0(s,f,v,w,T,4)}}function mT(c){const s={},f=c.resolution||256,v=c.clips?c.clips.length:1,w=c.image||new _a({width:f,height:v});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);const T=(A,L,R)=>{s[c.evaluationKey]=R;const N=c.expression.evaluate(s);w.data[A+L+0]=Math.floor(255*N.r/N.a),w.data[A+L+1]=Math.floor(255*N.g/N.a),w.data[A+L+2]=Math.floor(255*N.b/N.a),w.data[A+L+3]=Math.floor(255*N.a)};if(c.clips)for(let A=0,L=0;A<v;++A,L+=4*f)for(let R=0,N=0;R<f;R++,N+=4){const j=R/(f-1),{start:G,end:Y}=c.clips[A];T(L,N,G*(1-j)+Y*j)}else for(let A=0,L=0;A<f;A++,L+=4)T(0,L,A/(f-1));return w}At("AlphaImage",ad),At("RGBAImage",_a);var B6={paint:new Jn({"hillshade-illumination-direction":new Bt(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Bt(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Bt(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Bt(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Bt(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Bt(Oe.paint_hillshade["hillshade-accent-color"])})};const F6=kn([{name:"a_pos",components:2,type:"Int16"}],4),{members:N6}=F6;var dv={exports:{}};function pv(c,s,f){f=f||2;var v,w,T,A,L,R,N,j=s&&s.length,G=j?s[0]*f:c.length,Y=vT(c,0,G,f,!0),Q=[];if(!Y||Y.next===Y.prev)return Q;if(j&&(Y=function(me,pe,Pe,ze){var Ie,Le,Ze,We=[];for(Ie=0,Le=pe.length;Ie<Le;Ie++)(Ze=vT(me,pe[Ie]*ze,Ie<Le-1?pe[Ie+1]*ze:me.length,ze,!1))===Ze.next&&(Ze.steiner=!0),We.push(W6(Ze));for(We.sort(H6),Ie=0;Ie<We.length;Ie++)Pe=G6(We[Ie],Pe);return Pe}(c,s,Y,f)),c.length>80*f){v=T=c[0],w=A=c[1];for(var ee=f;ee<G;ee+=f)(L=c[ee])<v&&(v=L),(R=c[ee+1])<w&&(w=R),L>T&&(T=L),R>A&&(A=R);N=(N=Math.max(T-v,A-w))!==0?32767/N:0}return od(Y,Q,f,v,w,N,0),Q}function vT(c,s,f,v,w){var T,A;if(w===w0(c,s,f,v)>0)for(T=s;T<f;T+=v)A=yT(T,c[T],c[T+1],A);else for(T=f-v;T>=s;T-=v)A=yT(T,c[T],c[T+1],A);return A&&mv(A,A.next)&&(ld(A),A=A.next),A}function yu(c,s){if(!c)return c;s||(s=c);var f,v=c;do if(f=!1,v.steiner||!mv(v,v.next)&&Cn(v.prev,v,v.next)!==0)v=v.next;else{if(ld(v),(v=s=v.prev)===v.next)break;f=!0}while(f||v!==s);return s}function od(c,s,f,v,w,T,A){if(c){!A&&T&&function(j,G,Y,Q){var ee=j;do ee.z===0&&(ee.z=x0(ee.x,ee.y,G,Y,Q)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==j);ee.prevZ.nextZ=null,ee.prevZ=null,function(me){var pe,Pe,ze,Ie,Le,Ze,We,Et,Ot=1;do{for(Pe=me,me=null,Le=null,Ze=0;Pe;){for(Ze++,ze=Pe,We=0,pe=0;pe<Ot&&(We++,ze=ze.nextZ);pe++);for(Et=Ot;We>0||Et>0&&ze;)We!==0&&(Et===0||!ze||Pe.z<=ze.z)?(Ie=Pe,Pe=Pe.nextZ,We--):(Ie=ze,ze=ze.nextZ,Et--),Le?Le.nextZ=Ie:me=Ie,Ie.prevZ=Le,Le=Ie;Pe=ze}Le.nextZ=null,Ot*=2}while(Ze>1)}(ee)}(c,v,w,T);for(var L,R,N=c;c.prev!==c.next;)if(L=c.prev,R=c.next,T?U6(c,v,w,T):V6(c))s.push(L.i/f|0),s.push(c.i/f|0),s.push(R.i/f|0),ld(c),c=R.next,N=R.next;else if((c=R)===N){A?A===1?od(c=$6(yu(c),s,f),s,f,v,w,T,2):A===2&&j6(c,s,f,v,w,T):od(yu(c),s,f,v,w,T,1);break}}}function V6(c){var s=c.prev,f=c,v=c.next;if(Cn(s,f,v)>=0)return!1;for(var w=s.x,T=f.x,A=v.x,L=s.y,R=f.y,N=v.y,j=w<T?w<A?w:A:T<A?T:A,G=L<R?L<N?L:N:R<N?R:N,Y=w>T?w>A?w:A:T>A?T:A,Q=L>R?L>N?L:N:R>N?R:N,ee=v.next;ee!==s;){if(ee.x>=j&&ee.x<=Y&&ee.y>=G&&ee.y<=Q&&Zc(w,L,T,R,A,N,ee.x,ee.y)&&Cn(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function U6(c,s,f,v){var w=c.prev,T=c,A=c.next;if(Cn(w,T,A)>=0)return!1;for(var L=w.x,R=T.x,N=A.x,j=w.y,G=T.y,Y=A.y,Q=L<R?L<N?L:N:R<N?R:N,ee=j<G?j<Y?j:Y:G<Y?G:Y,me=L>R?L>N?L:N:R>N?R:N,pe=j>G?j>Y?j:Y:G>Y?G:Y,Pe=x0(Q,ee,s,f,v),ze=x0(me,pe,s,f,v),Ie=c.prevZ,Le=c.nextZ;Ie&&Ie.z>=Pe&&Le&&Le.z<=ze;){if(Ie.x>=Q&&Ie.x<=me&&Ie.y>=ee&&Ie.y<=pe&&Ie!==w&&Ie!==A&&Zc(L,j,R,G,N,Y,Ie.x,Ie.y)&&Cn(Ie.prev,Ie,Ie.next)>=0||(Ie=Ie.prevZ,Le.x>=Q&&Le.x<=me&&Le.y>=ee&&Le.y<=pe&&Le!==w&&Le!==A&&Zc(L,j,R,G,N,Y,Le.x,Le.y)&&Cn(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Ie&&Ie.z>=Pe;){if(Ie.x>=Q&&Ie.x<=me&&Ie.y>=ee&&Ie.y<=pe&&Ie!==w&&Ie!==A&&Zc(L,j,R,G,N,Y,Ie.x,Ie.y)&&Cn(Ie.prev,Ie,Ie.next)>=0)return!1;Ie=Ie.prevZ}for(;Le&&Le.z<=ze;){if(Le.x>=Q&&Le.x<=me&&Le.y>=ee&&Le.y<=pe&&Le!==w&&Le!==A&&Zc(L,j,R,G,N,Y,Le.x,Le.y)&&Cn(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function $6(c,s,f){var v=c;do{var w=v.prev,T=v.next.next;!mv(w,T)&&gT(w,v,v.next,T)&&sd(w,T)&&sd(T,w)&&(s.push(w.i/f|0),s.push(v.i/f|0),s.push(T.i/f|0),ld(v),ld(v.next),v=c=T),v=v.next}while(v!==c);return yu(v)}function j6(c,s,f,v,w,T){var A=c;do{for(var L=A.next.next;L!==A.prev;){if(A.i!==L.i&&Z6(A,L)){var R=_T(A,L);return A=yu(A,A.next),R=yu(R,R.next),od(A,s,f,v,w,T,0),void od(R,s,f,v,w,T,0)}L=L.next}A=A.next}while(A!==c)}function H6(c,s){return c.x-s.x}function G6(c,s){var f=function(w,T){var A,L=T,R=w.x,N=w.y,j=-1/0;do{if(N<=L.y&&N>=L.next.y&&L.next.y!==L.y){var G=L.x+(N-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(G<=R&&G>j&&(j=G,A=L.x<L.next.x?L:L.next,G===R))return A}L=L.next}while(L!==T);if(!A)return null;var Y,Q=A,ee=A.x,me=A.y,pe=1/0;L=A;do R>=L.x&&L.x>=ee&&R!==L.x&&Zc(N<me?R:j,N,ee,me,N<me?j:R,N,L.x,L.y)&&(Y=Math.abs(N-L.y)/(R-L.x),sd(L,w)&&(Y<pe||Y===pe&&(L.x>A.x||L.x===A.x&&q6(A,L)))&&(A=L,pe=Y)),L=L.next;while(L!==Q);return A}(c,s);if(!f)return s;var v=_T(f,c);return yu(v,v.next),yu(f,f.next)}function q6(c,s){return Cn(c.prev,c,s.prev)<0&&Cn(s.next,c,c.next)<0}function x0(c,s,f,v,w){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-f)*w|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-v)*w|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function W6(c){var s=c,f=c;do(s.x<f.x||s.x===f.x&&s.y<f.y)&&(f=s),s=s.next;while(s!==c);return f}function Zc(c,s,f,v,w,T,A,L){return(w-A)*(s-L)>=(c-A)*(T-L)&&(c-A)*(v-L)>=(f-A)*(s-L)&&(f-A)*(T-L)>=(w-A)*(v-L)}function Z6(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(f,v){var w=f;do{if(w.i!==f.i&&w.next.i!==f.i&&w.i!==v.i&&w.next.i!==v.i&&gT(w,w.next,f,v))return!0;w=w.next}while(w!==f);return!1}(c,s)&&(sd(c,s)&&sd(s,c)&&function(f,v){var w=f,T=!1,A=(f.x+v.x)/2,L=(f.y+v.y)/2;do w.y>L!=w.next.y>L&&w.next.y!==w.y&&A<(w.next.x-w.x)*(L-w.y)/(w.next.y-w.y)+w.x&&(T=!T),w=w.next;while(w!==f);return T}(c,s)&&(Cn(c.prev,c,s.prev)||Cn(c,s.prev,s))||mv(c,s)&&Cn(c.prev,c,c.next)>0&&Cn(s.prev,s,s.next)>0)}function Cn(c,s,f){return(s.y-c.y)*(f.x-s.x)-(s.x-c.x)*(f.y-s.y)}function mv(c,s){return c.x===s.x&&c.y===s.y}function gT(c,s,f,v){var w=gv(Cn(c,s,f)),T=gv(Cn(c,s,v)),A=gv(Cn(f,v,c)),L=gv(Cn(f,v,s));return w!==T&&A!==L||!(w!==0||!vv(c,f,s))||!(T!==0||!vv(c,v,s))||!(A!==0||!vv(f,c,v))||!(L!==0||!vv(f,s,v))}function vv(c,s,f){return s.x<=Math.max(c.x,f.x)&&s.x>=Math.min(c.x,f.x)&&s.y<=Math.max(c.y,f.y)&&s.y>=Math.min(c.y,f.y)}function gv(c){return c>0?1:c<0?-1:0}function sd(c,s){return Cn(c.prev,c,c.next)<0?Cn(c,s,c.next)>=0&&Cn(c,c.prev,s)>=0:Cn(c,s,c.prev)<0||Cn(c,c.next,s)<0}function _T(c,s){var f=new b0(c.i,c.x,c.y),v=new b0(s.i,s.x,s.y),w=c.next,T=s.prev;return c.next=s,s.prev=c,f.next=w,w.prev=f,v.next=f,f.prev=v,T.next=v,v.prev=T,v}function yT(c,s,f,v){var w=new b0(c,s,f);return v?(w.next=v.next,w.prev=v,v.next.prev=w,v.next=w):(w.prev=w,w.next=w),w}function ld(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function b0(c,s,f){this.i=c,this.x=s,this.y=f,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function w0(c,s,f,v){for(var w=0,T=s,A=f-v;T<f;T+=v)w+=(c[A]-c[T])*(c[T+1]+c[A+1]),A=T;return w}function X6(c,s,f,v,w){xT(c,s,f||0,v||c.length-1,w||Y6)}function xT(c,s,f,v,w){for(;v>f;){if(v-f>600){var T=v-f+1,A=s-f+1,L=Math.log(T),R=.5*Math.exp(2*L/3),N=.5*Math.sqrt(L*R*(T-R)/T)*(A-T/2<0?-1:1);xT(c,s,Math.max(f,Math.floor(s-A*R/T+N)),Math.min(v,Math.floor(s+(T-A)*R/T+N)),w)}var j=c[s],G=f,Y=v;for(ud(c,f,s),w(c[v],j)>0&&ud(c,f,v);G<Y;){for(ud(c,G,Y),G++,Y--;w(c[G],j)<0;)G++;for(;w(c[Y],j)>0;)Y--}w(c[f],j)===0?ud(c,f,Y):ud(c,++Y,v),Y<=s&&(f=Y+1),s<=Y&&(v=Y-1)}}function ud(c,s,f){var v=c[s];c[s]=c[f],c[f]=v}function Y6(c,s){return c<s?-1:c>s?1:0}function S0(c,s){const f=c.length;if(f<=1)return[c];const v=[];let w,T;for(let A=0;A<f;A++){const L=K(c[A]);L!==0&&(c[A].area=Math.abs(L),T===void 0&&(T=L<0),T===L<0?(w&&v.push(w),w=[c[A]]):w.push(c[A]))}if(w&&v.push(w),s>1)for(let A=0;A<v.length;A++)v[A].length<=s||(X6(v[A],s,1,v[A].length-1,K6),v[A]=v[A].slice(0,s));return v}function K6(c,s){return s.area-c.area}function T0(c,s,f){const v=f.patternDependencies;let w=!1;for(const T of s){const A=T.paint.get(`${c}-pattern`);A.isConstant()||(w=!0);const L=A.constantOr(null);L&&(w=!0,v[L.to]=!0,v[L.from]=!0)}return w}function E0(c,s,f,v,w){const T=w.patternDependencies;for(const A of s){const L=A.paint.get(`${c}-pattern`).value;if(L.kind!=="constant"){let R=L.evaluate({zoom:v-1},f,{},w.availableImages),N=L.evaluate({zoom:v},f,{},w.availableImages),j=L.evaluate({zoom:v+1},f,{},w.availableImages);R=R&&R.name?R.name:R,N=N&&N.name?N.name:N,j=j&&j.name?j.name:j,T[R]=!0,T[N]=!0,T[j]=!0,f.patterns[A.id]={min:R,mid:N,max:j}}}return f}dv.exports=pv,dv.exports.default=pv,pv.deviation=function(c,s,f,v){var w=s&&s.length,T=Math.abs(w0(c,0,w?s[0]*f:c.length,f));if(w)for(var A=0,L=s.length;A<L;A++)T-=Math.abs(w0(c,s[A]*f,A<L-1?s[A+1]*f:c.length,f));var R=0;for(A=0;A<v.length;A+=3){var N=v[A]*f,j=v[A+1]*f,G=v[A+2]*f;R+=Math.abs((c[N]-c[G])*(c[j+1]-c[N+1])-(c[N]-c[j])*(c[G+1]-c[N+1]))}return T===0&&R===0?0:Math.abs((R-T)/T)},pv.flatten=function(c){for(var s=c[0][0].length,f={vertices:[],holes:[],dimensions:s},v=0,w=0;w<c.length;w++){for(var T=0;T<c[w].length;T++)for(var A=0;A<s;A++)f.vertices.push(c[w][T][A]);w>0&&f.holes.push(v+=c[w-1].length)}return f};class C0{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(f=>f.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Fr,this.indexArray=new Ti,this.indexArray2=new uo,this.programConfigurations=new vu(s.layers,s.zoom),this.segments=new mr,this.segments2=new mr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(s,f,v){this.hasPattern=T0("fill",this.layers,f);const w=this.layers[0].layout.get("fill-sort-key"),T=!w.isConstant(),A=[];for(const{feature:L,id:R,index:N,sourceLayerIndex:j}of s){const G=this.layers[0]._featureFilter.needGeometry,Y=_u(L,G);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),Y,v))continue;const Q=T?w.evaluate(Y,{},v,f.availableImages):void 0,ee={id:R,properties:L.properties,type:L.type,sourceLayerIndex:j,index:N,geometry:G?Y.geometry:gu(L),patterns:{},sortKey:Q};A.push(ee)}T&&A.sort((L,R)=>L.sortKey-R.sortKey);for(const L of A){const{geometry:R,index:N,sourceLayerIndex:j}=L;if(this.hasPattern){const G=E0("fill",this.layers,L,this.zoom,f);this.patternFeatures.push(G)}else this.addFeature(L,R,N,v,{});f.featureIndex.insert(s[N].feature,R,N,j,this.index)}}update(s,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,f,this.stateDependentLayers,v)}addFeatures(s,f,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,f,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,N6),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,f,v,w,T){for(const A of S0(f,500)){let L=0;for(const Q of A)L+=Q.length;const R=this.segments.prepareSegment(L,this.layoutVertexArray,this.indexArray),N=R.vertexLength,j=[],G=[];for(const Q of A){if(Q.length===0)continue;Q!==A[0]&&G.push(j.length/2);const ee=this.segments2.prepareSegment(Q.length,this.layoutVertexArray,this.indexArray2),me=ee.vertexLength;this.layoutVertexArray.emplaceBack(Q[0].x,Q[0].y),this.indexArray2.emplaceBack(me+Q.length-1,me),j.push(Q[0].x),j.push(Q[0].y);for(let pe=1;pe<Q.length;pe++)this.layoutVertexArray.emplaceBack(Q[pe].x,Q[pe].y),this.indexArray2.emplaceBack(me+pe-1,me+pe),j.push(Q[pe].x),j.push(Q[pe].y);ee.vertexLength+=Q.length,ee.primitiveLength+=Q.length}const Y=dv.exports(j,G);for(let Q=0;Q<Y.length;Q+=3)this.indexArray.emplaceBack(N+Y[Q],N+Y[Q+1],N+Y[Q+2]);R.vertexLength+=L,R.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,T,w)}}At("FillBucket",C0,{omit:["layers","patternFeatures"]});const J6=new Jn({"fill-sort-key":new Xt(Oe.layout_fill["fill-sort-key"])});var Q6={paint:new Jn({"fill-antialias":new Bt(Oe.paint_fill["fill-antialias"]),"fill-opacity":new Xt(Oe.paint_fill["fill-opacity"]),"fill-color":new Xt(Oe.paint_fill["fill-color"]),"fill-outline-color":new Xt(Oe.paint_fill["fill-outline-color"]),"fill-translate":new Bt(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new Bt(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new sl(Oe.paint_fill["fill-pattern"])}),layout:J6};const ez=kn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),tz=kn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:rz}=ez;var cl={},nz=be,bT=Xc;function Xc(c,s,f,v,w){this.properties={},this.extent=f,this.type=0,this._pbf=c,this._geometry=-1,this._keys=v,this._values=w,c.readFields(iz,this,s)}function iz(c,s,f){c==1?s.id=f.readVarint():c==2?function(v,w){for(var T=v.readVarint()+v.pos;v.pos<T;){var A=w._keys[v.readVarint()],L=w._values[v.readVarint()];w.properties[A]=L}}(f,s):c==3?s.type=f.readVarint():c==4&&(s._geometry=f.pos)}function az(c){for(var s,f,v=0,w=0,T=c.length,A=T-1;w<T;A=w++)v+=((f=c[A]).x-(s=c[w]).x)*(s.y+f.y);return v}Xc.types=["Unknown","Point","LineString","Polygon"],Xc.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,f=c.readVarint()+c.pos,v=1,w=0,T=0,A=0,L=[];c.pos<f;){if(w<=0){var R=c.readVarint();v=7&R,w=R>>3}if(w--,v===1||v===2)T+=c.readSVarint(),A+=c.readSVarint(),v===1&&(s&&L.push(s),s=[]),s.push(new nz(T,A));else{if(v!==7)throw new Error("unknown command "+v);s&&s.push(s[0].clone())}}return s&&L.push(s),L},Xc.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,f=1,v=0,w=0,T=0,A=1/0,L=-1/0,R=1/0,N=-1/0;c.pos<s;){if(v<=0){var j=c.readVarint();f=7&j,v=j>>3}if(v--,f===1||f===2)(w+=c.readSVarint())<A&&(A=w),w>L&&(L=w),(T+=c.readSVarint())<R&&(R=T),T>N&&(N=T);else if(f!==7)throw new Error("unknown command "+f)}return[A,R,L,N]},Xc.prototype.toGeoJSON=function(c,s,f){var v,w,T=this.extent*Math.pow(2,f),A=this.extent*c,L=this.extent*s,R=this.loadGeometry(),N=Xc.types[this.type];function j(Q){for(var ee=0;ee<Q.length;ee++){var me=Q[ee];Q[ee]=[360*(me.x+A)/T-180,360/Math.PI*Math.atan(Math.exp((180-360*(me.y+L)/T)*Math.PI/180))-90]}}switch(this.type){case 1:var G=[];for(v=0;v<R.length;v++)G[v]=R[v][0];j(R=G);break;case 2:for(v=0;v<R.length;v++)j(R[v]);break;case 3:for(R=function(Q){var ee=Q.length;if(ee<=1)return[Q];for(var me,pe,Pe=[],ze=0;ze<ee;ze++){var Ie=az(Q[ze]);Ie!==0&&(pe===void 0&&(pe=Ie<0),pe===Ie<0?(me&&Pe.push(me),me=[Q[ze]]):me.push(Q[ze]))}return me&&Pe.push(me),Pe}(R),v=0;v<R.length;v++)for(w=0;w<R[v].length;w++)j(R[v][w])}R.length===1?R=R[0]:N="Multi"+N;var Y={type:"Feature",geometry:{type:N,coordinates:R},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var oz=bT,wT=ST;function ST(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(sz,this,s),this.length=this._features.length}function sz(c,s,f){c===15?s.version=f.readVarint():c===1?s.name=f.readString():c===5?s.extent=f.readVarint():c===2?s._features.push(f.pos):c===3?s._keys.push(f.readString()):c===4&&s._values.push(function(v){for(var w=null,T=v.readVarint()+v.pos;v.pos<T;){var A=v.readVarint()>>3;w=A===1?v.readString():A===2?v.readFloat():A===3?v.readDouble():A===4?v.readVarint64():A===5?v.readVarint():A===6?v.readSVarint():A===7?v.readBoolean():null}return w}(f))}ST.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new oz(this._pbf,s,this.extent,this._keys,this._values)};var lz=wT;function uz(c,s,f){if(c===3){var v=new lz(f,f.readVarint()+f.pos);v.length&&(s[v.name]=v)}}cl.VectorTile=function(c,s){this.layers=c.readFields(uz,{},s)},cl.VectorTileFeature=bT,cl.VectorTileLayer=wT;const cz=cl.VectorTileFeature.types,A0=Math.pow(2,13);function cd(c,s,f,v,w,T,A,L){c.emplaceBack(s,f,2*Math.floor(v*A0)+A,w*A0*2,T*A0*2,Math.round(L))}class I0{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(f=>f.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new br,this.centroidVertexArray=new jt,this.indexArray=new Ti,this.programConfigurations=new vu(s.layers,s.zoom),this.segments=new mr,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(s,f,v){this.features=[],this.hasPattern=T0("fill-extrusion",this.layers,f);for(const{feature:w,id:T,index:A,sourceLayerIndex:L}of s){const R=this.layers[0]._featureFilter.needGeometry,N=_u(w,R);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),N,v))continue;const j={id:T,sourceLayerIndex:L,index:A,geometry:R?N.geometry:gu(w),properties:w.properties,type:w.type,patterns:{}};this.hasPattern?this.features.push(E0("fill-extrusion",this.layers,j,this.zoom,f)):this.addFeature(j,j.geometry,A,v,{}),f.featureIndex.insert(w,j.geometry,A,L,this.index,!0)}}addFeatures(s,f,v){for(const w of this.features){const{geometry:T}=w;this.addFeature(w,T,w.index,f,v)}}update(s,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,f,this.stateDependentLayers,v)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,rz),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,tz.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,f,v,w,T){const A={x:0,y:0,vertexCount:0};for(const L of S0(f,500)){let R=0;for(const ee of L)R+=ee.length;let N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of L){if(ee.length===0||fz(ee))continue;let me=0;for(let pe=0;pe<ee.length;pe++){const Pe=ee[pe];if(pe>=1){const ze=ee[pe-1];if(!hz(Pe,ze)){N.vertexLength+4>mr.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Ie=Pe.sub(ze)._perp()._unit(),Le=ze.dist(Pe);me+Le>32768&&(me=0),cd(this.layoutVertexArray,Pe.x,Pe.y,Ie.x,Ie.y,0,0,me),cd(this.layoutVertexArray,Pe.x,Pe.y,Ie.x,Ie.y,0,1,me),A.x+=2*Pe.x,A.y+=2*Pe.y,A.vertexCount+=2,me+=Le,cd(this.layoutVertexArray,ze.x,ze.y,Ie.x,Ie.y,0,0,me),cd(this.layoutVertexArray,ze.x,ze.y,Ie.x,Ie.y,0,1,me),A.x+=2*ze.x,A.y+=2*ze.y,A.vertexCount+=2;const Ze=N.vertexLength;this.indexArray.emplaceBack(Ze,Ze+2,Ze+1),this.indexArray.emplaceBack(Ze+1,Ze+2,Ze+3),N.vertexLength+=4,N.primitiveLength+=2}}}}if(N.vertexLength+R>mr.MAX_VERTEX_ARRAY_LENGTH&&(N=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray)),cz[s.type]!=="Polygon")continue;const j=[],G=[],Y=N.vertexLength;for(const ee of L)if(ee.length!==0){ee!==L[0]&&G.push(j.length/2);for(let me=0;me<ee.length;me++){const pe=ee[me];cd(this.layoutVertexArray,pe.x,pe.y,0,0,1,1,0),A.x+=pe.x,A.y+=pe.y,A.vertexCount+=1,j.push(pe.x),j.push(pe.y)}}const Q=dv.exports(j,G);for(let ee=0;ee<Q.length;ee+=3)this.indexArray.emplaceBack(Y+Q[ee],Y+Q[ee+2],Y+Q[ee+1]);N.primitiveLength+=Q.length/3,N.vertexLength+=R}for(let L=0;L<A.vertexCount;L++)this.centroidVertexArray.emplaceBack(Math.floor(A.x/A.vertexCount),Math.floor(A.y/A.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,T,w)}}function hz(c,s){return c.x===s.x&&(c.x<0||c.x>Nn)||c.y===s.y&&(c.y<0||c.y>Nn)}function fz(c){return c.every(s=>s.x<0)||c.every(s=>s.x>Nn)||c.every(s=>s.y<0)||c.every(s=>s.y>Nn)}At("FillExtrusionBucket",I0,{omit:["layers","features"]});var dz={paint:new Jn({"fill-extrusion-opacity":new Bt(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xt(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Bt(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Bt(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sl(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xt(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xt(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Bt(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function hd(c,s){return c.x*s.x+c.y*s.y}function TT(c,s){if(c.length===1){let f=0;const v=s[f++];let w;for(;!w||v.equals(w);)if(w=s[f++],!w)return 1/0;for(;f<s.length;f++){const T=s[f],A=c[0],L=w.sub(v),R=T.sub(v),N=A.sub(v),j=hd(L,L),G=hd(L,R),Y=hd(R,R),Q=hd(N,L),ee=hd(N,R),me=j*Y-G*G,pe=(Y*Q-G*ee)/me,Pe=(j*ee-G*Q)/me,ze=v.z*(1-pe-Pe)+w.z*pe+T.z*Pe;if(isFinite(ze))return ze}return 1/0}{let f=1/0;for(const v of s)f=Math.min(f,v.z);return f}}const pz=kn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:mz}=pz,vz=kn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:gz}=vz,_z=cl.VectorTileFeature.types,yz=Math.cos(Math.PI/180*37.5),ET=Math.pow(2,14)/.5;class P0{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(f=>f.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new Tr,this.layoutVertexArray2=new jr,this.indexArray=new Ti,this.programConfigurations=new vu(s.layers,s.zoom),this.segments=new mr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(s,f,v){this.hasPattern=T0("line",this.layers,f);const w=this.layers[0].layout.get("line-sort-key"),T=!w.isConstant(),A=[];for(const{feature:L,id:R,index:N,sourceLayerIndex:j}of s){const G=this.layers[0]._featureFilter.needGeometry,Y=_u(L,G);if(!this.layers[0]._featureFilter.filter(new hn(this.zoom),Y,v))continue;const Q=T?w.evaluate(Y,{},v):void 0,ee={id:R,properties:L.properties,type:L.type,sourceLayerIndex:j,index:N,geometry:G?Y.geometry:gu(L),patterns:{},sortKey:Q};A.push(ee)}T&&A.sort((L,R)=>L.sortKey-R.sortKey);for(const L of A){const{geometry:R,index:N,sourceLayerIndex:j}=L;if(this.hasPattern){const G=E0("line",this.layers,L,this.zoom,f);this.patternFeatures.push(G)}else this.addFeature(L,R,N,v,{});f.featureIndex.insert(s[N].feature,R,N,j,this.index)}}update(s,f,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,f,this.stateDependentLayers,v)}addFeatures(s,f,v){for(const w of this.patternFeatures)this.addFeature(w,w.geometry,w.index,f,v)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,gz)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,mz),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,f,v,w,T){const A=this.layers[0].layout,L=A.get("line-join").evaluate(s,{}),R=A.get("line-cap"),N=A.get("line-miter-limit"),j=A.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const G of f)this.addLine(G,s,L,R,N,j);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,v,T,w)}addLine(s,f,v,w,T,A){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Pe=0;Pe<s.length-1;Pe++)this.totalDistance+=s[Pe].dist(s[Pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const L=_z[f.type]==="Polygon";let R=s.length;for(;R>=2&&s[R-1].equals(s[R-2]);)R--;let N=0;for(;N<R-1&&s[N].equals(s[N+1]);)N++;if(R<(L?3:2))return;v==="bevel"&&(T=1.05);const j=this.overscaling<=16?122880/(512*this.overscaling):0,G=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray);let Y,Q,ee,me,pe;this.e1=this.e2=-1,L&&(Y=s[R-2],pe=s[N].sub(Y)._unit()._perp());for(let Pe=N;Pe<R;Pe++){if(ee=Pe===R-1?L?s[N+1]:void 0:s[Pe+1],ee&&s[Pe].equals(ee))continue;pe&&(me=pe),Y&&(Q=Y),Y=s[Pe],pe=ee?ee.sub(Y)._unit()._perp():me,me=me||pe;let ze=me.add(pe);ze.x===0&&ze.y===0||ze._unit();const Ie=me.x*pe.x+me.y*pe.y,Le=ze.x*pe.x+ze.y*pe.y,Ze=Le!==0?1/Le:1/0,We=2*Math.sqrt(2-2*Le),Et=Le<yz&&Q&&ee,Ot=me.x*pe.y-me.y*pe.x>0;if(Et&&Pe>N){const ct=Y.dist(Q);if(ct>2*j){const xt=Y.sub(Y.sub(Q)._mult(j/ct)._round());this.updateDistance(Q,xt),this.addCurrentVertex(xt,me,0,0,G),Q=xt}}const yt=Q&&ee;let vt=yt?v:L?"butt":w;if(yt&&vt==="round"&&(Ze<A?vt="miter":Ze<=2&&(vt="fakeround")),vt==="miter"&&Ze>T&&(vt="bevel"),vt==="bevel"&&(Ze>2&&(vt="flipbevel"),Ze<T&&(vt="miter")),Q&&this.updateDistance(Q,Y),vt==="miter")ze._mult(Ze),this.addCurrentVertex(Y,ze,0,0,G);else if(vt==="flipbevel"){if(Ze>100)ze=pe.mult(-1);else{const ct=Ze*me.add(pe).mag()/me.sub(pe).mag();ze._perp()._mult(ct*(Ot?-1:1))}this.addCurrentVertex(Y,ze,0,0,G),this.addCurrentVertex(Y,ze.mult(-1),0,0,G)}else if(vt==="bevel"||vt==="fakeround"){const ct=-Math.sqrt(Ze*Ze-1),xt=Ot?ct:0,gt=Ot?0:ct;if(Q&&this.addCurrentVertex(Y,me,xt,gt,G),vt==="fakeround"){const at=Math.round(180*We/Math.PI/20);for(let Ht=1;Ht<at;Ht++){let Ft=Ht/at;if(Ft!==.5){const on=Ft-.5;Ft+=Ft*on*(Ft-1)*((1.0904+Ie*(Ie*(3.55645-1.43519*Ie)-3.2452))*on*on+(.848013+Ie*(.215638*Ie-1.06021)))}const pr=pe.sub(me)._mult(Ft)._add(me)._unit()._mult(Ot?-1:1);this.addHalfVertex(Y,pr.x,pr.y,!1,Ot,0,G)}}ee&&this.addCurrentVertex(Y,pe,-xt,-gt,G)}else if(vt==="butt")this.addCurrentVertex(Y,ze,0,0,G);else if(vt==="square"){const ct=Q?1:-1;this.addCurrentVertex(Y,ze,ct,ct,G)}else vt==="round"&&(Q&&(this.addCurrentVertex(Y,me,0,0,G),this.addCurrentVertex(Y,me,1,1,G,!0)),ee&&(this.addCurrentVertex(Y,pe,-1,-1,G,!0),this.addCurrentVertex(Y,pe,0,0,G)));if(Et&&Pe<R-1){const ct=Y.dist(ee);if(ct>2*j){const xt=Y.add(ee.sub(Y)._mult(j/ct)._round());this.updateDistance(Y,xt),this.addCurrentVertex(xt,pe,0,0,G),Y=xt}}}}addCurrentVertex(s,f,v,w,T,A=!1){const L=f.y*w-f.x,R=-f.y-f.x*w;this.addHalfVertex(s,f.x+f.y*v,f.y-f.x*v,A,!1,v,T),this.addHalfVertex(s,L,R,A,!0,-w,T),this.distance>ET/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(s,f,v,w,T,A))}addHalfVertex({x:s,y:f},v,w,T,A,L,R){const N=.5*(this.lineClips?this.scaledDistance*(ET-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(T?1:0),(f<<1)+(A?1:0),Math.round(63*v)+128,Math.round(63*w)+128,1+(L===0?0:L<0?-1:1)|(63&N)<<2,N>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const j=R.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,j),R.primitiveLength++),A?this.e2=j:this.e1=j}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,f){this.distance+=s.dist(f),this.updateScaledDistance()}}At("LineBucket",P0,{omit:["layers","patternFeatures"]});const xz=new Jn({"line-cap":new Bt(Oe.layout_line["line-cap"]),"line-join":new Xt(Oe.layout_line["line-join"]),"line-miter-limit":new Bt(Oe.layout_line["line-miter-limit"]),"line-round-limit":new Bt(Oe.layout_line["line-round-limit"]),"line-sort-key":new Xt(Oe.layout_line["line-sort-key"])});var CT={paint:new Jn({"line-opacity":new Xt(Oe.paint_line["line-opacity"]),"line-color":new Xt(Oe.paint_line["line-color"]),"line-translate":new Bt(Oe.paint_line["line-translate"]),"line-translate-anchor":new Bt(Oe.paint_line["line-translate-anchor"]),"line-width":new Xt(Oe.paint_line["line-width"]),"line-gap-width":new Xt(Oe.paint_line["line-gap-width"]),"line-offset":new Xt(Oe.paint_line["line-offset"]),"line-blur":new Xt(Oe.paint_line["line-blur"]),"line-dasharray":new Jf(Oe.paint_line["line-dasharray"]),"line-pattern":new sl(Oe.paint_line["line-pattern"]),"line-gradient":new Oo(Oe.paint_line["line-gradient"])}),layout:xz};const AT=new class extends Xt{possiblyEvaluate(c,s){return s=new hn(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(c,s)}evaluate(c,s,f,v){return s=E({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(c,s,f,v)}}(CT.paint.properties["line-width"].specification);function IT(c,s){return s>0?s+2*c:c}AT.useIntegerZoom=!0;const bz=kn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),wz=kn([{name:"a_projected_pos",components:3,type:"Float32"}],4);kn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Sz=kn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);kn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const PT=kn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Tz=kn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ez(c,s,f){return c.sections.forEach(v=>{v.text=function(w,T,A){const L=T.layout.get("text-transform").evaluate(A,{});return L==="uppercase"?w=w.toLocaleUpperCase():L==="lowercase"&&(w=w.toLocaleLowerCase()),ra.applyArabicShaping&&(w=ra.applyArabicShaping(w)),w}(v.text,s,f)}),c}kn([{name:"triangle",components:3,type:"Uint16"}]),kn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),kn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),kn([{type:"Float32",name:"offsetX"}]),kn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const fd={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Qn=24,M0=Xr,MT=function(c,s,f,v,w){var T,A,L=8*w-v-1,R=(1<<L)-1,N=R>>1,j=-7,G=f?w-1:0,Y=f?-1:1,Q=c[s+G];for(G+=Y,T=Q&(1<<-j)-1,Q>>=-j,j+=L;j>0;T=256*T+c[s+G],G+=Y,j-=8);for(A=T&(1<<-j)-1,T>>=-j,j+=v;j>0;A=256*A+c[s+G],G+=Y,j-=8);if(T===0)T=1-N;else{if(T===R)return A?NaN:1/0*(Q?-1:1);A+=Math.pow(2,v),T-=N}return(Q?-1:1)*A*Math.pow(2,T-v)},DT=function(c,s,f,v,w,T){var A,L,R,N=8*T-w-1,j=(1<<N)-1,G=j>>1,Y=w===23?Math.pow(2,-24)-Math.pow(2,-77):0,Q=v?0:T-1,ee=v?1:-1,me=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(L=isNaN(s)?1:0,A=j):(A=Math.floor(Math.log(s)/Math.LN2),s*(R=Math.pow(2,-A))<1&&(A--,R*=2),(s+=A+G>=1?Y/R:Y*Math.pow(2,1-G))*R>=2&&(A++,R/=2),A+G>=j?(L=0,A=j):A+G>=1?(L=(s*R-1)*Math.pow(2,w),A+=G):(L=s*Math.pow(2,G-1)*Math.pow(2,w),A=0));w>=8;c[f+Q]=255&L,Q+=ee,L/=256,w-=8);for(A=A<<w|L,N+=w;N>0;c[f+Q]=255&A,Q+=ee,A/=256,N-=8);c[f+Q-ee]|=128*me};function Xr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}Xr.Varint=0,Xr.Fixed64=1,Xr.Bytes=2,Xr.Fixed32=5;var hl,D0=4294967296,kT=1/D0,LT=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function gs(c){return c.type===Xr.Bytes?c.readVarint()+c.pos:c.pos+1}function Yc(c,s,f){return f?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function OT(c,s,f){var v=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));f.realloc(v);for(var w=f.pos-1;w>=c;w--)f.buf[w+v]=f.buf[w]}function Cz(c,s){for(var f=0;f<c.length;f++)s.writeVarint(c[f])}function Az(c,s){for(var f=0;f<c.length;f++)s.writeSVarint(c[f])}function Iz(c,s){for(var f=0;f<c.length;f++)s.writeFloat(c[f])}function Pz(c,s){for(var f=0;f<c.length;f++)s.writeDouble(c[f])}function Mz(c,s){for(var f=0;f<c.length;f++)s.writeBoolean(c[f])}function Dz(c,s){for(var f=0;f<c.length;f++)s.writeFixed32(c[f])}function kz(c,s){for(var f=0;f<c.length;f++)s.writeSFixed32(c[f])}function Lz(c,s){for(var f=0;f<c.length;f++)s.writeFixed64(c[f])}function Oz(c,s){for(var f=0;f<c.length;f++)s.writeSFixed64(c[f])}function _v(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function Kc(c,s,f){c[f]=s,c[f+1]=s>>>8,c[f+2]=s>>>16,c[f+3]=s>>>24}function RT(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}function Rz(c,s,f){c===1&&f.readMessage(zz,s)}function zz(c,s,f){if(c===3){const{id:v,bitmap:w,width:T,height:A,left:L,top:R,advance:N}=f.readMessage(Bz,{});s.push({id:v,bitmap:new ad({width:T+6,height:A+6},w),metrics:{width:T,height:A,left:L,top:R,advance:N}})}}function Bz(c,s,f){c===1?s.id=f.readVarint():c===2?s.bitmap=f.readBytes():c===3?s.width=f.readVarint():c===4?s.height=f.readVarint():c===5?s.left=f.readSVarint():c===6?s.top=f.readSVarint():c===7&&(s.advance=f.readVarint())}function zT(c){let s=0,f=0;for(const A of c)s+=A.w*A.h,f=Math.max(f,A.w);c.sort((A,L)=>L.h-A.h);const v=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),f),h:1/0}];let w=0,T=0;for(const A of c)for(let L=v.length-1;L>=0;L--){const R=v[L];if(!(A.w>R.w||A.h>R.h)){if(A.x=R.x,A.y=R.y,T=Math.max(T,A.y+A.h),w=Math.max(w,A.x+A.w),A.w===R.w&&A.h===R.h){const N=v.pop();L<v.length&&(v[L]=N)}else A.h===R.h?(R.x+=A.w,R.w-=A.w):A.w===R.w?(R.y+=A.h,R.h-=A.h):(v.push({x:R.x+A.w,y:R.y,w:R.w-A.w,h:A.h}),R.y+=A.h,R.h-=A.h);break}}return{w,h:T,fill:s/(w*T)||0}}Xr.prototype={destroy:function(){this.buf=null},readFields:function(c,s,f){for(f=f||this.length;this.pos<f;){var v=this.readVarint(),w=v>>3,T=this.pos;this.type=7&v,c(w,s,this),this.pos===T&&this.skip(v)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=_v(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=RT(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=_v(this.buf,this.pos)+_v(this.buf,this.pos+4)*D0;return this.pos+=8,c},readSFixed64:function(){var c=_v(this.buf,this.pos)+RT(this.buf,this.pos+4)*D0;return this.pos+=8,c},readFloat:function(){var c=MT(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=MT(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,f,v=this.buf;return s=127&(f=v[this.pos++]),f<128?s:(s|=(127&(f=v[this.pos++]))<<7,f<128?s:(s|=(127&(f=v[this.pos++]))<<14,f<128?s:(s|=(127&(f=v[this.pos++]))<<21,f<128?s:function(w,T,A){var L,R,N=A.buf;if(L=(112&(R=N[A.pos++]))>>4,R<128||(L|=(127&(R=N[A.pos++]))<<3,R<128)||(L|=(127&(R=N[A.pos++]))<<10,R<128)||(L|=(127&(R=N[A.pos++]))<<17,R<128)||(L|=(127&(R=N[A.pos++]))<<24,R<128)||(L|=(1&(R=N[A.pos++]))<<31,R<128))return Yc(w,L,T);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(f=v[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&LT?function(f,v,w){return LT.decode(f.subarray(v,w))}(this.buf,s,c):function(f,v,w){for(var T="",A=v;A<w;){var L,R,N,j=f[A],G=null,Y=j>239?4:j>223?3:j>191?2:1;if(A+Y>w)break;Y===1?j<128&&(G=j):Y===2?(192&(L=f[A+1]))==128&&(G=(31&j)<<6|63&L)<=127&&(G=null):Y===3?(R=f[A+2],(192&(L=f[A+1]))==128&&(192&R)==128&&((G=(15&j)<<12|(63&L)<<6|63&R)<=2047||G>=55296&&G<=57343)&&(G=null)):Y===4&&(R=f[A+2],N=f[A+3],(192&(L=f[A+1]))==128&&(192&R)==128&&(192&N)==128&&((G=(15&j)<<18|(63&L)<<12|(63&R)<<6|63&N)<=65535||G>=1114112)&&(G=null)),G===null?(G=65533,Y=1):G>65535&&(G-=65536,T+=String.fromCharCode(G>>>10&1023|55296),G=56320|1023&G),T+=String.fromCharCode(G),A+=Y}return T}(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==Xr.Bytes)return c.push(this.readVarint(s));var f=gs(this);for(c=c||[];this.pos<f;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==Xr.Bytes)return c.push(this.readSVarint());var s=gs(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==Xr.Bytes)return c.push(this.readBoolean());var s=gs(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==Xr.Bytes)return c.push(this.readFloat());var s=gs(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==Xr.Bytes)return c.push(this.readDouble());var s=gs(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==Xr.Bytes)return c.push(this.readFixed32());var s=gs(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==Xr.Bytes)return c.push(this.readSFixed32());var s=gs(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==Xr.Bytes)return c.push(this.readFixed64());var s=gs(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==Xr.Bytes)return c.push(this.readSFixed64());var s=gs(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===Xr.Varint)for(;this.buf[this.pos++]>127;);else if(s===Xr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===Xr.Fixed32)this.pos+=4;else{if(s!==Xr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var f=new Uint8Array(s);f.set(this.buf),this.buf=f,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Kc(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Kc(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Kc(this.buf,-1&c,this.pos),Kc(this.buf,Math.floor(c*kT),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Kc(this.buf,-1&c,this.pos),Kc(this.buf,Math.floor(c*kT),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(s,f){var v,w;if(s>=0?(v=s%4294967296|0,w=s/4294967296|0):(w=~(-s/4294967296),4294967295^(v=~(-s%4294967296))?v=v+1|0:(v=0,w=w+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(T,A,L){L.buf[L.pos++]=127&T|128,T>>>=7,L.buf[L.pos++]=127&T|128,T>>>=7,L.buf[L.pos++]=127&T|128,T>>>=7,L.buf[L.pos++]=127&T|128,L.buf[L.pos]=127&(T>>>=7)}(v,0,f),function(T,A){var L=(7&T)<<4;A.buf[A.pos++]|=L|((T>>>=3)?128:0),T&&(A.buf[A.pos++]=127&T|((T>>>=7)?128:0),T&&(A.buf[A.pos++]=127&T|((T>>>=7)?128:0),T&&(A.buf[A.pos++]=127&T|((T>>>=7)?128:0),T&&(A.buf[A.pos++]=127&T|((T>>>=7)?128:0),T&&(A.buf[A.pos++]=127&T)))))}(w,f)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(Boolean(c))},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=function(v,w,T){for(var A,L,R=0;R<w.length;R++){if((A=w.charCodeAt(R))>55295&&A<57344){if(!L){A>56319||R+1===w.length?(v[T++]=239,v[T++]=191,v[T++]=189):L=A;continue}if(A<56320){v[T++]=239,v[T++]=191,v[T++]=189,L=A;continue}A=L-55296<<10|A-56320|65536,L=null}else L&&(v[T++]=239,v[T++]=191,v[T++]=189,L=null);A<128?v[T++]=A:(A<2048?v[T++]=A>>6|192:(A<65536?v[T++]=A>>12|224:(v[T++]=A>>18|240,v[T++]=A>>12&63|128),v[T++]=A>>6&63|128),v[T++]=63&A|128)}return T}(this.buf,c,this.pos);var f=this.pos-s;f>=128&&OT(s,f,this),this.pos=s-1,this.writeVarint(f),this.pos+=f},writeFloat:function(c){this.realloc(4),DT(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),DT(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var f=0;f<s;f++)this.buf[this.pos++]=c[f]},writeRawMessage:function(c,s){this.pos++;var f=this.pos;c(s,this);var v=this.pos-f;v>=128&&OT(f,v,this),this.pos=f-1,this.writeVarint(v),this.pos+=v},writeMessage:function(c,s,f){this.writeTag(c,Xr.Bytes),this.writeRawMessage(s,f)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,Cz,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,Az,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,Mz,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,Iz,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,Pz,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,Dz,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,kz,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,Lz,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,Oz,s)},writeBytesField:function(c,s){this.writeTag(c,Xr.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,Xr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,Xr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,Xr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,Xr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,Xr.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,Xr.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,Xr.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,Xr.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,Xr.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,Boolean(s))}};class k0{constructor(s,{pixelRatio:f,version:v,stretchX:w,stretchY:T,content:A}){this.paddedRect=s,this.pixelRatio=f,this.stretchX=w,this.stretchY=T,this.content=A,this.version=v}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class BT{constructor(s,f){const v={},w={};this.haveRenderCallbacks=[];const T=[];this.addImages(s,v,T),this.addImages(f,w,T);const{w:A,h:L}=zT(T),R=new _a({width:A||1,height:L||1});for(const N in s){const j=s[N],G=v[N].paddedRect;_a.copy(j.data,R,{x:0,y:0},{x:G.x+1,y:G.y+1},j.data)}for(const N in f){const j=f[N],G=w[N].paddedRect,Y=G.x+1,Q=G.y+1,ee=j.data.width,me=j.data.height;_a.copy(j.data,R,{x:0,y:0},{x:Y,y:Q},j.data),_a.copy(j.data,R,{x:0,y:me-1},{x:Y,y:Q-1},{width:ee,height:1}),_a.copy(j.data,R,{x:0,y:0},{x:Y,y:Q+me},{width:ee,height:1}),_a.copy(j.data,R,{x:ee-1,y:0},{x:Y-1,y:Q},{width:1,height:me}),_a.copy(j.data,R,{x:0,y:0},{x:Y+ee,y:Q},{width:1,height:me})}this.image=R,this.iconPositions=v,this.patternPositions=w}addImages(s,f,v){for(const w in s){const T=s[w],A={x:0,y:0,w:T.data.width+2,h:T.data.height+2};v.push(A),f[w]=new k0(A,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(w)}}patchUpdatedImages(s,f){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const v in s.updatedImages)this.patchUpdatedImage(this.iconPositions[v],s.getImage(v),f),this.patchUpdatedImage(this.patternPositions[v],s.getImage(v),f)}patchUpdatedImage(s,f,v){if(!s||!f||s.version===f.version)return;s.version=f.version;const[w,T]=s.tl;v.update(f.data,void 0,{x:w,y:T})}}At("ImagePosition",k0),At("ImageAtlas",BT),o.WritingMode=void 0,(hl=o.WritingMode||(o.WritingMode={}))[hl.none=0]="none",hl[hl.horizontal=1]="horizontal",hl[hl.vertical=2]="vertical",hl[hl.horizontalOnly=3]="horizontalOnly";const yv=-17;class dd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,f){const v=new dd;return v.scale=s||1,v.fontStack=f,v}static forImage(s){const f=new dd;return f.imageName=s,f}}class Jc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,f){const v=new Jc;for(let w=0;w<s.sections.length;w++){const T=s.sections[w];T.image?v.addImageSection(T):v.addTextSection(T,f)}return v}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let f="";for(let v=0;v<s.length;v++){const w=s.charCodeAt(v+1)||null,T=s.charCodeAt(v-1)||null;f+=w&&Qm(w)&&!fd[s[v+1]]||T&&Qm(T)&&!fd[s[v-1]]||!fd[s[v]]?s[v]:fd[s[v]]}return f}(this.text)}trim(){let s=0;for(let v=0;v<this.text.length&&bv[this.text.charCodeAt(v)];v++)s++;let f=this.text.length;for(let v=this.text.length-1;v>=0&&v>=s&&bv[this.text.charCodeAt(v)];v--)f--;this.text=this.text.substring(s,f),this.sectionIndex=this.sectionIndex.slice(s,f)}substring(s,f){const v=new Jc;return v.text=this.text.substring(s,f),v.sectionIndex=this.sectionIndex.slice(s,f),v.sections=this.sections,v}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,f)=>Math.max(s,this.sections[f].scale),0)}addTextSection(s,f){this.text+=s.text,this.sections.push(dd.forText(s.scale,s.fontStack||f));const v=this.sections.length-1;for(let w=0;w<s.text.length;++w)this.sectionIndex.push(v)}addImageSection(s){const f=s.image?s.image.name:"";if(f.length===0)return void $("Can't add FormattedSection with an empty image.");const v=this.getNextImageSectionCharCode();v?(this.text+=String.fromCharCode(v),this.sections.push(dd.forImage(f)),this.sectionIndex.push(this.sections.length-1)):$("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function xv(c,s,f,v,w,T,A,L,R,N,j,G,Y,Q,ee,me){const pe=Jc.fromFeature(c,w);let Pe;G===o.WritingMode.vertical&&pe.verticalizePunctuation();const{processBidirectionalText:ze,processStyledBidirectionalText:Ie}=ra;if(ze&&pe.sections.length===1){Pe=[];const We=ze(pe.toString(),L0(pe,N,T,s,v,Q,ee));for(const Et of We){const Ot=new Jc;Ot.text=Et,Ot.sections=pe.sections;for(let yt=0;yt<Et.length;yt++)Ot.sectionIndex.push(0);Pe.push(Ot)}}else if(Ie){Pe=[];const We=Ie(pe.text,pe.sectionIndex,L0(pe,N,T,s,v,Q,ee));for(const Et of We){const Ot=new Jc;Ot.text=Et[0],Ot.sectionIndex=Et[1],Ot.sections=pe.sections,Pe.push(Ot)}}else Pe=function(We,Et){const Ot=[],yt=We.text;let vt=0;for(const ct of Et)Ot.push(We.substring(vt,ct)),vt=ct;return vt<yt.length&&Ot.push(We.substring(vt,yt.length)),Ot}(pe,L0(pe,N,T,s,v,Q,ee));const Le=[],Ze={positionedLines:Le,text:pe.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function(We,Et,Ot,yt,vt,ct,xt,gt,at,Ht,Ft,pr){let on=0,dn=yv,Vn=0,xa=0;const oi=gt==="right"?1:gt==="left"?0:.5;let Ln=0;for(const On of vt){On.trim();const li=On.getMaxScale(),vi=(li-1)*Qn,Ai={positionedGlyphs:[],lineOffset:0};We.positionedLines[Ln]=Ai;const Vi=Ai.positionedGlyphs;let Ui=0;if(!On.length()){dn+=ct,++Ln;continue}for(let Zn=0;Zn<On.length();Zn++){const gr=On.getSection(Zn),aa=On.getSectionIndex(Zn),ui=On.getCharCode(Zn);let gi=0,Ra=null,ho=null,fo=null,ys=Qn;const za=!(at===o.WritingMode.horizontal||!Ft&&!qf(ui)||Ft&&(bv[ui]||(Wn=ui,_t.Arabic(Wn)||_t["Arabic Supplement"](Wn)||_t["Arabic Extended-A"](Wn)||_t["Arabic Presentation Forms-A"](Wn)||_t["Arabic Presentation Forms-B"](Wn))));if(gr.imageName){const ba=yt[gr.imageName];if(!ba)continue;fo=gr.imageName,We.iconsInText=We.iconsInText||!0,ho=ba.paddedRect;const $i=ba.displaySize;gr.scale=gr.scale*Qn/pr,Ra={width:$i[0],height:$i[1],left:1,top:-3,advance:za?$i[1]:$i[0]},gi=vi+(Qn-$i[1]*gr.scale),ys=Ra.advance;const xs=za?$i[0]*gr.scale-Qn*li:$i[1]*gr.scale-Qn*li;xs>0&&xs>Ui&&(Ui=xs)}else{const ba=Ot[gr.fontStack],$i=ba&&ba[ui];if($i&&$i.rect)ho=$i.rect,Ra=$i.metrics;else{const xs=Et[gr.fontStack],vd=xs&&xs[ui];if(!vd)continue;Ra=vd.metrics}gi=(li-gr.scale)*Qn}za?(We.verticalizable=!0,Vi.push({glyph:ui,imageName:fo,x:on,y:dn+gi,vertical:za,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:aa,metrics:Ra,rect:ho}),on+=ys*gr.scale+Ht):(Vi.push({glyph:ui,imageName:fo,x:on,y:dn+gi,vertical:za,scale:gr.scale,fontStack:gr.fontStack,sectionIndex:aa,metrics:Ra,rect:ho}),on+=Ra.advance*gr.scale+Ht)}Vi.length!==0&&(Vn=Math.max(on-Ht,Vn),Vz(Vi,0,Vi.length-1,oi,Ui)),on=0;const vn=ct*li+Ui;Ai.lineOffset=Math.max(Ui,vi),dn+=vn,xa=Math.max(vn,xa),++Ln}var Wn;const si=dn-yv,{horizontalAlign:mi,verticalAlign:Ni}=O0(xt);(function(On,li,vi,Ai,Vi,Ui,vn,Zn,gr){const aa=(li-vi)*Vi;let ui=0;ui=Ui!==vn?-Zn*Ai-yv:(-Ai*gr+.5)*vn;for(const gi of On)for(const Ra of gi.positionedGlyphs)Ra.x+=aa,Ra.y+=ui})(We.positionedLines,oi,mi,Ni,Vn,xa,ct,si,vt.length),We.top+=-Ni*si,We.bottom=We.top+si,We.left+=-mi*Vn,We.right=We.left+Vn}(Ze,s,f,v,Pe,A,L,R,G,N,Y,me),!function(We){for(const Et of We)if(Et.positionedGlyphs.length!==0)return!1;return!0}(Le)&&Ze}const bv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fz={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function FT(c,s,f,v,w,T){if(s.imageName){const A=v[s.imageName];return A?A.displaySize[0]*s.scale*Qn/T+w:0}{const A=f[s.fontStack],L=A&&A[c];return L?L.metrics.advance*s.scale+w:0}}function NT(c,s,f,v){const w=Math.pow(c-s,2);return v?c<s?w/2:2*w:w+Math.abs(f)*f}function Nz(c,s,f){let v=0;return c===10&&(v-=1e4),f&&(v+=150),c!==40&&c!==65288||(v+=50),s!==41&&s!==65289||(v+=50),v}function VT(c,s,f,v,w,T){let A=null,L=NT(s,f,w,T);for(const R of v){const N=NT(s-R.x,f,w,T)+R.badness;N<=L&&(A=R,L=N)}return{index:c,x:s,priorBreak:A,badness:L}}function UT(c){return c?UT(c.priorBreak).concat(c.index):[]}function L0(c,s,f,v,w,T,A){if(T!=="point")return[];if(!c)return[];const L=[],R=function(Y,Q,ee,me,pe,Pe){let ze=0;for(let Ie=0;Ie<Y.length();Ie++){const Le=Y.getSection(Ie);ze+=FT(Y.getCharCode(Ie),Le,me,pe,Q,Pe)}return ze/Math.max(1,Math.ceil(ze/ee))}(c,s,f,v,w,A),N=c.text.indexOf("\u200B")>=0;let j=0;for(let Y=0;Y<c.length();Y++){const Q=c.getSection(Y),ee=c.getCharCode(Y);if(bv[ee]||(j+=FT(ee,Q,v,w,s,A)),Y<c.length()-1){const me=!((G=ee)<11904||!(_t["Bopomofo Extended"](G)||_t.Bopomofo(G)||_t["CJK Compatibility Forms"](G)||_t["CJK Compatibility Ideographs"](G)||_t["CJK Compatibility"](G)||_t["CJK Radicals Supplement"](G)||_t["CJK Strokes"](G)||_t["CJK Symbols and Punctuation"](G)||_t["CJK Unified Ideographs Extension A"](G)||_t["CJK Unified Ideographs"](G)||_t["Enclosed CJK Letters and Months"](G)||_t["Halfwidth and Fullwidth Forms"](G)||_t.Hiragana(G)||_t["Ideographic Description Characters"](G)||_t["Kangxi Radicals"](G)||_t["Katakana Phonetic Extensions"](G)||_t.Katakana(G)||_t["Vertical Forms"](G)||_t["Yi Radicals"](G)||_t["Yi Syllables"](G)));(Fz[ee]||me||Q.imageName)&&L.push(VT(Y+1,j,R,L,Nz(ee,c.getCharCode(Y+1),me&&N),!1))}}var G;return UT(VT(c.length(),j,R,L,0,!0))}function O0(c){let s=.5,f=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:s,verticalAlign:f}}function Vz(c,s,f,v,w){if(!v&&!w)return;const T=c[f],A=(c[f].x+T.metrics.advance*T.scale)*v;for(let L=s;L<=f;L++)c[L].x-=A,c[L].y+=w}function Uz(c,s,f){const{horizontalAlign:v,verticalAlign:w}=O0(f),T=s[0]-c.displaySize[0]*v,A=s[1]-c.displaySize[1]*w;return{image:c,top:A,bottom:A+c.displaySize[1],left:T,right:T+c.displaySize[0]}}function $T(c,s,f,v,w,T){const A=c.image;let L;if(A.content){const pe=A.content,Pe=A.pixelRatio||1;L=[pe[0]/Pe,pe[1]/Pe,A.displaySize[0]-pe[2]/Pe,A.displaySize[1]-pe[3]/Pe]}const R=s.left*T,N=s.right*T;let j,G,Y,Q;f==="width"||f==="both"?(Q=w[0]+R-v[3],G=w[0]+N+v[1]):(Q=w[0]+(R+N-A.displaySize[0])/2,G=Q+A.displaySize[0]);const ee=s.top*T,me=s.bottom*T;return f==="height"||f==="both"?(j=w[1]+ee-v[0],Y=w[1]+me+v[2]):(j=w[1]+(ee+me-A.displaySize[1])/2,Y=j+A.displaySize[1]),{image:A,top:j,right:G,bottom:Y,left:Q,collisionPadding:L}}const _s=128;function jT(c,s){const{expression:f}=s;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new hn(c+1))};if(f.kind==="source")return{kind:"source"};{const{zoomStops:v,interpolationType:w}=f;let T=0;for(;T<v.length&&v[T]<=c;)T++;T=Math.max(0,T-1);let A=T;for(;A<v.length&&v[A]<c+1;)A++;A=Math.min(v.length-1,A);const L=v[T],R=v[A];return f.kind==="composite"?{kind:"composite",minZoom:L,maxZoom:R,interpolationType:w}:{kind:"camera",minZoom:L,maxZoom:R,minSize:f.evaluate(new hn(L)),maxSize:f.evaluate(new hn(R)),interpolationType:w}}}class fl extends be{constructor(s,f,v,w){super(s,f),this.angle=v,w!==void 0&&(this.segment=w)}clone(){return new fl(this.x,this.y,this.angle,this.segment)}}function HT(c,s,f,v,w){if(s.segment===void 0)return!0;let T=s,A=s.segment+1,L=0;for(;L>-f/2;){if(A--,A<0)return!1;L-=c[A].dist(T),T=c[A]}L+=c[A].dist(c[A+1]),A++;const R=[];let N=0;for(;L<f/2;){const j=c[A],G=c[A+1];if(!G)return!1;let Y=c[A-1].angleTo(j)-j.angleTo(G);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),R.push({distance:L,angleDelta:Y}),N+=Y;L-R[0].distance>v;)N-=R.shift().angleDelta;if(N>w)return!1;A++,L+=j.dist(G)}return!0}function GT(c){let s=0;for(let f=0;f<c.length-1;f++)s+=c[f].dist(c[f+1]);return s}function qT(c,s,f){return c?.6*s*f:0}function WT(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function $z(c,s,f,v,w,T){const A=qT(f,w,T),L=WT(f,v)*T;let R=0;const N=GT(c)/2;for(let j=0;j<c.length-1;j++){const G=c[j],Y=c[j+1],Q=G.dist(Y);if(R+Q>N){const ee=(N-R)/Q,me=un(G.x,Y.x,ee),pe=un(G.y,Y.y,ee),Pe=new fl(me,pe,Y.angleTo(G),j);return Pe._round(),!A||HT(c,Pe,L,A,s)?Pe:void 0}R+=Q}}function jz(c,s,f,v,w,T,A,L,R){const N=qT(v,T,A),j=WT(v,w),G=j*A,Y=c[0].x===0||c[0].x===R||c[0].y===0||c[0].y===R;return s-G<s/4&&(s=G+s/4),ZT(c,Y?s/2*L%s:(j/2+2*T)*A*L%s,s,N,f,G,Y,!1,R)}function ZT(c,s,f,v,w,T,A,L,R){const N=T/2,j=GT(c);let G=0,Y=s-f,Q=[];for(let ee=0;ee<c.length-1;ee++){const me=c[ee],pe=c[ee+1],Pe=me.dist(pe),ze=pe.angleTo(me);for(;Y+f<G+Pe;){Y+=f;const Ie=(Y-G)/Pe,Le=un(me.x,pe.x,Ie),Ze=un(me.y,pe.y,Ie);if(Le>=0&&Le<R&&Ze>=0&&Ze<R&&Y-N>=0&&Y+N<=j){const We=new fl(Le,Ze,ze,ee);We._round(),v&&!HT(c,We,T,v,w)||Q.push(We)}}G+=Pe}return L||Q.length||A||(Q=ZT(c,G/2,f,v,w,T,A,!0,R)),Q}function XT(c,s,f,v,w){const T=[];for(let A=0;A<c.length;A++){const L=c[A];let R;for(let N=0;N<L.length-1;N++){let j=L[N],G=L[N+1];j.x<s&&G.x<s||(j.x<s?j=new be(s,j.y+(s-j.x)/(G.x-j.x)*(G.y-j.y))._round():G.x<s&&(G=new be(s,j.y+(s-j.x)/(G.x-j.x)*(G.y-j.y))._round()),j.y<f&&G.y<f||(j.y<f?j=new be(j.x+(f-j.y)/(G.y-j.y)*(G.x-j.x),f)._round():G.y<f&&(G=new be(j.x+(f-j.y)/(G.y-j.y)*(G.x-j.x),f)._round()),j.x>=v&&G.x>=v||(j.x>=v?j=new be(v,j.y+(v-j.x)/(G.x-j.x)*(G.y-j.y))._round():G.x>=v&&(G=new be(v,j.y+(v-j.x)/(G.x-j.x)*(G.y-j.y))._round()),j.y>=w&&G.y>=w||(j.y>=w?j=new be(j.x+(w-j.y)/(G.y-j.y)*(G.x-j.x),w)._round():G.y>=w&&(G=new be(j.x+(w-j.y)/(G.y-j.y)*(G.x-j.x),w)._round()),R&&j.equals(R[R.length-1])||(R=[j],T.push(R)),R.push(G)))))}}return T}function YT(c,s,f,v){const w=[],T=c.image,A=T.pixelRatio,L=T.paddedRect.w-2,R=T.paddedRect.h-2,N=c.right-c.left,j=c.bottom-c.top,G=T.stretchX||[[0,L]],Y=T.stretchY||[[0,R]],Q=(ct,xt)=>ct+xt[1]-xt[0],ee=G.reduce(Q,0),me=Y.reduce(Q,0),pe=L-ee,Pe=R-me;let ze=0,Ie=ee,Le=0,Ze=me,We=0,Et=pe,Ot=0,yt=Pe;if(T.content&&v){const ct=T.content;ze=wv(G,0,ct[0]),Le=wv(Y,0,ct[1]),Ie=wv(G,ct[0],ct[2]),Ze=wv(Y,ct[1],ct[3]),We=ct[0]-ze,Ot=ct[1]-Le,Et=ct[2]-ct[0]-Ie,yt=ct[3]-ct[1]-Ze}const vt=(ct,xt,gt,at)=>{const Ht=Sv(ct.stretch-ze,Ie,N,c.left),Ft=Tv(ct.fixed-We,Et,ct.stretch,ee),pr=Sv(xt.stretch-Le,Ze,j,c.top),on=Tv(xt.fixed-Ot,yt,xt.stretch,me),dn=Sv(gt.stretch-ze,Ie,N,c.left),Vn=Tv(gt.fixed-We,Et,gt.stretch,ee),xa=Sv(at.stretch-Le,Ze,j,c.top),oi=Tv(at.fixed-Ot,yt,at.stretch,me),Ln=new be(Ht,pr),Wn=new be(dn,pr),si=new be(dn,xa),mi=new be(Ht,xa),Ni=new be(Ft/A,on/A),On=new be(Vn/A,oi/A),li=s*Math.PI/180;if(li){const Vi=Math.sin(li),Ui=Math.cos(li),vn=[Ui,-Vi,Vi,Ui];Ln._matMult(vn),Wn._matMult(vn),mi._matMult(vn),si._matMult(vn)}const vi=ct.stretch+ct.fixed,Ai=xt.stretch+xt.fixed;return{tl:Ln,tr:Wn,bl:mi,br:si,tex:{x:T.paddedRect.x+1+vi,y:T.paddedRect.y+1+Ai,w:gt.stretch+gt.fixed-vi,h:at.stretch+at.fixed-Ai},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ni,pixelOffsetBR:On,minFontScaleX:Et/A/N,minFontScaleY:yt/A/j,isSDF:f}};if(v&&(T.stretchX||T.stretchY)){const ct=KT(G,pe,ee),xt=KT(Y,Pe,me);for(let gt=0;gt<ct.length-1;gt++){const at=ct[gt],Ht=ct[gt+1];for(let Ft=0;Ft<xt.length-1;Ft++)w.push(vt(at,xt[Ft],Ht,xt[Ft+1]))}}else w.push(vt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:L+1},{fixed:0,stretch:R+1}));return w}function wv(c,s,f){let v=0;for(const w of c)v+=Math.max(s,Math.min(f,w[1]))-Math.max(s,Math.min(f,w[0]));return v}function KT(c,s,f){const v=[{fixed:-1,stretch:0}];for(const[w,T]of c){const A=v[v.length-1];v.push({fixed:w-A.stretch,stretch:A.stretch}),v.push({fixed:w-A.stretch,stretch:A.stretch+(T-w)})}return v.push({fixed:s+1,stretch:f}),v}function Sv(c,s,f,v){return c/s*f+v}function Tv(c,s,f,v){return c-s*f/v}At("Anchor",fl);class Ev{constructor(s,f,v,w,T,A,L,R,N,j){if(this.boxStartIndex=s.length,N){let G=A.top,Y=A.bottom;const Q=A.collisionPadding;Q&&(G-=Q[1],Y+=Q[3]);let ee=Y-G;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let G=A.top*L-R[0],Y=A.bottom*L+R[2],Q=A.left*L-R[3],ee=A.right*L+R[1];const me=A.collisionPadding;if(me&&(Q-=me[0]*L,G-=me[1]*L,ee+=me[2]*L,Y+=me[3]*L),j){const pe=new be(Q,G),Pe=new be(ee,G),ze=new be(Q,Y),Ie=new be(ee,Y),Le=j*Math.PI/180;pe._rotate(Le),Pe._rotate(Le),ze._rotate(Le),Ie._rotate(Le),Q=Math.min(pe.x,Pe.x,ze.x,Ie.x),ee=Math.max(pe.x,Pe.x,ze.x,Ie.x),G=Math.min(pe.y,Pe.y,ze.y,Ie.y),Y=Math.max(pe.y,Pe.y,ze.y,Ie.y)}s.emplaceBack(f.x,f.y,Q,G,ee,Y,v,w,T)}this.boxEndIndex=s.length}}class Hz{constructor(s=[],f=Gz){if(this.data=s,this.length=this.data.length,this.compare=f,this.length>0)for(let v=(this.length>>1)-1;v>=0;v--)this._down(v)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],f=this.data.pop();return this.length--,this.length>0&&(this.data[0]=f,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:f,compare:v}=this,w=f[s];for(;s>0;){const T=s-1>>1,A=f[T];if(v(w,A)>=0)break;f[s]=A,s=T}f[s]=w}_down(s){const{data:f,compare:v}=this,w=this.length>>1,T=f[s];for(;s<w;){let A=1+(s<<1),L=f[A];const R=A+1;if(R<this.length&&v(f[R],L)<0&&(A=R,L=f[R]),v(L,T)>=0)break;f[s]=L,s=A}f[s]=T}}function Gz(c,s){return c<s?-1:c>s?1:0}function qz(c,s=1,f=!1){let v=1/0,w=1/0,T=-1/0,A=-1/0;const L=c[0];for(let Q=0;Q<L.length;Q++){const ee=L[Q];(!Q||ee.x<v)&&(v=ee.x),(!Q||ee.y<w)&&(w=ee.y),(!Q||ee.x>T)&&(T=ee.x),(!Q||ee.y>A)&&(A=ee.y)}const R=Math.min(T-v,A-w);let N=R/2;const j=new Hz([],Wz);if(R===0)return new be(v,w);for(let Q=v;Q<T;Q+=R)for(let ee=w;ee<A;ee+=R)j.push(new Qc(Q+N,ee+N,N,c));let G=function(Q){let ee=0,me=0,pe=0;const Pe=Q[0];for(let ze=0,Ie=Pe.length,Le=Ie-1;ze<Ie;Le=ze++){const Ze=Pe[ze],We=Pe[Le],Et=Ze.x*We.y-We.x*Ze.y;me+=(Ze.x+We.x)*Et,pe+=(Ze.y+We.y)*Et,ee+=3*Et}return new Qc(me/ee,pe/ee,0,Q)}(c),Y=j.length;for(;j.length;){const Q=j.pop();(Q.d>G.d||!G.d)&&(G=Q,f&&console.log("found best %d after %d probes",Math.round(1e4*Q.d)/1e4,Y)),Q.max-G.d<=s||(N=Q.h/2,j.push(new Qc(Q.p.x-N,Q.p.y-N,N,c)),j.push(new Qc(Q.p.x+N,Q.p.y-N,N,c)),j.push(new Qc(Q.p.x-N,Q.p.y+N,N,c)),j.push(new Qc(Q.p.x+N,Q.p.y+N,N,c)),Y+=4)}return f&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${G.d}`)),G.p}function Wz(c,s){return s.max-c.max}function Qc(c,s,f,v){this.p=new be(c,s),this.h=f,this.d=function(w,T){let A=!1,L=1/0;for(let R=0;R<T.length;R++){const N=T[R];for(let j=0,G=N.length,Y=G-1;j<G;Y=j++){const Q=N[j],ee=N[Y];Q.y>w.y!=ee.y>w.y&&w.x<(ee.x-Q.x)*(w.y-Q.y)/(ee.y-Q.y)+Q.x&&(A=!A),L=Math.min(L,aT(w,Q,ee))}}return(A?1:-1)*Math.sqrt(L)}(this.p,v),this.max=this.d+this.h*Math.SQRT2}const R0=Number.POSITIVE_INFINITY;function JT(c,s){return s[1]!==R0?function(f,v,w){let T=0,A=0;switch(v=Math.abs(v),w=Math.abs(w),f){case"top-right":case"top-left":case"top":A=w-7;break;case"bottom-right":case"bottom-left":case"bottom":A=7-w}switch(f){case"top-right":case"bottom-right":case"right":T=-v;break;case"top-left":case"bottom-left":case"left":T=v}return[T,A]}(c,s[0],s[1]):function(f,v){let w=0,T=0;v<0&&(v=0);const A=v/Math.sqrt(2);switch(f){case"top-right":case"top-left":T=A-7;break;case"bottom-right":case"bottom-left":T=7-A;break;case"bottom":T=7-v;break;case"top":T=v-7}switch(f){case"top-right":case"bottom-right":w=-A;break;case"top-left":case"bottom-left":w=A;break;case"left":w=v;break;case"right":w=-v}return[w,T]}(c,s[0])}function z0(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Zz(c,s,f,v,w,T,A,L,R,N,j){let G=T.textMaxSize.evaluate(s,{});G===void 0&&(G=A);const Y=c.layers[0].layout,Q=Y.get("icon-offset").evaluate(s,{},j),ee=eE(f.horizontal),me=A/24,pe=c.tilePixelRatio*me,Pe=c.tilePixelRatio*G/24,ze=c.tilePixelRatio*L,Ie=c.tilePixelRatio*Y.get("symbol-spacing"),Le=Y.get("text-padding")*c.tilePixelRatio,Ze=function(at,Ht,Ft,pr=1){const on=at.get("icon-padding").evaluate(Ht,{},Ft),dn=on&&on.values;return[dn[0]*pr,dn[1]*pr,dn[2]*pr,dn[3]*pr]}(Y,s,j,c.tilePixelRatio),We=Y.get("text-max-angle")/180*Math.PI,Et=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",Ot=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",yt=Y.get("symbol-placement"),vt=Ie/2,ct=Y.get("icon-text-fit");let xt;v&&ct!=="none"&&(c.allowVerticalPlacement&&f.vertical&&(xt=$T(v,f.vertical,ct,Y.get("icon-text-fit-padding"),Q,me)),ee&&(v=$T(v,ee,ct,Y.get("icon-text-fit-padding"),Q,me)));const gt=(at,Ht)=>{Ht.x<0||Ht.x>=Nn||Ht.y<0||Ht.y>=Nn||function(Ft,pr,on,dn,Vn,xa,oi,Ln,Wn,si,mi,Ni,On,li,vi,Ai,Vi,Ui,vn,Zn,gr,aa,ui,gi,Ra){const ho=Ft.addToLineVertexArray(pr,on);let fo,ys,za,ba,$i=0,xs=0,vd=0,vE=0,q0=-1,W0=-1;const bs={};let gE=qn.exports(""),Z0=0,X0=0;if(Ln._unevaluatedLayout.getValue("text-radial-offset")===void 0?[Z0,X0]=Ln.layout.get("text-offset").evaluate(gr,{},gi).map(ji=>ji*Qn):(Z0=Ln.layout.get("text-radial-offset").evaluate(gr,{},gi)*Qn,X0=R0),Ft.allowVerticalPlacement&&dn.vertical){const ji=Ln.layout.get("text-rotate").evaluate(gr,{},gi)+90;za=new Ev(Wn,pr,si,mi,Ni,dn.vertical,On,li,vi,ji),oi&&(ba=new Ev(Wn,pr,si,mi,Ni,oi,Vi,Ui,vi,ji))}if(Vn){const ji=Ln.layout.get("icon-rotate").evaluate(gr,{}),No=Ln.layout.get("icon-text-fit")!=="none",gd=YT(Vn,ji,ui,No),_d=oi?YT(oi,ji,ui,No):void 0;ys=new Ev(Wn,pr,si,mi,Ni,Vn,Vi,Ui,!1,ji),$i=4*gd.length;const xE=Ft.iconSizeData;let bu=null;xE.kind==="source"?(bu=[_s*Ln.layout.get("icon-size").evaluate(gr,{})],bu[0]>dl&&$(`${Ft.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):xE.kind==="composite"&&(bu=[_s*aa.compositeIconSizes[0].evaluate(gr,{},gi),_s*aa.compositeIconSizes[1].evaluate(gr,{},gi)],(bu[0]>dl||bu[1]>dl)&&$(`${Ft.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Ft.addSymbols(Ft.icon,gd,bu,Zn,vn,gr,o.WritingMode.none,pr,ho.lineStartIndex,ho.lineLength,-1,gi),q0=Ft.icon.placedSymbolArray.length-1,_d&&(xs=4*_d.length,Ft.addSymbols(Ft.icon,_d,bu,Zn,vn,gr,o.WritingMode.vertical,pr,ho.lineStartIndex,ho.lineLength,-1,gi),W0=Ft.icon.placedSymbolArray.length-1)}const _E=Object.keys(dn.horizontal);for(const ji of _E){const No=dn.horizontal[ji];if(!fo){gE=qn.exports(No.text);const _d=Ln.layout.get("text-rotate").evaluate(gr,{},gi);fo=new Ev(Wn,pr,si,mi,Ni,No,On,li,vi,_d)}const gd=No.positionedLines.length===1;if(vd+=QT(Ft,pr,No,xa,Ln,vi,gr,Ai,ho,dn.vertical?o.WritingMode.horizontal:o.WritingMode.horizontalOnly,gd?_E:[ji],bs,q0,aa,gi),gd)break}dn.vertical&&(vE+=QT(Ft,pr,dn.vertical,xa,Ln,vi,gr,Ai,ho,o.WritingMode.vertical,["vertical"],bs,W0,aa,gi));const s9=fo?fo.boxStartIndex:Ft.collisionBoxArray.length,l9=fo?fo.boxEndIndex:Ft.collisionBoxArray.length,u9=za?za.boxStartIndex:Ft.collisionBoxArray.length,c9=za?za.boxEndIndex:Ft.collisionBoxArray.length,h9=ys?ys.boxStartIndex:Ft.collisionBoxArray.length,f9=ys?ys.boxEndIndex:Ft.collisionBoxArray.length,d9=ba?ba.boxStartIndex:Ft.collisionBoxArray.length,p9=ba?ba.boxEndIndex:Ft.collisionBoxArray.length;let po=-1;const Mv=(ji,No)=>ji&&ji.circleDiameter?Math.max(ji.circleDiameter,No):No;po=Mv(fo,po),po=Mv(za,po),po=Mv(ys,po),po=Mv(ba,po);const yE=po>-1?1:0;yE&&(po*=Ra/Qn),Ft.glyphOffsetArray.length>=eh.MAX_GLYPHS&&$("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),gr.sortKey!==void 0&&Ft.addToSortKeyRanges(Ft.symbolInstances.length,gr.sortKey),Ft.symbolInstances.emplaceBack(pr.x,pr.y,bs.right>=0?bs.right:-1,bs.center>=0?bs.center:-1,bs.left>=0?bs.left:-1,bs.vertical||-1,q0,W0,gE,s9,l9,u9,c9,h9,f9,d9,p9,si,vd,vE,$i,xs,yE,0,On,Z0,X0,po)}(c,Ht,at,f,v,w,xt,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,pe,[Le,Le,Le,Le],Et,R,ze,Ze,Ot,Q,s,T,N,j,A)};if(yt==="line")for(const at of XT(s.geometry,0,0,Nn,Nn)){const Ht=jz(at,Ie,We,f.vertical||ee,v,24,Pe,c.overscaling,Nn);for(const Ft of Ht){const pr=ee;pr&&Xz(c,pr.text,vt,Ft)||gt(at,Ft)}}else if(yt==="line-center"){for(const at of s.geometry)if(at.length>1){const Ht=$z(at,We,f.vertical||ee,v,24,Pe);Ht&&gt(at,Ht)}}else if(s.type==="Polygon")for(const at of S0(s.geometry,0)){const Ht=qz(at,16);gt(at[0],new fl(Ht.x,Ht.y,0))}else if(s.type==="LineString")for(const at of s.geometry)gt(at,new fl(at[0].x,at[0].y,0));else if(s.type==="Point")for(const at of s.geometry)for(const Ht of at)gt([Ht],new fl(Ht.x,Ht.y,0))}const dl=32640;function QT(c,s,f,v,w,T,A,L,R,N,j,G,Y,Q,ee){const me=function(ze,Ie,Le,Ze,We,Et,Ot,yt){const vt=Ze.layout.get("text-rotate").evaluate(Et,{})*Math.PI/180,ct=[];for(const xt of Ie.positionedLines)for(const gt of xt.positionedGlyphs){if(!gt.rect)continue;const at=gt.rect||{};let Ht=4,Ft=!0,pr=1,on=0;const dn=(We||yt)&&gt.vertical,Vn=gt.metrics.advance*gt.scale/2;if(yt&&Ie.verticalizable){const vn=(gt.scale-1)*Qn,Zn=(Qn-gt.metrics.width*gt.scale)/2;on=xt.lineOffset/2-(gt.imageName?-Zn:vn)}if(gt.imageName){const vn=Ot[gt.imageName];Ft=vn.sdf,pr=vn.pixelRatio,Ht=1/pr}const xa=We?[gt.x+Vn,gt.y]:[0,0];let oi=We?[0,0]:[gt.x+Vn+Le[0],gt.y+Le[1]-on],Ln=[0,0];dn&&(Ln=oi,oi=[0,0]);const Wn=(gt.metrics.left-Ht)*gt.scale-Vn+oi[0],si=(-gt.metrics.top-Ht)*gt.scale+oi[1],mi=Wn+at.w*gt.scale/pr,Ni=si+at.h*gt.scale/pr,On=new be(Wn,si),li=new be(mi,si),vi=new be(Wn,Ni),Ai=new be(mi,Ni);if(dn){const vn=new be(-Vn,Vn-yv),Zn=-Math.PI/2,gr=12-Vn,aa=new be(22-gr,-(gt.imageName?gr:0)),ui=new be(...Ln);On._rotateAround(Zn,vn)._add(aa)._add(ui),li._rotateAround(Zn,vn)._add(aa)._add(ui),vi._rotateAround(Zn,vn)._add(aa)._add(ui),Ai._rotateAround(Zn,vn)._add(aa)._add(ui)}if(vt){const vn=Math.sin(vt),Zn=Math.cos(vt),gr=[Zn,-vn,vn,Zn];On._matMult(gr),li._matMult(gr),vi._matMult(gr),Ai._matMult(gr)}const Vi=new be(0,0),Ui=new be(0,0);ct.push({tl:On,tr:li,bl:vi,br:Ai,tex:at,writingMode:Ie.writingMode,glyphOffset:xa,sectionIndex:gt.sectionIndex,isSDF:Ft,pixelOffsetTL:Vi,pixelOffsetBR:Ui,minFontScaleX:0,minFontScaleY:0})}return ct}(0,f,L,w,T,A,v,c.allowVerticalPlacement),pe=c.textSizeData;let Pe=null;pe.kind==="source"?(Pe=[_s*w.layout.get("text-size").evaluate(A,{})],Pe[0]>dl&&$(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):pe.kind==="composite"&&(Pe=[_s*Q.compositeTextSizes[0].evaluate(A,{},ee),_s*Q.compositeTextSizes[1].evaluate(A,{},ee)],(Pe[0]>dl||Pe[1]>dl)&&$(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,me,Pe,L,T,A,N,s,R.lineStartIndex,R.lineLength,Y,ee);for(const ze of j)G[ze]=c.text.placedSymbolArray.length-1;return 4*me.length}function eE(c){for(const s in c)return c[s];return null}function Xz(c,s,f,v){const w=c.compareText;if(s in w){const T=w[s];for(let A=T.length-1;A>=0;A--)if(v.dist(T[A])<f)return!0}else w[s]=[];return w[s].push(v),!1}const Yz=cl.VectorTileFeature.types,Kz=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Cv(c,s,f,v,w,T,A,L,R,N,j,G,Y){const Q=L?Math.min(dl,Math.round(L[0])):0,ee=L?Math.min(dl,Math.round(L[1])):0;c.emplaceBack(s,f,Math.round(32*v),Math.round(32*w),T,A,(Q<<1)+(R?1:0),ee,16*N,16*j,256*G,256*Y)}function B0(c,s,f){c.emplaceBack(s.x,s.y,f),c.emplaceBack(s.x,s.y,f),c.emplaceBack(s.x,s.y,f),c.emplaceBack(s.x,s.y,f)}function Jz(c){for(const s of c.sections)if(tv(s.text))return!0;return!1}class F0{constructor(s){this.layoutVertexArray=new La,this.indexArray=new Ti,this.programConfigurations=s,this.segments=new mr,this.dynamicLayoutVertexArray=new ga,this.opacityVertexArray=new Oa,this.placedSymbolArray=new rt}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,f,v,w){this.isEmpty()||(v&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,bz.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,wz.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,Kz,!0),this.opacityVertexBuffer.itemSize=1),(v||w)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}At("SymbolBuffers",F0);class N0{constructor(s,f,v){this.layoutVertexArray=new s,this.layoutAttributes=f,this.indexArray=new v,this.segments=new mr,this.collisionVertexArray=new na}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,Sz.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}At("CollisionBuffers",N0);class eh{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(A=>A.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=g0([]),this.placementViewportMatrix=g0([]);const f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=jT(this.zoom,f["text-size"]),this.iconSizeData=jT(this.zoom,f["icon-size"]);const v=this.layers[0].layout,w=v.get("symbol-sort-key"),T=v.get("symbol-z-order");this.canOverlap=U0(v,"text-overlap","text-allow-overlap")!=="never"||U0(v,"icon-overlap","icon-allow-overlap")!=="never"||v.get("text-ignore-placement")||v.get("icon-ignore-placement"),this.sortFeaturesByKey=T!=="viewport-y"&&!w.isConstant(),this.sortFeaturesByY=(T==="viewport-y"||T==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,v.get("symbol-placement")==="point"&&(this.writingModes=v.get("text-writing-mode").map(A=>o.WritingMode[A])),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id),this.sourceID=s.sourceID}createArrays(){this.text=new F0(new vu(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new F0(new vu(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new mt,this.lineVertexArray=new Tt,this.symbolInstances=new St}calculateGlyphDependencies(s,f,v,w,T){for(let A=0;A<s.length;A++)if(f[s.charCodeAt(A)]=!0,(v||w)&&T){const L=fd[s.charAt(A)];L&&(f[L.charCodeAt(0)]=!0)}}populate(s,f,v){const w=this.layers[0],T=w.layout,A=T.get("text-font"),L=T.get("text-field"),R=T.get("icon-image"),N=(L.value.kind!=="constant"||L.value.value instanceof xe&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(A.value.kind!=="constant"||A.value.value.length>0),j=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,G=T.get("symbol-sort-key");if(this.features=[],!N&&!j)return;const Y=f.iconDependencies,Q=f.glyphDependencies,ee=f.availableImages,me=new hn(this.zoom);for(const{feature:pe,id:Pe,index:ze,sourceLayerIndex:Ie}of s){const Le=w._featureFilter.needGeometry,Ze=_u(pe,Le);if(!w._featureFilter.filter(me,Ze,v))continue;let We,Et;if(Le||(Ze.geometry=gu(pe)),N){const yt=w.getValueAndResolveTokens("text-field",Ze,v,ee),vt=xe.factory(yt);Jz(vt)&&(this.hasRTLText=!0),(!this.hasRTLText||du()==="unavailable"||this.hasRTLText&&ra.isParsed())&&(We=Ez(vt,w,Ze))}if(j){const yt=w.getValueAndResolveTokens("icon-image",Ze,v,ee);Et=yt instanceof Ee?yt:Ee.fromString(yt)}if(!We&&!Et)continue;const Ot=this.sortFeaturesByKey?G.evaluate(Ze,{},v):void 0;if(this.features.push({id:Pe,text:We,icon:Et,index:ze,sourceLayerIndex:Ie,geometry:Ze.geometry,properties:pe.properties,type:Yz[pe.type],sortKey:Ot}),Et&&(Y[Et.name]=!0),We){const yt=A.evaluate(Ze,{},v).join(","),vt=T.get("text-rotation-alignment")!=="viewport"&&T.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.WritingMode.vertical)>=0;for(const ct of We.sections)if(ct.image)Y[ct.image.name]=!0;else{const xt=$c(We.toString()),gt=ct.fontStack||yt,at=Q[gt]=Q[gt]||{};this.calculateGlyphDependencies(ct.text,at,vt,this.allowVerticalPlacement,xt)}}}T.get("symbol-placement")==="line"&&(this.features=function(pe){const Pe={},ze={},Ie=[];let Le=0;function Ze(yt){Ie.push(pe[yt]),Le++}function We(yt,vt,ct){const xt=ze[yt];return delete ze[yt],ze[vt]=xt,Ie[xt].geometry[0].pop(),Ie[xt].geometry[0]=Ie[xt].geometry[0].concat(ct[0]),xt}function Et(yt,vt,ct){const xt=Pe[vt];return delete Pe[vt],Pe[yt]=xt,Ie[xt].geometry[0].shift(),Ie[xt].geometry[0]=ct[0].concat(Ie[xt].geometry[0]),xt}function Ot(yt,vt,ct){const xt=ct?vt[0][vt[0].length-1]:vt[0][0];return`${yt}:${xt.x}:${xt.y}`}for(let yt=0;yt<pe.length;yt++){const vt=pe[yt],ct=vt.geometry,xt=vt.text?vt.text.toString():null;if(!xt){Ze(yt);continue}const gt=Ot(xt,ct),at=Ot(xt,ct,!0);if(gt in ze&&at in Pe&&ze[gt]!==Pe[at]){const Ht=Et(gt,at,ct),Ft=We(gt,at,Ie[Ht].geometry);delete Pe[gt],delete ze[at],ze[Ot(xt,Ie[Ft].geometry,!0)]=Ft,Ie[Ht].geometry=null}else gt in ze?We(gt,at,ct):at in Pe?Et(gt,at,ct):(Ze(yt),Pe[gt]=Le-1,ze[at]=Le-1)}return Ie.filter(yt=>yt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pe,Pe)=>pe.sortKey-Pe.sortKey)}update(s,f,v){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,f,this.layers,v),this.icon.programConfigurations.updatePaintArrays(s,f,this.layers,v))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,f){const v=this.lineVertexArray.length;if(s.segment!==void 0){let w=s.dist(f[s.segment+1]),T=s.dist(f[s.segment]);const A={};for(let L=s.segment+1;L<f.length;L++)A[L]={x:f[L].x,y:f[L].y,tileUnitDistanceFromAnchor:w},L<f.length-1&&(w+=f[L+1].dist(f[L]));for(let L=s.segment||0;L>=0;L--)A[L]={x:f[L].x,y:f[L].y,tileUnitDistanceFromAnchor:T},L>0&&(T+=f[L-1].dist(f[L]));for(let L=0;L<f.length;L++){const R=A[L];this.lineVertexArray.emplaceBack(R.x,R.y,R.tileUnitDistanceFromAnchor)}}return{lineStartIndex:v,lineLength:this.lineVertexArray.length-v}}addSymbols(s,f,v,w,T,A,L,R,N,j,G,Y){const Q=s.indexArray,ee=s.layoutVertexArray,me=s.segments.prepareSegment(4*f.length,ee,Q,this.canOverlap?A.sortKey:void 0),pe=this.glyphOffsetArray.length,Pe=me.vertexLength,ze=this.allowVerticalPlacement&&L===o.WritingMode.vertical?Math.PI/2:0,Ie=A.text&&A.text.sections;for(let Le=0;Le<f.length;Le++){const{tl:Ze,tr:We,bl:Et,br:Ot,tex:yt,pixelOffsetTL:vt,pixelOffsetBR:ct,minFontScaleX:xt,minFontScaleY:gt,glyphOffset:at,isSDF:Ht,sectionIndex:Ft}=f[Le],pr=me.vertexLength,on=at[1];Cv(ee,R.x,R.y,Ze.x,on+Ze.y,yt.x,yt.y,v,Ht,vt.x,vt.y,xt,gt),Cv(ee,R.x,R.y,We.x,on+We.y,yt.x+yt.w,yt.y,v,Ht,ct.x,vt.y,xt,gt),Cv(ee,R.x,R.y,Et.x,on+Et.y,yt.x,yt.y+yt.h,v,Ht,vt.x,ct.y,xt,gt),Cv(ee,R.x,R.y,Ot.x,on+Ot.y,yt.x+yt.w,yt.y+yt.h,v,Ht,ct.x,ct.y,xt,gt),B0(s.dynamicLayoutVertexArray,R,ze),Q.emplaceBack(pr,pr+1,pr+2),Q.emplaceBack(pr+1,pr+2,pr+3),me.vertexLength+=4,me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(at[0]),Le!==f.length-1&&Ft===f[Le+1].sectionIndex||s.programConfigurations.populatePaintArrays(ee.length,A,A.index,{},Y,Ie&&Ie[Ft])}s.placedSymbolArray.emplaceBack(R.x,R.y,pe,this.glyphOffsetArray.length-pe,Pe,N,j,R.segment,v?v[0]:0,v?v[1]:0,w[0],w[1],L,0,!1,0,G)}_addCollisionDebugVertex(s,f,v,w,T,A){return f.emplaceBack(0,0),s.emplaceBack(v.x,v.y,w,T,Math.round(A.x),Math.round(A.y))}addCollisionDebugVertices(s,f,v,w,T,A,L){const R=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),N=R.vertexLength,j=T.layoutVertexArray,G=T.collisionVertexArray,Y=L.anchorX,Q=L.anchorY;this._addCollisionDebugVertex(j,G,A,Y,Q,new be(s,f)),this._addCollisionDebugVertex(j,G,A,Y,Q,new be(v,f)),this._addCollisionDebugVertex(j,G,A,Y,Q,new be(v,w)),this._addCollisionDebugVertex(j,G,A,Y,Q,new be(s,w)),R.vertexLength+=4;const ee=T.indexArray;ee.emplaceBack(N,N+1),ee.emplaceBack(N+1,N+2),ee.emplaceBack(N+2,N+3),ee.emplaceBack(N+3,N),R.primitiveLength+=4}addDebugCollisionBoxes(s,f,v,w){for(let T=s;T<f;T++){const A=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(A.x1,A.y1,A.x2,A.y2,w?this.textCollisionBox:this.iconCollisionBox,A.anchorPoint,v)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new N0(Bo,PT.members,uo),this.iconCollisionBox=new N0(Bo,PT.members,uo);for(let s=0;s<this.symbolInstances.length;s++){const f=this.symbolInstances.get(s);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(s,f,v,w,T,A,L,R,N){const j={};for(let G=f;G<v;G++){const Y=s.get(G);j.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},j.textFeatureIndex=Y.featureIndex;break}for(let G=w;G<T;G++){const Y=s.get(G);j.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},j.verticalTextFeatureIndex=Y.featureIndex;break}for(let G=A;G<L;G++){const Y=s.get(G);j.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},j.iconFeatureIndex=Y.featureIndex;break}for(let G=R;G<N;G++){const Y=s.get(G);j.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},j.verticalIconFeatureIndex=Y.featureIndex;break}return j}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){const v=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,v.textBoxStartIndex,v.textBoxEndIndex,v.verticalTextBoxStartIndex,v.verticalTextBoxEndIndex,v.iconBoxStartIndex,v.iconBoxEndIndex,v.verticalIconBoxStartIndex,v.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,f){const v=s.placedSymbolArray.get(f),w=v.vertexStartIndex+4*v.numGlyphs;for(let T=v.vertexStartIndex;T<w;T+=4)s.indexArray.emplaceBack(T,T+1,T+2),s.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const f=Math.sin(s),v=Math.cos(s),w=[],T=[],A=[];for(let L=0;L<this.symbolInstances.length;++L){A.push(L);const R=this.symbolInstances.get(L);w.push(0|Math.round(f*R.anchorX+v*R.anchorY)),T.push(R.featureIndex)}return A.sort((L,R)=>w[L]-w[R]||T[R]-T[L]),A}addToSortKeyRanges(s,f){const v=this.sortKeyRanges[this.sortKeyRanges.length-1];v&&v.sortKey===f?v.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const f of this.symbolInstanceIndexes){const v=this.symbolInstances.get(f);this.featureSortOrder.push(v.featureIndex),[v.rightJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.leftJustifiedTextSymbolIndex].forEach((w,T,A)=>{w>=0&&A.indexOf(w)===T&&this.addIndicesForPlacedSymbol(this.text,w)}),v.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,v.verticalPlacedTextSymbolIndex),v.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.placedIconSymbolIndex),v.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,v.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}At("SymbolBucket",eh,{omit:["layers","collisionBoxArray","features","compareText"]}),eh.MAX_GLYPHS=65535,eh.addDynamicAttributes=B0;const Qz=new Jn({"symbol-placement":new Bt(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new Bt(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Bt(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xt(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Bt(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Bt(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Bt(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Bt(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Bt(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Bt(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xt(Oe.layout_symbol["icon-size"]),"icon-text-fit":new Bt(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Bt(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xt(Oe.layout_symbol["icon-image"]),"icon-rotate":new Xt(Oe.layout_symbol["icon-rotate"]),"icon-padding":new Xt(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new Bt(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new Xt(Oe.layout_symbol["icon-offset"]),"icon-anchor":new Xt(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Bt(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Bt(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Bt(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new Xt(Oe.layout_symbol["text-field"]),"text-font":new Xt(Oe.layout_symbol["text-font"]),"text-size":new Xt(Oe.layout_symbol["text-size"]),"text-max-width":new Xt(Oe.layout_symbol["text-max-width"]),"text-line-height":new Bt(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new Xt(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new Xt(Oe.layout_symbol["text-justify"]),"text-radial-offset":new Xt(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Bt(Oe.layout_symbol["text-variable-anchor"]),"text-anchor":new Xt(Oe.layout_symbol["text-anchor"]),"text-max-angle":new Bt(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new Bt(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new Xt(Oe.layout_symbol["text-rotate"]),"text-padding":new Bt(Oe.layout_symbol["text-padding"]),"text-keep-upright":new Bt(Oe.layout_symbol["text-keep-upright"]),"text-transform":new Xt(Oe.layout_symbol["text-transform"]),"text-offset":new Xt(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new Bt(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new Bt(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new Bt(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new Bt(Oe.layout_symbol["text-optional"])});var V0={paint:new Jn({"icon-opacity":new Xt(Oe.paint_symbol["icon-opacity"]),"icon-color":new Xt(Oe.paint_symbol["icon-color"]),"icon-halo-color":new Xt(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xt(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xt(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new Bt(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Bt(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xt(Oe.paint_symbol["text-opacity"]),"text-color":new Xt(Oe.paint_symbol["text-color"],{runtimeType:Kn,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Xt(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new Xt(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new Xt(Oe.paint_symbol["text-halo-blur"]),"text-translate":new Bt(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new Bt(Oe.paint_symbol["text-translate-anchor"])}),layout:Qz};class tE{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:wn,this.defaultValue=s}evaluate(s){if(s.formattedSection){const f=this.defaultValue.property.overrides;if(f&&f.hasOverride(s.formattedSection))return f.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}At("FormatSectionOverride",tE,{omit:["defaultValue"]});class Av extends ka{constructor(s){super(s,V0)}recalculate(s,f){if(super.recalculate(s,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const v=this.layout.get("text-writing-mode");if(v){const w=[];for(const T of v)w.indexOf(T)<0&&w.push(T);this.layout._values["text-writing-mode"]=w}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,f,v,w){const T=this.layout.get(s).evaluate(f,{},v,w),A=this._unevaluatedLayout._values[s];return A.isDataDriven()||eu(A.value)||!T?T:function(L,R){return R.replace(/{([^{}]+)}/g,(N,j)=>j in L?String(L[j]):"")}(f.properties,T)}createBucket(s){return new eh(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of V0.paint.overridableProperties){if(!Av.hasPaintOverride(this.layout,s))continue;const f=this.paint.get(s),v=new tE(f),w=new zc(v,f.property.specification);let T=null;T=f.value.kind==="constant"||f.value.kind==="source"?new ru("source",w):new Vf("composite",w,f.value.zoomStops),this.paint._values[s]=new Da(f.property,T,f.parameters)}}_handleOverridablePaintPropertyUpdate(s,f,v){return!(!this.layout||f.isDataDriven()||v.isDataDriven())&&Av.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,f){const v=s.get("text-field"),w=V0.paint.properties[f];let T=!1;const A=L=>{for(const R of L)if(w.overrides&&w.overrides.hasOverride(R))return void(T=!0)};if(v.value.kind==="constant"&&v.value.value instanceof xe)A(v.value.value.sections);else if(v.value.kind==="source"){const L=N=>{T||(N instanceof zt&&Be(N.value)===$n?A(N.value.sections):N instanceof Oc?A(N.sections):N.eachChild(L))},R=v.value;R._styleExpression&&L(R._styleExpression.expression)}return T}}function U0(c,s,f){let v="never";const w=c.get(s);return w?v=w:c.get(f)&&(v="always"),v}var e9={paint:new Jn({"background-color":new Bt(Oe.paint_background["background-color"]),"background-pattern":new Jf(Oe.paint_background["background-pattern"]),"background-opacity":new Bt(Oe.paint_background["background-opacity"])})},t9={paint:new Jn({"raster-opacity":new Bt(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Bt(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Bt(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Bt(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new Bt(Oe.paint_raster["raster-saturation"]),"raster-contrast":new Bt(Oe.paint_raster["raster-contrast"]),"raster-resampling":new Bt(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new Bt(Oe.paint_raster["raster-fade-duration"])})};class r9 extends ka{constructor(s){super(s,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const n9={circle:class extends ka{constructor(c){super(c,O6)}createBucket(c){return new p0(c)}queryRadius(c){const s=c;return nd("circle-radius",this,s)+nd("circle-stroke-width",this,s)+cv(this.paint.get("circle-translate"))}queryIntersectsFeature(c,s,f,v,w,T,A,L){const R=hv(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,A),N=this.paint.get("circle-radius").evaluate(s,f)+this.paint.get("circle-stroke-width").evaluate(s,f),j=this.paint.get("circle-pitch-alignment")==="map",G=j?R:function(Q,ee){return Q.map(me=>fT(me,ee))}(R,L),Y=j?N*A:N;for(const Q of v)for(const ee of Q){const me=j?ee:fT(ee,L);let pe=Y;const Pe=fv([],[ee.x,ee.y,0,1],L);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pe*=Pe[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pe*=T.cameraToCenterDistance/Pe[3]),P6(G,me,pe))return!0}return!1}},heatmap:class extends ka{constructor(c){super(c,z6),this._updateColorRamp()}createBucket(c){return new dT(c)}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=mT({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends ka{constructor(c){super(c,B6)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends ka{constructor(c){super(c,Q6)}recalculate(c,s){super.recalculate(c,s);const f=this.paint._values["fill-outline-color"];f.value.kind==="constant"&&f.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new C0(c)}queryRadius(){return cv(this.paint.get("fill-translate"))}queryIntersectsFeature(c,s,f,v,w,T,A){return iT(hv(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,A),v)}isTileClipped(){return!0}},"fill-extrusion":class extends ka{constructor(c){super(c,dz)}createBucket(c){return new I0(c)}queryRadius(){return cv(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,s,f,v,w,T,A,L){const R=hv(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,A),N=this.paint.get("fill-extrusion-height").evaluate(s,f),j=this.paint.get("fill-extrusion-base").evaluate(s,f),G=function(Q,ee,me,pe){const Pe=[];for(const ze of Q){const Ie=[ze.x,ze.y,0,1];fv(Ie,Ie,ee),Pe.push(new be(Ie[0]/Ie[3],Ie[1]/Ie[3]))}return Pe}(R,L),Y=function(Q,ee,me,pe){const Pe=[],ze=[],Ie=pe[8]*ee,Le=pe[9]*ee,Ze=pe[10]*ee,We=pe[11]*ee,Et=pe[8]*me,Ot=pe[9]*me,yt=pe[10]*me,vt=pe[11]*me;for(const ct of Q){const xt=[],gt=[];for(const at of ct){const Ht=at.x,Ft=at.y,pr=pe[0]*Ht+pe[4]*Ft+pe[12],on=pe[1]*Ht+pe[5]*Ft+pe[13],dn=pe[2]*Ht+pe[6]*Ft+pe[14],Vn=pe[3]*Ht+pe[7]*Ft+pe[15],xa=dn+Ze,oi=Vn+We,Ln=pr+Et,Wn=on+Ot,si=dn+yt,mi=Vn+vt,Ni=new be((pr+Ie)/oi,(on+Le)/oi);Ni.z=xa/oi,xt.push(Ni);const On=new be(Ln/mi,Wn/mi);On.z=si/mi,gt.push(On)}Pe.push(xt),ze.push(gt)}return[Pe,ze]}(v,j,N,L);return function(Q,ee,me){let pe=1/0;iT(me,ee)&&(pe=TT(me,ee[0]));for(let Pe=0;Pe<ee.length;Pe++){const ze=ee[Pe],Ie=Q[Pe];for(let Le=0;Le<ze.length-1;Le++){const Ze=ze[Le],We=[Ze,ze[Le+1],Ie[Le+1],Ie[Le],Ze];nT(me,We)&&(pe=Math.min(pe,TT(me,We)))}}return pe!==1/0&&pe}(Y[0],Y[1],G)}},line:class extends ka{constructor(c){super(c,CT),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Xl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,s){super.recalculate(c,s),this.paint._values["line-floorwidth"]=AT.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new P0(c)}queryRadius(c){const s=c,f=IT(nd("line-width",this,s),nd("line-gap-width",this,s)),v=nd("line-offset",this,s);return f/2+Math.abs(v)+cv(this.paint.get("line-translate"))}queryIntersectsFeature(c,s,f,v,w,T,A){const L=hv(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,A),R=A/2*IT(this.paint.get("line-width").evaluate(s,f),this.paint.get("line-gap-width").evaluate(s,f)),N=this.paint.get("line-offset").evaluate(s,f);return N&&(v=function(j,G){const Y=[];for(let Q=0;Q<j.length;Q++){const ee=j[Q],me=[];for(let pe=0;pe<ee.length;pe++){const Pe=ee[pe-1],ze=ee[pe],Ie=ee[pe+1],Le=pe===0?new be(0,0):ze.sub(Pe)._unit()._perp(),Ze=pe===ee.length-1?new be(0,0):Ie.sub(ze)._unit()._perp(),We=Le._add(Ze)._unit(),Et=We.x*Ze.x+We.y*Ze.y;Et!==0&&We._mult(1/Et),me.push(We._mult(G)._add(ze))}Y.push(me)}return Y}(v,N*A)),function(j,G,Y){for(let Q=0;Q<G.length;Q++){const ee=G[Q];if(j.length>=3){for(let me=0;me<ee.length;me++)if(Wc(j,ee[me]))return!0}if(M6(j,ee,Y))return!0}return!1}(L,v,R)}isTileClipped(){return!0}},symbol:Av,background:class extends ka{constructor(c){super(c,e9)}},raster:class extends ka{constructor(c){super(c,t9)}}};class i9{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const rE=63710088e-1;class Tn{constructor(s,f){if(isNaN(s)||isNaN(f))throw new Error(`Invalid LngLat object: (${s}, ${f})`);if(this.lng=+s,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Tn(x(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const f=Math.PI/180,v=this.lat*f,w=s.lat*f,T=Math.sin(v)*Math.sin(w)+Math.cos(v)*Math.cos(w)*Math.cos((s.lng-this.lng)*f);return rE*Math.acos(Math.min(T,1))}toBounds(s=0){const f=360*s/40075017,v=f/Math.cos(Math.PI/180*this.lat);return new xu(new Tn(this.lng-v,this.lat-f),new Tn(this.lng+v,this.lat+f))}static convert(s){if(s instanceof Tn)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Tn(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Tn(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class xu{constructor(s,f){s&&(f?this.setSouthWest(s).setNorthEast(f):s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}setNorthEast(s){return this._ne=s instanceof Tn?new Tn(s.lng,s.lat):Tn.convert(s),this}setSouthWest(s){return this._sw=s instanceof Tn?new Tn(s.lng,s.lat):Tn.convert(s),this}extend(s){const f=this._sw,v=this._ne;let w,T;if(s instanceof Tn)w=s,T=s;else{if(!(s instanceof xu))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(xu.convert(s)):this.extend(Tn.convert(s)):this;if(w=s._sw,T=s._ne,!w||!T)return this}return f||v?(f.lng=Math.min(w.lng,f.lng),f.lat=Math.min(w.lat,f.lat),v.lng=Math.max(T.lng,v.lng),v.lat=Math.max(T.lat,v.lat)):(this._sw=new Tn(w.lng,w.lat),this._ne=new Tn(T.lng,T.lat)),this}getCenter(){return new Tn((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Tn(this.getWest(),this.getNorth())}getSouthEast(){return new Tn(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:f,lat:v}=Tn.convert(s);let w=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(w=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&w}static convert(s){return s instanceof xu?s:s&&new xu(s)}}const nE=2*Math.PI*rE;function iE(c){return nE*Math.cos(c*Math.PI/180)}function aE(c){return(180+c)/360}function oE(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function sE(c,s){return c/iE(s)}function $0(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class Iv{constructor(s,f,v=0){this.x=+s,this.y=+f,this.z=+v}static fromLngLat(s,f=0){const v=Tn.convert(s);return new Iv(aE(v.lng),oE(v.lat),sE(f,v.lat))}toLngLat(){return new Tn(360*this.x-180,$0(this.y))}toAltitude(){return this.z*iE($0(this.y))}meterInMercatorCoordinateUnits(){return 1/nE*(s=$0(this.y),1/Math.cos(s*Math.PI/180));var s}}function lE(c,s,f){var v=2*Math.PI*6378137/256/Math.pow(2,f);return[c*v-2*Math.PI*6378137/2,s*v-2*Math.PI*6378137/2]}class j0{constructor(s,f,v){if(s<0||s>25||v<0||v>=Math.pow(2,s)||f<0||f>=Math.pow(2,s))throw new Error(`x=${f}, y=${v}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=f,this.y=v,this.key=pd(0,s,s,f,v)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,f,v){const w=(A=this.y,L=this.z,R=lE(256*(T=this.x),256*(A=Math.pow(2,L)-A-1),L),N=lE(256*(T+1),256*(A+1),L),R[0]+","+R[1]+","+N[0]+","+N[1]);var T,A,L,R,N;const j=function(G,Y,Q){let ee,me="";for(let pe=G;pe>0;pe--)ee=1<<pe-1,me+=(Y&ee?1:0)+(Q&ee?2:0);return me}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(v==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,j).replace(/{bbox-epsg-3857}/g,w)}isChildOf(s){const f=this.z-s.z;return f>0&&s.x===this.x>>f&&s.y===this.y>>f}getTilePoint(s){const f=Math.pow(2,this.z);return new be((s.x*f-this.x)*Nn,(s.y*f-this.y)*Nn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class uE{constructor(s,f){this.wrap=s,this.canonical=f,this.key=pd(s,f.z,f.z,f.x,f.y)}}class ya{constructor(s,f,v,w,T){if(s<v)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${v}`);this.overscaledZ=s,this.wrap=f,this.canonical=new j0(v,+w,+T),this.key=pd(f,s,v,w,T)}clone(){return new ya(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-s;return s>this.canonical.z?new ya(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ya(s,this.wrap,s,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(s,f){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const v=this.canonical.z-s;return s>this.canonical.z?pd(this.wrap*+f,s,this.canonical.z,this.canonical.x,this.canonical.y):pd(this.wrap*+f,s,s,this.canonical.x>>v,this.canonical.y>>v)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const f=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>f&&s.canonical.y===this.canonical.y>>f}children(s){if(this.overscaledZ>=s)return[new ya(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const f=this.canonical.z+1,v=2*this.canonical.x,w=2*this.canonical.y;return[new ya(f,this.wrap,f,v,w),new ya(f,this.wrap,f,v+1,w),new ya(f,this.wrap,f,v,w+1),new ya(f,this.wrap,f,v+1,w+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new ya(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new ya(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new uE(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Iv(s.x-this.wrap,s.y))}}function pd(c,s,f,v,w){(c*=2)<0&&(c=-1*c-1);const T=1<<f;return(T*T*c+T*w+v).toString(36)+f.toString(36)+s.toString(36)}At("CanonicalTileID",j0),At("OverscaledTileID",ya,{omit:["posMatrix"]});class cE{constructor(s,f,v){if(this.uid=s,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(v&&v!=="mapbox"&&v!=="terrarium")return void $(`"${v}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=f.height;const w=this.dim=f.height-2;this.data=new Uint32Array(f.data.buffer),this.encoding=v||"mapbox";for(let T=0;T<w;T++)this.data[this._idx(-1,T)]=this.data[this._idx(0,T)],this.data[this._idx(w,T)]=this.data[this._idx(w-1,T)],this.data[this._idx(T,-1)]=this.data[this._idx(T,0)],this.data[this._idx(T,w)]=this.data[this._idx(T,w-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(w,-1)]=this.data[this._idx(w-1,0)],this.data[this._idx(-1,w)]=this.data[this._idx(0,w-1)],this.data[this._idx(w,w)]=this.data[this._idx(w-1,w-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let T=0;T<w;T++)for(let A=0;A<w;A++){const L=this.get(T,A);L>this.max&&(this.max=L),L<this.min&&(this.min=L)}}get(s,f){const v=new Uint8Array(this.data.buffer),w=4*this._idx(s,f);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(v[w],v[w+1],v[w+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(s,f){if(s<-1||s>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(s+1)}_unpackMapbox(s,f,v){return(256*s*256+256*f+v)/10-1e4}_unpackTerrarium(s,f,v){return 256*s+f+v/256-32768}getPixels(){return new _a({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,f,v){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let w=f*this.dim,T=f*this.dim+this.dim,A=v*this.dim,L=v*this.dim+this.dim;switch(f){case-1:w=T-1;break;case 1:T=w+1}switch(v){case-1:A=L-1;break;case 1:L=A+1}const R=-f*this.dim,N=-v*this.dim;for(let j=A;j<L;j++)for(let G=w;G<T;G++)this.data[this._idx(G,j)]=s.data[this._idx(G+R,j+N)]}}At("DEMData",cE);class hE{constructor(s){this._stringToNumber={},this._numberToString=[];for(let f=0;f<s.length;f++){const v=s[f];this._stringToNumber[v]=f,this._numberToString[f]=v}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class fE{constructor(s,f,v,w,T){this.type="Feature",this._vectorTileFeature=s,s._z=f,s._x=v,s._y=w,this.properties=s.properties,this.id=T}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(s[f]=this[f]);return s}}class dE{constructor(s,f){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new fu(Nn,16,0),this.grid3D=new fu(Nn,16,0),this.featureIndexArray=new dr,this.promoteId=f}insert(s,f,v,w,T,A){const L=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(v,w,T);const R=A?this.grid3D:this.grid;for(let N=0;N<f.length;N++){const j=f[N],G=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<j.length;Y++){const Q=j[Y];G[0]=Math.min(G[0],Q.x),G[1]=Math.min(G[1],Q.y),G[2]=Math.max(G[2],Q.x),G[3]=Math.max(G[3],Q.y)}G[0]<Nn&&G[1]<Nn&&G[2]>=0&&G[3]>=0&&R.insert(L,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new cl.VectorTile(new M0(this.rawTileData)).layers,this.sourceLayerCoder=new hE(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,f,v,w){this.loadVTLayers();const T=s.params||{},A=Nn/s.tileSize/s.scale,L=Nc(T.filter),R=s.queryGeometry,N=s.queryPadding*A,j=mE(R),G=this.grid.query(j.minX-N,j.minY-N,j.maxX+N,j.maxY+N),Y=mE(s.cameraQueryGeometry),Q=this.grid3D.query(Y.minX-N,Y.minY-N,Y.maxX+N,Y.maxY+N,(pe,Pe,ze,Ie)=>function(Le,Ze,We,Et,Ot){for(const vt of Le)if(Ze<=vt.x&&We<=vt.y&&Et>=vt.x&&Ot>=vt.y)return!0;const yt=[new be(Ze,We),new be(Ze,Ot),new be(Et,Ot),new be(Et,We)];if(Le.length>2){for(const vt of yt)if(Wc(Le,vt))return!0}for(let vt=0;vt<Le.length-1;vt++)if(k6(Le[vt],Le[vt+1],yt))return!0;return!1}(s.cameraQueryGeometry,pe-N,Pe-N,ze+N,Ie+N));for(const pe of Q)G.push(pe);G.sort(a9);const ee={};let me;for(let pe=0;pe<G.length;pe++){const Pe=G[pe];if(Pe===me)continue;me=Pe;const ze=this.featureIndexArray.get(Pe);let Ie=null;this.loadMatchingFeature(ee,ze.bucketIndex,ze.sourceLayerIndex,ze.featureIndex,L,T.layers,T.availableImages,f,v,w,(Le,Ze,We)=>(Ie||(Ie=gu(Le)),Ze.queryIntersectsFeature(R,Le,We,Ie,this.z,s.transform,A,s.pixelPosMatrix)))}return ee}loadMatchingFeature(s,f,v,w,T,A,L,R,N,j,G){const Y=this.bucketLayerIDs[f];if(A&&!function(pe,Pe){for(let ze=0;ze<pe.length;ze++)if(Pe.indexOf(pe[ze])>=0)return!0;return!1}(A,Y))return;const Q=this.sourceLayerCoder.decode(v),ee=this.vtLayers[Q].feature(w);if(T.needGeometry){const pe=_u(ee,!0);if(!T.filter(new hn(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!T.filter(new hn(this.tileID.overscaledZ),ee))return;const me=this.getId(ee,Q);for(let pe=0;pe<Y.length;pe++){const Pe=Y[pe];if(A&&A.indexOf(Pe)<0)continue;const ze=R[Pe];if(!ze)continue;let Ie={};me&&j&&(Ie=j.getState(ze.sourceLayer||"_geojsonTileLayer",me));const Le=E({},N[Pe]);Le.paint=pE(Le.paint,ze.paint,ee,Ie,L),Le.layout=pE(Le.layout,ze.layout,ee,Ie,L);const Ze=!G||G(ee,ze,Ie);if(!Ze)continue;const We=new fE(ee,this.z,this.x,this.y,me);We.layer=Le;let Et=s[Pe];Et===void 0&&(Et=s[Pe]=[]),Et.push({featureIndex:w,feature:We,intersectionZ:Ze})}}lookupSymbolFeatures(s,f,v,w,T,A,L,R){const N={};this.loadVTLayers();const j=Nc(T);for(const G of s)this.loadMatchingFeature(N,v,w,G,j,A,L,R,f);return N}hasLayer(s){for(const f of this.bucketLayerIDs)for(const v of f)if(s===v)return!0;return!1}getId(s,f){let v=s.id;return this.promoteId&&(v=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof v=="boolean"&&(v=Number(v))),v}}function pE(c,s,f,v,w){return I(c,(T,A)=>{const L=s instanceof mu?s.get(A):null;return L&&L.evaluate?L.evaluate(f,v,w):L})}function mE(c){let s=1/0,f=1/0,v=-1/0,w=-1/0;for(const T of c)s=Math.min(s,T.x),f=Math.min(f,T.y),v=Math.max(v,T.x),w=Math.max(w,T.y);return{minX:s,minY:f,maxX:v,maxY:w}}function a9(c,s){return s-c}var H0;At("FeatureIndex",dE,{omit:["rawTileData","sourceLayerCoder"]}),o.PerformanceMarkers=void 0,(H0=o.PerformanceMarkers||(o.PerformanceMarkers={})).create="create",H0.load="load",H0.fullLoad="fullLoad";let Pv=null,md=[];const G0=1e3/30,o9={mark(c){performance.mark(c)},frame(c){const s=c;Pv!=null&&md.push(s-Pv),Pv=s},clearMetrics(){Pv=null,md=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const c in o.PerformanceMarkers)performance.clearMarks(o.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure("loadTime",o.PerformanceMarkers.create,o.PerformanceMarkers.load),performance.measure("fullLoadTime",o.PerformanceMarkers.create,o.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName("loadTime")[0].duration,s=performance.getEntriesByName("fullLoadTime")[0].duration,f=md.length,v=1/(md.reduce((T,A)=>T+A,0)/f/1e3),w=md.filter(T=>T>G0).reduce((T,A)=>T+(A-G0)/G0,0);return{loadTime:c,fullLoadTime:s,fps:v,percentDroppedFrames:w/(f+w)*100}}};o.AJAXError=oe,o.ARRAY_TYPE=Ci,o.Actor=class{constructor(c,s,f){this.target=c,this.parent=s,this.mapId=f,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},P(["receive","process"],this),this.invoker=new i9(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Z()?c:window}send(c,s,f,v,w=!1){const T=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(this.callbacks[T]=f);const A=fe(this.globalScope)?void 0:[];return this.target.postMessage({id:T,type:c,hasCallback:!!f,targetMapId:v,mustQueue:w,sourceMapId:this.mapId,data:hs(s,A)},A),{cancel:()=>{f&&delete this.callbacks[T],this.target.postMessage({id:T,type:"<cancel>",targetMapId:v,sourceMapId:this.mapId})}}}receive(c){const s=c.data,f=s.id;if(f&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){delete this.tasks[f];const v=this.cancelCallbacks[f];delete this.cancelCallbacks[f],v&&v()}else Z()||s.mustQueue?(this.tasks[f]=s,this.taskQueue.push(f),this.invoker.trigger()):this.processTask(f,s)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){if(s.type==="<response>"){const f=this.callbacks[c];delete this.callbacks[c],f&&(s.error?f(ko(s.error)):f(null,ko(s.data)))}else{let f=!1;const v=fe(this.globalScope)?void 0:[],w=s.hasCallback?(L,R)=>{f=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:L?hs(L):null,data:hs(R,v)},v)}:L=>{f=!0};let T=null;const A=ko(s.data);if(this.parent[s.type])T=this.parent[s.type](s.sourceMapId,A,w);else if(this.parent.getWorkerSource){const L=s.type.split(".");T=this.parent.getWorkerSource(s.sourceMapId,L[0],A.source)[L[1]](A,w)}else w(new Error(`Could not find function ${s.type}`));!f&&T&&T.cancel&&(this.cancelCallbacks[c]=T.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.AlphaImage=ad,o.CanonicalTileID=j0,o.CollisionBoxArray=je,o.CollisionCircleLayoutArray=class extends H{},o.Color=ne,o.DEMData=cE,o.DataConstantProperty=Bt,o.DictionaryCoder=hE,o.EXTENT=Nn,o.ErrorEvent=Wt,o.EvaluationParameters=hn,o.Event=It,o.Evented=er,o.FeatureIndex=dE,o.FillBucket=C0,o.FillExtrusionBucket=I0,o.GeoJSONFeature=fE,o.ImageAtlas=BT,o.ImagePosition=k0,o.LineBucket=P0,o.LineStripIndexArray=class extends de{},o.LngLat=Tn,o.LngLatBounds=xu,o.MercatorCoordinate=Iv,o.ONE_EM=Qn,o.OverscaledTileID=ya,o.PerformanceUtils=o9,o.PosArray=jt,o.Properties=Jn,o.QuadTriangleArray=class extends J{},o.RGBAImage=_a,o.RasterBoundsArray=class extends b{},o.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},o.ResourceType=lt,o.SegmentVector=mr,o.SymbolBucket=eh,o.Transitionable=iv,o.TriangleIndexArray=Ti,o.Uniform1f=ms,o.Uniform1i=class extends ps{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},o.Uniform2f=class extends ps{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},o.Uniform3f=class extends ps{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},o.Uniform4f=Gc,o.UniformColor=QS,o.UniformMatrix4f=class extends ps{constructor(c,s){super(c,s),this.current=A6}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},o.UnwrappedTileID=uE,o.ValidationError=Je,o.ZoomHistory=Hf,o.add=function(c,s,f){return c[0]=s[0]+f[0],c[1]=s[1]+f[1],c[2]=s[2]+f[2],c},o.addDynamicAttributes=B0,o.asyncAll=function(c,s,f){if(!c.length)return f(null,[]);let v=c.length;const w=new Array(c.length);let T=null;c.forEach((A,L)=>{s(A,(R,N)=>{R&&(T=R),w[L]=N,--v==0&&f(T,w)})})},o.bezier=m,o.bindAll=P,o.cacheEntryPossiblyAdded=function(c){$e++,$e>vr&&(c.getActor().send("enforceCacheSizeLimit",Ut),$e=0)},o.clamp=_,o.clearTileCache=function(c){const s=caches.delete(wt);c&&s.catch(c).then(()=>c())},o.clipLine=XT,o.clone=function(c){var s=new Ci(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},o.clone$1=O,o.clone$2=function(c){var s=new Ci(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},o.collisionCircleLayout=Tz,o.config=tt,o.copy=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},o.create=function(){var c=new Ci(16);return Ci!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},o.create$1=sT,o.createExpression=tu,o.createFilter=Nc,o.createLayout=kn,o.createStyleLayer=function(c){return c.type==="custom"?new r9(c):new n9[c.type](c)},o.cross=function(c,s,f){var v=s[0],w=s[1],T=s[2],A=f[0],L=f[1],R=f[2];return c[0]=w*R-T*L,c[1]=T*A-v*R,c[2]=v*L-w*A,c},o.dot=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},o.dot$1=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]*s[3]},o.ease=g,o.emitValidationErrors=Uc,o.enforceCacheSizeLimit=function(c){yr(),Rt&&Rt.then(s=>{s.keys().then(f=>{for(let v=0;v<f.length-c;v++)s.delete(f[v])})})},o.equals=function(c,s){var f=c[0],v=c[1],w=c[2],T=c[3],A=c[4],L=c[5],R=c[6],N=c[7],j=c[8],G=c[9],Y=c[10],Q=c[11],ee=c[12],me=c[13],pe=c[14],Pe=c[15],ze=s[0],Ie=s[1],Le=s[2],Ze=s[3],We=s[4],Et=s[5],Ot=s[6],yt=s[7],vt=s[8],ct=s[9],xt=s[10],gt=s[11],at=s[12],Ht=s[13],Ft=s[14],pr=s[15];return Math.abs(f-ze)<=Ei*Math.max(1,Math.abs(f),Math.abs(ze))&&Math.abs(v-Ie)<=Ei*Math.max(1,Math.abs(v),Math.abs(Ie))&&Math.abs(w-Le)<=Ei*Math.max(1,Math.abs(w),Math.abs(Le))&&Math.abs(T-Ze)<=Ei*Math.max(1,Math.abs(T),Math.abs(Ze))&&Math.abs(A-We)<=Ei*Math.max(1,Math.abs(A),Math.abs(We))&&Math.abs(L-Et)<=Ei*Math.max(1,Math.abs(L),Math.abs(Et))&&Math.abs(R-Ot)<=Ei*Math.max(1,Math.abs(R),Math.abs(Ot))&&Math.abs(N-yt)<=Ei*Math.max(1,Math.abs(N),Math.abs(yt))&&Math.abs(j-vt)<=Ei*Math.max(1,Math.abs(j),Math.abs(vt))&&Math.abs(G-ct)<=Ei*Math.max(1,Math.abs(G),Math.abs(ct))&&Math.abs(Y-xt)<=Ei*Math.max(1,Math.abs(Y),Math.abs(xt))&&Math.abs(Q-gt)<=Ei*Math.max(1,Math.abs(Q),Math.abs(gt))&&Math.abs(ee-at)<=Ei*Math.max(1,Math.abs(ee),Math.abs(at))&&Math.abs(me-Ht)<=Ei*Math.max(1,Math.abs(me),Math.abs(Ht))&&Math.abs(pe-Ft)<=Ei*Math.max(1,Math.abs(pe),Math.abs(Ft))&&Math.abs(Pe-pr)<=Ei*Math.max(1,Math.abs(Pe),Math.abs(pr))},o.evaluateSizeForFeature=function(c,{uSize:s,uSizeT:f},{lowerSize:v,upperSize:w}){return c.kind==="source"?v/_s:c.kind==="composite"?un(v/_s,w/_s,f):s},o.evaluateSizeForZoom=function(c,s){let f=0,v=0;if(c.kind==="constant")v=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:w,minZoom:T,maxZoom:A}=c,L=w?_(zi.interpolationFactor(w,s,T,A),0,1):0;c.kind==="camera"?v=un(c.minSize,c.maxSize,L):f=L}return{uSizeT:f,uSize:v}},o.evaluateVariableOffset=JT,o.evented=Kf,o.exported=Ne,o.exported$1=pt,o.extend=E,o.filterObject=D,o.fromRotation=function(c,s){var f=Math.sin(s),v=Math.cos(s);return c[0]=v,c[1]=f,c[2]=0,c[3]=-f,c[4]=v,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},o.fromScaling=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},o.getAnchorAlignment=O0,o.getAnchorJustification=z0,o.getArrayBuffer=Xe,o.getImage=nt,o.getJSON=function(c,s){return Ge(E(c,{type:"json"}),s)},o.getOverlapMode=U0,o.getRTLTextPluginStatus=du,o.getReferrer=ve,o.getVideo=function(c,s){const f=window.document.createElement("video");f.muted=!0,f.onloadstart=function(){s(null,f)};for(let v=0;v<c.length;v++){const w=window.document.createElement("source");Ye(c[v])||(f.crossOrigin="Anonymous"),w.src=c[v],f.appendChild(w)}return{cancel:()=>{}}},o.identity=g0,o.invert=function(c,s){var f=s[0],v=s[1],w=s[2],T=s[3],A=s[4],L=s[5],R=s[6],N=s[7],j=s[8],G=s[9],Y=s[10],Q=s[11],ee=s[12],me=s[13],pe=s[14],Pe=s[15],ze=f*L-v*A,Ie=f*R-w*A,Le=f*N-T*A,Ze=v*R-w*L,We=v*N-T*L,Et=w*N-T*R,Ot=j*me-G*ee,yt=j*pe-Y*ee,vt=j*Pe-Q*ee,ct=G*pe-Y*me,xt=G*Pe-Q*me,gt=Y*Pe-Q*pe,at=ze*gt-Ie*xt+Le*ct+Ze*vt-We*yt+Et*Ot;return at?(c[0]=(L*gt-R*xt+N*ct)*(at=1/at),c[1]=(w*xt-v*gt-T*ct)*at,c[2]=(me*Et-pe*We+Pe*Ze)*at,c[3]=(Y*We-G*Et-Q*Ze)*at,c[4]=(R*vt-A*gt-N*yt)*at,c[5]=(f*gt-w*vt+T*yt)*at,c[6]=(pe*Le-ee*Et-Pe*Ie)*at,c[7]=(j*Et-Y*Le+Q*Ie)*at,c[8]=(A*xt-L*vt+N*Ot)*at,c[9]=(v*vt-f*xt-T*Ot)*at,c[10]=(ee*We-me*Le+Pe*ze)*at,c[11]=(G*Le-j*We-Q*ze)*at,c[12]=(L*yt-A*ct-R*Ot)*at,c[13]=(f*ct-v*yt+w*Ot)*at,c[14]=(me*Ie-ee*Ze-pe*ze)*at,c[15]=(j*Ze-G*Ie+Y*ze)*at,c):null},o.isImageBitmap=ye,o.isSafari=fe,o.isWorker=Z,o.keysDifference=function(c,s){const f=[];for(const v in c)v in s||f.push(v);return f},o.lazyLoadRTLTextPlugin=function(){ra.isLoading()||ra.isLoaded()||du()!=="deferred"||nv()},o.makeRequest=Ge,o.mapObject=I,o.mercatorXfromLng=aE,o.mercatorYfromLat=oE,o.mercatorZfromAltitude=sE,o.mul=R6,o.mul$1=function(c,s,f){return c[0]=s[0]*f[0],c[1]=s[1]*f[1],c[2]=s[2]*f[2],c[3]=s[3]*f[3],c},o.multiply=lT,o.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},o.normalize=function(c,s){var f=s[0],v=s[1],w=s[2],T=f*f+v*v+w*w;return T>0&&(T=1/Math.sqrt(T)),c[0]=s[0]*T,c[1]=s[1]*T,c[2]=s[2]*T,c},o.number=un,o.ortho=function(c,s,f,v,w,T,A){var L=1/(s-f),R=1/(v-w),N=1/(T-A);return c[0]=-2*L,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*R,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*N,c[11]=0,c[12]=(s+f)*L,c[13]=(w+v)*R,c[14]=(A+T)*N,c[15]=1,c},o.parseCacheControl=re,o.parseGlyphPbf=function(c){return new M0(c).readFields(Rz,[])},o.pbf=M0,o.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Nn/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0].layout,f=c.bucket.layers[0]._unevaluatedLayout._values,v={layoutIconSize:f["icon-size"].possiblyEvaluate(new hn(c.bucket.zoom+1),c.canonical),layoutTextSize:f["text-size"].possiblyEvaluate(new hn(c.bucket.zoom+1),c.canonical),textMaxSize:f["text-size"].possiblyEvaluate(new hn(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:R,maxZoom:N}=c.bucket.textSizeData;v.compositeTextSizes=[f["text-size"].possiblyEvaluate(new hn(R),c.canonical),f["text-size"].possiblyEvaluate(new hn(N),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:R,maxZoom:N}=c.bucket.iconSizeData;v.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new hn(R),c.canonical),f["icon-size"].possiblyEvaluate(new hn(N),c.canonical)]}const w=s.get("text-line-height")*Qn,T=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",A=s.get("text-keep-upright"),L=s.get("text-size");for(const R of c.bucket.features){const N=s.get("text-font").evaluate(R,{},c.canonical).join(","),j=L.evaluate(R,{},c.canonical),G=v.layoutTextSize.evaluate(R,{},c.canonical),Y=v.layoutIconSize.evaluate(R,{},c.canonical),Q={horizontal:{},vertical:void 0},ee=R.text;let me,pe=[0,0];if(ee){const Ie=ee.toString(),Le=s.get("text-letter-spacing").evaluate(R,{},c.canonical)*Qn,Ze=u0(Ie)?Le:0,We=s.get("text-anchor").evaluate(R,{},c.canonical),Et=s.get("text-variable-anchor");if(!Et){const xt=s.get("text-radial-offset").evaluate(R,{},c.canonical);pe=xt?JT(We,[xt*Qn,R0]):s.get("text-offset").evaluate(R,{},c.canonical).map(gt=>gt*Qn)}let Ot=T?"center":s.get("text-justify").evaluate(R,{},c.canonical);const yt=s.get("symbol-placement"),vt=yt==="point"?s.get("text-max-width").evaluate(R,{},c.canonical)*Qn:0,ct=()=>{c.bucket.allowVerticalPlacement&&$c(Ie)&&(Q.vertical=xv(ee,c.glyphMap,c.glyphPositions,c.imagePositions,N,vt,w,We,"left",Ze,pe,o.WritingMode.vertical,!0,yt,G,j))};if(!T&&Et){const xt=Ot==="auto"?Et.map(at=>z0(at)):[Ot];let gt=!1;for(let at=0;at<xt.length;at++){const Ht=xt[at];if(!Q.horizontal[Ht])if(gt)Q.horizontal[Ht]=Q.horizontal[0];else{const Ft=xv(ee,c.glyphMap,c.glyphPositions,c.imagePositions,N,vt,w,"center",Ht,Ze,pe,o.WritingMode.horizontal,!1,yt,G,j);Ft&&(Q.horizontal[Ht]=Ft,gt=Ft.positionedLines.length===1)}}ct()}else{Ot==="auto"&&(Ot=z0(We));const xt=xv(ee,c.glyphMap,c.glyphPositions,c.imagePositions,N,vt,w,We,Ot,Ze,pe,o.WritingMode.horizontal,!1,yt,G,j);xt&&(Q.horizontal[Ot]=xt),ct(),$c(Ie)&&T&&A&&(Q.vertical=xv(ee,c.glyphMap,c.glyphPositions,c.imagePositions,N,vt,w,We,Ot,Ze,pe,o.WritingMode.vertical,!1,yt,G,j))}}let Pe=!1;if(R.icon&&R.icon.name){const Ie=c.imageMap[R.icon.name];Ie&&(me=Uz(c.imagePositions[R.icon.name],s.get("icon-offset").evaluate(R,{},c.canonical),s.get("icon-anchor").evaluate(R,{},c.canonical)),Pe=!!Ie.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Pe:c.bucket.sdfIcons!==Pe&&$("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ie.pixelRatio!==c.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const ze=eE(Q.horizontal)||Q.vertical;c.bucket.iconsInText=!!ze&&ze.iconsInText,(ze||me)&&Zz(c.bucket,R,Q,me,c.imageMap,v,G,Y,pe,Pe,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},o.perspective=function(c,s,f,v,w){var T,A=1/Math.tan(s/2);return c[0]=A/f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=A,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,w!=null&&w!==1/0?(c[10]=(w+v)*(T=1/(v-w)),c[14]=2*w*v*T):(c[10]=-1,c[14]=-2*v),c},o.pick=function(c,s){const f={};for(let v=0;v<s.length;v++){const w=s[v];w in c&&(f[w]=c[w])}return f},o.plugin=ra,o.pointGeometry=be,o.polygonIntersectsPolygon=nT,o.potpack=zT,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=At,o.registerForPluginStateChange=function(c){return c({pluginStatus:Si,pluginURL:Lo}),Kf.on("pluginStateChange",c),c},o.renderColorRamp=mT,o.rotateX=function(c,s,f){var v=Math.sin(f),w=Math.cos(f),T=s[4],A=s[5],L=s[6],R=s[7],N=s[8],j=s[9],G=s[10],Y=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=T*w+N*v,c[5]=A*w+j*v,c[6]=L*w+G*v,c[7]=R*w+Y*v,c[8]=N*w-T*v,c[9]=j*w-A*v,c[10]=G*w-L*v,c[11]=Y*w-R*v,c},o.rotateZ=function(c,s,f){var v=Math.sin(f),w=Math.cos(f),T=s[0],A=s[1],L=s[2],R=s[3],N=s[4],j=s[5],G=s[6],Y=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=T*w+N*v,c[1]=A*w+j*v,c[2]=L*w+G*v,c[3]=R*w+Y*v,c[4]=N*w-T*v,c[5]=j*w-A*v,c[6]=G*w-L*v,c[7]=Y*w-R*v,c},o.scale=function(c,s,f){var v=f[0],w=f[1],T=f[2];return c[0]=s[0]*v,c[1]=s[1]*v,c[2]=s[2]*v,c[3]=s[3]*v,c[4]=s[4]*w,c[5]=s[5]*w,c[6]=s[6]*w,c[7]=s[7]*w,c[8]=s[8]*T,c[9]=s[9]*T,c[10]=s[10]*T,c[11]=s[11]*T,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},o.scale$1=function(c,s,f){return c[0]=s[0]*f,c[1]=s[1]*f,c[2]=s[2]*f,c},o.setCacheLimits=function(c,s){Ut=c,vr=s},o.setRTLTextPlugin=function(c,s,f=!1){if(Si===Wf||Si===Zf||Si===Xf)throw new Error("setRTLTextPlugin cannot be called multiple times.");Lo=Ne.resolveURL(c),Si=Wf,Yf=s,ol(),f||nv()},o.spec=Oe,o.sphericalToCartesian=function([c,s,f]){return s+=90,s*=Math.PI/180,f*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(f),y:c*Math.sin(s)*Math.sin(f),z:c*Math.cos(f)}},o.sqrLen=function(c){var s=c[0],f=c[1];return s*s+f*f},o.sub=function(c,s,f){return c[0]=s[0]-f[0],c[1]=s[1]-f[1],c[2]=s[2]-f[2],c},o.toEvaluationFeature=_u,o.transformMat3=function(c,s,f){var v=s[0],w=s[1],T=s[2];return c[0]=v*f[0]+w*f[3]+T*f[6],c[1]=v*f[1]+w*f[4]+T*f[7],c[2]=v*f[2]+w*f[5]+T*f[8],c},o.transformMat4=fv,o.transformMat4$1=function(c,s,f){var v=s[0],w=s[1];return c[0]=f[0]*v+f[4]*w+f[12],c[1]=f[1]*v+f[5]*w+f[13],c},o.translate=function(c,s,f){var v,w,T,A,L,R,N,j,G,Y,Q,ee,me=f[0],pe=f[1],Pe=f[2];return s===c?(c[12]=s[0]*me+s[4]*pe+s[8]*Pe+s[12],c[13]=s[1]*me+s[5]*pe+s[9]*Pe+s[13],c[14]=s[2]*me+s[6]*pe+s[10]*Pe+s[14],c[15]=s[3]*me+s[7]*pe+s[11]*Pe+s[15]):(w=s[1],T=s[2],A=s[3],L=s[4],R=s[5],N=s[6],j=s[7],G=s[8],Y=s[9],Q=s[10],ee=s[11],c[0]=v=s[0],c[1]=w,c[2]=T,c[3]=A,c[4]=L,c[5]=R,c[6]=N,c[7]=j,c[8]=G,c[9]=Y,c[10]=Q,c[11]=ee,c[12]=v*me+L*pe+G*Pe+s[12],c[13]=w*me+R*pe+Y*Pe+s[13],c[14]=T*me+N*pe+Q*Pe+s[14],c[15]=A*me+j*pe+ee*Pe+s[15]),c},o.triggerPluginCompletionEvent=rv,o.unicodeBlockLookup=_t,o.uniqueId=function(){return M++},o.validateCustomStyleLayer=function(c){const s=[],f=c.id;return f===void 0&&s.push({message:`layers.${f}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${f}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),s},o.validateLight=jf,o.validateStyle=hu,o.vectorTile=cl,o.warnOnce=$,o.wrap=x}),a(["./shared"],function(o){function h(ae){const U=typeof ae;if(U==="number"||U==="boolean"||U==="string"||ae==null)return JSON.stringify(ae);if(Array.isArray(ae)){let ne="[";for(const ge of ae)ne+=`${h(ge)},`;return`${ne}]`}const W=Object.keys(ae).sort();let te="{";for(let ne=0;ne<W.length;ne++)te+=`${JSON.stringify(W[ne])}:${h(ae[W[ne]])},`;return`${te}}`}function d(ae){let U="";for(const W of o.refProperties)U+=`/${h(ae[W])}`;return U}class m{constructor(U){this.keyCache={},U&&this.replace(U)}replace(U){this._layerConfigs={},this._layers={},this.update(U,[])}update(U,W){for(const ne of U){this._layerConfigs[ne.id]=ne;const ge=this._layers[ne.id]=o.createStyleLayer(ne);ge._featureFilter=o.createFilter(ge.filter),this.keyCache[ne.id]&&delete this.keyCache[ne.id]}for(const ne of W)delete this.keyCache[ne],delete this._layerConfigs[ne],delete this._layers[ne];this.familiesBySource={};const te=function(ne,ge){const Se={};for(let _e=0;_e<ne.length;_e++){const Ee=ge&&ge[ne[_e].id]||d(ne[_e]);ge&&(ge[ne[_e].id]=Ee);let Ve=Se[Ee];Ve||(Ve=Se[Ee]=[]),Ve.push(ne[_e])}const xe=[];for(const _e in Se)xe.push(Se[_e]);return xe}(Object.values(this._layerConfigs),this.keyCache);for(const ne of te){const ge=ne.map(Ke=>this._layers[Ke.id]),Se=ge[0];if(Se.visibility==="none")continue;const xe=Se.source||"";let _e=this.familiesBySource[xe];_e||(_e=this.familiesBySource[xe]={});const Ee=Se.sourceLayer||"_geojsonTileLayer";let Ve=_e[Ee];Ve||(Ve=_e[Ee]=[]),Ve.push(ge)}}}class g{constructor(U){const W={},te=[];for(const xe in U){const _e=U[xe],Ee=W[xe]={};for(const Ve in _e){const Ke=_e[+Ve];if(!Ke||Ke.bitmap.width===0||Ke.bitmap.height===0)continue;const Be={x:0,y:0,w:Ke.bitmap.width+2,h:Ke.bitmap.height+2};te.push(Be),Ee[Ve]={rect:Be,metrics:Ke.metrics}}}const{w:ne,h:ge}=o.potpack(te),Se=new o.AlphaImage({width:ne||1,height:ge||1});for(const xe in U){const _e=U[xe];for(const Ee in _e){const Ve=_e[+Ee];if(!Ve||Ve.bitmap.width===0||Ve.bitmap.height===0)continue;const Ke=W[xe][Ee].rect;o.AlphaImage.copy(Ve.bitmap,Se,{x:0,y:0},{x:Ke.x+1,y:Ke.y+1},Ve.bitmap)}}this.image=Se,this.positions=W}}o.register("GlyphAtlas",g);class _{constructor(U){this.tileID=new o.OverscaledTileID(U.tileID.overscaledZ,U.tileID.wrap,U.tileID.canonical.z,U.tileID.canonical.x,U.tileID.canonical.y),this.uid=U.uid,this.zoom=U.zoom,this.pixelRatio=U.pixelRatio,this.tileSize=U.tileSize,this.source=U.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=U.showCollisionBoxes,this.collectResourceTiming=!!U.collectResourceTiming,this.returnDependencies=!!U.returnDependencies,this.promoteId=U.promoteId}parse(U,W,te,ne,ge){this.status="parsing",this.data=U,this.collisionBoxArray=new o.CollisionBoxArray;const Se=new o.DictionaryCoder(Object.keys(U.layers).sort()),xe=new o.FeatureIndex(this.tileID,this.promoteId);xe.bucketLayerIDs=[];const _e={},Ee={featureIndex:xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te},Ve=W.familiesBySource[this.source];for(const tr in Ve){const fr=U.layers[tr];if(!fr)continue;fr.version===1&&o.warnOnce(`Vector tile source "${this.source}" layer "${tr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Sr=Se.encode(tr),Wr=[];for(let jn=0;jn<fr.length;jn++){const ln=fr.feature(jn),ai=xe.getId(ln,tr);Wr.push({feature:ln,id:ai,index:jn,sourceLayerIndex:Sr})}for(const jn of Ve[tr]){const ln=jn[0];ln.source!==this.source&&o.warnOnce(`layer.source = ${ln.source} does not equal this.source = ${this.source}`),ln.minzoom&&this.zoom<Math.floor(ln.minzoom)||ln.maxzoom&&this.zoom>=ln.maxzoom||ln.visibility!=="none"&&(x(jn,this.zoom,te),(_e[ln.id]=ln.createBucket({index:xe.bucketLayerIDs.length,layers:jn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Sr,sourceID:this.source})).populate(Wr,Ee,this.tileID.canonical),xe.bucketLayerIDs.push(jn.map(ai=>ai.id)))}}let Ke,Be,Lt,zt;const bt=o.mapObject(Ee.glyphDependencies,tr=>Object.keys(tr).map(Number));Object.keys(bt).length?ne.send("getGlyphs",{uid:this.uid,stacks:bt},(tr,fr)=>{Ke||(Ke=tr,Be=fr,wr.call(this))}):Be={};const Zt=Object.keys(Ee.iconDependencies);Zt.length?ne.send("getImages",{icons:Zt,source:this.source,tileID:this.tileID,type:"icons"},(tr,fr)=>{Ke||(Ke=tr,Lt=fr,wr.call(this))}):Lt={};const Yt=Object.keys(Ee.patternDependencies);function wr(){if(Ke)return ge(Ke);if(Be&&Lt&&zt){const tr=new g(Be),fr=new o.ImageAtlas(Lt,zt);for(const Sr in _e){const Wr=_e[Sr];Wr instanceof o.SymbolBucket?(x(Wr.layers,this.zoom,te),o.performSymbolLayout({bucket:Wr,glyphMap:Be,glyphPositions:tr.positions,imageMap:Lt,imagePositions:fr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Wr.hasPattern&&(Wr instanceof o.LineBucket||Wr instanceof o.FillBucket||Wr instanceof o.FillExtrusionBucket)&&(x(Wr.layers,this.zoom,te),Wr.addFeatures(Ee,this.tileID.canonical,fr.patternPositions))}this.status="done",ge(null,{buckets:Object.values(_e).filter(Sr=>!Sr.isEmpty()),featureIndex:xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:tr.image,imageAtlas:fr,glyphMap:this.returnDependencies?Be:null,iconMap:this.returnDependencies?Lt:null,glyphPositions:this.returnDependencies?tr.positions:null})}}Yt.length?ne.send("getImages",{icons:Yt,source:this.source,tileID:this.tileID,type:"patterns"},(tr,fr)=>{Ke||(Ke=tr,zt=fr,wr.call(this))}):zt={},wr.call(this)}}function x(ae,U,W){const te=new o.EvaluationParameters(U);for(const ne of ae)ne.recalculate(te,W)}function E(ae,U){const W=o.getArrayBuffer(ae.request,(te,ne,ge,Se)=>{te?U(te):ne&&U(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(ne)),rawData:ne,cacheControl:ge,expires:Se})});return()=>{W.cancel(),U()}}class M{constructor(U,W,te,ne){this.actor=U,this.layerIndex=W,this.availableImages=te,this.loadVectorData=ne||E,this.loading={},this.loaded={}}loadTile(U,W){const te=U.uid;this.loading||(this.loading={});const ne=!!(U&&U.request&&U.request.collectResourceTiming)&&new o.RequestPerformance(U.request),ge=this.loading[te]=new _(U);ge.abort=this.loadVectorData(U,(Se,xe)=>{if(delete this.loading[te],Se||!xe)return ge.status="done",this.loaded[te]=ge,W(Se);const _e=xe.rawData,Ee={};xe.expires&&(Ee.expires=xe.expires),xe.cacheControl&&(Ee.cacheControl=xe.cacheControl);const Ve={};if(ne){const Ke=ne.finish();Ke&&(Ve.resourceTiming=JSON.parse(JSON.stringify(Ke)))}ge.vectorTile=xe.vectorTile,ge.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Ke,Be)=>{if(Ke||!Be)return W(Ke);W(null,o.extend({rawTileData:_e.slice(0)},Be,Ee,Ve))}),this.loaded=this.loaded||{},this.loaded[te]=ge})}reloadTile(U,W){const te=this.loaded,ne=U.uid,ge=this;if(te&&te[ne]){const Se=te[ne];Se.showCollisionBoxes=U.showCollisionBoxes;const xe=(_e,Ee)=>{const Ve=Se.reloadCallback;Ve&&(delete Se.reloadCallback,Se.parse(Se.vectorTile,ge.layerIndex,this.availableImages,ge.actor,Ve)),W(_e,Ee)};Se.status==="parsing"?Se.reloadCallback=xe:Se.status==="done"&&(Se.vectorTile?Se.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor,xe):xe())}}abortTile(U,W){const te=this.loading,ne=U.uid;te&&te[ne]&&te[ne].abort&&(te[ne].abort(),delete te[ne]),W()}removeTile(U,W){const te=this.loaded,ne=U.uid;te&&te[ne]&&delete te[ne],W()}}class P{constructor(){this.loaded={}}loadTile(U,W){const{uid:te,encoding:ne,rawImageData:ge}=U,Se=o.isImageBitmap(ge)?this.getImageData(ge):ge,xe=new o.DEMData(te,Se,ne);this.loaded=this.loaded||{},this.loaded[te]=xe,W(null,xe)}getImageData(U){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(U.width,U.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=U.width,this.offscreenCanvas.height=U.height,this.offscreenCanvasContext.drawImage(U,0,0,U.width,U.height);const W=this.offscreenCanvasContext.getImageData(-1,-1,U.width+2,U.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:W.width,height:W.height},W.data)}removeTile(U){const W=this.loaded,te=U.uid;W&&W[te]&&delete W[te]}}var I=function ae(U,W){var te,ne=U&&U.type;if(ne==="FeatureCollection")for(te=0;te<U.features.length;te++)ae(U.features[te],W);else if(ne==="GeometryCollection")for(te=0;te<U.geometries.length;te++)ae(U.geometries[te],W);else if(ne==="Feature")ae(U.geometry,W);else if(ne==="Polygon")D(U.coordinates,W);else if(ne==="MultiPolygon")for(te=0;te<U.coordinates.length;te++)D(U.coordinates[te],W);return U};function D(ae,U){if(ae.length!==0){O(ae[0],U);for(var W=1;W<ae.length;W++)O(ae[W],!U)}}function O(ae,U){for(var W=0,te=0,ne=0,ge=ae.length,Se=ge-1;ne<ge;Se=ne++){var xe=(ae[ne][0]-ae[Se][0])*(ae[Se][1]+ae[ne][1]),_e=W+xe;te+=Math.abs(W)>=Math.abs(xe)?W-_e+xe:xe-_e+W,W=_e}W+te>=0!=!!U&&ae.reverse()}const F=o.vectorTile.VectorTileFeature.prototype.toGeoJSON;class ${constructor(U){this._feature=U,this.extent=o.EXTENT,this.type=U.type,this.properties=U.tags,"id"in U&&!isNaN(U.id)&&(this.id=parseInt(U.id,10))}loadGeometry(){if(this._feature.type===1){const U=[];for(const W of this._feature.geometry)U.push([new o.pointGeometry(W[0],W[1])]);return U}{const U=[];for(const W of this._feature.geometry){const te=[];for(const ne of W)te.push(new o.pointGeometry(ne[0],ne[1]));U.push(te)}return U}}toGeoJSON(U,W,te){return F.call(this,U,W,te)}}class q{constructor(U){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=U.length,this._features=U}feature(U){return new $(this._features[U])}}var K={exports:{}},Z=o.pointGeometry,re=o.vectorTile.VectorTileFeature,ie=ce;function ce(ae,U){this.options=U||{},this.features=ae,this.length=ae.length}function le(ae,U){this.id=typeof ae.id=="number"?ae.id:void 0,this.type=ae.type,this.rawGeometry=ae.type===1?[ae.geometry]:ae.geometry,this.properties=ae.tags,this.extent=U||4096}ce.prototype.feature=function(ae){return new le(this.features[ae],this.options.extent)},le.prototype.loadGeometry=function(){var ae=this.rawGeometry;this.geometry=[];for(var U=0;U<ae.length;U++){for(var W=ae[U],te=[],ne=0;ne<W.length;ne++)te.push(new Z(W[ne][0],W[ne][1]));this.geometry.push(te)}return this.geometry},le.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ae=this.geometry,U=1/0,W=-1/0,te=1/0,ne=-1/0,ge=0;ge<ae.length;ge++)for(var Se=ae[ge],xe=0;xe<Se.length;xe++){var _e=Se[xe];U=Math.min(U,_e.x),W=Math.max(W,_e.x),te=Math.min(te,_e.y),ne=Math.max(ne,_e.y)}return[U,te,W,ne]},le.prototype.toGeoJSON=re.prototype.toGeoJSON;var fe=o.pbf,ye=ie;function Ne(ae){var U=new fe;return function(W,te){for(var ne in W.layers)te.writeMessage(3,be,W.layers[ne])}(ae,U),U.finish()}function be(ae,U){var W;U.writeVarintField(15,ae.version||1),U.writeStringField(1,ae.name||""),U.writeVarintField(5,ae.extent||4096);var te={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<ae.length;W++)te.feature=ae.feature(W),U.writeMessage(2,et,te);var ne=te.keys;for(W=0;W<ne.length;W++)U.writeStringField(3,ne[W]);var ge=te.values;for(W=0;W<ge.length;W++)U.writeMessage(4,Ut,ge[W])}function et(ae,U){var W=ae.feature;W.id!==void 0&&U.writeVarintField(1,W.id),U.writeMessage(2,tt,ae),U.writeVarintField(3,W.type),U.writeMessage(4,Qt,W)}function tt(ae,U){var W=ae.feature,te=ae.keys,ne=ae.values,ge=ae.keycache,Se=ae.valuecache;for(var xe in W.properties){var _e=W.properties[xe],Ee=ge[xe];if(_e!==null){Ee===void 0&&(te.push(xe),ge[xe]=Ee=te.length-1),U.writeVarint(Ee);var Ve=typeof _e;Ve!=="string"&&Ve!=="boolean"&&Ve!=="number"&&(_e=JSON.stringify(_e));var Ke=Ve+":"+_e,Be=Se[Ke];Be===void 0&&(ne.push(_e),Se[Ke]=Be=ne.length-1),U.writeVarint(Be)}}}function wt(ae,U){return(U<<3)+(7&ae)}function Rt(ae){return ae<<1^ae>>31}function Qt(ae,U){for(var W=ae.loadGeometry(),te=ae.type,ne=0,ge=0,Se=W.length,xe=0;xe<Se;xe++){var _e=W[xe],Ee=1;te===1&&(Ee=_e.length),U.writeVarint(wt(1,Ee));for(var Ve=te===3?_e.length-1:_e.length,Ke=0;Ke<Ve;Ke++){Ke===1&&te!==1&&U.writeVarint(wt(2,Ve-1));var Be=_e[Ke].x-ne,Lt=_e[Ke].y-ge;U.writeVarint(Rt(Be)),U.writeVarint(Rt(Lt)),ne+=Be,ge+=Lt}te===3&&U.writeVarint(wt(7,1))}}function Ut(ae,U){var W=typeof ae;W==="string"?U.writeStringField(1,ae):W==="boolean"?U.writeBooleanField(7,ae):W==="number"&&(ae%1!=0?U.writeDoubleField(3,ae):ae<0?U.writeSVarintField(6,ae):U.writeVarintField(5,ae))}function vr(ae,U,W,te,ne,ge){if(ne-te<=W)return;const Se=te+ne>>1;yr(ae,U,Se,te,ne,ge%2),vr(ae,U,W,te,Se-1,ge+1),vr(ae,U,W,Se+1,ne,ge+1)}function yr(ae,U,W,te,ne,ge){for(;ne>te;){if(ne-te>600){const Ee=ne-te+1,Ve=W-te+1,Ke=Math.log(Ee),Be=.5*Math.exp(2*Ke/3),Lt=.5*Math.sqrt(Ke*Be*(Ee-Be)/Ee)*(Ve-Ee/2<0?-1:1);yr(ae,U,W,Math.max(te,Math.floor(W-Ve*Be/Ee+Lt)),Math.min(ne,Math.floor(W+(Ee-Ve)*Be/Ee+Lt)),ge)}const Se=U[2*W+ge];let xe=te,_e=ne;for($e(ae,U,te,W),U[2*ne+ge]>Se&&$e(ae,U,te,ne);xe<_e;){for($e(ae,U,xe,_e),xe++,_e--;U[2*xe+ge]<Se;)xe++;for(;U[2*_e+ge]>Se;)_e--}U[2*te+ge]===Se?$e(ae,U,te,_e):(_e++,$e(ae,U,_e,ne)),_e<=W&&(te=_e+1),W<=_e&&(ne=_e-1)}}function $e(ae,U,W,te){pt(ae,W,te),pt(U,2*W,2*te),pt(U,2*W+1,2*te+1)}function pt(ae,U,W){const te=ae[U];ae[U]=ae[W],ae[W]=te}function it(ae,U,W,te){const ne=ae-W,ge=U-te;return ne*ne+ge*ge}K.exports=Ne,K.exports.fromVectorTileJs=Ne,K.exports.fromGeojsonVt=function(ae,U){U=U||{};var W={};for(var te in ae)W[te]=new ye(ae[te].features,U),W[te].name=te,W[te].version=U.version,W[te].extent=U.extent;return Ne({layers:W})},K.exports.GeoJSONWrapper=ye;const dt=ae=>ae[0],Dt=ae=>ae[1];class qt{constructor(U,W=dt,te=Dt,ne=64,ge=Float64Array){this.nodeSize=ne,this.points=U;const Se=U.length<65536?Uint16Array:Uint32Array,xe=this.ids=new Se(U.length),_e=this.coords=new ge(2*U.length);for(let Ee=0;Ee<U.length;Ee++)xe[Ee]=Ee,_e[2*Ee]=W(U[Ee]),_e[2*Ee+1]=te(U[Ee]);vr(xe,_e,ne,0,xe.length-1,0)}range(U,W,te,ne){return function(ge,Se,xe,_e,Ee,Ve,Ke){const Be=[0,ge.length-1,0],Lt=[];let zt,bt;for(;Be.length;){const Zt=Be.pop(),Yt=Be.pop(),wr=Be.pop();if(Yt-wr<=Ke){for(let Sr=wr;Sr<=Yt;Sr++)zt=Se[2*Sr],bt=Se[2*Sr+1],zt>=xe&&zt<=Ee&&bt>=_e&&bt<=Ve&&Lt.push(ge[Sr]);continue}const tr=Math.floor((wr+Yt)/2);zt=Se[2*tr],bt=Se[2*tr+1],zt>=xe&&zt<=Ee&&bt>=_e&&bt<=Ve&&Lt.push(ge[tr]);const fr=(Zt+1)%2;(Zt===0?xe<=zt:_e<=bt)&&(Be.push(wr),Be.push(tr-1),Be.push(fr)),(Zt===0?Ee>=zt:Ve>=bt)&&(Be.push(tr+1),Be.push(Yt),Be.push(fr))}return Lt}(this.ids,this.coords,U,W,te,ne,this.nodeSize)}within(U,W,te){return function(ne,ge,Se,xe,_e,Ee){const Ve=[0,ne.length-1,0],Ke=[],Be=_e*_e;for(;Ve.length;){const Lt=Ve.pop(),zt=Ve.pop(),bt=Ve.pop();if(zt-bt<=Ee){for(let fr=bt;fr<=zt;fr++)it(ge[2*fr],ge[2*fr+1],Se,xe)<=Be&&Ke.push(ne[fr]);continue}const Zt=Math.floor((bt+zt)/2),Yt=ge[2*Zt],wr=ge[2*Zt+1];it(Yt,wr,Se,xe)<=Be&&Ke.push(ne[Zt]);const tr=(Lt+1)%2;(Lt===0?Se-_e<=Yt:xe-_e<=wr)&&(Ve.push(bt),Ve.push(Zt-1),Ve.push(tr)),(Lt===0?Se+_e>=Yt:xe+_e>=wr)&&(Ve.push(Zt+1),Ve.push(zt),Ve.push(tr))}return Ke}(this.ids,this.coords,U,W,te,this.nodeSize)}}const ot={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ae=>ae},lt=Math.fround||(oe=new Float32Array(1),ae=>(oe[0]=+ae,oe[0]));var oe;class ve{constructor(U){this.options=nt(Object.create(ot),U),this.trees=new Array(this.options.maxZoom+1)}load(U){const{log:W,minZoom:te,maxZoom:ne,nodeSize:ge}=this.options;W&&console.time("total time");const Se=`prepare ${U.length} points`;W&&console.time(Se),this.points=U;let xe=[];for(let _e=0;_e<U.length;_e++)U[_e].geometry&&xe.push(Ge(U[_e],_e));this.trees[ne+1]=new qt(xe,$t,Mt,ge,Float32Array),W&&console.timeEnd(Se);for(let _e=ne;_e>=te;_e--){const Ee=+Date.now();xe=this._cluster(xe,_e),this.trees[_e]=new qt(xe,$t,Mt,ge,Float32Array),W&&console.log("z%d: %d clusters in %dms",_e,xe.length,+Date.now()-Ee)}return W&&console.timeEnd("total time"),this}getClusters(U,W){let te=((U[0]+180)%360+360)%360-180;const ne=Math.max(-90,Math.min(90,U[1]));let ge=U[2]===180?180:((U[2]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,U[3]));if(U[2]-U[0]>=360)te=-180,ge=180;else if(te>ge){const Ve=this.getClusters([te,ne,180,Se],W),Ke=this.getClusters([-180,ne,ge,Se],W);return Ve.concat(Ke)}const xe=this.trees[this._limitZoom(W)],_e=xe.range(qe(te),Qe(Se),qe(ge),Qe(ne)),Ee=[];for(const Ve of _e){const Ke=xe.points[Ve];Ee.push(Ke.numPoints?Xe(Ke):this.points[Ke.index])}return Ee}getChildren(U){const W=this._getOriginId(U),te=this._getOriginZoom(U),ne="No cluster with the specified id.",ge=this.trees[te];if(!ge)throw new Error(ne);const Se=ge.points[W];if(!Se)throw new Error(ne);const xe=this.options.radius/(this.options.extent*Math.pow(2,te-1)),_e=ge.within(Se.x,Se.y,xe),Ee=[];for(const Ve of _e){const Ke=ge.points[Ve];Ke.parentId===U&&Ee.push(Ke.numPoints?Xe(Ke):this.points[Ke.index])}if(Ee.length===0)throw new Error(ne);return Ee}getLeaves(U,W,te){const ne=[];return this._appendLeaves(ne,U,W=W||10,te=te||0,0),ne}getTile(U,W,te){const ne=this.trees[this._limitZoom(U)],ge=Math.pow(2,U),{extent:Se,radius:xe}=this.options,_e=xe/Se,Ee=(te-_e)/ge,Ve=(te+1+_e)/ge,Ke={features:[]};return this._addTileFeatures(ne.range((W-_e)/ge,Ee,(W+1+_e)/ge,Ve),ne.points,W,te,ge,Ke),W===0&&this._addTileFeatures(ne.range(1-_e/ge,Ee,1,Ve),ne.points,ge,te,ge,Ke),W===ge-1&&this._addTileFeatures(ne.range(0,Ee,_e/ge,Ve),ne.points,-1,te,ge,Ke),Ke.features.length?Ke:null}getClusterExpansionZoom(U){let W=this._getOriginZoom(U)-1;for(;W<=this.options.maxZoom;){const te=this.getChildren(U);if(W++,te.length!==1)break;U=te[0].properties.cluster_id}return W}_appendLeaves(U,W,te,ne,ge){const Se=this.getChildren(W);for(const xe of Se){const _e=xe.properties;if(_e&&_e.cluster?ge+_e.point_count<=ne?ge+=_e.point_count:ge=this._appendLeaves(U,_e.cluster_id,te,ne,ge):ge<ne?ge++:U.push(xe),U.length===te)break}return ge}_addTileFeatures(U,W,te,ne,ge,Se){for(const xe of U){const _e=W[xe],Ee=_e.numPoints;let Ve,Ke,Be;if(Ee)Ve=Ye(_e),Ke=_e.x,Be=_e.y;else{const bt=this.points[_e.index];Ve=bt.properties,Ke=qe(bt.geometry.coordinates[0]),Be=Qe(bt.geometry.coordinates[1])}const Lt={type:1,geometry:[[Math.round(this.options.extent*(Ke*ge-te)),Math.round(this.options.extent*(Be*ge-ne))]],tags:Ve};let zt;Ee?zt=_e.id:this.options.generateId?zt=_e.index:this.points[_e.index].id&&(zt=this.points[_e.index].id),zt!==void 0&&(Lt.id=zt),Se.features.push(Lt)}}_limitZoom(U){return Math.max(this.options.minZoom,Math.min(Math.floor(+U),this.options.maxZoom+1))}_cluster(U,W){const te=[],{radius:ne,extent:ge,reduce:Se,minPoints:xe}=this.options,_e=ne/(ge*Math.pow(2,W));for(let Ee=0;Ee<U.length;Ee++){const Ve=U[Ee];if(Ve.zoom<=W)continue;Ve.zoom=W;const Ke=this.trees[W+1],Be=Ke.within(Ve.x,Ve.y,_e),Lt=Ve.numPoints||1;let zt=Lt;for(const bt of Be){const Zt=Ke.points[bt];Zt.zoom>W&&(zt+=Zt.numPoints||1)}if(zt>Lt&&zt>=xe){let bt=Ve.x*Lt,Zt=Ve.y*Lt,Yt=Se&&Lt>1?this._map(Ve,!0):null;const wr=(Ee<<5)+(W+1)+this.points.length;for(const tr of Be){const fr=Ke.points[tr];if(fr.zoom<=W)continue;fr.zoom=W;const Sr=fr.numPoints||1;bt+=fr.x*Sr,Zt+=fr.y*Sr,fr.parentId=wr,Se&&(Yt||(Yt=this._map(Ve,!0)),Se(Yt,this._map(fr)))}Ve.parentId=wr,te.push(De(bt/zt,Zt/zt,wr,zt,Yt))}else if(te.push(Ve),zt>1)for(const bt of Be){const Zt=Ke.points[bt];Zt.zoom<=W||(Zt.zoom=W,te.push(Zt))}}return te}_getOriginId(U){return U-this.points.length>>5}_getOriginZoom(U){return(U-this.points.length)%32}_map(U,W){if(U.numPoints)return W?nt({},U.properties):U.properties;const te=this.points[U.index].properties,ne=this.options.map(te);return W&&ne===te?nt({},ne):ne}}function De(ae,U,W,te,ne){return{x:lt(ae),y:lt(U),zoom:1/0,id:W,parentId:-1,numPoints:te,properties:ne}}function Ge(ae,U){const[W,te]=ae.geometry.coordinates;return{x:lt(qe(W)),y:lt(Qe(te)),zoom:1/0,index:U,parentId:-1}}function Xe(ae){return{type:"Feature",id:ae.id,properties:Ye(ae),geometry:{type:"Point",coordinates:[(U=ae.x,360*(U-.5)),ut(ae.y)]}};var U}function Ye(ae){const U=ae.numPoints,W=U>=1e4?`${Math.round(U/1e3)}k`:U>=1e3?Math.round(U/100)/10+"k":U;return nt(nt({},ae.properties),{cluster:!0,cluster_id:ae.id,point_count:U,point_count_abbreviated:W})}function qe(ae){return ae/360+.5}function Qe(ae){const U=Math.sin(ae*Math.PI/180),W=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return W<0?0:W>1?1:W}function ut(ae){const U=(180-360*ae)*Math.PI/180;return 360*Math.atan(Math.exp(U))/Math.PI-90}function nt(ae,U){for(const W in U)ae[W]=U[W];return ae}function $t(ae){return ae.x}function Mt(ae){return ae.y}function It(ae,U,W,te){for(var ne,ge=te,Se=W-U>>1,xe=W-U,_e=ae[U],Ee=ae[U+1],Ve=ae[W],Ke=ae[W+1],Be=U+3;Be<W;Be+=3){var Lt=Wt(ae[Be],ae[Be+1],_e,Ee,Ve,Ke);if(Lt>ge)ne=Be,ge=Lt;else if(Lt===ge){var zt=Math.abs(Be-Se);zt<xe&&(ne=Be,xe=zt)}}ge>te&&(ne-U>3&&It(ae,U,ne,te),ae[ne+2]=ge,W-ne>3&&It(ae,ne,W,te))}function Wt(ae,U,W,te,ne,ge){var Se=ne-W,xe=ge-te;if(Se!==0||xe!==0){var _e=((ae-W)*Se+(U-te)*xe)/(Se*Se+xe*xe);_e>1?(W=ne,te=ge):_e>0&&(W+=Se*_e,te+=xe*_e)}return(Se=ae-W)*Se+(xe=U-te)*xe}function er(ae,U,W,te){var ne={id:ae===void 0?null:ae,type:U,geometry:W,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ge){var Se=ge.geometry,xe=ge.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")Oe(ge,Se);else if(xe==="Polygon"||xe==="MultiLineString")for(var _e=0;_e<Se.length;_e++)Oe(ge,Se[_e]);else if(xe==="MultiPolygon")for(_e=0;_e<Se.length;_e++)for(var Ee=0;Ee<Se[_e].length;Ee++)Oe(ge,Se[_e][Ee])}(ne),ne}function Oe(ae,U){for(var W=0;W<U.length;W+=3)ae.minX=Math.min(ae.minX,U[W]),ae.minY=Math.min(ae.minY,U[W+1]),ae.maxX=Math.max(ae.maxX,U[W]),ae.maxY=Math.max(ae.maxY,U[W+1])}function Je(ae,U,W,te){if(U.geometry){var ne=U.geometry.coordinates,ge=U.geometry.type,Se=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),xe=[],_e=U.id;if(W.promoteId?_e=U.properties[W.promoteId]:W.generateId&&(_e=te||0),ge==="Point")Mr(ne,xe);else if(ge==="MultiPoint")for(var Ee=0;Ee<ne.length;Ee++)Mr(ne[Ee],xe);else if(ge==="LineString")xn(ne,xe,Se,!1);else if(ge==="MultiLineString"){if(W.lineMetrics){for(Ee=0;Ee<ne.length;Ee++)xn(ne[Ee],xe=[],Se,!1),ae.push(er(_e,"LineString",xe,U.properties));return}hr(ne,xe,Se,!1)}else if(ge==="Polygon")hr(ne,xe,Se,!0);else{if(ge!=="MultiPolygon"){if(ge==="GeometryCollection"){for(Ee=0;Ee<U.geometry.geometries.length;Ee++)Je(ae,{id:_e,geometry:U.geometry.geometries[Ee],properties:U.properties},W,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Ee=0;Ee<ne.length;Ee++){var Ve=[];hr(ne[Ee],Ve,Se,!0),xe.push(Ve)}}ae.push(er(_e,ge,xe,U.properties))}}function Mr(ae,U){U.push(di(ae[0])),U.push(Bn(ae[1])),U.push(0)}function xn(ae,U,W,te){for(var ne,ge,Se=0,xe=0;xe<ae.length;xe++){var _e=di(ae[xe][0]),Ee=Bn(ae[xe][1]);U.push(_e),U.push(Ee),U.push(0),xe>0&&(Se+=te?(ne*Ee-_e*ge)/2:Math.sqrt(Math.pow(_e-ne,2)+Math.pow(Ee-ge,2))),ne=_e,ge=Ee}var Ve=U.length-3;U[2]=1,It(U,0,Ve,W),U[Ve+2]=1,U.size=Math.abs(Se),U.start=0,U.end=U.size}function hr(ae,U,W,te){for(var ne=0;ne<ae.length;ne++){var ge=[];xn(ae[ne],ge,W,te),U.push(ge)}}function di(ae){return ae/360+.5}function Bn(ae){var U=Math.sin(ae*Math.PI/180),W=.5-.25*Math.log((1+U)/(1-U))/Math.PI;return W<0?0:W>1?1:W}function ii(ae,U,W,te,ne,ge,Se,xe){if(te/=U,ge>=(W/=U)&&Se<te)return ae;if(Se<W||ge>=te)return null;for(var _e=[],Ee=0;Ee<ae.length;Ee++){var Ve=ae[Ee],Ke=Ve.geometry,Be=Ve.type,Lt=ne===0?Ve.minX:Ve.minY,zt=ne===0?Ve.maxX:Ve.maxY;if(Lt>=W&&zt<te)_e.push(Ve);else if(!(zt<W||Lt>=te)){var bt=[];if(Be==="Point"||Be==="MultiPoint")wn(Ke,bt,W,te,ne);else if(Be==="LineString")st(Ke,bt,W,te,ne,!1,xe.lineMetrics);else if(Be==="MultiLineString")or(Ke,bt,W,te,ne,!1);else if(Be==="Polygon")or(Ke,bt,W,te,ne,!0);else if(Be==="MultiPolygon")for(var Zt=0;Zt<Ke.length;Zt++){var Yt=[];or(Ke[Zt],Yt,W,te,ne,!0),Yt.length&&bt.push(Yt)}if(bt.length){if(xe.lineMetrics&&Be==="LineString"){for(Zt=0;Zt<bt.length;Zt++)_e.push(er(Ve.id,Be,bt[Zt],Ve.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(bt.length===1?(Be="LineString",bt=bt[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=bt.length===3?"Point":"MultiPoint"),_e.push(er(Ve.id,Be,bt,Ve.tags))}}}return _e.length?_e:null}function wn(ae,U,W,te,ne){for(var ge=0;ge<ae.length;ge+=3){var Se=ae[ge+ne];Se>=W&&Se<=te&&(U.push(ae[ge]),U.push(ae[ge+1]),U.push(ae[ge+2]))}}function st(ae,U,W,te,ne,ge,Se){for(var xe,_e,Ee=ur(ae),Ve=ne===0?Mo:rr,Ke=ae.start,Be=0;Be<ae.length-3;Be+=3){var Lt=ae[Be],zt=ae[Be+1],bt=ae[Be+2],Zt=ae[Be+3],Yt=ae[Be+4],wr=ne===0?Lt:zt,tr=ne===0?Zt:Yt,fr=!1;Se&&(xe=Math.sqrt(Math.pow(Lt-Zt,2)+Math.pow(zt-Yt,2))),wr<W?tr>W&&(_e=Ve(Ee,Lt,zt,Zt,Yt,W),Se&&(Ee.start=Ke+xe*_e)):wr>te?tr<te&&(_e=Ve(Ee,Lt,zt,Zt,Yt,te),Se&&(Ee.start=Ke+xe*_e)):Kn(Ee,Lt,zt,bt),tr<W&&wr>=W&&(_e=Ve(Ee,Lt,zt,Zt,Yt,W),fr=!0),tr>te&&wr<=te&&(_e=Ve(Ee,Lt,zt,Zt,Yt,te),fr=!0),!ge&&fr&&(Se&&(Ee.end=Ke+xe*_e),U.push(Ee),Ee=ur(ae)),Se&&(Ke+=xe)}var Sr=ae.length-3;Lt=ae[Sr],zt=ae[Sr+1],bt=ae[Sr+2],(wr=ne===0?Lt:zt)>=W&&wr<=te&&Kn(Ee,Lt,zt,bt),Sr=Ee.length-3,ge&&Sr>=3&&(Ee[Sr]!==Ee[0]||Ee[Sr+1]!==Ee[1])&&Kn(Ee,Ee[0],Ee[1],Ee[2]),Ee.length&&U.push(Ee)}function ur(ae){var U=[];return U.size=ae.size,U.start=ae.start,U.end=ae.end,U}function or(ae,U,W,te,ne,ge){for(var Se=0;Se<ae.length;Se++)st(ae[Se],U,W,te,ne,ge,!1)}function Kn(ae,U,W,te){ae.push(U),ae.push(W),ae.push(te)}function Mo(ae,U,W,te,ne,ge){var Se=(ge-U)/(te-U);return ae.push(ge),ae.push(W+(ne-W)*Se),ae.push(1),Se}function rr(ae,U,W,te,ne,ge){var Se=(ge-W)/(ne-W);return ae.push(U+(te-U)*Se),ae.push(ge),ae.push(1),Se}function oo(ae,U){for(var W=[],te=0;te<ae.length;te++){var ne,ge=ae[te],Se=ge.type;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")ne=$n(ge.geometry,U);else if(Se==="MultiLineString"||Se==="Polygon"){ne=[];for(var xe=0;xe<ge.geometry.length;xe++)ne.push($n(ge.geometry[xe],U))}else if(Se==="MultiPolygon")for(ne=[],xe=0;xe<ge.geometry.length;xe++){for(var _e=[],Ee=0;Ee<ge.geometry[xe].length;Ee++)_e.push($n(ge.geometry[xe][Ee],U));ne.push(_e)}W.push(er(ge.id,Se,ne,ge.tags))}return W}function $n(ae,U){var W=[];W.size=ae.size,ae.start!==void 0&&(W.start=ae.start,W.end=ae.end);for(var te=0;te<ae.length;te+=3)W.push(ae[te]+U,ae[te+1],ae[te+2]);return W}function Ws(ae,U){if(ae.transformed)return ae;var W,te,ne,ge=1<<ae.z,Se=ae.x,xe=ae.y;for(W=0;W<ae.features.length;W++){var _e=ae.features[W],Ee=_e.geometry,Ve=_e.type;if(_e.geometry=[],Ve===1)for(te=0;te<Ee.length;te+=2)_e.geometry.push(Dn(Ee[te],Ee[te+1],U,ge,Se,xe));else for(te=0;te<Ee.length;te++){var Ke=[];for(ne=0;ne<Ee[te].length;ne+=2)Ke.push(Dn(Ee[te][ne],Ee[te][ne+1],U,ge,Se,xe));_e.geometry.push(Ke)}}return ae.transformed=!0,ae}function Dn(ae,U,W,te,ne,ge){return[Math.round(W*(ae*te-ne)),Math.round(W*(U*te-ge))]}function pi(ae,U,W,te,ne){for(var ge=U===ne.maxZoom?0:ne.tolerance/((1<<U)*ne.extent),Se={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:W,y:te,z:U,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},xe=0;xe<ae.length;xe++){Se.numFeatures++,$r(Se,ae[xe],ge,ne);var _e=ae[xe].minX,Ee=ae[xe].minY,Ve=ae[xe].maxX,Ke=ae[xe].maxY;_e<Se.minX&&(Se.minX=_e),Ee<Se.minY&&(Se.minY=Ee),Ve>Se.maxX&&(Se.maxX=Ve),Ke>Se.maxY&&(Se.maxY=Ke)}return Se}function $r(ae,U,W,te){var ne=U.geometry,ge=U.type,Se=[];if(ge==="Point"||ge==="MultiPoint")for(var xe=0;xe<ne.length;xe+=3)Se.push(ne[xe]),Se.push(ne[xe+1]),ae.numPoints++,ae.numSimplified++;else if(ge==="LineString")Zs(Se,ne,ae,W,!1,!1);else if(ge==="MultiLineString"||ge==="Polygon")for(xe=0;xe<ne.length;xe++)Zs(Se,ne[xe],ae,W,ge==="Polygon",xe===0);else if(ge==="MultiPolygon")for(var _e=0;_e<ne.length;_e++){var Ee=ne[_e];for(xe=0;xe<Ee.length;xe++)Zs(Se,Ee[xe],ae,W,!0,xe===0)}if(Se.length){var Ve=U.tags||null;if(ge==="LineString"&&te.lineMetrics){for(var Ke in Ve={},U.tags)Ve[Ke]=U.tags[Ke];Ve.mapbox_clip_start=ne.start/ne.size,Ve.mapbox_clip_end=ne.end/ne.size}var Be={geometry:Se,type:ge==="Polygon"||ge==="MultiPolygon"?3:ge==="LineString"||ge==="MultiLineString"?2:1,tags:Ve};U.id!==null&&(Be.id=U.id),ae.features.push(Be)}}function Zs(ae,U,W,te,ne,ge){var Se=te*te;if(te>0&&U.size<(ne?Se:te))W.numPoints+=U.length/3;else{for(var xe=[],_e=0;_e<U.length;_e+=3)(te===0||U[_e+2]>Se)&&(W.numSimplified++,xe.push(U[_e]),xe.push(U[_e+1])),W.numPoints++;ne&&function(Ee,Ve){for(var Ke=0,Be=0,Lt=Ee.length,zt=Lt-2;Be<Lt;zt=Be,Be+=2)Ke+=(Ee[Be]-Ee[zt])*(Ee[Be+1]+Ee[zt+1]);if(Ke>0===Ve)for(Be=0,Lt=Ee.length;Be<Lt/2;Be+=2){var bt=Ee[Be],Zt=Ee[Be+1];Ee[Be]=Ee[Lt-2-Be],Ee[Be+1]=Ee[Lt-1-Be],Ee[Lt-2-Be]=bt,Ee[Lt-1-Be]=Zt}}(xe,ge),ae.push(xe)}}function Ma(ae,U){var W=(U=this.options=function(ne,ge){for(var Se in ge)ne[Se]=ge[Se];return ne}(Object.create(this.options),U)).debug;if(W&&console.time("preprocess data"),U.maxZoom<0||U.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(U.promoteId&&U.generateId)throw new Error("promoteId and generateId cannot be used together.");var te=function(ne,ge){var Se=[];if(ne.type==="FeatureCollection")for(var xe=0;xe<ne.features.length;xe++)Je(Se,ne.features[xe],ge,xe);else Je(Se,ne.type==="Feature"?ne:{geometry:ne},ge);return Se}(ae,U);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",U.indexMaxZoom,U.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(ne,ge){var Se=ge.buffer/ge.extent,xe=ne,_e=ii(ne,1,-1-Se,Se,0,-1,2,ge),Ee=ii(ne,1,1-Se,2+Se,0,-1,2,ge);return(_e||Ee)&&(xe=ii(ne,1,-Se,1+Se,0,-1,2,ge)||[],_e&&(xe=oo(_e,1).concat(xe)),Ee&&(xe=xe.concat(oo(Ee,-1)))),xe}(te,U),te.length&&this.splitTile(te,0,0,0),W&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function as(ae,U,W){return 32*((1<<ae)*W+U)+ae}function os(ae,U){const W=ae.tileID.canonical;if(!this._geoJSONIndex)return U(null,null);const te=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!te)return U(null,null);const ne=new q(te.features);let ge=K.exports(ne);ge.byteOffset===0&&ge.byteLength===ge.buffer.byteLength||(ge=new Uint8Array(ge)),U(null,{vectorTile:ne,rawData:ge.buffer})}Ma.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ma.prototype.splitTile=function(ae,U,W,te,ne,ge,Se){for(var xe=[ae,U,W,te],_e=this.options,Ee=_e.debug;xe.length;){te=xe.pop(),W=xe.pop(),U=xe.pop(),ae=xe.pop();var Ve=1<<U,Ke=as(U,W,te),Be=this.tiles[Ke];if(!Be&&(Ee>1&&console.time("creation"),Be=this.tiles[Ke]=pi(ae,U,W,te,_e),this.tileCoords.push({z:U,x:W,y:te}),Ee)){Ee>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",U,W,te,Be.numFeatures,Be.numPoints,Be.numSimplified),console.timeEnd("creation"));var Lt="z"+U;this.stats[Lt]=(this.stats[Lt]||0)+1,this.total++}if(Be.source=ae,ne){if(U===_e.maxZoom||U===ne)continue;var zt=1<<ne-U;if(W!==Math.floor(ge/zt)||te!==Math.floor(Se/zt))continue}else if(U===_e.indexMaxZoom||Be.numPoints<=_e.indexMaxPoints)continue;if(Be.source=null,ae.length!==0){Ee>1&&console.time("clipping");var bt,Zt,Yt,wr,tr,fr,Sr=.5*_e.buffer/_e.extent,Wr=.5-Sr,jn=.5+Sr,ln=1+Sr;bt=Zt=Yt=wr=null,tr=ii(ae,Ve,W-Sr,W+jn,0,Be.minX,Be.maxX,_e),fr=ii(ae,Ve,W+Wr,W+ln,0,Be.minX,Be.maxX,_e),ae=null,tr&&(bt=ii(tr,Ve,te-Sr,te+jn,1,Be.minY,Be.maxY,_e),Zt=ii(tr,Ve,te+Wr,te+ln,1,Be.minY,Be.maxY,_e),tr=null),fr&&(Yt=ii(fr,Ve,te-Sr,te+jn,1,Be.minY,Be.maxY,_e),wr=ii(fr,Ve,te+Wr,te+ln,1,Be.minY,Be.maxY,_e),fr=null),Ee>1&&console.timeEnd("clipping"),xe.push(bt||[],U+1,2*W,2*te),xe.push(Zt||[],U+1,2*W,2*te+1),xe.push(Yt||[],U+1,2*W+1,2*te),xe.push(wr||[],U+1,2*W+1,2*te+1)}}},Ma.prototype.getTile=function(ae,U,W){var te=this.options,ne=te.extent,ge=te.debug;if(ae<0||ae>24)return null;var Se=1<<ae,xe=as(ae,U=(U%Se+Se)%Se,W);if(this.tiles[xe])return Ws(this.tiles[xe],ne);ge>1&&console.log("drilling down to z%d-%d-%d",ae,U,W);for(var _e,Ee=ae,Ve=U,Ke=W;!_e&&Ee>0;)Ee--,Ve=Math.floor(Ve/2),Ke=Math.floor(Ke/2),_e=this.tiles[as(Ee,Ve,Ke)];return _e&&_e.source?(ge>1&&console.log("found parent tile z%d-%d-%d",Ee,Ve,Ke),ge>1&&console.time("drilling down"),this.splitTile(_e.source,Ee,Ve,Ke,ae,U,W),ge>1&&console.timeEnd("drilling down"),this.tiles[xe]?Ws(this.tiles[xe],ne):null):null};class Xs extends M{constructor(U,W,te,ne){super(U,W,te,os),ne&&(this.loadGeoJSON=ne)}loadData(U,W){var te;(te=this._pendingRequest)===null||te===void 0||te.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const ne=!!(U&&U.request&&U.request.collectResourceTiming)&&new o.RequestPerformance(U.request);this._pendingCallback=W,this._pendingRequest=this.loadGeoJSON(U,(ge,Se)=>{if(delete this._pendingCallback,delete this._pendingRequest,ge||!Se)return W(ge);if(typeof Se!="object")return W(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));{I(Se,!0);try{if(U.filter){const _e=o.createExpression(U.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map(Ve=>`${Ve.key}: ${Ve.message}`).join(", "));const Ee=Se.features.filter(Ve=>_e.value.evaluate({zoom:0},Ve));Se={type:"FeatureCollection",features:Ee}}this._geoJSONIndex=U.cluster?new ve(function({superclusterOptions:_e,clusterProperties:Ee}){if(!Ee||!_e)return _e;const Ve={},Ke={},Be={accumulated:null,zoom:0},Lt={properties:null},zt=Object.keys(Ee);for(const bt of zt){const[Zt,Yt]=Ee[bt],wr=o.createExpression(Yt),tr=o.createExpression(typeof Zt=="string"?[Zt,["accumulated"],["get",bt]]:Zt);Ve[bt]=wr.value,Ke[bt]=tr.value}return _e.map=bt=>{Lt.properties=bt;const Zt={};for(const Yt of zt)Zt[Yt]=Ve[Yt].evaluate(Be,Lt);return Zt},_e.reduce=(bt,Zt)=>{Lt.properties=Zt;for(const Yt of zt)Be.accumulated=bt[Yt],bt[Yt]=Ke[Yt].evaluate(Be,Lt)},_e}(U)).load(Se.features):function(_e,Ee){return new Ma(_e,Ee)}(Se,U.geojsonVtOptions)}catch(_e){return W(_e)}this.loaded={};const xe={};if(ne){const _e=ne.finish();_e&&(xe.resourceTiming={},xe.resourceTiming[U.source]=JSON.parse(JSON.stringify(_e)))}W(null,xe)}})}reloadTile(U,W){const te=this.loaded;return te&&te[U.uid]?super.reloadTile(U,W):this.loadTile(U,W)}loadGeoJSON(U,W){if(U.request)return o.getJSON(U.request,W);if(typeof U.data=="string")try{W(null,JSON.parse(U.data))}catch{W(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`))}else W(new Error(`Input data given to '${U.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(U,W){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),W()}getClusterExpansionZoom(U,W){try{W(null,this._geoJSONIndex.getClusterExpansionZoom(U.clusterId))}catch(te){W(te)}}getClusterChildren(U,W){try{W(null,this._geoJSONIndex.getChildren(U.clusterId))}catch(te){W(te)}}getClusterLeaves(U,W){try{W(null,this._geoJSONIndex.getLeaves(U.clusterId,U.limit,U.offset))}catch(te){W(te)}}}class ss{constructor(U){this.self=U,this.actor=new o.Actor(U,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:M,geojson:Xs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(W,te)=>{if(this.workerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.workerSourceTypes[W]=te},this.self.registerRTLTextPlugin=W=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=W.applyArabicShaping,o.plugin.processBidirectionalText=W.processBidirectionalText,o.plugin.processStyledBidirectionalText=W.processStyledBidirectionalText}}setReferrer(U,W){this.referrer=W}setImages(U,W,te){this.availableImages[U]=W;for(const ne in this.workerSources[U]){const ge=this.workerSources[U][ne];for(const Se in ge)ge[Se].availableImages=W}te()}setLayers(U,W,te){this.getLayerIndex(U).replace(W),te()}updateLayers(U,W,te){this.getLayerIndex(U).update(W.layers,W.removedIds),te()}loadTile(U,W,te){this.getWorkerSource(U,W.type,W.source).loadTile(W,te)}loadDEMTile(U,W,te){this.getDEMWorkerSource(U,W.source).loadTile(W,te)}reloadTile(U,W,te){this.getWorkerSource(U,W.type,W.source).reloadTile(W,te)}abortTile(U,W,te){this.getWorkerSource(U,W.type,W.source).abortTile(W,te)}removeTile(U,W,te){this.getWorkerSource(U,W.type,W.source).removeTile(W,te)}removeDEMTile(U,W){this.getDEMWorkerSource(U,W.source).removeTile(W)}removeSource(U,W,te){if(!this.workerSources[U]||!this.workerSources[U][W.type]||!this.workerSources[U][W.type][W.source])return;const ne=this.workerSources[U][W.type][W.source];delete this.workerSources[U][W.type][W.source],ne.removeSource!==void 0?ne.removeSource(W,te):te()}loadWorkerSource(U,W,te){try{this.self.importScripts(W.url),te()}catch(ne){te(ne.toString())}}syncRTLPluginState(U,W,te){try{o.plugin.setState(W);const ne=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&ne!=null){this.self.importScripts(ne);const ge=o.plugin.isParsed();te(ge?void 0:new Error(`RTL Text Plugin failed to import scripts from ${ne}`),ge)}}catch(ne){te(ne.toString())}}getAvailableImages(U){let W=this.availableImages[U];return W||(W=[]),W}getLayerIndex(U){let W=this.layerIndexes[U];return W||(W=this.layerIndexes[U]=new m),W}getWorkerSource(U,W,te){if(this.workerSources[U]||(this.workerSources[U]={}),this.workerSources[U][W]||(this.workerSources[U][W]={}),!this.workerSources[U][W][te]){const ne={send:(ge,Se,xe)=>{this.actor.send(ge,Se,xe,U)}};this.workerSources[U][W][te]=new this.workerSourceTypes[W](ne,this.getLayerIndex(U),this.getAvailableImages(U))}return this.workerSources[U][W][te]}getDEMWorkerSource(U,W){return this.demWorkerSources[U]||(this.demWorkerSources[U]={}),this.demWorkerSources[U][W]||(this.demWorkerSources[U][W]=new P),this.demWorkerSources[U][W]}enforceCacheSizeLimit(U,W){o.enforceCacheSizeLimit(W)}}return o.isWorker()&&(self.worker=new ss(self)),ss}),a(["./shared"],function(o){var h=d;function d(b){return!function(u){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,S,C=new Blob([""],{type:"text/javascript"}),k=URL.createObjectURL(C);try{S=new Worker(k),y=!0}catch{y=!1}return S&&S.terminate(),URL.revokeObjectURL(k),y}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var y=document.createElement("canvas");y.width=y.height=1;var S=y.getContext("2d");if(!S)return!1;var C=S.getImageData(0,0,1,1);return C&&C.width===y.width}()?(m[p=u&&u.failIfMajorPerformanceCaveat]===void 0&&(m[p]=function(y){var S,C=function(k){var z=document.createElement("canvas"),B=Object.create(d.webGLContextAttributes);return B.failIfMajorPerformanceCaveat=k,z.getContext("webgl",B)||z.getContext("experimental-webgl",B)}(y);if(!C)return!1;try{S=C.createShader(C.VERTEX_SHADER)}catch{return!1}return!(!S||C.isContextLost())&&(C.shaderSource(S,"void main() {}"),C.compileShader(S),C.getShaderParameter(S,C.COMPILE_STATUS)===!0)}(p)),m[p]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var p}(b)}var m={};function g(b,u){if(Array.isArray(b)){if(!Array.isArray(u)||b.length!==u.length)return!1;for(let p=0;p<b.length;p++)if(!g(b[p],u[p]))return!1;return!0}if(typeof b=="object"&&b!==null&&u!==null){if(typeof u!="object"||Object.keys(b).length!==Object.keys(u).length)return!1;for(const p in b)if(!g(b[p],u[p]))return!1;return!0}return b===u}d.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class _{static testProp(u){if(!_.docStyle)return u[0];for(let p=0;p<u.length;p++)if(u[p]in _.docStyle)return u[p];return u[0]}static create(u,p,y){const S=window.document.createElement(u);return p!==void 0&&(S.className=p),y&&y.appendChild(S),S}static createNS(u,p){return window.document.createElementNS(u,p)}static disableDrag(){_.docStyle&&_.selectProp&&(_.userSelect=_.docStyle[_.selectProp],_.docStyle[_.selectProp]="none")}static enableDrag(){_.docStyle&&_.selectProp&&(_.docStyle[_.selectProp]=_.userSelect)}static setTransform(u,p){u.style[_.transformProp]=p}static addEventListener(u,p,y,S={}){u.addEventListener(p,y,"passive"in S?S:S.capture)}static removeEventListener(u,p,y,S={}){u.removeEventListener(p,y,"passive"in S?S:S.capture)}static suppressClickInternal(u){u.preventDefault(),u.stopPropagation(),window.removeEventListener("click",_.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",_.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",_.suppressClickInternal,!0)},0)}static mousePos(u,p){const y=u.getBoundingClientRect();return new o.pointGeometry(p.clientX-y.left-u.clientLeft,p.clientY-y.top-u.clientTop)}static touchPos(u,p){const y=u.getBoundingClientRect(),S=[];for(let C=0;C<p.length;C++)S.push(new o.pointGeometry(p[C].clientX-y.left-u.clientLeft,p[C].clientY-y.top-u.clientTop));return S}static mouseButton(u){return u.button}static remove(u){u.parentNode&&u.parentNode.removeChild(u)}}_.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,_.selectProp=_.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),_.transformProp=_.testProp(["transform","WebkitTransform"]);class x{constructor(u){this._transformRequestFn=u}transformRequest(u,p){return this._transformRequestFn&&this._transformRequestFn(u,p)||{url:u}}normalizeSpriteURL(u,p,y){const S=function(C){const k=C.match(E);if(!k)throw new Error(`Unable to parse URL "${C}"`);return{protocol:k[1],authority:k[2],path:k[3]||"/",params:k[4]?k[4].split("&"):[]}}(u);return S.path+=`${p}${y}`,function(C){const k=C.params.length?`?${C.params.join("&")}`:"";return`${C.protocol}://${C.authority}${C.path}${k}`}(S)}setTransformRequest(u){this._transformRequestFn=u}}const E=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class M{constructor(u,p,y,S){this.context=u,this.format=y,this.texture=u.gl.createTexture(),this.update(p,S)}update(u,p,y){const{width:S,height:C}=u,k=!(this.size&&this.size[0]===S&&this.size[1]===C||y),{context:z}=this,{gl:B}=z;if(this.useMipmap=Boolean(p&&p.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!p||p.premultiply!==!1)),k)this.size=[S,C],u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||o.isImageBitmap(u)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,u):B.texImage2D(B.TEXTURE_2D,0,this.format,S,C,0,this.format,B.UNSIGNED_BYTE,u.data);else{const{x:V,y:H}=y||{x:0,y:0};u instanceof HTMLImageElement||u instanceof HTMLCanvasElement||u instanceof HTMLVideoElement||u instanceof ImageData||o.isImageBitmap(u)?B.texSubImage2D(B.TEXTURE_2D,0,V,H,B.RGBA,B.UNSIGNED_BYTE,u):B.texSubImage2D(B.TEXTURE_2D,0,V,H,S,C,B.RGBA,B.UNSIGNED_BYTE,u.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(u,p,y){const{context:S}=this,{gl:C}=S;C.bindTexture(C.TEXTURE_2D,this.texture),y!==C.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(y=C.LINEAR),u!==this.filter&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,u),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,y||u),this.filter=u),p!==this.wrap&&(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,p),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,p),this.wrap=p)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:u}=this.context;u.deleteTexture(this.texture),this.texture=null}}function P(b){const{userImage:u}=b;return!!(u&&u.render&&u.render())&&(b.data.replace(new Uint8Array(u.data.buffer)),!0)}class I extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(u){if(this.loaded!==u&&(this.loaded=u,u)){for(const{ids:p,callback:y}of this.requestors)this._notify(p,y);this.requestors=[]}}getImage(u){return this.images[u]}addImage(u,p){if(this.images[u])throw new Error(`Image id ${u} already exist, use updateImage instead`);this._validate(u,p)&&(this.images[u]=p)}_validate(u,p){let y=!0;return this._validateStretch(p.stretchX,p.data&&p.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchX" value`))),y=!1),this._validateStretch(p.stretchY,p.data&&p.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "stretchY" value`))),y=!1),this._validateContent(p.content,p)||(this.fire(new o.ErrorEvent(new Error(`Image "${u}" has invalid "content" value`))),y=!1),y}_validateStretch(u,p){if(!u)return!0;let y=0;for(const S of u){if(S[0]<y||S[1]<S[0]||p<S[1])return!1;y=S[1]}return!0}_validateContent(u,p){return!(u&&(u.length!==4||u[0]<0||p.data.width<u[0]||u[1]<0||p.data.height<u[1]||u[2]<0||p.data.width<u[2]||u[3]<0||p.data.height<u[3]||u[2]<u[0]||u[3]<u[1]))}updateImage(u,p){const y=this.images[u];if(y.data.width!==p.data.width||y.data.height!==p.data.height)throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${p.data.width}x${p.data.height}).`);p.version=y.version+1,this.images[u]=p,this.updatedImages[u]=!0}removeImage(u){const p=this.images[u];delete this.images[u],delete this.patterns[u],p.userImage&&p.userImage.onRemove&&p.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(u,p){let y=!0;if(!this.isLoaded())for(const S of u)this.images[S]||(y=!1);this.isLoaded()||y?this._notify(u,p):this.requestors.push({ids:u,callback:p})}_notify(u,p){const y={};for(const S of u){this.images[S]||this.fire(new o.Event("styleimagemissing",{id:S}));const C=this.images[S];C?y[S]={data:C.data.clone(),pixelRatio:C.pixelRatio,sdf:C.sdf,version:C.version,stretchX:C.stretchX,stretchY:C.stretchY,content:C.content,hasRenderCallback:Boolean(C.userImage&&C.userImage.render)}:o.warnOnce(`Image "${S}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}p(null,y)}getPixelSize(){const{width:u,height:p}=this.atlasImage;return{width:u,height:p}}getPattern(u){const p=this.patterns[u],y=this.getImage(u);if(!y)return null;if(p&&p.position.version===y.version)return p.position;if(p)p.position.version=y.version;else{const S={w:y.data.width+2,h:y.data.height+2,x:0,y:0},C=new o.ImagePosition(S,y);this.patterns[u]={bin:S,position:C}}return this._updatePatternAtlas(),this.patterns[u].position}bind(u){const p=u.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new M(u,this.atlasImage,p.RGBA),this.atlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE)}_updatePatternAtlas(){const u=[];for(const C in this.patterns)u.push(this.patterns[C].bin);const{w:p,h:y}=o.potpack(u),S=this.atlasImage;S.resize({width:p||1,height:y||1});for(const C in this.patterns){const{bin:k}=this.patterns[C],z=k.x+1,B=k.y+1,V=this.images[C].data,H=V.width,X=V.height;o.RGBAImage.copy(V,S,{x:0,y:0},{x:z,y:B},{width:H,height:X}),o.RGBAImage.copy(V,S,{x:0,y:X-1},{x:z,y:B-1},{width:H,height:1}),o.RGBAImage.copy(V,S,{x:0,y:0},{x:z,y:B+X},{width:H,height:1}),o.RGBAImage.copy(V,S,{x:H-1,y:0},{x:z-1,y:B},{width:1,height:X}),o.RGBAImage.copy(V,S,{x:0,y:0},{x:z+H,y:B},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(u){for(const p of u){if(this.callbackDispatchedThisFrame[p])continue;this.callbackDispatchedThisFrame[p]=!0;const y=this.images[p];y||o.warnOnce(`Image with ID: "${p}" was not found`),P(y)&&this.updateImage(p,y)}}}const D=1e20;function O(b,u,p,y,S,C,k,z,B){for(let V=u;V<u+y;V++)F(b,p*C+V,C,S,k,z,B);for(let V=p;V<p+S;V++)F(b,V*C+u,1,y,k,z,B)}function F(b,u,p,y,S,C,k){C[0]=0,k[0]=-D,k[1]=D,S[0]=b[u];for(let z=1,B=0,V=0;z<y;z++){S[z]=b[u+z*p];const H=z*z;do{const X=C[B];V=(S[z]-S[X]+H-X*X)/(z-X)/2}while(V<=k[B]&&--B>-1);B++,C[B]=z,k[B]=V,k[B+1]=D}for(let z=0,B=0;z<y;z++){for(;k[B+1]<z;)B++;const V=C[B],H=z-V;b[u+z*p]=S[V]+H*H}}class ${constructor(u,p){this.requestManager=u,this.localIdeographFontFamily=p,this.entries={}}setURL(u){this.url=u}getGlyphs(u,p){const y=[];for(const S in u)for(const C of u[S])y.push({stack:S,id:C});o.asyncAll(y,({stack:S,id:C},k)=>{let z=this.entries[S];z||(z=this.entries[S]={glyphs:{},requests:{},ranges:{}});let B=z.glyphs[C];if(B!==void 0)return void k(null,{stack:S,id:C,glyph:B});if(B=this._tinySDF(z,S,C),B)return z.glyphs[C]=B,void k(null,{stack:S,id:C,glyph:B});const V=Math.floor(C/256);if(256*V>65535)return void k(new Error("glyphs > 65535 not supported"));if(z.ranges[V])return void k(null,{stack:S,id:C,glyph:B});let H=z.requests[V];H||(H=z.requests[V]=[],$.loadGlyphRange(S,V,this.url,this.requestManager,(X,J)=>{if(J){for(const he in J)this._doesCharSupportLocalGlyph(+he)||(z.glyphs[+he]=J[+he]);z.ranges[V]=!0}for(const he of H)he(X,J);delete z.requests[V]})),H.push((X,J)=>{X?k(X):J&&k(null,{stack:S,id:C,glyph:J[C]||null})})},(S,C)=>{if(S)p(S);else if(C){const k={};for(const{stack:z,id:B,glyph:V}of C)(k[z]||(k[z]={}))[B]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics};p(null,k)}})}_doesCharSupportLocalGlyph(u){return!!this.localIdeographFontFamily&&(o.unicodeBlockLookup["CJK Unified Ideographs"](u)||o.unicodeBlockLookup["Hangul Syllables"](u)||o.unicodeBlockLookup.Hiragana(u)||o.unicodeBlockLookup.Katakana(u))}_tinySDF(u,p,y){const S=this.localIdeographFontFamily;if(!S||!this._doesCharSupportLocalGlyph(y))return;let C=u.tinySDF;if(!C){let z="400";/bold/i.test(p)?z="900":/medium/i.test(p)?z="500":/light/i.test(p)&&(z="200"),C=u.tinySDF=new $.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:S,fontWeight:z})}const k=C.draw(String.fromCharCode(y));return{id:y,bitmap:new o.AlphaImage({width:k.width||30,height:k.height||30},k.data),metrics:{width:k.glyphWidth||24,height:k.glyphHeight||24,left:k.glyphLeft||0,top:k.glyphTop-27||-8,advance:k.glyphAdvance||24}}}}$.loadGlyphRange=function(b,u,p,y,S){const C=256*u,k=C+255,z=y.transformRequest(p.replace("{fontstack}",b).replace("{range}",`${C}-${k}`),o.ResourceType.Glyphs);o.getArrayBuffer(z,(B,V)=>{if(B)S(B);else if(V){const H={};for(const X of o.parseGlyphPbf(V))H[X.id]=X;S(null,H)}})},$.TinySDF=class{constructor({fontSize:b=24,buffer:u=3,radius:p=8,cutoff:y=.25,fontFamily:S="sans-serif",fontWeight:C="normal",fontStyle:k="normal"}={}){this.buffer=u,this.cutoff=y,this.radius=p;const z=this.size=b+4*u,B=this._createCanvas(z),V=this.ctx=B.getContext("2d",{willReadFrequently:!0});V.font=`${k} ${C} ${b}px ${S}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(b){const u=document.createElement("canvas");return u.width=u.height=b,u}draw(b){const{width:u,actualBoundingBoxAscent:p,actualBoundingBoxDescent:y,actualBoundingBoxLeft:S,actualBoundingBoxRight:C}=this.ctx.measureText(b),k=Math.ceil(p),z=Math.min(this.size-this.buffer,Math.ceil(C-S)),B=Math.min(this.size-this.buffer,k+Math.ceil(y)),V=z+2*this.buffer,H=B+2*this.buffer,X=Math.max(V*H,0),J=new Uint8ClampedArray(X),he={data:J,width:V,height:H,glyphWidth:z,glyphHeight:B,glyphTop:k,glyphLeft:0,glyphAdvance:u};if(z===0||B===0)return he;const{ctx:se,buffer:ue,gridInner:we,gridOuter:Ae}=this;se.clearRect(ue,ue,z,B),se.fillText(b,ue,ue+k);const Me=se.getImageData(ue,ue,z,B);Ae.fill(D,0,X),we.fill(0,0,X);for(let de=0;de<B;de++)for(let Re=0;Re<z;Re++){const ke=Me.data[4*(de*z+Re)+3]/255;if(ke===0)continue;const je=(de+ue)*V+Re+ue;if(ke===1)Ae[je]=0,we[je]=D;else{const He=.5-ke;Ae[je]=He>0?He*He:0,we[je]=He<0?He*He:0}}O(Ae,0,0,V,H,V,this.f,this.v,this.z),O(we,ue,ue,z,B,V,this.f,this.v,this.z);for(let de=0;de<X;de++){const Re=Math.sqrt(Ae[de])-Math.sqrt(we[de]);J[de]=Math.round(255-255*(Re/this.radius+this.cutoff))}return he}};const q=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(b,u){return o.sphericalToCartesian(b.expression.evaluate(u))}interpolate(b,u,p){return{x:o.number(b.x,u.x,p),y:o.number(b.y,u.y,p),z:o.number(b.z,u.z,p)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),K="-transition";class Z extends o.Evented{constructor(u){super(),this._transitionable=new o.Transitionable(q),this.setLight(u),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(u,p={}){if(!this._validate(o.validateLight,u,p))for(const y in u){const S=u[y];y.endsWith(K)?this._transitionable.setTransition(y.slice(0,-K.length),S):this._transitionable.setValue(y,S)}}updateTransitions(u){this._transitioning=this._transitionable.transitioned(u,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(u){this.properties=this._transitioning.possiblyEvaluate(u)}_validate(u,p,y){return(!y||y.validate!==!1)&&o.emitValidationErrors(this,u.call(o.validateStyle,o.extend({value:p,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class re{constructor(u,p){this.width=u,this.height=p,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(u,p){const y=u.join(",")+String(p);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(u,p)),this.dashEntry[y]}getDashRanges(u,p,y){const S=[];let C=u.length%2==1?-u[u.length-1]*y:0,k=u[0]*y,z=!0;S.push({left:C,right:k,isDash:z,zeroLength:u[0]===0});let B=u[0];for(let V=1;V<u.length;V++){z=!z;const H=u[V];C=B*y,B+=H,k=B*y,S.push({left:C,right:k,isDash:z,zeroLength:H===0})}return S}addRoundDash(u,p,y){const S=p/2;for(let C=-y;C<=y;C++){const k=this.width*(this.nextRow+y+C);let z=0,B=u[z];for(let V=0;V<this.width;V++){V/B.right>1&&(B=u[++z]);const H=Math.abs(V-B.left),X=Math.abs(V-B.right),J=Math.min(H,X);let he;const se=C/y*(S+1);if(B.isDash){const ue=S-Math.abs(se);he=Math.sqrt(J*J+ue*ue)}else he=S-Math.sqrt(J*J+se*se);this.data[k+V]=Math.max(0,Math.min(255,he+128))}}}addRegularDash(u){for(let z=u.length-1;z>=0;--z){const B=u[z],V=u[z+1];B.zeroLength?u.splice(z,1):V&&V.isDash===B.isDash&&(V.left=B.left,u.splice(z,1))}const p=u[0],y=u[u.length-1];p.isDash===y.isDash&&(p.left=y.left-this.width,y.right=p.right+this.width);const S=this.width*this.nextRow;let C=0,k=u[C];for(let z=0;z<this.width;z++){z/k.right>1&&(k=u[++C]);const B=Math.abs(z-k.left),V=Math.abs(z-k.right),H=Math.min(B,V);this.data[S+z]=Math.max(0,Math.min(255,(k.isDash?H:-H)+128))}}addDash(u,p){const y=p?7:0,S=2*y+1;if(this.nextRow+S>this.height)return o.warnOnce("LineAtlas out of space"),null;let C=0;for(let z=0;z<u.length;z++)C+=u[z];if(C!==0){const z=this.width/C,B=this.getDashRanges(u,this.width,z);p?this.addRoundDash(B,z,y):this.addRegularDash(B)}const k={y:(this.nextRow+y+.5)/this.height,height:2*y/this.height,width:C};return this.nextRow+=S,this.dirty=!0,k}bind(u){const p=u.gl;this.texture?(p.bindTexture(p.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,p.texSubImage2D(p.TEXTURE_2D,0,0,0,this.width,this.height,p.ALPHA,p.UNSIGNED_BYTE,this.data))):(this.texture=p.createTexture(),p.bindTexture(p.TEXTURE_2D,this.texture),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.REPEAT),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.LINEAR),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.LINEAR),p.texImage2D(p.TEXTURE_2D,0,p.ALPHA,this.width,this.height,0,p.ALPHA,p.UNSIGNED_BYTE,this.data))}}class ie{constructor(u,p){this.workerPool=u,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const y=this.workerPool.acquire(this.id);for(let S=0;S<y.length;S++){const C=new ie.Actor(y[S],p,this.id);C.name=`Worker ${S}`,this.actors.push(C)}if(!this.actors.length)throw new Error("No actors found")}broadcast(u,p,y){o.asyncAll(this.actors,(S,C)=>{S.send(u,p,C)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(u=>{u.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ce(b,u,p){const y=function(S,C){if(S)return p(S);if(C){const k=o.pick(o.extend(C,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);C.vector_layers&&(k.vectorLayers=C.vector_layers,k.vectorLayerIds=k.vectorLayers.map(z=>z.id)),p(null,k)}};return b.url?o.getJSON(u.transformRequest(b.url,o.ResourceType.Source),y):o.exported.frame(()=>y(null,b))}ie.Actor=o.Actor;class le{constructor(u,p,y){this.bounds=o.LngLatBounds.convert(this.validateBounds(u)),this.minzoom=p||0,this.maxzoom=y||24}validateBounds(u){return Array.isArray(u)&&u.length===4?[Math.max(-180,u[0]),Math.max(-90,u[1]),Math.min(180,u[2]),Math.min(90,u[3])]:[-180,-90,180,90]}contains(u){const p=Math.pow(2,u.z),y=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*p),S=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*p),C=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*p),k=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*p);return u.x>=y&&u.x<C&&u.y>=S&&u.y<k}}class fe extends o.Evented{constructor(u,p,y,S){if(super(),this.id=u,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(p,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},p),this._collectResourceTiming=p.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(S)}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ce(this._options,this.map._requestManager,(u,p)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),u?this.fire(new o.ErrorEvent(u)):p&&(o.extend(this,p),p.bounds&&(this.tileBounds=new le(p.bounds,this.minzoom,this.maxzoom)),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}onAdd(u){this.map=u,this.load()}setSourceProperty(u){this._tileJSONRequest&&this._tileJSONRequest.cancel(),u(),this.load()}setTiles(u){return this.setSourceProperty(()=>{this._options.tiles=u}),this}setUrl(u){return this.setSourceProperty(()=>{this.url=u,this._options.url=u}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}loadTile(u,p){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),S={request:this.map._requestManager.transformRequest(y,o.ResourceType.Tile),uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,tileSize:this.tileSize*u.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function C(k,z){return delete u.request,u.aborted?p(null):k&&k.status!==404?p(k):(z&&z.resourceTiming&&(u.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&u.setExpiryData(z),u.loadVectorData(z,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),p(null),void(u.reloadCallback&&(this.loadTile(u,u.reloadCallback),u.reloadCallback=null)))}S.request.collectResourceTiming=this._collectResourceTiming,u.actor&&u.state!=="expired"?u.state==="loading"?u.reloadCallback=p:u.request=u.actor.send("reloadTile",S,C.bind(this)):(u.actor=this.dispatcher.getActor(),u.request=u.actor.send("loadTile",S,C.bind(this)))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.actor&&u.actor.send("abortTile",{uid:u.uid,type:this.type,source:this.id},void 0)}unloadTile(u){u.unloadVectorData(),u.actor&&u.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ye extends o.Evented{constructor(u,p,y,S){super(),this.id=u,this.dispatcher=y,this.setEventedParent(S),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},p),o.extend(this,o.pick(p,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ce(this._options,this.map._requestManager,(u,p)=>{this._tileJSONRequest=null,this._loaded=!0,u?this.fire(new o.ErrorEvent(u)):p&&(o.extend(this,p),p.bounds&&(this.tileBounds=new le(p.bounds,this.minzoom,this.maxzoom)),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(u){this.map=u,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}hasTile(u){return!this.tileBounds||this.tileBounds.contains(u.canonical)}loadTile(u,p){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);u.request=o.getImage(this.map._requestManager.transformRequest(y,o.ResourceType.Tile),(S,C,k)=>{if(delete u.request,u.aborted)u.state="unloaded",p(null);else if(S)u.state="errored",p(S);else if(C){this.map._refreshExpiredTiles&&u.setExpiryData(k);const z=this.map.painter.context,B=z.gl;u.texture=this.map.painter.getTileTexture(C.width),u.texture?u.texture.update(C,{useMipmap:!0}):(u.texture=new M(z,C,B.RGBA,{useMipmap:!0}),u.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),z.extTextureFilterAnisotropic&&B.texParameterf(B.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax)),u.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),p(null)}})}abortTile(u,p){u.request&&(u.request.cancel(),delete u.request),p()}unloadTile(u,p){u.texture&&this.map.painter.saveTileTexture(u.texture),p()}hasTransition(){return!1}}let Ne;class be extends ye{constructor(u,p,y,S){super(u,p,y,S),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},p),this.encoding=p.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(u,p){const y=u.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function S(C,k){C&&(u.state="errored",p(C)),k&&(u.dem=k,u.needsHillshadePrepare=!0,u.needsTerrainPrepare=!0,u.state="loaded",p(null))}u.request=o.getImage(this.map._requestManager.transformRequest(y,o.ResourceType.Tile),function(C,k){if(delete u.request,u.aborted)u.state="unloaded",p(null);else if(C)u.state="errored",p(C);else if(k){this.map._refreshExpiredTiles&&u.setExpiryData(k),delete k.cacheControl,delete k.expires;const z=o.isImageBitmap(k)&&(Ne==null&&(Ne=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ne)?k:o.exported.getImageData(k,1),B={uid:u.uid,coord:u.tileID,source:this.id,rawImageData:z,encoding:this.encoding};u.actor&&u.state!=="expired"||(u.actor=this.dispatcher.getActor(),u.actor.send("loadDEMTile",B,S.bind(this)))}}.bind(this)),u.neighboringTiles=this._getNeighboringTiles(u.tileID)}_getNeighboringTiles(u){const p=u.canonical,y=Math.pow(2,p.z),S=(p.x-1+y)%y,C=p.x===0?u.wrap-1:u.wrap,k=(p.x+1+y)%y,z=p.x+1===y?u.wrap+1:u.wrap,B={};return B[new o.OverscaledTileID(u.overscaledZ,C,p.z,S,p.y).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,z,p.z,k,p.y).key]={backfilled:!1},p.y>0&&(B[new o.OverscaledTileID(u.overscaledZ,C,p.z,S,p.y-1).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,u.wrap,p.z,p.x,p.y-1).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,z,p.z,k,p.y-1).key]={backfilled:!1}),p.y+1<y&&(B[new o.OverscaledTileID(u.overscaledZ,C,p.z,S,p.y+1).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,u.wrap,p.z,p.x,p.y+1).key]={backfilled:!1},B[new o.OverscaledTileID(u.overscaledZ,z,p.z,k,p.y+1).key]={backfilled:!1}),B}unloadTile(u){u.demTexture&&this.map.painter.saveTileTexture(u.demTexture),u.fbo&&(u.fbo.destroy(),delete u.fbo),u.dem&&delete u.dem,delete u.neighboringTiles,u.state="unloaded",u.actor&&u.actor.send("removeDEMTile",{uid:u.uid,source:this.id})}}class et extends o.Evented{constructor(u,p,y,S){super(),this.id=u,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=y.getActor(),this.setEventedParent(S),this._data=p.data,this._options=o.extend({},p),this._collectResourceTiming=p.collectResourceTiming,p.maxzoom!==void 0&&(this.maxzoom=p.maxzoom),p.type&&(this.type=p.type),p.attribution&&(this.attribution=p.attribution),this.promoteId=p.promoteId;const C=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:p.cluster||!1,geojsonVtOptions:{buffer:(p.buffer!==void 0?p.buffer:128)*C,tolerance:(p.tolerance!==void 0?p.tolerance:.375)*C,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:p.lineMetrics||!1,generateId:p.generateId||!1},superclusterOptions:{maxZoom:p.clusterMaxZoom!==void 0?p.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,p.clusterMinPoints||2),extent:o.EXTENT,radius:(p.clusterRadius||50)*C,log:!1,generateId:p.generateId||!1},clusterProperties:p.clusterProperties,filter:p.filter},p.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(u){this.map=u,this.load()}setData(u){return this._data=u,this._updateWorkerData("content"),this}getClusterExpansionZoom(u,p){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:u,source:this.id},p),this}getClusterChildren(u,p){return this.actor.send("geojson.getClusterChildren",{clusterId:u,source:this.id},p),this}getClusterLeaves(u,p,y,S){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:u,limit:p,offset:y},S),this}_updateWorkerData(u){const p=o.extend({},this.workerOptions),y=this._data;typeof y=="string"?(p.request=this.map._requestManager.transformRequest(o.exported.resolveURL(y),o.ResourceType.Source),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(y),this._pendingLoads++,this.fire(new o.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,p,(S,C)=>{if(this._pendingLoads--,this._removed||C&&C.abandoned)return void this.fire(new o.Event("dataabort",{dataType:"source",sourceDataType:u}));let k=null;if(C&&C.resourceTiming&&C.resourceTiming[this.id]&&(k=C.resourceTiming[this.id].slice(0)),S)return void this.fire(new o.ErrorEvent(S));const z={dataType:"source",sourceDataType:u};this._collectResourceTiming&&k&&k.length>0&&o.extend(z,{resourceTiming:k}),this.fire(new o.Event("data",z))})}loaded(){return this._pendingLoads===0}loadTile(u,p){const y=u.actor?"reloadTile":"loadTile";u.actor=this.actor;const S={type:this.type,uid:u.uid,tileID:u.tileID,zoom:u.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};u.request=this.actor.send(y,S,(C,k)=>(delete u.request,u.unloadVectorData(),u.aborted?p(null):C?p(C):(u.loadVectorData(k,this.map.painter,y==="reloadTile"),p(null))))}abortTile(u){u.request&&(u.request.cancel(),delete u.request),u.aborted=!0}unloadTile(u){u.unloadVectorData(),this.actor.send("removeTile",{uid:u.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var tt=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class wt extends o.Evented{constructor(u,p,y,S){super(),this.id=u,this.dispatcher=y,this.coordinates=p.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(S),this.options=p}load(u,p){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(y,S)=>{this._loaded=!0,y?this.fire(new o.ErrorEvent(y)):S&&(this.image=S,u&&(this.coordinates=u),p&&p(),this._finishLoading())})}loaded(){return this._loaded}updateImage(u){return this.image&&u.url?(this.options.url=u.url,this.load(u.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(u){this.map=u,this.load()}setCoordinates(u){this.coordinates=u;const p=u.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(S){let C=1/0,k=1/0,z=-1/0,B=-1/0;for(const J of S)C=Math.min(C,J.x),k=Math.min(k,J.y),z=Math.max(z,J.x),B=Math.max(B,J.y);const V=Math.max(z-C,B-k),H=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),X=Math.pow(2,H);return new o.CanonicalTileID(H,Math.floor((C+z)/2*X),Math.floor((k+B)/2*X))}(p),this.minzoom=this.maxzoom=this.tileID.z;const y=p.map(S=>this.tileID.getTilePoint(S)._round());return this._boundsArray=new o.RasterBoundsArray,this._boundsArray.emplaceBack(y[0].x,y[0].y,0,0),this._boundsArray.emplaceBack(y[1].x,y[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(y[3].x,y[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(y[2].x,y[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,tt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new M(u,this.image,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));for(const y in this.tiles){const S=this.tiles[y];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}loadTile(u,p){this.tileID&&this.tileID.equals(u.tileID.canonical)?(this.tiles[String(u.tileID.wrap)]=u,u.buckets={},p(null)):(u.state="errored",p(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Rt extends wt{constructor(u,p,y,S){super(u,p,y,S),this.roundZoom=!0,this.type="video",this.options=p}load(){this._loaded=!1;const u=this.options;this.urls=[];for(const p of u.urls)this.urls.push(this.map._requestManager.transformRequest(p,o.ResourceType.Source).url);o.getVideo(this.urls,(p,y)=>{this._loaded=!0,p?this.fire(new o.ErrorEvent(p)):y&&(this.video=y,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(u){if(this.video){const p=this.video.seekable;u<p.start(0)||u>p.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${p.start(0)} and ${p.end(0)}-second mark.`))):this.video.currentTime=u}}getVideo(){return this.video}onAdd(u){this.map||(this.map=u,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const u=this.map.painter.context,p=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,tt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE),p.texSubImage2D(p.TEXTURE_2D,0,0,0,p.RGBA,p.UNSIGNED_BYTE,this.video)):(this.texture=new M(u,this.video,p.RGBA),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE));for(const y in this.tiles){const S=this.tiles[y];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Qt extends wt{constructor(u,p,y,S){super(u,p,y,S),p.coordinates?Array.isArray(p.coordinates)&&p.coordinates.length===4&&!p.coordinates.some(C=>!Array.isArray(C)||C.length!==2||C.some(k=>typeof k!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'missing required property "coordinates"'))),p.animate&&typeof p.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'optional "animate" property must be a boolean value'))),p.canvas?typeof p.canvas=="string"||p.canvas instanceof HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${u}`,null,'missing required property "canvas"'))),this.options=p,this.animate=p.animate===void 0||p.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(u){this.map=u,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let u=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,u=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,u=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const p=this.map.painter.context,y=p.gl;this.boundsBuffer||(this.boundsBuffer=p.createVertexBuffer(this._boundsArray,tt.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(u||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new M(p,this.canvas,y.RGBA,{premultiply:!0});for(const S in this.tiles){const C=this.tiles[S];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const u of[this.canvas.width,this.canvas.height])if(isNaN(u)||u<=0)return!0;return!1}}const Ut={vector:fe,raster:ye,"raster-dem":be,geojson:et,video:Rt,image:wt,canvas:Qt};function vr(b,u){const p=o.create();return o.translate(p,p,[1,1,0]),o.scale(p,p,[.5*b.width,.5*b.height,1]),o.multiply(p,p,b.calculatePosMatrix(u.toUnwrapped()))}function yr(b,u,p,y,S,C){const k=function(X,J,he){if(X)for(const se of X){const ue=J[se];if(ue&&ue.source===he&&ue.type==="fill-extrusion")return!0}else for(const se in J){const ue=J[se];if(ue.source===he&&ue.type==="fill-extrusion")return!0}return!1}(S&&S.layers,u,b.id),z=C.maxPitchScaleFactor(),B=b.tilesIn(y,z,k);B.sort($e);const V=[];for(const X of B)V.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(u,p,b._state,X.queryGeometry,X.cameraQueryGeometry,X.scale,S,C,z,vr(b.transform,X.tileID))});const H=function(X){const J={},he={};for(const se of X){const ue=se.queryResults,we=se.wrappedTileID,Ae=he[we]=he[we]||{};for(const Me in ue){const de=ue[Me],Re=Ae[Me]=Ae[Me]||{},ke=J[Me]=J[Me]||[];for(const je of de)Re[je.featureIndex]||(Re[je.featureIndex]=!0,ke.push(je))}}return J}(V);for(const X in H)H[X].forEach(J=>{const he=J.feature,se=b.getFeatureState(he.layer["source-layer"],he.id);he.source=he.layer.source,he.layer["source-layer"]&&(he.sourceLayer=he.layer["source-layer"]),he.state=se});return H}function $e(b,u){const p=b.tileID,y=u.tileID;return p.overscaledZ-y.overscaledZ||p.canonical.y-y.canonical.y||p.wrap-y.wrap||p.canonical.x-y.canonical.x}class pt{constructor(u,p){this.tileID=u,this.uid=o.uniqueId(),this.uses=0,this.tileSize=p,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(u){const p=u+this.timeAdded;p<o.exported.now()||this.fadeEndTime&&p<this.fadeEndTime||(this.fadeEndTime=p)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(u){this.demTexture&&u.saveTileTexture(this.demTexture),this.textures.forEach(p=>u.saveTileTexture(p)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(u,p,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",u){u.featureIndex&&(this.latestFeatureIndex=u.featureIndex,u.rawTileData?(this.latestRawTileData=u.rawTileData,this.latestFeatureIndex.rawTileData=u.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=u.collisionBoxArray,this.buckets=function(S,C){const k={};if(!C)return k;for(const z of S){const B=z.layerIds.map(V=>C.getLayer(V)).filter(Boolean);if(B.length!==0){z.layers=B,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(V=>B.filter(H=>H.id===V)[0]));for(const V of B)k[V.id]=z}}return k}(u.buckets,p.style),this.hasSymbolBuckets=!1;for(const S in this.buckets){const C=this.buckets[S];if(C instanceof o.SymbolBucket){if(this.hasSymbolBuckets=!0,!y)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const S in this.buckets){const C=this.buckets[S];if(C instanceof o.SymbolBucket&&C.hasRTLText){this.hasRTLText=!0,o.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const S in this.buckets){const C=this.buckets[S];this.queryPadding=Math.max(this.queryPadding,p.style.getLayer(S).queryRadius(C))}u.imageAtlas&&(this.imageAtlas=u.imageAtlas),u.glyphAtlasImage&&(this.glyphAtlasImage=u.glyphAtlasImage)}else this.collisionBoxArray=new o.CollisionBoxArray}unloadVectorData(){for(const u in this.buckets)this.buckets[u].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(u){return this.buckets[u.id]}upload(u){for(const y in this.buckets){const S=this.buckets[y];S.uploadPending()&&S.upload(u)}const p=u.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new M(u,this.imageAtlas.image,p.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new M(u,this.glyphAtlasImage,p.ALPHA),this.glyphAtlasImage=null)}prepare(u){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(u,this.imageAtlasTexture)}queryRenderedFeatures(u,p,y,S,C,k,z,B,V,H){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:S,cameraQueryGeometry:C,scale:k,tileSize:this.tileSize,pixelPosMatrix:H,transform:B,params:z,queryPadding:this.queryPadding*V},u,p,y):{}}querySourceFeatures(u,p){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const S=y.loadVTLayers(),C=p?p.sourceLayer:"",k=S._geojsonTileLayer||S[C];if(!k)return;const z=o.createFilter(p&&p.filter),{z:B,x:V,y:H}=this.tileID.canonical,X={z:B,x:V,y:H};for(let J=0;J<k.length;J++){const he=k.feature(J);if(z.needGeometry){const we=o.toEvaluationFeature(he,!0);if(!z.filter(new o.EvaluationParameters(this.tileID.overscaledZ),we,this.tileID.canonical))continue}else if(!z.filter(new o.EvaluationParameters(this.tileID.overscaledZ),he))continue;const se=y.getId(he,C),ue=new o.GeoJSONFeature(he,B,V,H,se);ue.tile=X,u.push(ue)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(u){const p=this.expirationTime;if(u.cacheControl){const y=o.parseCacheControl(u.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else u.expires&&(this.expirationTime=new Date(u.expires).getTime());if(this.expirationTime){const y=Date.now();let S=!1;if(this.expirationTime>y)S=!1;else if(p)if(this.expirationTime<p)S=!0;else{const C=this.expirationTime-p;C?this.expirationTime=y+Math.max(C,3e4):S=!0}else S=!0;S?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(u,p){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(u).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const S in this.buckets){if(!p.style.hasLayer(S))continue;const C=this.buckets[S],k=C.layers[0].sourceLayer||"_geojsonTileLayer",z=y[k],B=u[k];if(!z||!B||Object.keys(B).length===0)continue;C.update(B,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const V=p&&p.style&&p.style.getLayer(S);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(C)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(u){this.symbolFadeHoldUntil=o.exported.now()+u}setDependencies(u,p){const y={};for(const S of p)y[S]=!0;this.dependencies[u]=y}hasDependency(u,p){for(const y of u){const S=this.dependencies[y];if(S){for(const C of p)if(S[C])return!0}}return!1}}class it{constructor(u,p){this.max=u,this.onRemove=p,this.reset()}reset(){for(const u in this.data)for(const p of this.data[u])p.timeout&&clearTimeout(p.timeout),this.onRemove(p.value);return this.data={},this.order=[],this}add(u,p,y){const S=u.wrapped().key;this.data[S]===void 0&&(this.data[S]=[]);const C={value:p,timeout:void 0};if(y!==void 0&&(C.timeout=setTimeout(()=>{this.remove(u,C)},y)),this.data[S].push(C),this.order.push(S),this.order.length>this.max){const k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this}has(u){return u.wrapped().key in this.data}getAndRemove(u){return this.has(u)?this._getAndRemoveByKey(u.wrapped().key):null}_getAndRemoveByKey(u){const p=this.data[u].shift();return p.timeout&&clearTimeout(p.timeout),this.data[u].length===0&&delete this.data[u],this.order.splice(this.order.indexOf(u),1),p.value}getByKey(u){const p=this.data[u];return p?p[0].value:null}get(u){return this.has(u)?this.data[u.wrapped().key][0].value:null}remove(u,p){if(!this.has(u))return this;const y=u.wrapped().key,S=p===void 0?0:this.data[y].indexOf(p),C=this.data[y][S];return this.data[y].splice(S,1),C.timeout&&clearTimeout(C.timeout),this.data[y].length===0&&delete this.data[y],this.onRemove(C.value),this.order.splice(this.order.indexOf(y),1),this}setMaxSize(u){for(this.max=u;this.order.length>this.max;){const p=this._getAndRemoveByKey(this.order[0]);p&&this.onRemove(p)}return this}filter(u){const p=[];for(const y in this.data)for(const S of this.data[y])u(S.value)||p.push(S);for(const y of p)this.remove(y.value.tileID,y)}}class dt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(u,p,y){const S=String(p);if(this.stateChanges[u]=this.stateChanges[u]||{},this.stateChanges[u][S]=this.stateChanges[u][S]||{},o.extend(this.stateChanges[u][S],y),this.deletedStates[u]===null){this.deletedStates[u]={};for(const C in this.state[u])C!==S&&(this.deletedStates[u][C]=null)}else if(this.deletedStates[u]&&this.deletedStates[u][S]===null){this.deletedStates[u][S]={};for(const C in this.state[u][S])y[C]||(this.deletedStates[u][S][C]=null)}else for(const C in y)this.deletedStates[u]&&this.deletedStates[u][S]&&this.deletedStates[u][S][C]===null&&delete this.deletedStates[u][S][C]}removeFeatureState(u,p,y){if(this.deletedStates[u]===null)return;const S=String(p);if(this.deletedStates[u]=this.deletedStates[u]||{},y&&p!==void 0)this.deletedStates[u][S]!==null&&(this.deletedStates[u][S]=this.deletedStates[u][S]||{},this.deletedStates[u][S][y]=null);else if(p!==void 0)if(this.stateChanges[u]&&this.stateChanges[u][S])for(y in this.deletedStates[u][S]={},this.stateChanges[u][S])this.deletedStates[u][S][y]=null;else this.deletedStates[u][S]=null;else this.deletedStates[u]=null}getState(u,p){const y=String(p),S=o.extend({},(this.state[u]||{})[y],(this.stateChanges[u]||{})[y]);if(this.deletedStates[u]===null)return{};if(this.deletedStates[u]){const C=this.deletedStates[u][p];if(C===null)return{};for(const k in C)delete S[k]}return S}initializeTileState(u,p){u.setFeatureState(this.state,p)}coalesceChanges(u,p){const y={};for(const S in this.stateChanges){this.state[S]=this.state[S]||{};const C={};for(const k in this.stateChanges[S])this.state[S][k]||(this.state[S][k]={}),o.extend(this.state[S][k],this.stateChanges[S][k]),C[k]=this.state[S][k];y[S]=C}for(const S in this.deletedStates){this.state[S]=this.state[S]||{};const C={};if(this.deletedStates[S]===null)for(const k in this.state[S])C[k]={},this.state[S][k]={};else for(const k in this.deletedStates[S]){if(this.deletedStates[S][k]===null)this.state[S][k]={};else for(const z of Object.keys(this.deletedStates[S][k]))delete this.state[S][k][z];C[k]=this.state[S][k]}y[S]=y[S]||{},o.extend(y[S],C)}if(this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0)for(const S in u)u[S].setFeatureState(y,p)}}class Dt extends o.Evented{constructor(u,p,y){super(),this.id=u,this.dispatcher=y,this.on("data",S=>{S.dataType==="source"&&S.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&S.dataType==="source"&&S.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(S,C,k,z){const B=new Ut[C.type](S,C,k,z);if(B.id!==S)throw new Error(`Expected Source id to be ${S} instead of ${B.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],B),B}(u,p,y,this),this._tiles={},this._cache=new it(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new dt}onAdd(u){this.map=u,this._maxTileCacheSize=u?u._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(u)}onRemove(u){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(u)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const u in this._tiles){const p=this._tiles[u];if(p.state!=="loaded"&&p.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const u=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,u&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(u,p){return this._source.loadTile(u,p)}_unloadTile(u){if(this._source.unloadTile)return this._source.unloadTile(u,()=>{})}_abortTile(u){this._source.abortTile&&this._source.abortTile(u,()=>{}),this._source.fire(new o.Event("dataabort",{tile:u,coord:u.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(u){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const p in this._tiles){const y=this._tiles[p];y.upload(u),y.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(u=>u.tileID).sort(qt).map(u=>u.key)}getRenderableIds(u){const p=[];for(const y in this._tiles)this._isIdRenderable(y,u)&&p.push(this._tiles[y]);return u?p.sort((y,S)=>{const C=y.tileID,k=S.tileID,z=new o.pointGeometry(C.canonical.x,C.canonical.y)._rotate(this.transform.angle),B=new o.pointGeometry(k.canonical.x,k.canonical.y)._rotate(this.transform.angle);return C.overscaledZ-k.overscaledZ||B.y-z.y||B.x-z.x}).map(y=>y.tileID.key):p.map(y=>y.tileID).sort(qt).map(y=>y.key)}hasRenderableParent(u){const p=this.findLoadedParent(u,0);return!!p&&this._isIdRenderable(p.tileID.key)}_isIdRenderable(u,p){return this._tiles[u]&&this._tiles[u].hasData()&&!this._coveredTiles[u]&&(p||!this._tiles[u].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)this._tiles[u].state!=="errored"&&this._reloadTile(u,"reloading")}}_reloadTile(u,p){const y=this._tiles[u];y&&(y.state!=="loading"&&(y.state=p),this._loadTile(y,this._tileLoaded.bind(this,y,u,p)))}_tileLoaded(u,p,y,S){if(S)return u.state="errored",void(S.status!==404?this._source.fire(new o.ErrorEvent(S,{tile:u})):this.update(this.transform,this.terrain));u.timeAdded=o.exported.now(),y==="expired"&&(u.refreshedUponExpiration=!0),this._setTileReloadTimer(p,u),this.getSource().type==="raster-dem"&&u.dem&&this._backfillDEM(u),this._state.initializeTileState(u,this.map?this.map.painter:null),u.aborted||this._source.fire(new o.Event("data",{dataType:"source",tile:u,coord:u.tileID}))}_backfillDEM(u){const p=this.getRenderableIds();for(let S=0;S<p.length;S++){const C=p[S];if(u.neighboringTiles&&u.neighboringTiles[C]){const k=this.getTileByID(C);y(u,k),y(k,u)}}function y(S,C){S.needsHillshadePrepare=!0,S.needsTerrainPrepare=!0;let k=C.tileID.canonical.x-S.tileID.canonical.x;const z=C.tileID.canonical.y-S.tileID.canonical.y,B=Math.pow(2,S.tileID.canonical.z),V=C.tileID.key;k===0&&z===0||Math.abs(z)>1||(Math.abs(k)>1&&(Math.abs(k+B)===1?k+=B:Math.abs(k-B)===1&&(k-=B)),C.dem&&S.dem&&(S.dem.backfillBorder(C.dem,k,z),S.neighboringTiles&&S.neighboringTiles[V]&&(S.neighboringTiles[V].backfilled=!0)))}}getTile(u){return this.getTileByID(u.key)}getTileByID(u){return this._tiles[u]}_retainLoadedChildren(u,p,y,S){for(const C in this._tiles){let k=this._tiles[C];if(S[C]||!k.hasData()||k.tileID.overscaledZ<=p||k.tileID.overscaledZ>y)continue;let z=k.tileID;for(;k&&k.tileID.overscaledZ>p+1;){const V=k.tileID.scaledTo(k.tileID.overscaledZ-1);k=this._tiles[V.key],k&&k.hasData()&&(z=V)}let B=z;for(;B.overscaledZ>p;)if(B=B.scaledTo(B.overscaledZ-1),u[B.key]){S[z.key]=z;break}}}findLoadedParent(u,p){if(u.key in this._loadedParentTiles){const y=this._loadedParentTiles[u.key];return y&&y.tileID.overscaledZ>=p?y:null}for(let y=u.overscaledZ-1;y>=p;y--){const S=u.scaledTo(y),C=this._getLoadedTile(S);if(C)return C}}_getLoadedTile(u){const p=this._tiles[u.key];return p&&p.hasData()?p:this._cache.getByKey(u.wrapped().key)}updateCacheSize(u){const p=Math.ceil(u.width/this._source.tileSize)+1,y=Math.ceil(u.height/this._source.tileSize)+1,S=Math.floor(p*y*5),C=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,S):S;this._cache.setMaxSize(C)}handleWrapJump(u){const p=Math.round((u-(this._prevLng===void 0?u:this._prevLng))/360);if(this._prevLng=u,p){const y={};for(const S in this._tiles){const C=this._tiles[S];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+p),y[C.tileID.key]=C}this._tiles=y;for(const S in this._timers)clearTimeout(this._timers[S]),delete this._timers[S];for(const S in this._tiles)this._setTileReloadTimer(S,this._tiles[S])}}update(u,p){if(this.transform=u,this.terrain=p,!this._sourceLoaded||this._paused)return;let y;this.updateCacheSize(u),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?y=u.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new o.OverscaledTileID(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(y=u.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:p}),this._source.hasTile&&(y=y.filter(V=>this._source.hasTile(V)))):y=[];const S=u.coveringZoomLevel(this._source),C=Math.max(S-Dt.maxOverzooming,this._source.minzoom),k=Math.max(S+Dt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const V={};for(const H of y)if(H.canonical.z>this._source.minzoom){const X=H.scaledTo(H.canonical.z-1);V[X.key]=X;const J=H.scaledTo(Math.max(this._source.minzoom,Math.min(H.canonical.z,5)));V[J.key]=J}y=y.concat(Object.values(V))}const z=this._updateRetainedTiles(y,S);if(ot(this._source.type)){const V={},H={},X=Object.keys(z);for(const J of X){const he=z[J],se=this._tiles[J];if(!se||se.fadeEndTime&&se.fadeEndTime<=o.exported.now())continue;const ue=this.findLoadedParent(he,C);ue&&(this._addTile(ue.tileID),V[ue.tileID.key]=ue.tileID),H[J]=he}this._retainLoadedChildren(H,S,k,z);for(const J in V)z[J]||(this._coveredTiles[J]=!0,z[J]=V[J]);if(p){const J={},he={};for(const se of y)this._tiles[se.key].hasData()?J[se.key]=se:he[se.key]=se;for(const se in he){const ue=he[se].children(this._source.maxzoom);this._tiles[ue[0].key]&&this._tiles[ue[1].key]&&this._tiles[ue[2].key]&&this._tiles[ue[3].key]&&(J[ue[0].key]=z[ue[0].key]=ue[0],J[ue[1].key]=z[ue[1].key]=ue[1],J[ue[2].key]=z[ue[2].key]=ue[2],J[ue[3].key]=z[ue[3].key]=ue[3],delete he[se])}for(const se in he){const ue=this.findLoadedParent(he[se],this._source.minzoom);if(ue){J[ue.tileID.key]=z[ue.tileID.key]=ue.tileID;for(const we in J)J[we].isChildOf(ue.tileID)&&delete J[we]}}for(const se in this._tiles)J[se]||(this._coveredTiles[se]=!0)}}for(const V in z)this._tiles[V].clearFadeHold();const B=o.keysDifference(this._tiles,z);for(const V of B){const H=this._tiles[V];H.hasSymbolBuckets&&!H.holdingForFade()?H.setHoldDuration(this.map._fadeDuration):H.hasSymbolBuckets&&!H.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const u in this._tiles)this._tiles[u].holdingForFade()&&this._removeTile(u)}_updateRetainedTiles(u,p){const y={},S={},C=Math.max(p-Dt.maxOverzooming,this._source.minzoom),k=Math.max(p+Dt.maxUnderzooming,this._source.minzoom),z={};for(const B of u){const V=this._addTile(B);y[B.key]=B,V.hasData()||p<this._source.maxzoom&&(z[B.key]=B)}this._retainLoadedChildren(z,p,k,y);for(const B of u){let V=this._tiles[B.key];if(V.hasData())continue;if(p+1>this._source.maxzoom){const X=B.children(this._source.maxzoom)[0],J=this.getTile(X);if(J&&J.hasData()){y[X.key]=X;continue}}else{const X=B.children(this._source.maxzoom);if(y[X[0].key]&&y[X[1].key]&&y[X[2].key]&&y[X[3].key])continue}let H=V.wasRequested();for(let X=B.overscaledZ-1;X>=C;--X){const J=B.scaledTo(X);if(S[J.key]||(S[J.key]=!0,V=this.getTile(J),!V&&H&&(V=this._addTile(J)),V&&(y[J.key]=J,H=V.wasRequested(),V.hasData())))break}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const u in this._tiles){const p=[];let y,S=this._tiles[u].tileID;for(;S.overscaledZ>0;){if(S.key in this._loadedParentTiles){y=this._loadedParentTiles[S.key];break}p.push(S.key);const C=S.scaledTo(S.overscaledZ-1);if(y=this._getLoadedTile(C),y)break;S=C}for(const C of p)this._loadedParentTiles[C]=y}}_addTile(u){let p=this._tiles[u.key];if(p)return p;p=this._cache.getAndRemove(u),p&&(this._setTileReloadTimer(u.key,p),p.tileID=u,this._state.initializeTileState(p,this.map?this.map.painter:null),this._cacheTimers[u.key]&&(clearTimeout(this._cacheTimers[u.key]),delete this._cacheTimers[u.key],this._setTileReloadTimer(u.key,p)));const y=p;return p||(p=new pt(u,this._source.tileSize*u.overscaleFactor()),this._loadTile(p,this._tileLoaded.bind(this,p,u.key,p.state))),p.uses++,this._tiles[u.key]=p,y||this._source.fire(new o.Event("dataloading",{tile:p,coord:p.tileID,dataType:"source"})),p}_setTileReloadTimer(u,p){u in this._timers&&(clearTimeout(this._timers[u]),delete this._timers[u]);const y=p.getExpiryTimeout();y&&(this._timers[u]=setTimeout(()=>{this._reloadTile(u,"expired"),delete this._timers[u]},y))}_removeTile(u){const p=this._tiles[u];p&&(p.uses--,delete this._tiles[u],this._timers[u]&&(clearTimeout(this._timers[u]),delete this._timers[u]),p.uses>0||(p.hasData()&&p.state!=="reloading"?this._cache.add(p.tileID,p,p.getExpiryTimeout()):(p.aborted=!0,this._abortTile(p),this._unloadTile(p))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const u in this._tiles)this._removeTile(u);this._cache.reset()}tilesIn(u,p,y){const S=[],C=this.transform;if(!C)return S;const k=y?C.getCameraQueryGeometry(u):u,z=u.map(se=>C.pointCoordinate(se,this.terrain)),B=k.map(se=>C.pointCoordinate(se,this.terrain)),V=this.getIds();let H=1/0,X=1/0,J=-1/0,he=-1/0;for(const se of B)H=Math.min(H,se.x),X=Math.min(X,se.y),J=Math.max(J,se.x),he=Math.max(he,se.y);for(let se=0;se<V.length;se++){const ue=this._tiles[V[se]];if(ue.holdingForFade())continue;const we=ue.tileID,Ae=Math.pow(2,C.zoom-ue.tileID.overscaledZ),Me=p*ue.queryPadding*o.EXTENT/ue.tileSize/Ae,de=[we.getTilePoint(new o.MercatorCoordinate(H,X)),we.getTilePoint(new o.MercatorCoordinate(J,he))];if(de[0].x-Me<o.EXTENT&&de[0].y-Me<o.EXTENT&&de[1].x+Me>=0&&de[1].y+Me>=0){const Re=z.map(je=>we.getTilePoint(je)),ke=B.map(je=>we.getTilePoint(je));S.push({tile:ue,tileID:we,queryGeometry:Re,cameraQueryGeometry:ke,scale:Ae})}}return S}getVisibleCoordinates(u){const p=this.getRenderableIds(u).map(y=>this._tiles[y].tileID);for(const y of p)y.posMatrix=this.transform.calculatePosMatrix(y.toUnwrapped());return p}hasTransition(){if(this._source.hasTransition())return!0;if(ot(this._source.type))for(const u in this._tiles){const p=this._tiles[u];if(p.fadeEndTime!==void 0&&p.fadeEndTime>=o.exported.now())return!0}return!1}setFeatureState(u,p,y){this._state.updateState(u=u||"_geojsonTileLayer",p,y)}removeFeatureState(u,p,y){this._state.removeFeatureState(u=u||"_geojsonTileLayer",p,y)}getFeatureState(u,p){return this._state.getState(u=u||"_geojsonTileLayer",p)}setDependencies(u,p,y){const S=this._tiles[u];S&&S.setDependencies(p,y)}reloadTilesForDependencies(u,p){for(const y in this._tiles)this._tiles[y].hasDependency(u,p)&&this._reloadTile(y,"reloading");this._cache.filter(y=>!y.hasDependency(u,p))}}function qt(b,u){const p=Math.abs(2*b.wrap)-+(b.wrap<0),y=Math.abs(2*u.wrap)-+(u.wrap<0);return b.overscaledZ-u.overscaledZ||y-p||u.canonical.y-b.canonical.y||u.canonical.x-b.canonical.x}function ot(b){return b==="raster"||b==="image"||b==="video"}Dt.maxOverzooming=10,Dt.maxUnderzooming=3;const lt="mapboxgl_preloaded_worker_pool";class oe{constructor(){this.active={}}acquire(u){if(!this.workers)for(this.workers=[];this.workers.length<oe.workerCount;)this.workers.push(new Worker(fs.workerUrl));return this.active[u]=!0,this.workers.slice()}release(u){delete this.active[u],this.numActive()===0&&(this.workers.forEach(p=>{p.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[lt]}numActive(){return Object.keys(this.active).length}}const ve=Math.floor(o.exported.hardwareConcurrency/2);let De;function Ge(){return De||(De=new oe),De}function Xe(b,u){const p={};for(const y in b)y!=="ref"&&(p[y]=b[y]);return o.refProperties.forEach(y=>{y in u&&(p[y]=u[y])}),p}function Ye(b){b=b.slice();const u=Object.create(null);for(let p=0;p<b.length;p++)u[b[p].id]=b[p];for(let p=0;p<b.length;p++)"ref"in b[p]&&(b[p]=Xe(b[p],u[b[p].ref]));return b}oe.workerCount=Math.max(Math.min(ve,6),1);const qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Qe(b,u,p){p.push({command:qe.addSource,args:[b,u[b]]})}function ut(b,u,p){u.push({command:qe.removeSource,args:[b]}),p[b]=!0}function nt(b,u,p,y){ut(b,p,y),Qe(b,u,p)}function $t(b,u,p){let y;for(y in b[p])if(Object.prototype.hasOwnProperty.call(b[p],y)&&y!=="data"&&!g(b[p][y],u[p][y]))return!1;for(y in u[p])if(Object.prototype.hasOwnProperty.call(u[p],y)&&y!=="data"&&!g(b[p][y],u[p][y]))return!1;return!0}function Mt(b,u,p,y,S,C){let k;for(k in u=u||{},b=b||{})Object.prototype.hasOwnProperty.call(b,k)&&(g(b[k],u[k])||p.push({command:C,args:[y,k,u[k],S]}));for(k in u)Object.prototype.hasOwnProperty.call(u,k)&&!Object.prototype.hasOwnProperty.call(b,k)&&(g(b[k],u[k])||p.push({command:C,args:[y,k,u[k],S]}))}function It(b){return b.id}function Wt(b,u){return b[u.id]=u,b}class er{constructor(u,p){this.reset(u,p)}reset(u,p){this.points=u||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(p||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(u){if(this.points.length===1)return this.points[0];u=o.clamp(u,0,1);let p=1,y=this._distances[p];const S=u*this.paddedLength+this.padding;for(;y<S&&p<this._distances.length;)y=this._distances[++p];const C=p-1,k=this._distances[C],z=y-k,B=z>0?(S-k)/z:0;return this.points[C].mult(1-B).add(this.points[p].mult(B))}}function Oe(b,u){let p=!0;return b==="always"||b!=="never"&&u!=="never"||(p=!1),p}class Je{constructor(u,p,y){const S=this.boxCells=[],C=this.circleCells=[];this.xCellCount=Math.ceil(u/y),this.yCellCount=Math.ceil(p/y);for(let k=0;k<this.xCellCount*this.yCellCount;k++)S.push([]),C.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=u,this.height=p,this.xScale=this.xCellCount/u,this.yScale=this.yCellCount/p,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(u,p,y,S,C){this._forEachCell(p,y,S,C,this._insertBoxCell,this.boxUid++),this.boxKeys.push(u),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(S),this.bboxes.push(C)}insertCircle(u,p,y,S){this._forEachCell(p-S,y-S,p+S,y+S,this._insertCircleCell,this.circleUid++),this.circleKeys.push(u),this.circles.push(p),this.circles.push(y),this.circles.push(S)}_insertBoxCell(u,p,y,S,C,k){this.boxCells[C].push(k)}_insertCircleCell(u,p,y,S,C,k){this.circleCells[C].push(k)}_query(u,p,y,S,C,k,z){if(y<0||u>this.width||S<0||p>this.height)return[];const B=[];if(u<=0&&p<=0&&this.width<=y&&this.height<=S){if(C)return[{key:null,x1:u,y1:p,x2:y,y2:S}];for(let V=0;V<this.boxKeys.length;V++)B.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const H=this.circles[3*V],X=this.circles[3*V+1],J=this.circles[3*V+2];B.push({key:this.circleKeys[V],x1:H-J,y1:X-J,x2:H+J,y2:X+J})}}else this._forEachCell(u,p,y,S,this._queryCell,B,{hitTest:C,overlapMode:k,seenUids:{box:{},circle:{}}},z);return B}query(u,p,y,S){return this._query(u,p,y,S,!1,null)}hitTest(u,p,y,S,C,k){return this._query(u,p,y,S,!0,C,k).length>0}hitTestCircle(u,p,y,S,C){const k=u-y,z=u+y,B=p-y,V=p+y;if(z<0||k>this.width||V<0||B>this.height)return!1;const H=[];return this._forEachCell(k,B,z,V,this._queryCellCircle,H,{hitTest:!0,overlapMode:S,circle:{x:u,y:p,radius:y},seenUids:{box:{},circle:{}}},C),H.length>0}_queryCell(u,p,y,S,C,k,z,B){const{seenUids:V,hitTest:H,overlapMode:X}=z,J=this.boxCells[C];if(J!==null){const se=this.bboxes;for(const ue of J)if(!V.box[ue]){V.box[ue]=!0;const we=4*ue,Ae=this.boxKeys[ue];if(u<=se[we+2]&&p<=se[we+3]&&y>=se[we+0]&&S>=se[we+1]&&(!B||B(Ae))&&(!H||!Oe(X,Ae.overlapMode))&&(k.push({key:Ae,x1:se[we],y1:se[we+1],x2:se[we+2],y2:se[we+3]}),H))return!0}}const he=this.circleCells[C];if(he!==null){const se=this.circles;for(const ue of he)if(!V.circle[ue]){V.circle[ue]=!0;const we=3*ue,Ae=this.circleKeys[ue];if(this._circleAndRectCollide(se[we],se[we+1],se[we+2],u,p,y,S)&&(!B||B(Ae))&&(!H||!Oe(X,Ae.overlapMode))){const Me=se[we],de=se[we+1],Re=se[we+2];if(k.push({key:Ae,x1:Me-Re,y1:de-Re,x2:Me+Re,y2:de+Re}),H)return!0}}}return!1}_queryCellCircle(u,p,y,S,C,k,z,B){const{circle:V,seenUids:H,overlapMode:X}=z,J=this.boxCells[C];if(J!==null){const se=this.bboxes;for(const ue of J)if(!H.box[ue]){H.box[ue]=!0;const we=4*ue,Ae=this.boxKeys[ue];if(this._circleAndRectCollide(V.x,V.y,V.radius,se[we+0],se[we+1],se[we+2],se[we+3])&&(!B||B(Ae))&&!Oe(X,Ae.overlapMode))return k.push(!0),!0}}const he=this.circleCells[C];if(he!==null){const se=this.circles;for(const ue of he)if(!H.circle[ue]){H.circle[ue]=!0;const we=3*ue,Ae=this.circleKeys[ue];if(this._circlesCollide(se[we],se[we+1],se[we+2],V.x,V.y,V.radius)&&(!B||B(Ae))&&!Oe(X,Ae.overlapMode))return k.push(!0),!0}}}_forEachCell(u,p,y,S,C,k,z,B){const V=this._convertToXCellCoord(u),H=this._convertToYCellCoord(p),X=this._convertToXCellCoord(y),J=this._convertToYCellCoord(S);for(let he=V;he<=X;he++)for(let se=H;se<=J;se++)if(C.call(this,u,p,y,S,this.xCellCount*se+he,k,z,B))return}_convertToXCellCoord(u){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(u*this.xScale)))}_convertToYCellCoord(u){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(u*this.yScale)))}_circlesCollide(u,p,y,S,C,k){const z=S-u,B=C-p,V=y+k;return V*V>z*z+B*B}_circleAndRectCollide(u,p,y,S,C,k,z){const B=(k-S)/2,V=Math.abs(u-(S+B));if(V>B+y)return!1;const H=(z-C)/2,X=Math.abs(p-(C+H));if(X>H+y)return!1;if(V<=B||X<=H)return!0;const J=V-B,he=X-H;return J*J+he*he<=y*y}}function Mr(b,u,p,y,S){const C=o.create();return u?(o.scale(C,C,[1/S,1/S,1]),p||o.rotateZ(C,C,y.angle)):o.multiply(C,y.labelPlaneMatrix,b),C}function xn(b,u,p,y,S){if(u){const C=o.clone(b);return o.scale(C,C,[S,S,1]),p||o.rotateZ(C,C,-y.angle),C}return y.glCoordMatrix}function hr(b,u,p){let y;p?(y=[b.x,b.y,p(b.x,b.y),1],o.transformMat4(y,y,u)):(y=[b.x,b.y,0,1],oo(y,y,u));const S=y[3];return{point:new o.pointGeometry(y[0]/S,y[1]/S),signedDistanceFromCamera:S}}function di(b,u){return .5+b/u*.5}function Bn(b,u){const p=b[0]/b[3],y=b[1]/b[3];return p>=-u[0]&&p<=u[0]&&y>=-u[1]&&y<=u[1]}function ii(b,u,p,y,S,C,k,z,B,V){const H=y?b.textSizeData:b.iconSizeData,X=o.evaluateSizeForZoom(H,p.transform.zoom),J=[256/p.width*2+1,256/p.height*2+1],he=y?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;he.clear();const se=b.lineVertexArray,ue=y?b.text.placedSymbolArray:b.icon.placedSymbolArray,we=p.transform.width/p.transform.height;let Ae=!1;for(let Me=0;Me<ue.length;Me++){const de=ue.get(Me);if(de.hidden||de.writingMode===o.WritingMode.vertical&&!Ae){rr(de.numGlyphs,he);continue}let Re;if(Ae=!1,V?(Re=[de.anchorX,de.anchorY,V(de.anchorX,de.anchorY),1],o.transformMat4(Re,Re,u)):(Re=[de.anchorX,de.anchorY,0,1],oo(Re,Re,u)),!Bn(Re,J)){rr(de.numGlyphs,he);continue}const ke=di(p.transform.cameraToCenterDistance,Re[3]),je=o.evaluateSizeForFeature(H,X,de),He=k?je/ke:je*ke,rt=new o.pointGeometry(de.anchorX,de.anchorY),Ue=hr(rt,S,V).point,St={},mt=ur(de,He,!1,z,u,S,C,b.glyphOffsetArray,se,he,Ue,rt,St,we,B,V);Ae=mt.useVertical,(mt.notEnoughRoom||Ae||mt.needsFlipping&&ur(de,He,!0,z,u,S,C,b.glyphOffsetArray,se,he,Ue,rt,St,we,B,V).notEnoughRoom)&&rr(de.numGlyphs,he)}y?b.text.dynamicLayoutVertexBuffer.updateData(he):b.icon.dynamicLayoutVertexBuffer.updateData(he)}function wn(b,u,p,y,S,C,k,z,B,V,H,X,J){const he=z.glyphStartIndex+z.numGlyphs,se=z.lineStartIndex,ue=z.lineStartIndex+z.lineLength,we=u.getoffsetX(z.glyphStartIndex),Ae=u.getoffsetX(he-1),Me=Kn(b*we,p,y,S,C,k,z.segment,se,ue,B,V,H,X,J);if(!Me)return null;const de=Kn(b*Ae,p,y,S,C,k,z.segment,se,ue,B,V,H,X,J);return de?{first:Me,last:de}:null}function st(b,u,p,y){return b===o.WritingMode.horizontal&&Math.abs(p.y-u.y)>Math.abs(p.x-u.x)*y?{useVertical:!0}:(b===o.WritingMode.vertical?u.y<p.y:u.x>p.x)?{needsFlipping:!0}:null}function ur(b,u,p,y,S,C,k,z,B,V,H,X,J,he,se,ue){const we=u/24,Ae=b.lineOffsetX*we,Me=b.lineOffsetY*we;let de;if(b.numGlyphs>1){const Re=b.glyphStartIndex+b.numGlyphs,ke=b.lineStartIndex,je=b.lineStartIndex+b.lineLength,He=wn(we,z,Ae,Me,p,H,X,b,B,C,J,se,ue);if(!He)return{notEnoughRoom:!0};const rt=hr(He.first.point,k,ue).point,Ue=hr(He.last.point,k,ue).point;if(y&&!p){const St=st(b.writingMode,rt,Ue,he);if(St)return St}de=[He.first];for(let St=b.glyphStartIndex+1;St<Re-1;St++)de.push(Kn(we*z.getoffsetX(St),Ae,Me,p,H,X,b.segment,ke,je,B,C,J,se,ue));de.push(He.last)}else{if(y&&!p){const ke=hr(X,S,ue).point,je=b.lineStartIndex+b.segment+1,He=new o.pointGeometry(B.getx(je),B.gety(je)),rt=hr(He,S,ue),Ue=rt.signedDistanceFromCamera>0?rt.point:or(X,He,ke,1,S,ue),St=st(b.writingMode,ke,Ue,he);if(St)return St}const Re=Kn(we*z.getoffsetX(b.glyphStartIndex),Ae,Me,p,H,X,b.segment,b.lineStartIndex,b.lineStartIndex+b.lineLength,B,C,J,se,ue);if(!Re)return{notEnoughRoom:!0};de=[Re]}for(const Re of de)o.addDynamicAttributes(V,Re.point,Re.angle);return{}}function or(b,u,p,y,S,C){const k=hr(b.add(b.sub(u)._unit()),S,C).point,z=p.sub(k);return p.add(z._mult(y/z.mag()))}function Kn(b,u,p,y,S,C,k,z,B,V,H,X,J,he){const se=y?b-u:b+u;let ue=se>0?1:-1,we=0;y&&(ue*=-1,we=Math.PI),ue<0&&(we+=Math.PI);let Ae=ue>0?z+k:z+k+1,Me=S,de=S,Re=0,ke=0;const je=Math.abs(se),He=[];for(;Re+ke<=je;){if(Ae+=ue,Ae<z||Ae>=B)return null;if(de=Me,He.push(Me),Me=X[Ae],Me===void 0){const Tt=new o.pointGeometry(V.getx(Ae),V.gety(Ae)),sr=hr(Tt,H,he);if(sr.signedDistanceFromCamera>0)Me=X[Ae]=sr.point;else{const dr=Ae-ue;Me=or(Re===0?C:new o.pointGeometry(V.getx(dr),V.gety(dr)),Tt,de,je-Re+1,H,he)}}Re+=ke,ke=de.dist(Me)}const rt=(je-Re)/ke,Ue=Me.sub(de),St=Ue.mult(rt)._add(de);St._add(Ue._unit()._perp()._mult(p*ue));const mt=we+Math.atan2(Me.y-de.y,Me.x-de.x);return He.push(St),{point:St,angle:J?mt:0,path:He}}const Mo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rr(b,u){for(let p=0;p<b;p++){const y=u.length;u.resize(y+4),u.float32.set(Mo,3*y)}}function oo(b,u,p){const y=u[0],S=u[1];return b[0]=p[0]*y+p[4]*S+p[12],b[1]=p[1]*y+p[5]*S+p[13],b[3]=p[3]*y+p[7]*S+p[15],b}const $n=100;class Ws{constructor(u,p=new Je(u.width+200,u.height+200,25),y=new Je(u.width+200,u.height+200,25)){this.transform=u,this.grid=p,this.ignoredGrid=y,this.pitchfactor=Math.cos(u._pitch)*u.cameraToCenterDistance,this.screenRightBoundary=u.width+$n,this.screenBottomBoundary=u.height+$n,this.gridRightBoundary=u.width+200,this.gridBottomBoundary=u.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(u,p,y,S,C,k){const z=this.projectAndGetPerspectiveRatio(S,u.anchorPointX,u.anchorPointY,k),B=y*z.perspectiveRatio,V=u.x1*B+z.point.x,H=u.y1*B+z.point.y,X=u.x2*B+z.point.x,J=u.y2*B+z.point.y;return!this.isInsideGrid(V,H,X,J)||p!=="always"&&this.grid.hitTest(V,H,X,J,p,C)||z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[V,H,X,J],offscreen:this.isOffscreen(V,H,X,J)}}placeCollisionCircles(u,p,y,S,C,k,z,B,V,H,X,J,he,se){const ue=[],we=new o.pointGeometry(p.anchorX,p.anchorY),Ae=hr(we,k,se),Me=di(this.transform.cameraToCenterDistance,Ae.signedDistanceFromCamera),de=(H?C/Me:C*Me)/o.ONE_EM,Re=hr(we,z,se).point,ke=wn(de,S,p.lineOffsetX*de,p.lineOffsetY*de,!1,Re,we,p,y,z,{},!1,se);let je=!1,He=!1,rt=!0;if(ke){const Ue=.5*J*Me+he,St=new o.pointGeometry(-100,-100),mt=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),Tt=new er,sr=ke.first,dr=ke.last;let jt=[];for(let br=sr.path.length-1;br>=1;br--)jt.push(sr.path[br]);for(let br=1;br<dr.path.length;br++)jt.push(dr.path[br]);const Br=2.5*Ue;if(B){const br=jt.map(Tr=>hr(Tr,B,se));jt=br.some(Tr=>Tr.signedDistanceFromCamera<=0)?[]:br.map(Tr=>Tr.point)}let Fr=[];if(jt.length>0){const br=jt[0].clone(),Tr=jt[0].clone();for(let jr=1;jr<jt.length;jr++)br.x=Math.min(br.x,jt[jr].x),br.y=Math.min(br.y,jt[jr].y),Tr.x=Math.max(Tr.x,jt[jr].x),Tr.y=Math.max(Tr.y,jt[jr].y);Fr=br.x>=St.x&&Tr.x<=mt.x&&br.y>=St.y&&Tr.y<=mt.y?[jt]:Tr.x<St.x||br.x>mt.x||Tr.y<St.y||br.y>mt.y?[]:o.clipLine([jt],St.x,St.y,mt.x,mt.y)}for(const br of Fr){Tt.reset(br,.25*Ue);let Tr=0;Tr=Tt.length<=.5*Ue?1:Math.ceil(Tt.paddedLength/Br)+1;for(let jr=0;jr<Tr;jr++){const Hn=jr/Math.max(Tr-1,1),La=Tt.lerp(Hn),ga=La.x+$n,Oa=La.y+$n;ue.push(ga,Oa,Ue,0);const Bo=ga-Ue,na=Oa-Ue,Ti=ga+Ue,uo=Oa+Ue;if(rt=rt&&this.isOffscreen(Bo,na,Ti,uo),He=He||this.isInsideGrid(Bo,na,Ti,uo),u!=="always"&&this.grid.hitTestCircle(ga,Oa,Ue,u,X)&&(je=!0,!V))return{circles:[],offscreen:!1,collisionDetected:je}}}}return{circles:!V&&je||!He||Me<this.perspectiveRatioCutoff?[]:ue,offscreen:rt,collisionDetected:je}}queryRenderedSymbols(u){if(u.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const p=[];let y=1/0,S=1/0,C=-1/0,k=-1/0;for(const H of u){const X=new o.pointGeometry(H.x+$n,H.y+$n);y=Math.min(y,X.x),S=Math.min(S,X.y),C=Math.max(C,X.x),k=Math.max(k,X.y),p.push(X)}const z=this.grid.query(y,S,C,k).concat(this.ignoredGrid.query(y,S,C,k)),B={},V={};for(const H of z){const X=H.key;if(B[X.bucketInstanceId]===void 0&&(B[X.bucketInstanceId]={}),B[X.bucketInstanceId][X.featureIndex])continue;const J=[new o.pointGeometry(H.x1,H.y1),new o.pointGeometry(H.x2,H.y1),new o.pointGeometry(H.x2,H.y2),new o.pointGeometry(H.x1,H.y2)];o.polygonIntersectsPolygon(p,J)&&(B[X.bucketInstanceId][X.featureIndex]=!0,V[X.bucketInstanceId]===void 0&&(V[X.bucketInstanceId]=[]),V[X.bucketInstanceId].push(X.featureIndex))}return V}insertCollisionBox(u,p,y,S,C,k){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:S,featureIndex:C,collisionGroupID:k,overlapMode:p},u[0],u[1],u[2],u[3])}insertCollisionCircles(u,p,y,S,C,k){const z=y?this.ignoredGrid:this.grid,B={bucketInstanceId:S,featureIndex:C,collisionGroupID:k,overlapMode:p};for(let V=0;V<u.length;V+=4)z.insertCircle(B,u[V],u[V+1],u[V+2])}projectAndGetPerspectiveRatio(u,p,y,S){let C;return S?(C=[p,y,S(p,y),1],o.transformMat4(C,C,u)):(C=[p,y,0,1],oo(C,C,u)),{point:new o.pointGeometry((C[0]/C[3]+1)/2*this.transform.width+$n,(-C[1]/C[3]+1)/2*this.transform.height+$n),perspectiveRatio:.5+this.transform.cameraToCenterDistance/C[3]*.5}}isOffscreen(u,p,y,S){return y<$n||u>=this.screenRightBoundary||S<$n||p>this.screenBottomBoundary}isInsideGrid(u,p,y,S){return y>=0&&u<this.gridRightBoundary&&S>=0&&p<this.gridBottomBoundary}getViewportMatrix(){const u=o.identity([]);return o.translate(u,u,[-100,-100,0]),u}}function Dn(b,u,p){return u*(o.EXTENT/(b.tileSize*Math.pow(2,p-b.tileID.overscaledZ)))}class pi{constructor(u,p,y,S){this.opacity=u?Math.max(0,Math.min(1,u.opacity+(u.placed?p:-p))):S&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class $r{constructor(u,p,y,S,C){this.text=new pi(u?u.text:null,p,y,C),this.icon=new pi(u?u.icon:null,p,S,C)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Zs{constructor(u,p,y){this.text=u,this.icon=p,this.skipFade=y}}class Ma{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class as{constructor(u,p,y,S,C){this.bucketInstanceId=u,this.featureIndex=p,this.sourceLayerIndex=y,this.bucketIndex=S,this.tileID=C}}class os{constructor(u){this.crossSourceCollisions=u,this.maxGroupID=0,this.collisionGroups={}}get(u){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[u]){const p=++this.maxGroupID;this.collisionGroups[u]={ID:p,predicate:y=>y.collisionGroupID===p}}return this.collisionGroups[u]}}function Xs(b,u,p,y,S){const{horizontalAlign:C,verticalAlign:k}=o.getAnchorAlignment(b),z=-(C-.5)*u,B=-(k-.5)*p,V=o.evaluateVariableOffset(b,y);return new o.pointGeometry(z+V[0]*S,B+V[1]*S)}function ss(b,u,p,y,S,C){const{x1:k,x2:z,y1:B,y2:V,anchorPointX:H,anchorPointY:X}=b,J=new o.pointGeometry(u,p);return y&&J._rotate(S?C:-C),{x1:k+J.x,y1:B+J.y,x2:z+J.x,y2:V+J.y,anchorPointX:H,anchorPointY:X}}class ae{constructor(u,p,y,S,C){this.transform=u.clone(),this.terrain=p,this.collisionIndex=new Ws(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new os(S),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(u,p,y,S){const C=y.getBucket(p),k=y.latestFeatureIndex;if(!C||!k||p.id!==C.layerIds[0])return;const z=y.collisionBoxArray,B=C.layers[0].layout,V=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),H=y.tileSize/o.EXTENT,X=this.transform.calculatePosMatrix(y.tileID.toUnwrapped()),J=B.get("text-pitch-alignment")==="map",he=B.get("text-rotation-alignment")==="map",se=Dn(y,1,this.transform.zoom),ue=Mr(X,J,he,this.transform,se);let we=null;if(J){const Me=xn(X,J,he,this.transform,se);we=o.multiply([],this.transform.labelPlaneMatrix,Me)}this.retainedQueryData[C.bucketInstanceId]=new as(C.bucketInstanceId,k,C.sourceLayerIndex,C.index,y.tileID);const Ae={bucket:C,layout:B,posMatrix:X,textLabelPlaneMatrix:ue,labelToScreenMatrix:we,scale:V,textPixelRatio:H,holdingForFade:y.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(C.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(C.sourceID)};if(S)for(const Me of C.sortKeyRanges){const{sortKey:de,symbolInstanceStart:Re,symbolInstanceEnd:ke}=Me;u.push({sortKey:de,symbolInstanceStart:Re,symbolInstanceEnd:ke,parameters:Ae})}else u.push({symbolInstanceStart:0,symbolInstanceEnd:C.symbolInstances.length,parameters:Ae})}attemptAnchorPlacement(u,p,y,S,C,k,z,B,V,H,X,J,he,se,ue,we){const Ae=[J.textOffset0,J.textOffset1],Me=Xs(u,y,S,Ae,C),de=this.collisionIndex.placeCollisionBox(ss(p,Me.x,Me.y,k,z,this.transform.angle),X,B,V,H.predicate,we);if((!ue||this.collisionIndex.placeCollisionBox(ss(ue,Me.x,Me.y,k,z,this.transform.angle),X,B,V,H.predicate,we).box.length!==0)&&de.box.length>0){let Re;if(this.prevPlacement&&this.prevPlacement.variableOffsets[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID]&&this.prevPlacement.placements[J.crossTileID].text&&(Re=this.prevPlacement.variableOffsets[J.crossTileID].anchor),J.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[J.crossTileID]={textOffset:Ae,width:y,height:S,anchor:u,textBoxScale:C,prevAnchor:Re},this.markUsedJustification(he,u,J,se),he.allowVerticalPlacement&&(this.markUsedOrientation(he,se,J),this.placedOrientations[J.crossTileID]=se),{shift:Me,placedGlyphBoxes:de}}}placeLayerBucketPart(u,p,y){const{bucket:S,layout:C,posMatrix:k,textLabelPlaneMatrix:z,labelToScreenMatrix:B,textPixelRatio:V,holdingForFade:H,collisionBoxArray:X,partiallyEvaluatedTextSize:J,collisionGroup:he}=u.parameters,se=C.get("text-optional"),ue=C.get("icon-optional"),we=o.getOverlapMode(C,"text-overlap","text-allow-overlap"),Ae=we==="always",Me=o.getOverlapMode(C,"icon-overlap","icon-allow-overlap"),de=Me==="always",Re=C.get("text-rotation-alignment")==="map",ke=C.get("text-pitch-alignment")==="map",je=C.get("icon-text-fit")!=="none",He=C.get("symbol-z-order")==="viewport-y",rt=Ae&&(de||!S.hasIconData()||ue),Ue=de&&(Ae||!S.hasTextData()||se);!S.collisionArrays&&X&&S.deserializeCollisionBoxes(X);const St=(mt,Tt)=>{if(p[mt.crossTileID])return;if(H)return void(this.placements[mt.crossTileID]=new Zs(!1,!1,!1));let sr=!1,dr=!1,jt=!0,Br=null,Fr={box:null,offscreen:null},br={box:null,offscreen:null},Tr=null,jr=null,Hn=null,La=0,ga=0,Oa=0;Tt.textFeatureIndex?La=Tt.textFeatureIndex:mt.useRuntimeCollisionCircles&&(La=mt.featureIndex),Tt.verticalTextFeatureIndex&&(ga=Tt.verticalTextFeatureIndex);const Bo=this.retainedQueryData[S.bucketInstanceId].tileID,na=this.terrain?(Fn,mr)=>this.terrain.getElevation(Bo,Fn,mr):null;for(const Fn of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const mr=Tt[Fn];mr&&(mr.elevation=na?na(mr.anchorPointX,mr.anchorPointY):0)}const Ti=Tt.textBox;if(Ti){const Fn=Rr=>{let Gn=o.WritingMode.horizontal;if(S.allowVerticalPlacement&&!Rr&&this.prevPlacement){const qn=this.prevPlacement.placedOrientations[mt.crossTileID];qn&&(this.placedOrientations[mt.crossTileID]=qn,Gn=qn,this.markUsedOrientation(S,Gn,mt))}return Gn},mr=(Rr,Gn)=>{if(S.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&Tt.verticalTextBox){for(const qn of S.writingModes)if(qn===o.WritingMode.vertical?(Fr=Gn(),br=Fr):Fr=Rr(),Fr&&Fr.box&&Fr.box.length)break}else Fr=Rr()};if(C.get("text-variable-anchor")){let Rr=C.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[mt.crossTileID]){const fn=this.prevPlacement.variableOffsets[mt.crossTileID];Rr.indexOf(fn.anchor)>0&&(Rr=Rr.filter(ia=>ia!==fn.anchor),Rr.unshift(fn.anchor))}const Gn=(fn,ia,ds)=>{const ed=fn.x2-fn.x1,ll=fn.y2-fn.y1,lv=mt.textBoxScale,td=je&&Me==="never"?ia:null;let Fo={box:[],offscreen:!1};const ps=we!=="never"?2*Rr.length:Rr.length;for(let ms=0;ms<ps;++ms){const Gc=this.attemptAnchorPlacement(Rr[ms%Rr.length],fn,ed,ll,lv,Re,ke,V,k,he,ms>=Rr.length?we:"never",mt,S,ds,td,na);if(Gc&&(Fo=Gc.placedGlyphBoxes,Fo&&Fo.box&&Fo.box.length)){sr=!0,Br=Gc.shift;break}}return Fo};mr(()=>Gn(Ti,Tt.iconBox,o.WritingMode.horizontal),()=>{const fn=Tt.verticalTextBox;return S.allowVerticalPlacement&&!(Fr&&Fr.box&&Fr.box.length)&&mt.numVerticalGlyphVertices>0&&fn?Gn(fn,Tt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Fr&&(sr=Fr.box,jt=Fr.offscreen);const qn=Fn(Fr&&Fr.box);if(!sr&&this.prevPlacement){const fn=this.prevPlacement.variableOffsets[mt.crossTileID];fn&&(this.variableOffsets[mt.crossTileID]=fn,this.markUsedJustification(S,fn.anchor,mt,qn))}}else{const Rr=(Gn,qn)=>{const fn=this.collisionIndex.placeCollisionBox(Gn,we,V,k,he.predicate,na);return fn&&fn.box&&fn.box.length&&(this.markUsedOrientation(S,qn,mt),this.placedOrientations[mt.crossTileID]=qn),fn};mr(()=>Rr(Ti,o.WritingMode.horizontal),()=>{const Gn=Tt.verticalTextBox;return S.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&Gn?Rr(Gn,o.WritingMode.vertical):{box:null,offscreen:null}}),Fn(Fr&&Fr.box&&Fr.box.length)}}if(Tr=Fr,sr=Tr&&Tr.box&&Tr.box.length>0,jt=Tr&&Tr.offscreen,mt.useRuntimeCollisionCircles){const Fn=S.text.placedSymbolArray.get(mt.centerJustifiedTextSymbolIndex),mr=o.evaluateSizeForFeature(S.textSizeData,J,Fn),Rr=C.get("text-padding");jr=this.collisionIndex.placeCollisionCircles(we,Fn,S.lineVertexArray,S.glyphOffsetArray,mr,k,z,B,y,ke,he.predicate,mt.collisionCircleDiameter,Rr,na),jr.circles.length&&jr.collisionDetected&&!y&&o.warnOnce("Collisions detected, but collision boxes are not shown"),sr=Ae||jr.circles.length>0&&!jr.collisionDetected,jt=jt&&jr.offscreen}if(Tt.iconFeatureIndex&&(Oa=Tt.iconFeatureIndex),Tt.iconBox){const Fn=mr=>{const Rr=je&&Br?ss(mr,Br.x,Br.y,Re,ke,this.transform.angle):mr;return this.collisionIndex.placeCollisionBox(Rr,Me,V,k,he.predicate,na)};br&&br.box&&br.box.length&&Tt.verticalIconBox?(Hn=Fn(Tt.verticalIconBox),dr=Hn.box.length>0):(Hn=Fn(Tt.iconBox),dr=Hn.box.length>0),jt=jt&&Hn.offscreen}const uo=se||mt.numHorizontalGlyphVertices===0&&mt.numVerticalGlyphVertices===0,Hc=ue||mt.numIconVertices===0;if(uo||Hc?Hc?uo||(dr=dr&&sr):sr=dr&&sr:dr=sr=dr&&sr,sr&&Tr&&Tr.box&&this.collisionIndex.insertCollisionBox(Tr.box,we,C.get("text-ignore-placement"),S.bucketInstanceId,br&&br.box&&ga?ga:La,he.ID),dr&&Hn&&this.collisionIndex.insertCollisionBox(Hn.box,Me,C.get("icon-ignore-placement"),S.bucketInstanceId,Oa,he.ID),jr&&(sr&&this.collisionIndex.insertCollisionCircles(jr.circles,we,C.get("text-ignore-placement"),S.bucketInstanceId,La,he.ID),y)){const Fn=S.bucketInstanceId;let mr=this.collisionCircleArrays[Fn];mr===void 0&&(mr=this.collisionCircleArrays[Fn]=new Ma);for(let Rr=0;Rr<jr.circles.length;Rr+=4)mr.circles.push(jr.circles[Rr+0]),mr.circles.push(jr.circles[Rr+1]),mr.circles.push(jr.circles[Rr+2]),mr.circles.push(jr.collisionDetected?1:0)}if(mt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(S.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[mt.crossTileID]=new Zs(sr||rt,dr||Ue,jt||S.justReloaded),p[mt.crossTileID]=!0};if(He){if(u.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const mt=S.getSortedSymbolIndexes(this.transform.angle);for(let Tt=mt.length-1;Tt>=0;--Tt){const sr=mt[Tt];St(S.symbolInstances.get(sr),S.collisionArrays[sr])}}else for(let mt=u.symbolInstanceStart;mt<u.symbolInstanceEnd;mt++)St(S.symbolInstances.get(mt),S.collisionArrays[mt]);if(y&&S.bucketInstanceId in this.collisionCircleArrays){const mt=this.collisionCircleArrays[S.bucketInstanceId];o.invert(mt.invProjMatrix,k),mt.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(u,p,y,S){let C;C=S===o.WritingMode.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(p)];const k=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const z of k)z>=0&&(u.text.placedSymbolArray.get(z).crossTileID=C>=0&&z!==C?0:y.crossTileID)}markUsedOrientation(u,p,y){const S=p===o.WritingMode.horizontal||p===o.WritingMode.horizontalOnly?p:0,C=p===o.WritingMode.vertical?p:0,k=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const z of k)u.text.placedSymbolArray.get(z).placedOrientation=S;y.verticalPlacedTextSymbolIndex&&(u.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=C)}commit(u){this.commitTime=u,this.zoomAtLastRecencyCheck=this.transform.zoom;const p=this.prevPlacement;let y=!1;this.prevZoomAdjustment=p?p.zoomAdjustment(this.transform.zoom):0;const S=p?p.symbolFadeChange(u):1,C=p?p.opacities:{},k=p?p.variableOffsets:{},z=p?p.placedOrientations:{};for(const B in this.placements){const V=this.placements[B],H=C[B];H?(this.opacities[B]=new $r(H,S,V.text,V.icon),y=y||V.text!==H.text.placed||V.icon!==H.icon.placed):(this.opacities[B]=new $r(null,S,V.text,V.icon,V.skipFade),y=y||V.text||V.icon)}for(const B in C){const V=C[B];if(!this.opacities[B]){const H=new $r(V,S,!1,!1);H.isHidden()||(this.opacities[B]=H,y=y||V.text.placed||V.icon.placed)}}for(const B in k)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=k[B]);for(const B in z)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=z[B]);if(p&&p.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=u:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=p?p.lastPlacementChangeTime:u)}updateLayerOpacities(u,p){const y={};for(const S of p){const C=S.getBucket(u);C&&S.latestFeatureIndex&&u.id===C.layerIds[0]&&this.updateBucketOpacities(C,y,S.collisionBoxArray)}}updateBucketOpacities(u,p,y){u.hasTextData()&&u.text.opacityVertexArray.clear(),u.hasIconData()&&u.icon.opacityVertexArray.clear(),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexArray.clear(),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexArray.clear();const S=u.layers[0].layout,C=new $r(null,0,!1,!1,!0),k=S.get("text-allow-overlap"),z=S.get("icon-allow-overlap"),B=S.get("text-variable-anchor"),V=S.get("text-rotation-alignment")==="map",H=S.get("text-pitch-alignment")==="map",X=S.get("icon-text-fit")!=="none",J=new $r(null,0,k&&(z||!u.hasIconData()||S.get("icon-optional")),z&&(k||!u.hasTextData()||S.get("text-optional")),!0);!u.collisionArrays&&y&&(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData())&&u.deserializeCollisionBoxes(y);const he=(se,ue,we)=>{for(let Ae=0;Ae<ue/4;Ae++)se.opacityVertexArray.emplaceBack(we)};for(let se=0;se<u.symbolInstances.length;se++){const ue=u.symbolInstances.get(se),{numHorizontalGlyphVertices:we,numVerticalGlyphVertices:Ae,crossTileID:Me}=ue;let de=this.opacities[Me];p[Me]?de=C:de||(de=J,this.opacities[Me]=de),p[Me]=!0;const Re=ue.numIconVertices>0,ke=this.placedOrientations[ue.crossTileID],je=ke===o.WritingMode.vertical,He=ke===o.WritingMode.horizontal||ke===o.WritingMode.horizontalOnly;if(we>0||Ae>0){const rt=Ee(de.text);he(u.text,we,je?Ve:rt),he(u.text,Ae,He?Ve:rt);const Ue=de.text.isHidden();[ue.rightJustifiedTextSymbolIndex,ue.centerJustifiedTextSymbolIndex,ue.leftJustifiedTextSymbolIndex].forEach(Tt=>{Tt>=0&&(u.text.placedSymbolArray.get(Tt).hidden=Ue||je?1:0)}),ue.verticalPlacedTextSymbolIndex>=0&&(u.text.placedSymbolArray.get(ue.verticalPlacedTextSymbolIndex).hidden=Ue||He?1:0);const St=this.variableOffsets[ue.crossTileID];St&&this.markUsedJustification(u,St.anchor,ue,ke);const mt=this.placedOrientations[ue.crossTileID];mt&&(this.markUsedJustification(u,"left",ue,mt),this.markUsedOrientation(u,mt,ue))}if(Re){const rt=Ee(de.icon),Ue=!(X&&ue.verticalPlacedIconSymbolIndex&&je);ue.placedIconSymbolIndex>=0&&(he(u.icon,ue.numIconVertices,Ue?rt:Ve),u.icon.placedSymbolArray.get(ue.placedIconSymbolIndex).hidden=de.icon.isHidden()),ue.verticalPlacedIconSymbolIndex>=0&&(he(u.icon,ue.numVerticalIconVertices,Ue?Ve:rt),u.icon.placedSymbolArray.get(ue.verticalPlacedIconSymbolIndex).hidden=de.icon.isHidden())}if(u.hasIconCollisionBoxData()||u.hasTextCollisionBoxData()){const rt=u.collisionArrays[se];if(rt){let Ue=new o.pointGeometry(0,0);if(rt.textBox||rt.verticalTextBox){let mt=!0;if(B){const Tt=this.variableOffsets[Me];Tt?(Ue=Xs(Tt.anchor,Tt.width,Tt.height,Tt.textOffset,Tt.textBoxScale),V&&Ue._rotate(H?this.transform.angle:-this.transform.angle)):mt=!1}rt.textBox&&U(u.textCollisionBox.collisionVertexArray,de.text.placed,!mt||je,Ue.x,Ue.y),rt.verticalTextBox&&U(u.textCollisionBox.collisionVertexArray,de.text.placed,!mt||He,Ue.x,Ue.y)}const St=Boolean(!He&&rt.verticalIconBox);rt.iconBox&&U(u.iconCollisionBox.collisionVertexArray,de.icon.placed,St,X?Ue.x:0,X?Ue.y:0),rt.verticalIconBox&&U(u.iconCollisionBox.collisionVertexArray,de.icon.placed,!St,X?Ue.x:0,X?Ue.y:0)}}}if(u.sortFeatures(this.transform.angle),this.retainedQueryData[u.bucketInstanceId]&&(this.retainedQueryData[u.bucketInstanceId].featureSortOrder=u.featureSortOrder),u.hasTextData()&&u.text.opacityVertexBuffer&&u.text.opacityVertexBuffer.updateData(u.text.opacityVertexArray),u.hasIconData()&&u.icon.opacityVertexBuffer&&u.icon.opacityVertexBuffer.updateData(u.icon.opacityVertexArray),u.hasIconCollisionBoxData()&&u.iconCollisionBox.collisionVertexBuffer&&u.iconCollisionBox.collisionVertexBuffer.updateData(u.iconCollisionBox.collisionVertexArray),u.hasTextCollisionBoxData()&&u.textCollisionBox.collisionVertexBuffer&&u.textCollisionBox.collisionVertexBuffer.updateData(u.textCollisionBox.collisionVertexArray),u.text.opacityVertexArray.length!==u.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${u.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${u.text.layoutVertexArray.length}) / 4`);if(u.icon.opacityVertexArray.length!==u.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${u.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${u.icon.layoutVertexArray.length}) / 4`);if(u.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[u.bucketInstanceId];u.placementInvProjMatrix=se.invProjMatrix,u.placementViewportMatrix=se.viewportMatrix,u.collisionCircleArray=se.circles,delete this.collisionCircleArrays[u.bucketInstanceId]}}symbolFadeChange(u){return this.fadeDuration===0?1:(u-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(u){return Math.max(0,(this.transform.zoom-u)/1.5)}hasTransitions(u){return this.stale||u-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(u,p){const y=this.zoomAtLastRecencyCheck===p?1-this.zoomAdjustment(p):1;return this.zoomAtLastRecencyCheck=p,this.commitTime+this.fadeDuration*y>u}setStale(){this.stale=!0}}function U(b,u,p,y,S){b.emplaceBack(u?1:0,p?1:0,y||0,S||0),b.emplaceBack(u?1:0,p?1:0,y||0,S||0),b.emplaceBack(u?1:0,p?1:0,y||0,S||0),b.emplaceBack(u?1:0,p?1:0,y||0,S||0)}const W=Math.pow(2,25),te=Math.pow(2,24),ne=Math.pow(2,17),ge=Math.pow(2,16),Se=Math.pow(2,9),xe=Math.pow(2,8),_e=Math.pow(2,1);function Ee(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const u=b.placed?1:0,p=Math.floor(127*b.opacity);return p*W+u*te+p*ne+u*ge+p*Se+u*xe+p*_e+u}const Ve=0;class Ke{constructor(u){this._sortAcrossTiles=u.layout.get("symbol-z-order")!=="viewport-y"&&!u.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(u,p,y,S,C){const k=this._bucketParts;for(;this._currentTileIndex<u.length;)if(p.getBucketParts(k,S,u[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,C())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,k.sort((z,B)=>z.sortKey-B.sortKey));this._currentPartIndex<k.length;)if(p.placeLayerBucketPart(k[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,C())return!0;return!1}}class Be{constructor(u,p,y,S,C,k,z,B){this.placement=new ae(u,p,k,z,B),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=S,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(u,p,y){const S=o.exported.now(),C=()=>{const k=o.exported.now()-S;return!this._forceFullPlacement&&k>2};for(;this._currentPlacementIndex>=0;){const k=p[u[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=z)&&(!k.maxzoom||k.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new Ke(k)),this._inProgressLayer.continuePlacement(y[k.source],this.placement,this._showCollisionBoxes,k,C))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(u){return this.placement.commit(u),this.placement}}const Lt=512/o.EXTENT/2;class zt{constructor(u,p,y){this.tileID=u,this.indexedSymbolInstances={},this.bucketInstanceId=y;for(let S=0;S<p.length;S++){const C=p.get(S),k=C.key;this.indexedSymbolInstances[k]||(this.indexedSymbolInstances[k]=[]),this.indexedSymbolInstances[k].push({crossTileID:C.crossTileID,coord:this.getScaledCoordinates(C,u)})}}getScaledCoordinates(u,p){const y=Lt/Math.pow(2,p.canonical.z-this.tileID.canonical.z);return{x:Math.floor((p.canonical.x*o.EXTENT+u.anchorX)*y),y:Math.floor((p.canonical.y*o.EXTENT+u.anchorY)*y)}}findMatches(u,p,y){const S=this.tileID.canonical.z<p.canonical.z?1:Math.pow(2,this.tileID.canonical.z-p.canonical.z);for(let C=0;C<u.length;C++){const k=u.get(C);if(k.crossTileID)continue;const z=this.indexedSymbolInstances[k.key];if(!z)continue;const B=this.getScaledCoordinates(k,p);for(const V of z)if(Math.abs(V.coord.x-B.x)<=S&&Math.abs(V.coord.y-B.y)<=S&&!y[V.crossTileID]){y[V.crossTileID]=!0,k.crossTileID=V.crossTileID;break}}}}class bt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Zt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(u){const p=Math.round((u-this.lng)/360);if(p!==0)for(const y in this.indexes){const S=this.indexes[y],C={};for(const k in S){const z=S[k];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+p),C[z.tileID.key]=z}this.indexes[y]=C}this.lng=u}addBucket(u,p,y){if(this.indexes[u.overscaledZ]&&this.indexes[u.overscaledZ][u.key]){if(this.indexes[u.overscaledZ][u.key].bucketInstanceId===p.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(u.overscaledZ,this.indexes[u.overscaledZ][u.key])}for(let C=0;C<p.symbolInstances.length;C++)p.symbolInstances.get(C).crossTileID=0;this.usedCrossTileIDs[u.overscaledZ]||(this.usedCrossTileIDs[u.overscaledZ]={});const S=this.usedCrossTileIDs[u.overscaledZ];for(const C in this.indexes){const k=this.indexes[C];if(Number(C)>u.overscaledZ)for(const z in k){const B=k[z];B.tileID.isChildOf(u)&&B.findMatches(p.symbolInstances,u,S)}else{const z=k[u.scaledTo(Number(C)).key];z&&z.findMatches(p.symbolInstances,u,S)}}for(let C=0;C<p.symbolInstances.length;C++){const k=p.symbolInstances.get(C);k.crossTileID||(k.crossTileID=y.generate(),S[k.crossTileID]=!0)}return this.indexes[u.overscaledZ]===void 0&&(this.indexes[u.overscaledZ]={}),this.indexes[u.overscaledZ][u.key]=new zt(u,p.symbolInstances,p.bucketInstanceId),!0}removeBucketCrossTileIDs(u,p){for(const y in p.indexedSymbolInstances)for(const S of p.indexedSymbolInstances[y])delete this.usedCrossTileIDs[u][S.crossTileID]}removeStaleBuckets(u){let p=!1;for(const y in this.indexes){const S=this.indexes[y];for(const C in S)u[S[C].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,S[C]),delete S[C],p=!0)}return p}}class Yt{constructor(){this.layerIndexes={},this.crossTileIDs=new bt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(u,p,y){let S=this.layerIndexes[u.id];S===void 0&&(S=this.layerIndexes[u.id]=new Zt);let C=!1;const k={};S.handleWrapJump(y);for(const z of p){const B=z.getBucket(u);B&&u.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(z.tileID,B,this.crossTileIDs)&&(C=!0),k[B.bucketInstanceId]=!0)}return S.removeStaleBuckets(k)&&(C=!0),C}pruneUnusedLayers(u){const p={};u.forEach(y=>{p[y]=!0});for(const y in this.layerIndexes)p[y]||delete this.layerIndexes[y]}}var wr=o.createLayout([{name:"a_pos",type:"Int16",components:2}]);class tr extends o.Evented{constructor(u){super(),this.sourceCache=u,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=u._cache.max,u.usedForTerrain=!0,u.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const u in this._tiles){const p=this._tiles[u];p.textures.forEach(y=>y.destroy()),p.textures=[]}}update(u,p){this.sourceCache.update(u,p),this._renderableTilesKeys=[];for(const y of u.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:p}))this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),o.ortho(y.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),this._tiles[y.key]=new pt(y,this.tileSize))}removeOutdated(u){const p={};this.renderHistory=this.renderHistory.filter((y,S)=>this.renderHistory.indexOf(y)===S).slice(0,this.renderHistorySize);for(const y of this._renderableTilesKeys)p[y]=!0;for(const y of this.renderHistory)p[y]=!0;for(const y in this._tiles)p[y]||(this._tiles[y].clearTextures(u),delete this._tiles[y])}getRenderableTiles(){return this._renderableTilesKeys.map(u=>this.getTileByID(u))}getTileByID(u){return this._tiles[u]}getTerrainCoords(u){const p={};for(const y of this._renderableTilesKeys){const S=this._tiles[y].tileID;if(S.canonical.equals(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16),o.ortho(C.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),p[y]=C}else if(S.canonical.isChildOf(u.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const k=S.canonical.z-u.canonical.z,z=S.canonical.x-(S.canonical.x>>k<<k),B=S.canonical.y-(S.canonical.y>>k<<k),V=o.EXTENT>>k;o.ortho(C.posMatrix,0,V,0,V,0,1),o.translate(C.posMatrix,C.posMatrix,[-z*V,-B*V,0]),p[y]=C}else if(u.canonical.isChildOf(S.canonical)){const C=u.clone();C.posMatrix=new Float64Array(16);const k=u.canonical.z-S.canonical.z,z=u.canonical.x-(u.canonical.x>>k<<k),B=u.canonical.y-(u.canonical.y>>k<<k),V=o.EXTENT>>k;o.ortho(C.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),o.translate(C.posMatrix,C.posMatrix,[z*V,B*V,0]),o.scale(C.posMatrix,C.posMatrix,[1/2**k,1/2**k,0]),p[y]=C}}return p}getSourceTile(u,p){const y=this.sourceCache._source;let S=u.overscaledZ-this.deltaZoom;if(S>y.maxzoom&&(S=y.maxzoom),S<y.minzoom)return null;this._sourceTileCache[u.key]||(this._sourceTileCache[u.key]=u.scaledTo(S).key);let C=this.sourceCache.getTileByID(this._sourceTileCache[u.key]);if((!C||!C.dem)&&p)for(;S>=y.minzoom&&(!C||!C.dem);)C=this.sourceCache.getTileByID(u.scaledTo(S--).key);return C}tilesAfterTime(u=Date.now()){return Object.values(this._tiles).filter(p=>p.timeLoaded>=u)}}class fr{constructor(u,p,y){this.style=u,this.sourceCache=new tr(p),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.elevationOffset=typeof y.elevationOffset=="number"?y.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(u,p,y,S=o.EXTENT){if(!(p>=0&&p<S&&y>=0&&y<S))return this.elevationOffset;let C=0;const k=this.getTerrainData(u);if(k.tile&&k.tile.dem){const z=o.transformMat4$1([],[p/S*o.EXTENT,y/S*o.EXTENT],k.u_terrain_matrix),B=[z[0]*k.tile.dem.dim,z[1]*k.tile.dem.dim],V=[Math.floor(B[0]),Math.floor(B[1])],H=k.tile.dem.get(V[0],V[1]),X=k.tile.dem.get(V[0],V[1]+1),J=k.tile.dem.get(V[0]+1,V[1]),he=k.tile.dem.get(V[0]+1,V[1]+1);C=o.number(o.number(H,X,B[0]-V[0]),o.number(J,he,B[0]-V[0]),B[1]-V[1])}return C}rememberForRerender(u,p){for(const y in this.sourceCache._tiles){const S=this.sourceCache._tiles[y];(S.tileID.equals(p)||S.tileID.isChildOf(p))&&(u===this.sourceCache.sourceCache.id&&(S.timeLoaded=Date.now()),this._rerender[u]=this._rerender[u]||{},this._rerender[u][S.tileID.key]=!0)}}needsRerender(u,p){return this._rerender[u]&&this._rerender[u][p.key]}clearRerenderCache(){this._rerender={}}getElevation(u,p,y,S=o.EXTENT){return(this.getDEMElevation(u,p,y,S)+this.elevationOffset)*this.exaggeration}getTerrainData(u){if(!this._emptyDemTexture){const S=this.style.map.painter.context,C=new o.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new M(S,C,S.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new M(S,new o.RGBAImage({width:1,height:1}),S.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.identity([])}const p=this.sourceCache.getSourceTile(u,!0);if(p&&p.dem&&(!p.demTexture||p.needsTerrainPrepare)){const S=this.style.map.painter.context;p.demTexture=this.style.map.painter.getTileTexture(p.dem.stride),p.demTexture?p.demTexture.update(p.dem.getPixels(),{premultiply:!1}):p.demTexture=new M(S,p.dem.getPixels(),S.gl.RGBA,{premultiply:!1}),p.demTexture.bind(S.gl.NEAREST,S.gl.CLAMP_TO_EDGE),p.needsTerrainPrepare=!1}const y=p&&p+p.tileID.key+u.key;if(y&&!this._demMatrixCache[y]){const S=this.sourceCache.sourceCache._source.maxzoom;let C=u.canonical.z-p.tileID.canonical.z;u.overscaledZ>u.canonical.z&&(u.canonical.z>=S?C=u.canonical.z-S:o.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const k=u.canonical.x-(u.canonical.x>>C<<C),z=u.canonical.y-(u.canonical.y>>C<<C),B=o.fromScaling(new Float64Array(16),[1/(o.EXTENT<<C),1/(o.EXTENT<<C),0]);o.translate(B,B,[k*o.EXTENT,z*o.EXTENT,0]),this._demMatrixCache[u.key]={matrix:B,coord:u}}return{u_depth:2,u_terrain:3,u_terrain_dim:p&&p.dem&&p.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[u.key].matrix:this._emptyDemMatrix,u_terrain_unpack:p&&p.dem&&p.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(p&&p.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:p}}getRTTFramebuffer(){const u=this.style.map.painter;if(!this._rttFramebuffer){const p=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=u.context.createFramebuffer(p,p,!0),this._rttFramebuffer.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,p))}return this._rttFramebuffer}getFramebuffer(u){const p=this.style.map.painter,y=p.width/devicePixelRatio,S=p.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===S||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new M(p.context,{width:y,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new M(p.context,{width:y,height:S,data:null},p.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(p.context.gl.NEAREST,p.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=p.context.createFramebuffer(y,S,!0),this._fbo.depthAttachment.set(p.context.createRenderbuffer(p.context.gl.DEPTH_COMPONENT16,y,S))),this._fbo.colorAttachment.set(u==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const u=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const p=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let C=0,k=0;C<this._coordsTextureSize;C++)for(let z=0;z<this._coordsTextureSize;z++,k+=4)p[k+0]=255&z,p[k+1]=255&C,p[k+2]=z>>8<<4|C>>8,p[k+3]=0;const y=new o.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(p.buffer)),S=new M(u,y,u.gl.RGBA,{premultiply:!1});return S.bind(u.gl.NEAREST,u.gl.CLAMP_TO_EDGE),this._coordsTexture=S,S}pointCoordinate(u){const p=new Uint8Array(4),y=this.style.map.painter,S=y.context,C=S.gl;S.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),C.readPixels(u.x,y.height/devicePixelRatio-u.y-1,1,1,C.RGBA,C.UNSIGNED_BYTE,p),S.bindFramebuffer.set(null);const k=p[0]+(p[2]>>4<<8),z=p[1]+((15&p[2])<<8),B=this.coordsIndex[255-p[3]],V=B&&this.sourceCache.getTileByID(B);if(!V)return null;const H=this._coordsTextureSize,X=(1<<V.tileID.canonical.z)*H;return new o.MercatorCoordinate((V.tileID.canonical.x*H+k)/X,(V.tileID.canonical.y*H+z)/X,this.getElevation(V.tileID,k,z,H))}getTerrainMesh(){if(this._mesh)return this._mesh;const u=this.style.map.painter.context,p=new o.PosArray,y=new o.TriangleIndexArray,S=this.meshSize,C=o.EXTENT/S,k=S*S;for(let z=0;z<=S;z++)for(let B=0;B<=S;B++)p.emplaceBack(B*C,z*C);for(let z=0;z<k;z+=S+1)for(let B=0;B<S;B++)y.emplaceBack(B+z,S+B+z+1,S+B+z+2),y.emplaceBack(B+z,S+B+z+2,B+z+1);return this._mesh={indexBuffer:u.createIndexBuffer(y),vertexBuffer:u.createVertexBuffer(p,wr.members),segments:o.SegmentVector.simpleSegment(0,0,p.length,y.length)},this._mesh}getMinMaxElevation(u){const p=this.getTerrainData(u).tile,y={minElevation:null,maxElevation:null};return p&&p.dem&&(y.minElevation=(p.dem.min+this.elevationOffset)*this.exaggeration,y.maxElevation=(p.dem.max+this.elevationOffset)*this.exaggeration),y}}const Sr=(b,u)=>o.emitValidationErrors(b,u&&u.filter(p=>p.identifier!=="source.canvas")),Wr=o.pick(qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),jn=o.pick(qe,["setCenter","setZoom","setBearing","setPitch"]),ln=function(){const b={},u=o.spec.$version;for(const p in o.spec.$root){const y=o.spec.$root[p];if(y.required){let S=null;S=p==="version"?u:y.type==="array"?[]:{},S!=null&&(b[p]=S)}}return b}();class ai extends o.Evented{constructor(u,p={}){super(),this.map=u,this.dispatcher=new ie(Ge(),this),this.imageManager=new I,this.imageManager.setEventedParent(this),this.glyphManager=new $(u._requestManager,p.localIdeographFontFamily),this.lineAtlas=new re(256,512),this.crossTileSymbolIndex=new Yt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const y=this;this._rtlTextPluginCallback=ai.registerForPluginStateChange(S=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:S.pluginStatus,pluginURL:S.pluginURL},(C,k)=>{if(o.triggerPluginCompletionEvent(C),k&&k.every(z=>z))for(const z in y.sourceCaches)y.sourceCaches[z].reload()})}),this.on("data",S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const C=this.sourceCaches[S.sourceId];if(!C)return;const k=C.getSource();if(k&&k.vectorLayerIds)for(const z in this._layers){const B=this._layers[z];B.source===k.id&&this._validateLayer(B)}})}loadURL(u,p={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const y=typeof p.validate!="boolean"||p.validate,S=this.map._requestManager.transformRequest(u,o.ResourceType.Style);this._request=o.getJSON(S,(C,k)=>{this._request=null,C?this.fire(new o.ErrorEvent(C)):k&&this._load(k,y)})}loadJSON(u,p={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(u,p.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(ln,!1)}_load(u,p){if(p&&Sr(this,o.validateStyle(u)))return;this._loaded=!0,this.stylesheet=u;for(const S in u.sources)this.addSource(S,u.sources[S],{validate:!1});u.sprite?this._loadSprite(u.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(u.glyphs);const y=Ye(this.stylesheet.layers);this._order=y.map(S=>S.id),this._layers={},this._serializedLayers={};for(let S of y)S=o.createStyleLayer(S),S.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=S,this._serializedLayers[S.id]=S.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Z(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}_loadSprite(u){this._spriteRequest=function(p,y,S,C){let k,z,B;const V=S>1?"@2x":"";let H=o.getJSON(y.transformRequest(y.normalizeSpriteURL(p,V,".json"),o.ResourceType.SpriteJSON),(he,se)=>{H=null,B||(B=he,k=se,J())}),X=o.getImage(y.transformRequest(y.normalizeSpriteURL(p,V,".png"),o.ResourceType.SpriteImage),(he,se)=>{X=null,B||(B=he,z=se,J())});function J(){if(B)C(B);else if(k&&z){const he=o.exported.getImageData(z),se={};for(const ue in k){const{width:we,height:Ae,x:Me,y:de,sdf:Re,pixelRatio:ke,stretchX:je,stretchY:He,content:rt}=k[ue],Ue=new o.RGBAImage({width:we,height:Ae});o.RGBAImage.copy(he,Ue,{x:Me,y:de},{x:0,y:0},{width:we,height:Ae}),se[ue]={data:Ue,pixelRatio:ke,sdf:Re,stretchX:je,stretchY:He,content:rt}}C(null,se)}}return{cancel(){H&&(H.cancel(),H=null),X&&(X.cancel(),X=null)}}}(u,this.map._requestManager,this.map.getPixelRatio(),(p,y)=>{if(this._spriteRequest=null,p)this.fire(new o.ErrorEvent(p));else if(y)for(const S in y)this.imageManager.addImage(S,y[S]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(u){const p=this.sourceCaches[u.source];if(!p)return;const y=u.sourceLayer;if(!y)return;const S=p.getSource();(S.type==="geojson"||S.vectorLayerIds&&S.vectorLayerIds.indexOf(y)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${S.id}" as specified by style layer "${u.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const u in this.sourceCaches)if(!this.sourceCaches[u].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(u){const p=[];for(const y of u){const S=this._layers[y];S.type!=="custom"&&p.push(S.serialize())}return p}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const u in this.sourceCaches)if(this.sourceCaches[u].hasTransition())return!0;for(const u in this._layers)if(this._layers[u].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(u){if(!this._loaded)return;const p=this._changed;if(this._changed){const S=Object.keys(this._updatedLayers),C=Object.keys(this._removedLayers);(S.length||C.length)&&this._updateWorkerLayers(S,C);for(const k in this._updatedSources){const z=this._updatedSources[k];if(z==="reload")this._reloadSource(k);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(k)}}this._updateTilesForChangedImages();for(const k in this._updatedPaintProps)this._layers[k].updateTransitions(u);this.light.updateTransitions(u),this._resetUpdates()}const y={};for(const S in this.sourceCaches){const C=this.sourceCaches[S];y[S]=C.used,C.used=!1}for(const S of this._order){const C=this._layers[S];C.recalculate(u,this._availableImages),!C.isHidden(u.zoom)&&C.source&&(this.sourceCaches[C.source].used=!0)}for(const S in y){const C=this.sourceCaches[S];y[S]!==C.used&&C.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S}))}this.light.recalculate(u),this.z=u.zoom,p&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const u=Object.keys(this._changedImages);if(u.length){for(const p in this.sourceCaches)this.sourceCaches[p].reloadTilesForDependencies(["icons","patterns"],u);this._changedImages={}}}_updateWorkerLayers(u,p){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(u),removedIds:p})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(u){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),u){const p=this.sourceCaches[u.source];if(!p)throw new Error(`cannot load terrain, because there exists no source with ID: ${u.source}`);this.terrain=new fr(this,p,u),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=y=>{y.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=y=>{y.tile&&(y.sourceId===u.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(y.sourceId,y.tile.tileID)):y.source.type==="geojson"&&this.terrain.rememberForRerender(y.sourceId,y.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new o.Event("terrain",{terrain:u}))}setState(u){if(this._checkLoaded(),Sr(this,o.validateStyle(u)))return!1;(u=o.clone$1(u)).layers=Ye(u.layers);const p=function(S,C){if(!S)return[{command:qe.setStyle,args:[C]}];let k=[];try{if(!g(S.version,C.version))return[{command:qe.setStyle,args:[C]}];g(S.center,C.center)||k.push({command:qe.setCenter,args:[C.center]}),g(S.zoom,C.zoom)||k.push({command:qe.setZoom,args:[C.zoom]}),g(S.bearing,C.bearing)||k.push({command:qe.setBearing,args:[C.bearing]}),g(S.pitch,C.pitch)||k.push({command:qe.setPitch,args:[C.pitch]}),g(S.sprite,C.sprite)||k.push({command:qe.setSprite,args:[C.sprite]}),g(S.glyphs,C.glyphs)||k.push({command:qe.setGlyphs,args:[C.glyphs]}),g(S.transition,C.transition)||k.push({command:qe.setTransition,args:[C.transition]}),g(S.light,C.light)||k.push({command:qe.setLight,args:[C.light]});const z={},B=[];(function(H,X,J,he){let se;for(se in X=X||{},H=H||{})Object.prototype.hasOwnProperty.call(H,se)&&(Object.prototype.hasOwnProperty.call(X,se)||ut(se,J,he));for(se in X)Object.prototype.hasOwnProperty.call(X,se)&&(Object.prototype.hasOwnProperty.call(H,se)?g(H[se],X[se])||(H[se].type==="geojson"&&X[se].type==="geojson"&&$t(H,X,se)?J.push({command:qe.setGeoJSONSourceData,args:[se,X[se].data]}):nt(se,X,J,he)):Qe(se,X,J))})(S.sources,C.sources,B,z);const V=[];S.layers&&S.layers.forEach(H=>{z[H.source]?k.push({command:qe.removeLayer,args:[H.id]}):V.push(H)}),k=k.concat(B),function(H,X,J){X=X||[];const he=(H=H||[]).map(It),se=X.map(It),ue=H.reduce(Wt,{}),we=X.reduce(Wt,{}),Ae=he.slice(),Me=Object.create(null);let de,Re,ke,je,He,rt,Ue;for(de=0,Re=0;de<he.length;de++)ke=he[de],Object.prototype.hasOwnProperty.call(we,ke)?Re++:(J.push({command:qe.removeLayer,args:[ke]}),Ae.splice(Ae.indexOf(ke,Re),1));for(de=0,Re=0;de<se.length;de++)ke=se[se.length-1-de],Ae[Ae.length-1-de]!==ke&&(Object.prototype.hasOwnProperty.call(ue,ke)?(J.push({command:qe.removeLayer,args:[ke]}),Ae.splice(Ae.lastIndexOf(ke,Ae.length-Re),1)):Re++,rt=Ae[Ae.length-de],J.push({command:qe.addLayer,args:[we[ke],rt]}),Ae.splice(Ae.length-de,0,ke),Me[ke]=!0);for(de=0;de<se.length;de++)if(ke=se[de],je=ue[ke],He=we[ke],!Me[ke]&&!g(je,He))if(g(je.source,He.source)&&g(je["source-layer"],He["source-layer"])&&g(je.type,He.type)){for(Ue in Mt(je.layout,He.layout,J,ke,null,qe.setLayoutProperty),Mt(je.paint,He.paint,J,ke,null,qe.setPaintProperty),g(je.filter,He.filter)||J.push({command:qe.setFilter,args:[ke,He.filter]}),g(je.minzoom,He.minzoom)&&g(je.maxzoom,He.maxzoom)||J.push({command:qe.setLayerZoomRange,args:[ke,He.minzoom,He.maxzoom]}),je)Object.prototype.hasOwnProperty.call(je,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Mt(je[Ue],He[Ue],J,ke,Ue.slice(6),qe.setPaintProperty):g(je[Ue],He[Ue])||J.push({command:qe.setLayerProperty,args:[ke,Ue,He[Ue]]}));for(Ue in He)Object.prototype.hasOwnProperty.call(He,Ue)&&!Object.prototype.hasOwnProperty.call(je,Ue)&&Ue!=="layout"&&Ue!=="paint"&&Ue!=="filter"&&Ue!=="metadata"&&Ue!=="minzoom"&&Ue!=="maxzoom"&&(Ue.indexOf("paint.")===0?Mt(je[Ue],He[Ue],J,ke,Ue.slice(6),qe.setPaintProperty):g(je[Ue],He[Ue])||J.push({command:qe.setLayerProperty,args:[ke,Ue,He[Ue]]}))}else J.push({command:qe.removeLayer,args:[ke]}),rt=Ae[Ae.lastIndexOf(ke)+1],J.push({command:qe.addLayer,args:[He,rt]})}(V,C.layers,k)}catch(z){console.warn("Unable to compute style diff:",z),k=[{command:qe.setStyle,args:[C]}]}return k}(this.serialize(),u).filter(S=>!(S.command in jn));if(p.length===0)return!1;const y=p.filter(S=>!(S.command in Wr));if(y.length>0)throw new Error(`Unimplemented: ${y.map(S=>S.command).join(", ")}.`);return p.forEach(S=>{S.command!=="setTransition"&&this[S.command].apply(this,S.args)}),this.stylesheet=u,!0}addImage(u,p){if(this.getImage(u))return this.fire(new o.ErrorEvent(new Error(`An image named "${u}" already exists.`)));this.imageManager.addImage(u,p),this._afterImageUpdated(u)}updateImage(u,p){this.imageManager.updateImage(u,p)}getImage(u){return this.imageManager.getImage(u)}removeImage(u){if(!this.getImage(u))return this.fire(new o.ErrorEvent(new Error(`An image named "${u}" does not exist.`)));this.imageManager.removeImage(u),this._afterImageUpdated(u)}_afterImageUpdated(u){this._availableImages=this.imageManager.listImages(),this._changedImages[u]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(u,p,y={}){if(this._checkLoaded(),this.sourceCaches[u]!==void 0)throw new Error(`Source "${u}" already exists.`);if(!p.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(p).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(p.type)>=0&&this._validate(o.validateStyle.source,`sources.${u}`,p,null,y))return;this.map&&this.map._collectResourceTiming&&(p.collectResourceTiming=!0);const S=this.sourceCaches[u]=new Dt(u,p,this.dispatcher);S.style=this,S.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:S.serialize(),sourceId:u})),S.onAdd(this.map),this._changed=!0}removeSource(u){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===u)return this.fire(new o.ErrorEvent(new Error(`Source "${u}" cannot be removed while layer "${y}" is using it.`)));const p=this.sourceCaches[u];delete this.sourceCaches[u],delete this._updatedSources[u],p.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:u})),p.setEventedParent(null),p.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(u,p){if(this._checkLoaded(),this.sourceCaches[u]===void 0)throw new Error(`There is no source with this ID=${u}`);const y=this.sourceCaches[u].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(p),this._changed=!0}getSource(u){return this.sourceCaches[u]&&this.sourceCaches[u].getSource()}addLayer(u,p,y={}){this._checkLoaded();const S=u.id;if(this.getLayer(S))return void this.fire(new o.ErrorEvent(new Error(`Layer "${S}" already exists on this map.`)));let C;if(u.type==="custom"){if(Sr(this,o.validateCustomStyleLayer(u)))return;C=o.createStyleLayer(u)}else{if(typeof u.source=="object"&&(this.addSource(S,u.source),u=o.clone$1(u),u=o.extend(u,{source:S})),this._validate(o.validateStyle.layer,`layers.${S}`,u,{arrayIndex:-1},y))return;C=o.createStyleLayer(u),this._validateLayer(C),C.setEventedParent(this,{layer:{id:S}}),this._serializedLayers[C.id]=C.serialize()}const k=p?this._order.indexOf(p):this._order.length;if(p&&k===-1)this.fire(new o.ErrorEvent(new Error(`Cannot add layer "${S}" before non-existing layer "${p}".`)));else{if(this._order.splice(k,0,S),this._layerOrderChanged=!0,this._layers[S]=C,this._removedLayers[S]&&C.source&&C.type!=="custom"){const z=this._removedLayers[S];delete this._removedLayers[S],z.type!==C.type?this._updatedSources[C.source]="clear":(this._updatedSources[C.source]="reload",this.sourceCaches[C.source].pause())}this._updateLayer(C),C.onAdd&&C.onAdd(this.map)}}moveLayer(u,p){if(this._checkLoaded(),this._changed=!0,!this._layers[u])return void this.fire(new o.ErrorEvent(new Error(`The layer '${u}' does not exist in the map's style and cannot be moved.`)));if(u===p)return;const y=this._order.indexOf(u);this._order.splice(y,1);const S=p?this._order.indexOf(p):this._order.length;p&&S===-1?this.fire(new o.ErrorEvent(new Error(`Cannot move layer "${u}" before non-existing layer "${p}".`))):(this._order.splice(S,0,u),this._layerOrderChanged=!0)}removeLayer(u){this._checkLoaded();const p=this._layers[u];if(!p)return void this.fire(new o.ErrorEvent(new Error(`Cannot remove non-existing layer "${u}".`)));p.setEventedParent(null);const y=this._order.indexOf(u);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[u]=p,delete this._layers[u],delete this._serializedLayers[u],delete this._updatedLayers[u],delete this._updatedPaintProps[u],p.onRemove&&p.onRemove(this.map)}getLayer(u){return this._layers[u]}hasLayer(u){return u in this._layers}setLayerZoomRange(u,p,y){this._checkLoaded();const S=this.getLayer(u);S?S.minzoom===p&&S.maxzoom===y||(p!=null&&(S.minzoom=p),y!=null&&(S.maxzoom=y),this._updateLayer(S)):this.fire(new o.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${u}".`)))}setFilter(u,p,y={}){this._checkLoaded();const S=this.getLayer(u);if(S){if(!g(S.filter,p))return p==null?(S.filter=void 0,void this._updateLayer(S)):void(this._validate(o.validateStyle.filter,`layers.${S.id}.filter`,p,null,y)||(S.filter=o.clone$1(p),this._updateLayer(S)))}else this.fire(new o.ErrorEvent(new Error(`Cannot filter non-existing layer "${u}".`)))}getFilter(u){return o.clone$1(this.getLayer(u).filter)}setLayoutProperty(u,p,y,S={}){this._checkLoaded();const C=this.getLayer(u);C?g(C.getLayoutProperty(p),y)||(C.setLayoutProperty(p,y,S),this._updateLayer(C)):this.fire(new o.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getLayoutProperty(u,p){const y=this.getLayer(u);if(y)return y.getLayoutProperty(p);this.fire(new o.ErrorEvent(new Error(`Cannot get style of non-existing layer "${u}".`)))}setPaintProperty(u,p,y,S={}){this._checkLoaded();const C=this.getLayer(u);C?g(C.getPaintProperty(p),y)||(C.setPaintProperty(p,y,S)&&this._updateLayer(C),this._changed=!0,this._updatedPaintProps[u]=!0):this.fire(new o.ErrorEvent(new Error(`Cannot style non-existing layer "${u}".`)))}getPaintProperty(u,p){return this.getLayer(u).getPaintProperty(p)}setFeatureState(u,p){this._checkLoaded();const y=u.source,S=u.sourceLayer,C=this.sourceCaches[y];if(C===void 0)return void this.fire(new o.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const k=C.getSource().type;k==="geojson"&&S?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):k!=="vector"||S?(u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),C.setFeatureState(S,u.id,p)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(u,p){this._checkLoaded();const y=u.source,S=this.sourceCaches[y];if(S===void 0)return void this.fire(new o.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const C=S.getSource().type,k=C==="vector"?u.sourceLayer:void 0;C!=="vector"||k?p&&typeof u.id!="string"&&typeof u.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):S.removeFeatureState(k,u.id,p):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(u){this._checkLoaded();const p=u.source,y=u.sourceLayer,S=this.sourceCaches[p];if(S!==void 0)return S.getSource().type!=="vector"||y?(u.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),S.getFeatureState(y,u.id)):void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.ErrorEvent(new Error(`The source '${p}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,u=>u.serialize()),layers:this._serializeLayers(this._order)},u=>u!==void 0)}_updateLayer(u){this._updatedLayers[u.id]=!0,u.source&&!this._updatedSources[u.source]&&this.sourceCaches[u.source].getSource().type!=="raster"&&(this._updatedSources[u.source]="reload",this.sourceCaches[u.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(u){const p=k=>this._layers[k].type==="fill-extrusion",y={},S=[];for(let k=this._order.length-1;k>=0;k--){const z=this._order[k];if(p(z)){y[z]=k;for(const B of u){const V=B[z];if(V)for(const H of V)S.push(H)}}}S.sort((k,z)=>z.intersectionZ-k.intersectionZ);const C=[];for(let k=this._order.length-1;k>=0;k--){const z=this._order[k];if(p(z))for(let B=S.length-1;B>=0;B--){const V=S[B].feature;if(y[V.layer.id]<k)break;C.push(V),S.pop()}else for(const B of u){const V=B[z];if(V)for(const H of V)C.push(H.feature)}}return C}queryRenderedFeatures(u,p,y){p&&p.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",p.filter,null,p);const S={};if(p&&p.layers){if(!Array.isArray(p.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const k of p.layers){const z=this._layers[k];if(!z)return this.fire(new o.ErrorEvent(new Error(`The layer '${k}' does not exist in the map's style and cannot be queried for features.`))),[];S[z.source]=!0}}const C=[];p.availableImages=this._availableImages;for(const k in this.sourceCaches)p.layers&&!S[k]||C.push(yr(this.sourceCaches[k],this._layers,this._serializedLayers,u,p,y));return this.placement&&C.push(function(k,z,B,V,H,X,J){const he={},se=X.queryRenderedSymbols(V),ue=[];for(const we of Object.keys(se).map(Number))ue.push(J[we]);ue.sort($e);for(const we of ue){const Ae=we.featureIndex.lookupSymbolFeatures(se[we.bucketInstanceId],z,we.bucketIndex,we.sourceLayerIndex,H.filter,H.layers,H.availableImages,k);for(const Me in Ae){const de=he[Me]=he[Me]||[],Re=Ae[Me];Re.sort((ke,je)=>{const He=we.featureSortOrder;if(He){const rt=He.indexOf(ke.featureIndex);return He.indexOf(je.featureIndex)-rt}return je.featureIndex-ke.featureIndex});for(const ke of Re)de.push(ke)}}for(const we in he)he[we].forEach(Ae=>{const Me=Ae.feature,de=B[k[we].source].getFeatureState(Me.layer["source-layer"],Me.id);Me.source=Me.layer.source,Me.layer["source-layer"]&&(Me.sourceLayer=Me.layer["source-layer"]),Me.state=de});return he}(this._layers,this._serializedLayers,this.sourceCaches,u,p,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(C)}querySourceFeatures(u,p){p&&p.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",p.filter,null,p);const y=this.sourceCaches[u];return y?function(S,C){const k=S.getRenderableIds().map(V=>S.getTileByID(V)),z=[],B={};for(let V=0;V<k.length;V++){const H=k[V],X=H.tileID.canonical.key;B[X]||(B[X]=!0,H.querySourceFeatures(z,C))}return z}(y,p):[]}addSourceType(u,p,y){return ai.getSourceType(u)?y(new Error(`A source type called "${u}" already exists.`)):(ai.setSourceType(u,p),p.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:u,url:p.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(u,p={}){this._checkLoaded();const y=this.light.getLight();let S=!1;for(const k in u)if(!g(u[k],y[k])){S=!0;break}if(!S)return;const C={now:o.exported.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(u,p),this.light.updateTransitions(C)}_validate(u,p,y,S,C={}){return(!C||C.validate!==!1)&&Sr(this,u.call(o.validateStyle,o.extend({key:p,style:this.serialize(),value:y,styleSpec:o.spec},S)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(u){this.sourceCaches[u].clearTiles()}_reloadSource(u){this.sourceCaches[u].resume(),this.sourceCaches[u].reload()}_updateSources(u){for(const p in this.sourceCaches)this.sourceCaches[p].update(u,this.terrain)}_generateCollisionBoxes(){for(const u in this.sourceCaches)this._reloadSource(u)}_updatePlacement(u,p,y,S,C=!1){let k=!1,z=!1;const B={};for(const V of this._order){const H=this._layers[V];if(H.type!=="symbol")continue;if(!B[H.source]){const J=this.sourceCaches[H.source];B[H.source]=J.getRenderableIds(!0).map(he=>J.getTileByID(he)).sort((he,se)=>se.tileID.overscaledZ-he.tileID.overscaledZ||(he.tileID.isLessThan(se.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer(H,B[H.source],u.center.lng);k=k||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((C=C||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),u.zoom))&&(this.pauseablePlacement=new Be(u,this.terrain,this._order,C,p,y,S,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),z=!0),k&&this.pauseablePlacement.placement.setStale()),z||k)for(const V of this._order){const H=this._layers[V];H.type==="symbol"&&this.placement.updateLayerOpacities(H,B[H.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const u in this.sourceCaches)this.sourceCaches[u].releaseSymbolFadeTiles()}getImages(u,p,y){this.imageManager.getImages(p.icons,y),this._updateTilesForChangedImages();const S=this.sourceCaches[p.source];S&&S.setDependencies(p.tileID.key,p.type,p.icons)}getGlyphs(u,p,y){this.glyphManager.getGlyphs(p.stacks,y)}getResource(u,p,y){return o.makeRequest(p,y)}}ai.getSourceType=function(b){return Ut[b]},ai.setSourceType=function(b,u){Ut[b]=u},ai.registerForPluginStateChange=o.registerForPluginStateChange;var Ys="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Wl={prelude:Zr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Zr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Zr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Zr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Zr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Zr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Zr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Zr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Zr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Zr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Zr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Zr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Zr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Zr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Zr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Zr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Zr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Zr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Zr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Zr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Zr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Zr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Zr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Zr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Ys),terrainDepth:Zr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Ys),terrainCoords:Zr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Ys)};function Zr(b,u){const p=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=u.match(/attribute ([\w]+) ([\w]+)/g),S=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=u.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=C?C.concat(S):S,z={};return{fragmentSource:b=b.replace(p,(B,V,H,X,J)=>(z[J]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${J}
varying ${H} ${X} ${J};
#else
uniform ${H} ${X} u_${J};
#endif
`:`
#ifdef HAS_UNIFORM_u_${J}
    ${H} ${X} ${J} = u_${J};
#endif
`)),vertexSource:u=u.replace(p,(B,V,H,X,J)=>{const he=X==="float"?"vec2":"vec4",se=J.match(/color/)?"color":he;return z[J]?V==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${H} ${he} a_${J};
varying ${H} ${X} ${J};
#else
uniform ${H} ${X} u_${J};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = a_${J};
#else
    ${H} ${X} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${J} = unpack_mix_${se}(a_${J}, u_${J}_t);
#else
    ${H} ${X} ${J} = u_${J};
#endif
`:V==="define"?`
#ifndef HAS_UNIFORM_u_${J}
uniform lowp float u_${J}_t;
attribute ${H} ${he} a_${J};
#else
uniform ${H} ${X} u_${J};
#endif
`:se==="vec4"?`
#ifndef HAS_UNIFORM_u_${J}
    ${H} ${X} ${J} = a_${J};
#else
    ${H} ${X} ${J} = u_${J};
#endif
`:`
#ifndef HAS_UNIFORM_u_${J}
    ${H} ${X} ${J} = unpack_mix_${se}(a_${J}, u_${J}_t);
#else
    ${H} ${X} ${J} = u_${J};
#endif
`}),staticAttributes:y,staticUniforms:k}}class wf{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(u,p,y,S,C,k,z,B,V){this.context=u;let H=this.boundPaintVertexBuffers.length!==S.length;for(let X=0;!H&&X<S.length;X++)this.boundPaintVertexBuffers[X]!==S[X]&&(H=!0);u.extVertexArrayObject&&this.vao&&this.boundProgram===p&&this.boundLayoutVertexBuffer===y&&!H&&this.boundIndexBuffer===C&&this.boundVertexOffset===k&&this.boundDynamicVertexBuffer===z&&this.boundDynamicVertexBuffer2===B&&this.boundDynamicVertexBuffer3===V?(u.bindVertexArrayOES.set(this.vao),z&&z.bind(),C&&C.dynamicDraw&&C.bind(),B&&B.bind(),V&&V.bind()):this.freshBind(p,y,S,C,k,z,B,V)}freshBind(u,p,y,S,C,k,z,B){let V;const H=u.numAttributes,X=this.context,J=X.gl;if(X.extVertexArrayObject)this.vao&&this.destroy(),this.vao=X.extVertexArrayObject.createVertexArrayOES(),X.bindVertexArrayOES.set(this.vao),V=0,this.boundProgram=u,this.boundLayoutVertexBuffer=p,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=S,this.boundVertexOffset=C,this.boundDynamicVertexBuffer=k,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=B;else{V=X.currentNumAttributes||0;for(let he=H;he<V;he++)J.disableVertexAttribArray(he)}p.enableAttributes(J,u);for(const he of y)he.enableAttributes(J,u);k&&k.enableAttributes(J,u),z&&z.enableAttributes(J,u),B&&B.enableAttributes(J,u),p.bind(),p.setVertexAttribPointers(J,u,C);for(const he of y)he.bind(),he.setVertexAttribPointers(J,u,C);k&&(k.bind(),k.setVertexAttribPointers(J,u,C)),S&&S.bind(),z&&(z.bind(),z.setVertexAttribPointers(J,u,C)),B&&(B.bind(),B.setVertexAttribPointers(J,u,C)),X.currentNumAttributes=H}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Sf(b){const u=[];for(let p=0;p<b.length;p++){if(b[p]===null)continue;const y=b[p].split(" ");u.push(y.pop())}return u}class Tm{constructor(u,p,y,S,C,k,z){const B=u.gl;this.program=B.createProgram();const V=Sf(y.staticAttributes),H=S?S.getBinderAttributes():[],X=V.concat(H),J=Wl.prelude.staticUniforms?Sf(Wl.prelude.staticUniforms):[],he=y.staticUniforms?Sf(y.staticUniforms):[],se=S?S.getBinderUniforms():[],ue=J.concat(he).concat(se),we=[];for(const He of ue)we.indexOf(He)<0&&we.push(He);const Ae=S?S.defines():[];k&&Ae.push("#define OVERDRAW_INSPECTOR;"),z&&Ae.push("#define TERRAIN3D;");const Me=Ae.concat(Wl.prelude.fragmentSource,y.fragmentSource).join(`
`),de=Ae.concat(Wl.prelude.vertexSource,y.vertexSource).join(`
`),Re=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);B.shaderSource(Re,Me),B.compileShader(Re),B.attachShader(this.program,Re);const ke=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);B.shaderSource(ke,de),B.compileShader(ke),B.attachShader(this.program,ke),this.attributes={};const je={};this.numAttributes=X.length;for(let He=0;He<this.numAttributes;He++)X[He]&&(B.bindAttribLocation(this.program,He,X[He]),this.attributes[X[He]]=He);B.linkProgram(this.program),B.deleteShader(ke),B.deleteShader(Re);for(let He=0;He<we.length;He++){const rt=we[He];if(rt&&!je[rt]){const Ue=B.getUniformLocation(this.program,rt);Ue&&(je[rt]=Ue)}}this.fixedUniforms=C(u,je),this.terrainUniforms=((He,rt)=>({u_depth:new o.Uniform1i(He,rt.u_depth),u_terrain:new o.Uniform1i(He,rt.u_terrain),u_terrain_dim:new o.Uniform1f(He,rt.u_terrain_dim),u_terrain_matrix:new o.UniformMatrix4f(He,rt.u_terrain_matrix),u_terrain_unpack:new o.Uniform4f(He,rt.u_terrain_unpack),u_terrain_offset:new o.Uniform1f(He,rt.u_terrain_offset),u_terrain_exaggeration:new o.Uniform1f(He,rt.u_terrain_exaggeration)}))(u,je),this.binderUniforms=S?S.getUniforms(u,je):[]}draw(u,p,y,S,C,k,z,B,V,H,X,J,he,se,ue,we,Ae,Me){const de=u.gl;if(this.failedToCreate)return;if(u.program.set(this.program),u.setDepthMode(y),u.setStencilMode(S),u.setColorMode(C),u.setCullFace(k),B){u.activeTexture.set(de.TEXTURE2),de.bindTexture(de.TEXTURE_2D,B.depthTexture),u.activeTexture.set(de.TEXTURE3),de.bindTexture(de.TEXTURE_2D,B.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(B[ke])}for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(z[ke]);ue&&ue.setUniforms(u,this.binderUniforms,he,{zoom:se});let Re=0;switch(p){case de.LINES:Re=2;break;case de.TRIANGLES:Re=3;break;case de.LINE_STRIP:Re=1}for(const ke of J.get()){const je=ke.vaos||(ke.vaos={});(je[V]||(je[V]=new wf)).bind(u,this,H,ue?ue.getPaintVertexBuffers():[],X,ke.vertexOffset,we,Ae,Me),de.drawElements(p,ke.primitiveLength*Re,de.UNSIGNED_SHORT,ke.primitiveOffset*Re*2)}}}function Em(b,u,p){const y=1/Dn(p,1,u.transform.tileZoom),S=Math.pow(2,p.tileID.overscaledZ),C=p.tileSize*Math.pow(2,u.transform.tileZoom)/S,k=C*(p.tileID.canonical.x+p.tileID.wrap*S),z=C*p.tileID.canonical.y;return{u_image:0,u_texsize:p.imageAtlasTexture.size,u_scale:[y,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[k>>16,z>>16],u_pixel_coord_lower:[65535&k,65535&z]}}const Tf=(b,u,p,y)=>{const S=u.style.light,C=S.properties.get("position"),k=[C.x,C.y,C.z],z=o.create$1();S.properties.get("anchor")==="viewport"&&o.fromRotation(z,-u.transform.angle),o.transformMat3(k,k,z);const B=S.properties.get("color");return{u_matrix:b,u_lightpos:k,u_lightintensity:S.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+p,u_opacity:y}},qy=(b,u,p,y,S,C,k)=>o.extend(Tf(b,u,p,y),Em(C,u,k),{u_height_factor:-Math.pow(2,S.overscaledZ)/k.tileSize/8}),Ec=b=>({u_matrix:b}),Ef=(b,u,p,y)=>o.extend(Ec(b),Em(p,u,y)),Cm=(b,u)=>({u_matrix:b,u_world:u}),Am=(b,u,p,y,S)=>o.extend(Ef(b,u,p,y),{u_world:S}),Im=(b,u,p,y)=>{const S=b.transform;let C,k;if(y.paint.get("circle-pitch-alignment")==="map"){const z=Dn(p,1,S.zoom);C=!0,k=[z,z]}else C=!1,k=S.pixelsToGLUnits;return{u_camera_to_center_distance:S.cameraToCenterDistance,u_scale_with_map:+(y.paint.get("circle-pitch-scale")==="map"),u_matrix:b.translatePosMatrix(u.posMatrix,p,y.paint.get("circle-translate"),y.paint.get("circle-translate-anchor")),u_pitch_with_map:+C,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:k}},ls=(b,u,p)=>{const y=Dn(p,1,u.zoom),S=Math.pow(2,u.zoom-p.tileID.overscaledZ),C=p.tileID.overscaleFactor();return{u_matrix:b,u_camera_to_center_distance:u.cameraToCenterDistance,u_pixels_to_tile_units:y,u_extrude_scale:[u.pixelsToGLUnits[0]/(y*S),u.pixelsToGLUnits[1]/(y*S)],u_overscale_factor:C}},Zl=(b,u,p=1)=>({u_matrix:b,u_color:u,u_overlay:0,u_overlay_scale:p}),Ks=b=>({u_matrix:b}),Cc=(b,u,p,y)=>({u_matrix:b,u_extrude_scale:Dn(u,1,p),u_intensity:y});function Ac(b,u){const p=Math.pow(2,u.canonical.z),y=u.canonical.y;return[new o.MercatorCoordinate(0,y/p).toLngLat().lat,new o.MercatorCoordinate(0,(y+1)/p).toLngLat().lat]}const Js=(b,u,p,y)=>{const S=b.transform;return{u_matrix:Yl(b,u,p,y),u_ratio:1/Dn(u,1,S.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},Cf=(b,u,p,y,S)=>o.extend(Js(b,u,p,S),{u_image:0,u_image_height:y}),Ic=(b,u,p,y,S)=>{const C=b.transform,k=un(u,C);return{u_matrix:Yl(b,u,p,S),u_texsize:u.imageAtlasTexture.size,u_ratio:1/Dn(u,1,C.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[k,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/C.pixelsToGLUnits[0],1/C.pixelsToGLUnits[1]]}},Xl=(b,u,p,y,S,C)=>{const k=b.lineAtlas,z=un(u,b.transform),B=p.layout.get("line-cap")==="round",V=k.getDash(y.from,B),H=k.getDash(y.to,B),X=V.width*S.fromScale,J=H.width*S.toScale;return o.extend(Js(b,u,p,C),{u_patternscale_a:[z/X,-V.height/2],u_patternscale_b:[z/J,-H.height/2],u_sdfgamma:k.width/(256*Math.min(X,J)*b.pixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:H.y,u_mix:S.t})};function un(b,u){return 1/Dn(b,1,u.tileZoom)}function Yl(b,u,p,y){return b.translatePosMatrix(y?y.posMatrix:u.tileID.posMatrix,u,p.paint.get("line-translate"),p.paint.get("line-translate-anchor"))}const Pm=(b,u,p,y,S)=>{return{u_matrix:b,u_tl_parent:u,u_scale_parent:p,u_buffer_scale:1,u_fade_t:y.mix,u_opacity:y.opacity*S.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:S.paint.get("raster-brightness-min"),u_brightness_high:S.paint.get("raster-brightness-max"),u_saturation_factor:(k=S.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(C=S.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:Mm(S.paint.get("raster-hue-rotate"))};var C,k};function Mm(b){b*=Math.PI/180;const u=Math.sin(b),p=Math.cos(b);return[(2*p+1)/3,(-Math.sqrt(3)*u-p+1)/3,(Math.sqrt(3)*u-p+1)/3]}const Af=(b,u,p,y,S,C,k,z,B,V)=>{const H=S.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:u?u.uSizeT:0,u_size:u?u.uSize:0,u_camera_to_center_distance:H.cameraToCenterDistance,u_pitch:H.pitch/360*2*Math.PI,u_rotate_symbol:+p,u_aspect_ratio:H.width/H.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_matrix:C,u_label_plane_matrix:k,u_coord_matrix:z,u_is_text:+B,u_pitch_with_map:+y,u_texsize:V,u_texture:0}},Pc=(b,u,p,y,S,C,k,z,B,V,H)=>{const X=S.transform;return o.extend(Af(b,u,p,y,S,C,k,z,B,V),{u_gamma_scale:y?Math.cos(X._pitch)*X.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:+H})},Dm=(b,u,p,y,S,C,k,z,B,V)=>o.extend(Pc(b,u,p,y,S,C,k,z,!0,B,!0),{u_texsize_icon:V,u_texture_icon:1}),Wy=(b,u,p)=>({u_matrix:b,u_opacity:u,u_color:p}),Zy=(b,u,p,y,S,C)=>o.extend(function(k,z,B,V){const H=B.imageManager.getPattern(k.from.toString()),X=B.imageManager.getPattern(k.to.toString()),{width:J,height:he}=B.imageManager.getPixelSize(),se=Math.pow(2,V.tileID.overscaledZ),ue=V.tileSize*Math.pow(2,B.transform.tileZoom)/se,we=ue*(V.tileID.canonical.x+V.tileID.wrap*se),Ae=ue*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:H.tl,u_pattern_br_a:H.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[J,he],u_mix:z.t,u_pattern_size_a:H.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/Dn(V,1,B.transform.tileZoom),u_pixel_coord_upper:[we>>16,Ae>>16],u_pixel_coord_lower:[65535&we,65535&Ae]}}(y,C,p,S),{u_matrix:b,u_opacity:u}),If={fillExtrusion:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_lightpos:new o.Uniform3f(b,u.u_lightpos),u_lightintensity:new o.Uniform1f(b,u.u_lightintensity),u_lightcolor:new o.Uniform3f(b,u.u_lightcolor),u_vertical_gradient:new o.Uniform1f(b,u.u_vertical_gradient),u_opacity:new o.Uniform1f(b,u.u_opacity)}),fillExtrusionPattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_lightpos:new o.Uniform3f(b,u.u_lightpos),u_lightintensity:new o.Uniform1f(b,u.u_lightintensity),u_lightcolor:new o.Uniform3f(b,u.u_lightcolor),u_vertical_gradient:new o.Uniform1f(b,u.u_vertical_gradient),u_height_factor:new o.Uniform1f(b,u.u_height_factor),u_image:new o.Uniform1i(b,u.u_image),u_texsize:new o.Uniform2f(b,u.u_texsize),u_pixel_coord_upper:new o.Uniform2f(b,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(b,u.u_pixel_coord_lower),u_scale:new o.Uniform3f(b,u.u_scale),u_fade:new o.Uniform1f(b,u.u_fade),u_opacity:new o.Uniform1f(b,u.u_opacity)}),fill:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),fillPattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_image:new o.Uniform1i(b,u.u_image),u_texsize:new o.Uniform2f(b,u.u_texsize),u_pixel_coord_upper:new o.Uniform2f(b,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(b,u.u_pixel_coord_lower),u_scale:new o.Uniform3f(b,u.u_scale),u_fade:new o.Uniform1f(b,u.u_fade)}),fillOutline:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_world:new o.Uniform2f(b,u.u_world)}),fillOutlinePattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_world:new o.Uniform2f(b,u.u_world),u_image:new o.Uniform1i(b,u.u_image),u_texsize:new o.Uniform2f(b,u.u_texsize),u_pixel_coord_upper:new o.Uniform2f(b,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(b,u.u_pixel_coord_lower),u_scale:new o.Uniform3f(b,u.u_scale),u_fade:new o.Uniform1f(b,u.u_fade)}),circle:(b,u)=>({u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(b,u.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(b,u.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(b,u.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),collisionBox:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(b,u.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(b,u.u_extrude_scale),u_overscale_factor:new o.Uniform1f(b,u.u_overscale_factor)}),collisionCircle:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_inv_matrix:new o.UniformMatrix4f(b,u.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(b,u.u_viewport_size)}),debug:(b,u)=>({u_color:new o.UniformColor(b,u.u_color),u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_overlay:new o.Uniform1i(b,u.u_overlay),u_overlay_scale:new o.Uniform1f(b,u.u_overlay_scale)}),clippingMask:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),heatmap:(b,u)=>({u_extrude_scale:new o.Uniform1f(b,u.u_extrude_scale),u_intensity:new o.Uniform1f(b,u.u_intensity),u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),heatmapTexture:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_world:new o.Uniform2f(b,u.u_world),u_image:new o.Uniform1i(b,u.u_image),u_color_ramp:new o.Uniform1i(b,u.u_color_ramp),u_opacity:new o.Uniform1f(b,u.u_opacity)}),hillshade:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_image:new o.Uniform1i(b,u.u_image),u_latrange:new o.Uniform2f(b,u.u_latrange),u_light:new o.Uniform2f(b,u.u_light),u_shadow:new o.UniformColor(b,u.u_shadow),u_highlight:new o.UniformColor(b,u.u_highlight),u_accent:new o.UniformColor(b,u.u_accent)}),hillshadePrepare:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_image:new o.Uniform1i(b,u.u_image),u_dimension:new o.Uniform2f(b,u.u_dimension),u_zoom:new o.Uniform1f(b,u.u_zoom),u_unpack:new o.Uniform4f(b,u.u_unpack)}),line:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_ratio:new o.Uniform1f(b,u.u_ratio),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(b,u.u_units_to_pixels)}),lineGradient:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_ratio:new o.Uniform1f(b,u.u_ratio),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(b,u.u_units_to_pixels),u_image:new o.Uniform1i(b,u.u_image),u_image_height:new o.Uniform1f(b,u.u_image_height)}),linePattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_texsize:new o.Uniform2f(b,u.u_texsize),u_ratio:new o.Uniform1f(b,u.u_ratio),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_image:new o.Uniform1i(b,u.u_image),u_units_to_pixels:new o.Uniform2f(b,u.u_units_to_pixels),u_scale:new o.Uniform3f(b,u.u_scale),u_fade:new o.Uniform1f(b,u.u_fade)}),lineSDF:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_ratio:new o.Uniform1f(b,u.u_ratio),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(b,u.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(b,u.u_patternscale_a),u_patternscale_b:new o.Uniform2f(b,u.u_patternscale_b),u_sdfgamma:new o.Uniform1f(b,u.u_sdfgamma),u_image:new o.Uniform1i(b,u.u_image),u_tex_y_a:new o.Uniform1f(b,u.u_tex_y_a),u_tex_y_b:new o.Uniform1f(b,u.u_tex_y_b),u_mix:new o.Uniform1f(b,u.u_mix)}),raster:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_tl_parent:new o.Uniform2f(b,u.u_tl_parent),u_scale_parent:new o.Uniform1f(b,u.u_scale_parent),u_buffer_scale:new o.Uniform1f(b,u.u_buffer_scale),u_fade_t:new o.Uniform1f(b,u.u_fade_t),u_opacity:new o.Uniform1f(b,u.u_opacity),u_image0:new o.Uniform1i(b,u.u_image0),u_image1:new o.Uniform1i(b,u.u_image1),u_brightness_low:new o.Uniform1f(b,u.u_brightness_low),u_brightness_high:new o.Uniform1f(b,u.u_brightness_high),u_saturation_factor:new o.Uniform1f(b,u.u_saturation_factor),u_contrast_factor:new o.Uniform1f(b,u.u_contrast_factor),u_spin_weights:new o.Uniform3f(b,u.u_spin_weights)}),symbolIcon:(b,u)=>({u_is_size_zoom_constant:new o.Uniform1i(b,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(b,u.u_is_size_feature_constant),u_size_t:new o.Uniform1f(b,u.u_size_t),u_size:new o.Uniform1f(b,u.u_size),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_pitch:new o.Uniform1f(b,u.u_pitch),u_rotate_symbol:new o.Uniform1i(b,u.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(b,u.u_aspect_ratio),u_fade_change:new o.Uniform1f(b,u.u_fade_change),u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(b,u.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(b,u.u_coord_matrix),u_is_text:new o.Uniform1i(b,u.u_is_text),u_pitch_with_map:new o.Uniform1i(b,u.u_pitch_with_map),u_texsize:new o.Uniform2f(b,u.u_texsize),u_texture:new o.Uniform1i(b,u.u_texture)}),symbolSDF:(b,u)=>({u_is_size_zoom_constant:new o.Uniform1i(b,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(b,u.u_is_size_feature_constant),u_size_t:new o.Uniform1f(b,u.u_size_t),u_size:new o.Uniform1f(b,u.u_size),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_pitch:new o.Uniform1f(b,u.u_pitch),u_rotate_symbol:new o.Uniform1i(b,u.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(b,u.u_aspect_ratio),u_fade_change:new o.Uniform1f(b,u.u_fade_change),u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(b,u.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(b,u.u_coord_matrix),u_is_text:new o.Uniform1i(b,u.u_is_text),u_pitch_with_map:new o.Uniform1i(b,u.u_pitch_with_map),u_texsize:new o.Uniform2f(b,u.u_texsize),u_texture:new o.Uniform1i(b,u.u_texture),u_gamma_scale:new o.Uniform1f(b,u.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(b,u.u_is_halo)}),symbolTextAndIcon:(b,u)=>({u_is_size_zoom_constant:new o.Uniform1i(b,u.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(b,u.u_is_size_feature_constant),u_size_t:new o.Uniform1f(b,u.u_size_t),u_size:new o.Uniform1f(b,u.u_size),u_camera_to_center_distance:new o.Uniform1f(b,u.u_camera_to_center_distance),u_pitch:new o.Uniform1f(b,u.u_pitch),u_rotate_symbol:new o.Uniform1i(b,u.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(b,u.u_aspect_ratio),u_fade_change:new o.Uniform1f(b,u.u_fade_change),u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(b,u.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(b,u.u_coord_matrix),u_is_text:new o.Uniform1i(b,u.u_is_text),u_pitch_with_map:new o.Uniform1i(b,u.u_pitch_with_map),u_texsize:new o.Uniform2f(b,u.u_texsize),u_texsize_icon:new o.Uniform2f(b,u.u_texsize_icon),u_texture:new o.Uniform1i(b,u.u_texture),u_texture_icon:new o.Uniform1i(b,u.u_texture_icon),u_gamma_scale:new o.Uniform1f(b,u.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(b,u.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(b,u.u_is_halo)}),background:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_opacity:new o.Uniform1f(b,u.u_opacity),u_color:new o.UniformColor(b,u.u_color)}),backgroundPattern:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_opacity:new o.Uniform1f(b,u.u_opacity),u_image:new o.Uniform1i(b,u.u_image),u_pattern_tl_a:new o.Uniform2f(b,u.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(b,u.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(b,u.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(b,u.u_pattern_br_b),u_texsize:new o.Uniform2f(b,u.u_texsize),u_mix:new o.Uniform1f(b,u.u_mix),u_pattern_size_a:new o.Uniform2f(b,u.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(b,u.u_pattern_size_b),u_scale_a:new o.Uniform1f(b,u.u_scale_a),u_scale_b:new o.Uniform1f(b,u.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(b,u.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(b,u.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(b,u.u_tile_units_to_pixels)}),terrain:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_texture:new o.Uniform1i(b,u.u_texture)}),terrainDepth:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix)}),terrainCoords:(b,u)=>({u_matrix:new o.UniformMatrix4f(b,u.u_matrix),u_texture:new o.Uniform1i(b,u.u_texture),u_terrain_coords_id:new o.Uniform1f(b,u.u_terrain_coords_id)})};class Pf{constructor(u,p,y){this.context=u;const S=u.gl;this.buffer=S.createBuffer(),this.dynamicDraw=Boolean(y),this.context.unbindVAO(),u.bindElementBuffer.set(this.buffer),S.bufferData(S.ELEMENT_ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(u){const p=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),p.bufferSubData(p.ELEMENT_ARRAY_BUFFER,0,u.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Mf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Df{constructor(u,p,y,S){this.length=p.length,this.attributes=y,this.itemSize=p.bytesPerElement,this.dynamicDraw=S,this.context=u;const C=u.gl;this.buffer=C.createBuffer(),u.bindVertexBuffer.set(this.buffer),C.bufferData(C.ARRAY_BUFFER,p.arrayBuffer,this.dynamicDraw?C.DYNAMIC_DRAW:C.STATIC_DRAW),this.dynamicDraw||delete p.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(u){if(u.length!==this.length)throw new Error(`Length of new data is ${u.length}, which doesn't match current length of ${this.length}`);const p=this.context.gl;this.bind(),p.bufferSubData(p.ARRAY_BUFFER,0,u.arrayBuffer)}enableAttributes(u,p){for(let y=0;y<this.attributes.length;y++){const S=p.attributes[this.attributes[y].name];S!==void 0&&u.enableVertexAttribArray(S)}}setVertexAttribPointers(u,p,y){for(let S=0;S<this.attributes.length;S++){const C=this.attributes[S],k=p.attributes[C.name];k!==void 0&&u.vertexAttribPointer(k,C.components,u[Mf[C.type]],!1,this.itemSize,C.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Dr{constructor(u){this.gl=u.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(u){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class km extends Dr{getDefault(){return o.Color.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.clearColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Xy extends Dr{getDefault(){return 1}set(u){(u!==this.current||this.dirty)&&(this.gl.clearDepth(u),this.current=u,this.dirty=!1)}}class Kl extends Dr{getDefault(){return 0}set(u){(u!==this.current||this.dirty)&&(this.gl.clearStencil(u),this.current=u,this.dirty=!1)}}class Jl extends Dr{getDefault(){return[!0,!0,!0,!0]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.colorMask(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class Lm extends Dr{getDefault(){return!0}set(u){(u!==this.current||this.dirty)&&(this.gl.depthMask(u),this.current=u,this.dirty=!1)}}class zi extends Dr{getDefault(){return 255}set(u){(u!==this.current||this.dirty)&&(this.gl.stencilMask(u),this.current=u,this.dirty=!1)}}class kf extends Dr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(u){const p=this.current;(u.func!==p.func||u.ref!==p.ref||u.mask!==p.mask||this.dirty)&&(this.gl.stencilFunc(u.func,u.ref,u.mask),this.current=u,this.dirty=!1)}}class Mc extends Dr{getDefault(){const u=this.gl;return[u.KEEP,u.KEEP,u.KEEP]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||this.dirty)&&(this.gl.stencilOp(u[0],u[1],u[2]),this.current=u,this.dirty=!1)}}class Dc extends Dr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),this.current=u,this.dirty=!1}}class Lf extends Dr{getDefault(){return[0,1]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.depthRange(u[0],u[1]),this.current=u,this.dirty=!1)}}class Of extends Dr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),this.current=u,this.dirty=!1}}class kc extends Dr{getDefault(){return this.gl.LESS}set(u){(u!==this.current||this.dirty)&&(this.gl.depthFunc(u),this.current=u,this.dirty=!1)}}class Rf extends Dr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.BLEND):p.disable(p.BLEND),this.current=u,this.dirty=!1}}class zf extends Dr{getDefault(){const u=this.gl;return[u.ONE,u.ZERO]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||this.dirty)&&(this.gl.blendFunc(u[0],u[1]),this.current=u,this.dirty=!1)}}class Lc extends Dr{getDefault(){return o.Color.transparent}set(u){const p=this.current;(u.r!==p.r||u.g!==p.g||u.b!==p.b||u.a!==p.a||this.dirty)&&(this.gl.blendColor(u.r,u.g,u.b,u.a),this.current=u,this.dirty=!1)}}class Om extends Dr{getDefault(){return this.gl.FUNC_ADD}set(u){(u!==this.current||this.dirty)&&(this.gl.blendEquation(u),this.current=u,this.dirty=!1)}}class Rm extends Dr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;u?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),this.current=u,this.dirty=!1}}class Qs extends Dr{getDefault(){return this.gl.BACK}set(u){(u!==this.current||this.dirty)&&(this.gl.cullFace(u),this.current=u,this.dirty=!1)}}class Yy extends Dr{getDefault(){return this.gl.CCW}set(u){(u!==this.current||this.dirty)&&(this.gl.frontFace(u),this.current=u,this.dirty=!1)}}class Ky extends Dr{getDefault(){return null}set(u){(u!==this.current||this.dirty)&&(this.gl.useProgram(u),this.current=u,this.dirty=!1)}}class Jy extends Dr{getDefault(){return this.gl.TEXTURE0}set(u){(u!==this.current||this.dirty)&&(this.gl.activeTexture(u),this.current=u,this.dirty=!1)}}class Qy extends Dr{getDefault(){const u=this.gl;return[0,0,u.drawingBufferWidth,u.drawingBufferHeight]}set(u){const p=this.current;(u[0]!==p[0]||u[1]!==p[1]||u[2]!==p[2]||u[3]!==p[3]||this.dirty)&&(this.gl.viewport(u[0],u[1],u[2],u[3]),this.current=u,this.dirty=!1)}}class e0 extends Dr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindFramebuffer(p.FRAMEBUFFER,u),this.current=u,this.dirty=!1}}class t0 extends Dr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindRenderbuffer(p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class Bf extends Dr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindTexture(p.TEXTURE_2D,u),this.current=u,this.dirty=!1}}class Oc extends Dr{getDefault(){return null}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.bindBuffer(p.ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Ff extends Dr{getDefault(){return null}set(u){const p=this.gl;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,u),this.current=u,this.dirty=!1}}class Nf extends Dr{constructor(u){super(u),this.vao=u.extVertexArrayObject}getDefault(){return null}set(u){this.vao&&(u!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(u),this.current=u,this.dirty=!1)}}class el extends Dr{getDefault(){return 4}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_ALIGNMENT,u),this.current=u,this.dirty=!1}}class zm extends Dr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_PREMULTIPLY_ALPHA_WEBGL,u),this.current=u,this.dirty=!1}}class Bm extends Dr{getDefault(){return!1}set(u){if(u===this.current&&!this.dirty)return;const p=this.gl;p.pixelStorei(p.UNPACK_FLIP_Y_WEBGL,u),this.current=u,this.dirty=!1}}class Rc extends Dr{constructor(u,p){super(u),this.context=u,this.parent=p}getDefault(){return null}}class us extends Rc{setDirty(){this.dirty=!0}set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferTexture2D(p.FRAMEBUFFER,p.COLOR_ATTACHMENT0,p.TEXTURE_2D,u,0),this.current=u,this.dirty=!1}}class Fm extends Rc{set(u){if(u===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const p=this.gl;p.framebufferRenderbuffer(p.FRAMEBUFFER,p.DEPTH_ATTACHMENT,p.RENDERBUFFER,u),this.current=u,this.dirty=!1}}class tl{constructor(u,p,y,S){this.context=u,this.width=p,this.height=y;const C=u.gl,k=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new us(u,k),S&&(this.depthAttachment=new Fm(u,k)),C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const u=this.context.gl,p=this.colorAttachment.get();if(p&&u.deleteTexture(p),this.depthAttachment){const y=this.depthAttachment.get();y&&u.deleteRenderbuffer(y)}u.deleteFramebuffer(this.framebuffer)}}class an{constructor(u,p,y){this.blendFunction=u,this.blendColor=p,this.mask=y}}an.Replace=[1,0],an.disabled=new an(an.Replace,o.Color.transparent,[!1,!1,!1,!1]),an.unblended=new an(an.Replace,o.Color.transparent,[!0,!0,!0,!0]),an.alphaBlended=new an([1,771],o.Color.transparent,[!0,!0,!0,!0]);class Nm{constructor(u){this.gl=u,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new km(this),this.clearDepth=new Xy(this),this.clearStencil=new Kl(this),this.colorMask=new Jl(this),this.depthMask=new Lm(this),this.stencilMask=new zi(this),this.stencilFunc=new kf(this),this.stencilOp=new Mc(this),this.stencilTest=new Dc(this),this.depthRange=new Lf(this),this.depthTest=new Of(this),this.depthFunc=new kc(this),this.blend=new Rf(this),this.blendFunc=new zf(this),this.blendColor=new Lc(this),this.blendEquation=new Om(this),this.cullFace=new Rm(this),this.cullFaceSide=new Qs(this),this.frontFace=new Yy(this),this.program=new Ky(this),this.activeTexture=new Jy(this),this.viewport=new Qy(this),this.bindFramebuffer=new e0(this),this.bindRenderbuffer=new t0(this),this.bindTexture=new Bf(this),this.bindVertexBuffer=new Oc(this),this.bindElementBuffer=new Ff(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Nf(this),this.pixelStoreUnpack=new el(this),this.pixelStoreUnpackPremultiplyAlpha=new zm(this),this.pixelStoreUnpackFlipY=new Bm(this),this.extTextureFilterAnisotropic=u.getExtension("EXT_texture_filter_anisotropic")||u.getExtension("MOZ_EXT_texture_filter_anisotropic")||u.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=u.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=u.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(u.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=u.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=u.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=u.getParameter(u.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(u,p){return new Pf(this,u,p)}createVertexBuffer(u,p,y){return new Df(this,u,p,y)}createRenderbuffer(u,p,y){const S=this.gl,C=S.createRenderbuffer();return this.bindRenderbuffer.set(C),S.renderbufferStorage(S.RENDERBUFFER,u,p,y),this.bindRenderbuffer.set(null),C}createFramebuffer(u,p,y){return new tl(this,u,p,y)}clear({color:u,depth:p}){const y=this.gl;let S=0;u&&(S|=y.COLOR_BUFFER_BIT,this.clearColor.set(u),this.colorMask.set([!0,!0,!0,!0])),p!==void 0&&(S|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(p),this.depthMask.set(!0)),y.clear(S)}setCullFace(u){u.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(u.mode),this.frontFace.set(u.frontFace))}setDepthMode(u){u.func!==this.gl.ALWAYS||u.mask?(this.depthTest.set(!0),this.depthFunc.set(u.func),this.depthMask.set(u.mask),this.depthRange.set(u.range)):this.depthTest.set(!1)}setStencilMode(u){u.test.func!==this.gl.ALWAYS||u.mask?(this.stencilTest.set(!0),this.stencilMask.set(u.mask),this.stencilOp.set([u.fail,u.depthFail,u.pass]),this.stencilFunc.set({func:u.test.func,ref:u.ref,mask:u.test.mask})):this.stencilTest.set(!1)}setColorMode(u){g(u.blendFunction,an.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(u.blendFunction),this.blendColor.set(u.blendColor)),this.colorMask.set(u.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class xr{constructor(u,p,y){this.func=u,this.mask=p,this.range=y}}xr.ReadOnly=!1,xr.ReadWrite=!0,xr.disabled=new xr(519,xr.ReadOnly,[0,1]);const kr=7680;class en{constructor(u,p,y,S,C,k){this.test=u,this.ref=p,this.mask=y,this.fail=S,this.depthFail=C,this.pass=k}}en.disabled=new en({func:519,mask:0},0,0,kr,kr,kr);class cn{constructor(u,p,y){this.enable=u,this.mode=p,this.frontFace=y}}let Ql;function rl(b,u,p,y,S,C,k){const z=b.context,B=z.gl,V=b.useProgram("collisionBox"),H=[];let X=0,J=0;for(let de=0;de<y.length;de++){const Re=y[de],ke=u.getTile(Re),je=ke.getBucket(p);if(!je)continue;let He=Re.posMatrix;S[0]===0&&S[1]===0||(He=b.translatePosMatrix(Re.posMatrix,ke,S,C));const rt=k?je.textCollisionBox:je.iconCollisionBox,Ue=je.collisionCircleArray;if(Ue.length>0){const St=o.create(),mt=He;o.mul(St,je.placementInvProjMatrix,b.transform.glCoordMatrix),o.mul(St,St,je.placementViewportMatrix),H.push({circleArray:Ue,circleOffset:J,transform:mt,invTransform:St,coord:Re}),X+=Ue.length/4,J=X}rt&&V.draw(z,B.LINES,xr.disabled,en.disabled,b.colorModeForRenderPass(),cn.disabled,ls(He,b.transform,ke),b.style.terrain&&b.style.terrain.getTerrainData(Re),p.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,null,b.transform.zoom,null,null,rt.collisionVertexBuffer)}if(!k||!H.length)return;const he=b.useProgram("collisionCircle"),se=new o.CollisionCircleLayoutArray;se.resize(4*X),se._trim();let ue=0;for(const de of H)for(let Re=0;Re<de.circleArray.length/4;Re++){const ke=4*Re,je=de.circleArray[ke+0],He=de.circleArray[ke+1],rt=de.circleArray[ke+2],Ue=de.circleArray[ke+3];se.emplace(ue++,je,He,rt,Ue,0),se.emplace(ue++,je,He,rt,Ue,1),se.emplace(ue++,je,He,rt,Ue,2),se.emplace(ue++,je,He,rt,Ue,3)}(!Ql||Ql.length<2*X)&&(Ql=function(de){const Re=2*de,ke=new o.QuadTriangleArray;ke.resize(Re),ke._trim();for(let je=0;je<Re;je++){const He=6*je;ke.uint16[He+0]=4*je+0,ke.uint16[He+1]=4*je+1,ke.uint16[He+2]=4*je+2,ke.uint16[He+3]=4*je+2,ke.uint16[He+4]=4*je+3,ke.uint16[He+5]=4*je+0}return ke}(X));const we=z.createIndexBuffer(Ql,!0),Ae=z.createVertexBuffer(se,o.collisionCircleLayout.members,!0);for(const de of H){const Re={u_matrix:de.transform,u_inv_matrix:de.invTransform,u_camera_to_center_distance:(Me=b.transform).cameraToCenterDistance,u_viewport_size:[Me.width,Me.height]};he.draw(z,B.TRIANGLES,xr.disabled,en.disabled,b.colorModeForRenderPass(),cn.disabled,Re,b.style.terrain&&b.style.terrain.getTerrainData(de.coord),p.id,Ae,we,o.SegmentVector.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,b.transform.zoom,null,null,null)}var Me;Ae.destroy(),we.destroy()}cn.disabled=new cn(!1,1029,2305),cn.backCCW=new cn(!0,1029,2305);const r0=o.identity(new Float32Array(16));function n0(b,u,p,y,S,C){const{horizontalAlign:k,verticalAlign:z}=o.getAnchorAlignment(b),B=-(k-.5)*u,V=-(z-.5)*p,H=o.evaluateVariableOffset(b,y);return new o.pointGeometry((B/S+H[0])*C,(V/S+H[1])*C)}function Vm(b,u,p,y,S,C,k,z,B,V,H){const X=b.text.placedSymbolArray,J=b.text.dynamicLayoutVertexArray,he=b.icon.dynamicLayoutVertexArray,se={};J.clear();for(let ue=0;ue<X.length;ue++){const we=X.get(ue),Ae=b.allowVerticalPlacement&&!we.placedOrientation,Me=we.hidden||!we.crossTileID||Ae?null:y[we.crossTileID];if(Me){const de=new o.pointGeometry(we.anchorX,we.anchorY),Re=hr(de,p?k:C,H),ke=di(S.cameraToCenterDistance,Re.signedDistanceFromCamera);let je=o.evaluateSizeForFeature(b.textSizeData,B,we)*ke/o.ONE_EM;p&&(je*=b.tilePixelRatio/z);const{width:He,height:rt,anchor:Ue,textOffset:St,textBoxScale:mt}=Me,Tt=n0(Ue,He,rt,St,mt,je),sr=p?hr(de.add(Tt),C,H).point:Re.point.add(u?Tt.rotate(-S.angle):Tt),dr=b.allowVerticalPlacement&&we.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let jt=0;jt<we.numGlyphs;jt++)o.addDynamicAttributes(J,sr,dr);V&&we.associatedIconIndex>=0&&(se[we.associatedIconIndex]={shiftedAnchor:sr,angle:dr})}else rr(we.numGlyphs,J)}if(V){he.clear();const ue=b.icon.placedSymbolArray;for(let we=0;we<ue.length;we++){const Ae=ue.get(we);if(Ae.hidden)rr(Ae.numGlyphs,he);else{const Me=se[we];if(Me)for(let de=0;de<Ae.numGlyphs;de++)o.addDynamicAttributes(he,Me.shiftedAnchor,Me.angle);else rr(Ae.numGlyphs,he)}}b.icon.dynamicLayoutVertexBuffer.updateData(he)}b.text.dynamicLayoutVertexBuffer.updateData(J)}function i0(b,u,p){return p.iconsInText&&u?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function zc(b,u,p,y,S,C,k,z,B,V,H,X){const J=b.context,he=J.gl,se=b.transform,ue=z==="map",we=B==="map",Ae=z!=="viewport"&&p.layout.get("symbol-placement")!=="point",Me=ue&&!we&&!Ae,de=!p.layout.get("symbol-sort-key").isConstant();let Re=!1;const ke=b.depthModeForSublayer(0,xr.ReadOnly),je=p.layout.get("text-variable-anchor"),He=[];for(const rt of y){const Ue=u.getTile(rt),St=Ue.getBucket(p);if(!St)continue;const mt=S?St.text:St.icon;if(!mt||!mt.segments.get().length)continue;const Tt=mt.programConfigurations.get(p.id),sr=S||St.sdfIcons,dr=S?St.textSizeData:St.iconSizeData,jt=we||se.pitch!==0,Br=b.useProgram(i0(sr,S,St),Tt),Fr=o.evaluateSizeForZoom(dr,se.zoom),br=b.style.terrain&&b.style.terrain.getTerrainData(rt);let Tr,jr,Hn,La,ga=[0,0],Oa=null;if(S){if(jr=Ue.glyphAtlasTexture,Hn=he.LINEAR,Tr=Ue.glyphAtlasTexture.size,St.iconsInText){ga=Ue.imageAtlasTexture.size,Oa=Ue.imageAtlasTexture;const ia=dr.kind==="composite"||dr.kind==="camera";La=jt||b.options.rotating||b.options.zooming||ia?he.LINEAR:he.NEAREST}}else{const ia=p.layout.get("icon-size").constantOr(0)!==1||St.iconsNeedLinear;jr=Ue.imageAtlasTexture,Hn=sr||b.options.rotating||b.options.zooming||ia||jt?he.LINEAR:he.NEAREST,Tr=Ue.imageAtlasTexture.size}const Bo=Dn(Ue,1,b.transform.zoom),na=Mr(rt.posMatrix,we,ue,b.transform,Bo),Ti=xn(rt.posMatrix,we,ue,b.transform,Bo),uo=je&&St.hasTextData(),Hc=p.layout.get("icon-text-fit")!=="none"&&uo&&St.hasIconData();if(Ae){const ia=b.style.terrain?(ed,ll)=>b.style.terrain.getElevation(rt,ed,ll):null,ds=p.layout.get("text-rotation-alignment")==="map";ii(St,rt.posMatrix,b,S,na,Ti,we,V,ds,ia)}const Fn=b.translatePosMatrix(rt.posMatrix,Ue,C,k),mr=Ae||S&&je||Hc?r0:na,Rr=b.translatePosMatrix(Ti,Ue,C,k,!0),Gn=sr&&p.paint.get(S?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let qn;qn=sr?St.iconsInText?Dm(dr.kind,Fr,Me,we,b,Fn,mr,Rr,Tr,ga):Pc(dr.kind,Fr,Me,we,b,Fn,mr,Rr,S,Tr,!0):Af(dr.kind,Fr,Me,we,b,Fn,mr,Rr,S,Tr);const fn={program:Br,buffers:mt,uniformValues:qn,atlasTexture:jr,atlasTextureIcon:Oa,atlasInterpolation:Hn,atlasInterpolationIcon:La,isSDF:sr,hasHalo:Gn};if(de&&St.canOverlap){Re=!0;const ia=mt.segments.get();for(const ds of ia)He.push({segments:new o.SegmentVector([ds]),sortKey:ds.sortKey,state:fn,terrainData:br})}else He.push({segments:mt.segments,sortKey:0,state:fn,terrainData:br})}Re&&He.sort((rt,Ue)=>rt.sortKey-Ue.sortKey);for(const rt of He){const Ue=rt.state;if(J.activeTexture.set(he.TEXTURE0),Ue.atlasTexture.bind(Ue.atlasInterpolation,he.CLAMP_TO_EDGE),Ue.atlasTextureIcon&&(J.activeTexture.set(he.TEXTURE1),Ue.atlasTextureIcon&&Ue.atlasTextureIcon.bind(Ue.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),Ue.isSDF){const St=Ue.uniformValues;Ue.hasHalo&&(St.u_is_halo=1,eu(Ue.buffers,rt.segments,p,b,Ue.program,ke,H,X,St,rt.terrainData)),St.u_is_halo=0}eu(Ue.buffers,rt.segments,p,b,Ue.program,ke,H,X,Ue.uniformValues,rt.terrainData)}}function eu(b,u,p,y,S,C,k,z,B,V){const H=y.context;S.draw(H,H.gl.TRIANGLES,C,k,z,cn.disabled,B,V,p.id,b.layoutVertexBuffer,b.indexBuffer,u,p.paint,y.transform.zoom,b.programConfigurations.get(p.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function tu(b,u,p,y,S,C,k){const z=b.context.gl,B=p.paint.get("fill-pattern"),V=B&&B.constantOr(1),H=p.getCrossfadeParameters();let X,J,he,se,ue;k?(J=V&&!p.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=z.LINES):(J=V?"fillPattern":"fill",X=z.TRIANGLES);for(const we of y){const Ae=u.getTile(we);if(V&&!Ae.patternsLoaded())continue;const Me=Ae.getBucket(p);if(!Me)continue;const de=Me.programConfigurations.get(p.id),Re=b.useProgram(J,de),ke=b.style.terrain&&b.style.terrain.getTerrainData(we);V&&(b.context.activeTexture.set(z.TEXTURE0),Ae.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),de.updatePaintBuffers(H));const je=B.constantOr(null);if(je&&Ae.imageAtlas){const Ue=Ae.imageAtlas,St=Ue.patternPositions[je.to.toString()],mt=Ue.patternPositions[je.from.toString()];St&&mt&&de.setConstantPatternPositions(St,mt)}const He=ke?we:null,rt=b.translatePosMatrix(He?He.posMatrix:we.posMatrix,Ae,p.paint.get("fill-translate"),p.paint.get("fill-translate-anchor"));if(k){se=Me.indexBuffer2,ue=Me.segments2;const Ue=[z.drawingBufferWidth,z.drawingBufferHeight];he=J==="fillOutlinePattern"&&V?Am(rt,b,H,Ae,Ue):Cm(rt,Ue)}else se=Me.indexBuffer,ue=Me.segments,he=V?Ef(rt,b,H,Ae):Ec(rt);Re.draw(b.context,X,S,b.stencilModeForClipping(we),C,cn.disabled,he,ke,p.id,Me.layoutVertexBuffer,se,ue,p.paint,b.transform.zoom,de)}}function ru(b,u,p,y,S,C,k){const z=b.context,B=z.gl,V=p.paint.get("fill-extrusion-pattern"),H=V.constantOr(1),X=p.getCrossfadeParameters(),J=p.paint.get("fill-extrusion-opacity");for(const he of y){const se=u.getTile(he),ue=se.getBucket(p);if(!ue)continue;const we=b.style.terrain&&b.style.terrain.getTerrainData(he),Ae=ue.programConfigurations.get(p.id),Me=b.useProgram(H?"fillExtrusionPattern":"fillExtrusion",Ae);H&&(b.context.activeTexture.set(B.TEXTURE0),se.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Ae.updatePaintBuffers(X));const de=V.constantOr(null);if(de&&se.imageAtlas){const He=se.imageAtlas,rt=He.patternPositions[de.to.toString()],Ue=He.patternPositions[de.from.toString()];rt&&Ue&&Ae.setConstantPatternPositions(rt,Ue)}const Re=b.translatePosMatrix(he.posMatrix,se,p.paint.get("fill-extrusion-translate"),p.paint.get("fill-extrusion-translate-anchor")),ke=p.paint.get("fill-extrusion-vertical-gradient"),je=H?qy(Re,b,ke,J,he,X,se):Tf(Re,b,ke,J);Me.draw(z,z.gl.TRIANGLES,S,C,k,cn.backCCW,je,we,p.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,p.paint,b.transform.zoom,Ae,b.style.terrain&&ue.centroidVertexBuffer)}}function Vf(b,u,p,y,S,C,k){const z=b.context,B=z.gl,V=p.fbo;if(!V)return;const H=b.useProgram("hillshade"),X=b.style.terrain&&b.style.terrain.getTerrainData(u);z.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,V.colorAttachment.get()),H.draw(z,B.TRIANGLES,S,C,k,cn.disabled,((J,he,se,ue)=>{const we=se.paint.get("hillshade-shadow-color"),Ae=se.paint.get("hillshade-highlight-color"),Me=se.paint.get("hillshade-accent-color");let de=se.paint.get("hillshade-illumination-direction")*(Math.PI/180);se.paint.get("hillshade-illumination-anchor")==="viewport"&&(de-=J.transform.angle);const Re=!J.options.moving;return{u_matrix:ue?ue.posMatrix:J.transform.calculatePosMatrix(he.tileID.toUnwrapped(),Re),u_image:0,u_latrange:Ac(0,he.tileID),u_light:[se.paint.get("hillshade-exaggeration"),de],u_shadow:we,u_highlight:Ae,u_accent:Me}})(b,p,y,X?u:null),X,y.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}function Um(b,u,p,y,S,C){const k=b.context,z=k.gl,B=u.dem;if(B&&B.data){const V=B.dim,H=B.stride,X=B.getPixels();if(k.activeTexture.set(z.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),u.demTexture=u.demTexture||b.getTileTexture(H),u.demTexture){const he=u.demTexture;he.update(X,{premultiply:!1}),he.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else u.demTexture=new M(k,X,z.RGBA,{premultiply:!1}),u.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);k.activeTexture.set(z.TEXTURE0);let J=u.fbo;if(!J){const he=new M(k,{width:V,height:V,data:null},z.RGBA);he.bind(z.LINEAR,z.CLAMP_TO_EDGE),J=u.fbo=k.createFramebuffer(V,V,!0),J.colorAttachment.set(he.texture)}k.bindFramebuffer.set(J.framebuffer),k.viewport.set([0,0,V,V]),b.useProgram("hillshadePrepare").draw(k,z.TRIANGLES,y,S,C,cn.disabled,((he,se)=>{const ue=se.stride,we=o.create();return o.ortho(we,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(we,we,[0,-o.EXTENT,0]),{u_matrix:we,u_image:1,u_dimension:[ue,ue],u_zoom:he.overscaledZ,u_unpack:se.getUnpackVector()}})(u.tileID,B),null,p.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments),u.needsHillshadePrepare=!1}}function Bc(b,u,p,y,S,C){const k=y.paint.get("raster-fade-duration");if(!C&&k>0){const z=o.exported.now(),B=(z-b.timeAdded)/k,V=u?(z-u.timeAdded)/k:-1,H=p.getSource(),X=S.coveringZoomLevel({tileSize:H.tileSize,roundZoom:H.roundZoom}),J=!u||Math.abs(u.tileID.overscaledZ-X)>Math.abs(b.tileID.overscaledZ-X),he=J&&b.refreshedUponExpiration?1:o.clamp(J?B:1-V,0,1);return b.refreshedUponExpiration&&B>=1&&(b.refreshedUponExpiration=!1),u?{opacity:1,mix:1-he}:{opacity:he,mix:0}}return{opacity:1,mix:0}}const Fc=new o.Color(1,0,0,1),va=new o.Color(0,1,0,1),$m=new o.Color(0,0,1,1),Uf=new o.Color(1,0,1,1),jm=new o.Color(0,1,1,1);function cs(b,u,p,y){nl(b,0,u+p/2,b.transform.width,p,y)}function nu(b,u,p,y){nl(b,u-p/2,0,p,b.transform.height,y)}function nl(b,u,p,y,S,C){const k=b.context,z=k.gl;z.enable(z.SCISSOR_TEST),z.scissor(u*b.pixelRatio,p*b.pixelRatio,y*b.pixelRatio,S*b.pixelRatio),k.clear({color:C}),z.disable(z.SCISSOR_TEST)}function a0(b,u,p){const y=b.context,S=y.gl,C=p.posMatrix,k=b.useProgram("debug"),z=xr.disabled,B=en.disabled,V=b.colorModeForRenderPass(),H="$debug",X=b.style.terrain&&b.style.terrain.getTerrainData(p);y.activeTexture.set(S.TEXTURE0),b.emptyTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE);const J=u.getTileByID(p.key).latestRawTileData,he=Math.floor((J&&J.byteLength||0)/1024),se=u.getTile(p).tileSize,ue=512/Math.min(se,512)*(p.overscaledZ/b.transform.zoom)*.5;let we=p.canonical.toString();p.overscaledZ!==p.canonical.z&&(we+=` => ${p.overscaledZ}`),function(Ae,Me){Ae.initDebugOverlayCanvas();const de=Ae.debugOverlayCanvas,Re=Ae.context.gl,ke=Ae.debugOverlayCanvas.getContext("2d");ke.clearRect(0,0,de.width,de.height),ke.shadowColor="white",ke.shadowBlur=2,ke.lineWidth=1.5,ke.strokeStyle="white",ke.textBaseline="top",ke.font="bold 36px Open Sans, sans-serif",ke.fillText(Me,5,5),ke.strokeText(Me,5,5),Ae.debugOverlayTexture.update(de),Ae.debugOverlayTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE)}(b,`${we} ${he}kB`),k.draw(y,S.TRIANGLES,z,B,an.alphaBlended,cn.disabled,Zl(C,o.Color.transparent,ue),null,H,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),k.draw(y,S.LINE_STRIP,z,B,V,cn.disabled,Zl(C,o.Color.red),X,H,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function Nc(b,u,p){const y=b.context,S=y.gl,C=b.colorModeForRenderPass(),k=new xr(S.LEQUAL,xr.ReadWrite,b.depthRangeFor3D),z=b.useProgram("terrain"),B=u.getTerrainMesh(),V=u.getTerrainData(p.tileID);y.bindFramebuffer.set(null),y.viewport.set([0,0,b.width,b.height]),y.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,u.getRTTFramebuffer().colorAttachment.get());const H=b.transform.calculatePosMatrix(p.tileID.toUnwrapped());z.draw(y,S.TRIANGLES,k,en.disabled,C,cn.backCCW,{u_matrix:H,u_texture:0},V,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}function Hm(b,u,p,y){const S=b.context,C=p.tileSize*u.qualityFactor;p.textures[y]||(p.textures[y]=b.getTileTexture(C)||new M(S,{width:C,height:C,data:null},S.gl.RGBA),p.textures[y].bind(S.gl.LINEAR,S.gl.CLAMP_TO_EDGE),y===0&&u.sourceCache.renderHistory.unshift(p.tileID.key));const k=u.getRTTFramebuffer();k.colorAttachment.set(p.textures[y].texture),S.bindFramebuffer.set(k.framebuffer),S.viewport.set([0,0,C,C])}class Gm{constructor(u){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=u,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=u.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const u=this.painter.style,p=u.terrain;for(const y in u.sourceCaches){this._coordsDescendingInv[y]={};const S=u.sourceCaches[y].getVisibleCoordinates();for(const C of S){const k=p.sourceCache.getTerrainCoords(C);for(const z in k)this._coordsDescendingInv[y][z]||(this._coordsDescendingInv[y][z]=[]),this._coordsDescendingInv[y][z].push(k[z])}}for(const y of u._order){const S=u._layers[y],C=S.source;if(this._renderToTexture[S.type]&&!this._coordsDescendingInvStr[C]){this._coordsDescendingInvStr[C]={};for(const k in this._coordsDescendingInv[C])this._coordsDescendingInvStr[C][k]=this._coordsDescendingInv[C][k].map(z=>z.key).sort().join()}}return this._renderableTiles.forEach(y=>{for(const S in this._coordsDescendingInvStr){const C=this._coordsDescendingInvStr[S][y.tileID.key];C&&C!==y.textureCoords[S]&&y.clearTextures(this.painter),p.needsRerender(S,y.tileID)&&y.clearTextures(this.painter)}this._rerender[y.tileID.key]=!y.textures.length}),p.clearRerenderCache(),p.sourceCache.removeOutdated(this.painter),this}renderLayer(u){const p=u.type,y=this.painter,S=y.style._order,C=y.currentLayer,k=C+1===S.length;if(this._renderToTexture[p]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(S[C]),!k))return!0;if(this._renderToTexture[this._prevType]||p==="hillshade"||this._renderToTexture[p]&&k){this._prevType=p;const z=this._stacks.length-1,B=this._stacks[z]||[];for(const V of this._renderableTiles){if(Hm(y,y.style.terrain,V,z),this._rerender[V.tileID.key]){y.context.clear({color:o.Color.transparent});for(let H=0;H<B.length;H++){const X=y.style._layers[B[H]],J=X.source?this._coordsDescendingInv[X.source][V.tileID.key]:[V.tileID];y._renderTileClippingMasks(X,J),y.renderLayer(y,y.style.sourceCaches[X.source],X,J),X.source&&(V.textureCoords[X.source]=this._coordsDescendingInvStr[X.source][V.tileID.key])}}Nc(y,y.style.terrain,V)}if(p==="hillshade"){this._stacks.push([S[C]]);for(const V of this._renderableTiles){const H=this._coordsDescendingInv[u.source][V.tileID.key];Hm(y,y.style.terrain,V,this._stacks.length-1),y.context.clear({color:o.Color.transparent}),y._renderTileClippingMasks(u,H),y.renderLayer(y,y.style.sourceCaches[u.source],u,H),Nc(y,y.style.terrain,V)}return!0}return this._renderToTexture[p]}return!1}}const iu={symbol:function(b,u,p,y,S){if(b.renderPass!=="translucent")return;const C=en.disabled,k=b.colorModeForRenderPass();p.layout.get("text-variable-anchor")&&function(z,B,V,H,X,J,he){const se=B.transform,ue=X==="map",we=J==="map";for(const Ae of z){const Me=H.getTile(Ae),de=Me.getBucket(V);if(!de||!de.text||!de.text.segments.get().length)continue;const Re=o.evaluateSizeForZoom(de.textSizeData,se.zoom),ke=Dn(Me,1,B.transform.zoom),je=Mr(Ae.posMatrix,we,ue,B.transform,ke),He=V.layout.get("icon-text-fit")!=="none"&&de.hasIconData();if(Re){const rt=Math.pow(2,se.zoom-Me.tileID.overscaledZ);Vm(de,ue,we,he,se,je,Ae.posMatrix,rt,Re,He,B.style.terrain?(Ue,St)=>B.style.terrain.getElevation(Ae,Ue,St):null)}}}(y,b,p,u,p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),S),p.paint.get("icon-opacity").constantOr(1)!==0&&zc(b,u,p,y,!1,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),p.layout.get("icon-rotation-alignment"),p.layout.get("icon-pitch-alignment"),p.layout.get("icon-keep-upright"),C,k),p.paint.get("text-opacity").constantOr(1)!==0&&zc(b,u,p,y,!0,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),p.layout.get("text-rotation-alignment"),p.layout.get("text-pitch-alignment"),p.layout.get("text-keep-upright"),C,k),u.map.showCollisionBoxes&&(rl(b,u,p,y,p.paint.get("text-translate"),p.paint.get("text-translate-anchor"),!0),rl(b,u,p,y,p.paint.get("icon-translate"),p.paint.get("icon-translate-anchor"),!1))},circle:function(b,u,p,y){if(b.renderPass!=="translucent")return;const S=p.paint.get("circle-opacity"),C=p.paint.get("circle-stroke-width"),k=p.paint.get("circle-stroke-opacity"),z=!p.layout.get("circle-sort-key").isConstant();if(S.constantOr(1)===0&&(C.constantOr(1)===0||k.constantOr(1)===0))return;const B=b.context,V=B.gl,H=b.depthModeForSublayer(0,xr.ReadOnly),X=en.disabled,J=b.colorModeForRenderPass(),he=[];for(let se=0;se<y.length;se++){const ue=y[se],we=u.getTile(ue),Ae=we.getBucket(p);if(!Ae)continue;const Me=Ae.programConfigurations.get(p.id),de=b.useProgram("circle",Me),Re=Ae.layoutVertexBuffer,ke=Ae.indexBuffer,je=b.style.terrain&&b.style.terrain.getTerrainData(ue),He={programConfiguration:Me,program:de,layoutVertexBuffer:Re,indexBuffer:ke,uniformValues:Im(b,ue,we,p),terrainData:je};if(z){const rt=Ae.segments.get();for(const Ue of rt)he.push({segments:new o.SegmentVector([Ue]),sortKey:Ue.sortKey,state:He})}else he.push({segments:Ae.segments,sortKey:0,state:He})}z&&he.sort((se,ue)=>se.sortKey-ue.sortKey);for(const se of he){const{programConfiguration:ue,program:we,layoutVertexBuffer:Ae,indexBuffer:Me,uniformValues:de,terrainData:Re}=se.state;we.draw(B,V.TRIANGLES,H,X,J,cn.disabled,de,Re,p.id,Ae,Me,se.segments,p.paint,b.transform.zoom,ue)}},heatmap:function(b,u,p,y){if(p.paint.get("heatmap-opacity")!==0)if(b.renderPass==="offscreen"){const S=b.context,C=S.gl,k=en.disabled,z=new an([C.ONE,C.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(B,V,H){const X=B.gl;B.activeTexture.set(X.TEXTURE1),B.viewport.set([0,0,V.width/4,V.height/4]);let J=H.heatmapFbo;if(J)X.bindTexture(X.TEXTURE_2D,J.colorAttachment.get()),B.bindFramebuffer.set(J.framebuffer);else{const he=X.createTexture();X.bindTexture(X.TEXTURE_2D,he),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.LINEAR),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.LINEAR),J=H.heatmapFbo=B.createFramebuffer(V.width/4,V.height/4,!1),function(se,ue,we,Ae){const Me=se.gl;Me.texImage2D(Me.TEXTURE_2D,0,Me.RGBA,ue.width/4,ue.height/4,0,Me.RGBA,se.extRenderToTextureHalfFloat?se.extTextureHalfFloat.HALF_FLOAT_OES:Me.UNSIGNED_BYTE,null),Ae.colorAttachment.set(we)}(B,V,he,J)}})(S,b,p),S.clear({color:o.Color.transparent});for(let B=0;B<y.length;B++){const V=y[B];if(u.hasRenderableParent(V))continue;const H=u.getTile(V),X=H.getBucket(p);if(!X)continue;const J=X.programConfigurations.get(p.id),he=b.useProgram("heatmap",J),{zoom:se}=b.transform;he.draw(S,C.TRIANGLES,xr.disabled,k,z,cn.disabled,Cc(V.posMatrix,H,se,p.paint.get("heatmap-intensity")),null,p.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,p.paint,b.transform.zoom,J)}S.viewport.set([0,0,b.width,b.height])}else b.renderPass==="translucent"&&(b.context.setColorMode(b.colorModeForRenderPass()),function(S,C){const k=S.context,z=k.gl,B=C.heatmapFbo;if(!B)return;k.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,B.colorAttachment.get()),k.activeTexture.set(z.TEXTURE1);let V=C.colorRampTexture;V||(V=C.colorRampTexture=new M(k,C.colorRamp,z.RGBA)),V.bind(z.LINEAR,z.CLAMP_TO_EDGE),S.useProgram("heatmapTexture").draw(k,z.TRIANGLES,xr.disabled,en.disabled,S.colorModeForRenderPass(),cn.disabled,((H,X,J,he)=>{const se=o.create();o.ortho(se,0,H.width,H.height,0,0,1);const ue=H.context.gl;return{u_matrix:se,u_world:[ue.drawingBufferWidth,ue.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:X.paint.get("heatmap-opacity")}})(S,C),null,C.id,S.viewportBuffer,S.quadTriangleIndexBuffer,S.viewportSegments,C.paint,S.transform.zoom)}(b,p))},line:function(b,u,p,y){if(b.renderPass!=="translucent")return;const S=p.paint.get("line-opacity"),C=p.paint.get("line-width");if(S.constantOr(1)===0||C.constantOr(1)===0)return;const k=b.depthModeForSublayer(0,xr.ReadOnly),z=b.colorModeForRenderPass(),B=p.paint.get("line-dasharray"),V=p.paint.get("line-pattern"),H=V.constantOr(1),X=p.paint.get("line-gradient"),J=p.getCrossfadeParameters(),he=H?"linePattern":B?"lineSDF":X?"lineGradient":"line",se=b.context,ue=se.gl;let we=!0;for(const Ae of y){const Me=u.getTile(Ae);if(H&&!Me.patternsLoaded())continue;const de=Me.getBucket(p);if(!de)continue;const Re=de.programConfigurations.get(p.id),ke=b.context.program.get(),je=b.useProgram(he,Re),He=we||je.program!==ke,rt=b.style.terrain&&b.style.terrain.getTerrainData(Ae),Ue=V.constantOr(null);if(Ue&&Me.imageAtlas){const Tt=Me.imageAtlas,sr=Tt.patternPositions[Ue.to.toString()],dr=Tt.patternPositions[Ue.from.toString()];sr&&dr&&Re.setConstantPatternPositions(sr,dr)}const St=rt?Ae:null,mt=H?Ic(b,Me,p,J,St):B?Xl(b,Me,p,B,J,St):X?Cf(b,Me,p,de.lineClipsArray.length,St):Js(b,Me,p,St);if(H)se.activeTexture.set(ue.TEXTURE0),Me.imageAtlasTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),Re.updatePaintBuffers(J);else if(B&&(He||b.lineAtlas.dirty))se.activeTexture.set(ue.TEXTURE0),b.lineAtlas.bind(se);else if(X){const Tt=de.gradients[p.id];let sr=Tt.texture;if(p.gradientVersion!==Tt.version){let dr=256;if(p.stepInterpolant){const jt=u.getSource().maxzoom,Br=Ae.canonical.z===jt?Math.ceil(1<<b.transform.maxZoom-Ae.canonical.z):1;dr=o.clamp(o.nextPowerOfTwo(de.maxLineLength/o.EXTENT*1024*Br),256,se.maxTextureSize)}Tt.gradient=o.renderColorRamp({expression:p.gradientExpression(),evaluationKey:"lineProgress",resolution:dr,image:Tt.gradient||void 0,clips:de.lineClipsArray}),Tt.texture?Tt.texture.update(Tt.gradient):Tt.texture=new M(se,Tt.gradient,ue.RGBA),Tt.version=p.gradientVersion,sr=Tt.texture}se.activeTexture.set(ue.TEXTURE0),sr.bind(p.stepInterpolant?ue.NEAREST:ue.LINEAR,ue.CLAMP_TO_EDGE)}je.draw(se,ue.TRIANGLES,k,b.stencilModeForClipping(Ae),z,cn.disabled,mt,rt,p.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,p.paint,b.transform.zoom,Re,de.layoutVertexBuffer2),we=!1}},fill:function(b,u,p,y){const S=p.paint.get("fill-color"),C=p.paint.get("fill-opacity");if(C.constantOr(1)===0)return;const k=b.colorModeForRenderPass(),z=p.paint.get("fill-pattern"),B=b.opaquePassEnabledForLayer()&&!z.constantOr(1)&&S.constantOr(o.Color.transparent).a===1&&C.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===B){const V=b.depthModeForSublayer(1,b.renderPass==="opaque"?xr.ReadWrite:xr.ReadOnly);tu(b,u,p,y,V,k,!1)}if(b.renderPass==="translucent"&&p.paint.get("fill-antialias")){const V=b.depthModeForSublayer(p.getPaintProperty("fill-outline-color")?2:0,xr.ReadOnly);tu(b,u,p,y,V,k,!0)}},"fill-extrusion":function(b,u,p,y){const S=p.paint.get("fill-extrusion-opacity");if(S!==0&&b.renderPass==="translucent"){const C=new xr(b.context.gl.LEQUAL,xr.ReadWrite,b.depthRangeFor3D);if(S!==1||p.paint.get("fill-extrusion-pattern").constantOr(1))ru(b,u,p,y,C,en.disabled,an.disabled),ru(b,u,p,y,C,b.stencilModeFor3D(),b.colorModeForRenderPass());else{const k=b.colorModeForRenderPass();ru(b,u,p,y,C,en.disabled,k)}}},hillshade:function(b,u,p,y){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;const S=b.context,C=b.depthModeForSublayer(0,xr.ReadOnly),k=b.colorModeForRenderPass(),[z,B]=b.renderPass==="translucent"?b.stencilConfigForOverlap(y):[{},y];for(const V of B){const H=u.getTile(V);H.needsHillshadePrepare!==void 0&&H.needsHillshadePrepare&&b.renderPass==="offscreen"?Um(b,H,p,C,en.disabled,k):b.renderPass==="translucent"&&Vf(b,V,H,p,C,z[V.overscaledZ],k)}S.viewport.set([0,0,b.width,b.height])},raster:function(b,u,p,y){if(b.renderPass!=="translucent"||p.paint.get("raster-opacity")===0||!y.length)return;const S=b.context,C=S.gl,k=u.getSource(),z=b.useProgram("raster"),B=b.colorModeForRenderPass(),[V,H]=k instanceof wt?[{},y]:b.stencilConfigForOverlap(y),X=H[H.length-1].overscaledZ,J=!b.options.moving;for(const he of H){const se=b.depthModeForSublayer(he.overscaledZ-X,p.paint.get("raster-opacity")===1?xr.ReadWrite:xr.ReadOnly,C.LESS),ue=u.getTile(he);ue.registerFadeDuration(p.paint.get("raster-fade-duration"));const we=u.findLoadedParent(he,0),Ae=Bc(ue,we,u,p,b.transform,b.style.terrain);let Me,de;const Re=p.paint.get("raster-resampling")==="nearest"?C.NEAREST:C.LINEAR;S.activeTexture.set(C.TEXTURE0),ue.texture.bind(Re,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),S.activeTexture.set(C.TEXTURE1),we?(we.texture.bind(Re,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST),Me=Math.pow(2,we.tileID.overscaledZ-ue.tileID.overscaledZ),de=[ue.tileID.canonical.x*Me%1,ue.tileID.canonical.y*Me%1]):ue.texture.bind(Re,C.CLAMP_TO_EDGE,C.LINEAR_MIPMAP_NEAREST);const ke=b.style.terrain&&b.style.terrain.getTerrainData(he),je=ke?he:null,He=je?je.posMatrix:b.transform.calculatePosMatrix(he.toUnwrapped(),J),rt=Pm(He,de||[0,0],Me||1,Ae,p);k instanceof wt?z.draw(S,C.TRIANGLES,se,en.disabled,B,cn.disabled,rt,ke,p.id,k.boundsBuffer,b.quadTriangleIndexBuffer,k.boundsSegments):z.draw(S,C.TRIANGLES,se,V[he.overscaledZ],B,cn.disabled,rt,ke,p.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments)}},background:function(b,u,p,y){const S=p.paint.get("background-color"),C=p.paint.get("background-opacity");if(C===0)return;const k=b.context,z=k.gl,B=b.transform,V=B.tileSize,H=p.paint.get("background-pattern");if(b.isPatternMissing(H))return;const X=!H&&S.a===1&&C===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==X)return;const J=en.disabled,he=b.depthModeForSublayer(0,X==="opaque"?xr.ReadWrite:xr.ReadOnly),se=b.colorModeForRenderPass(),ue=b.useProgram(H?"backgroundPattern":"background"),we=y||B.coveringTiles({tileSize:V,terrain:b.style.terrain});H&&(k.activeTexture.set(z.TEXTURE0),b.imageManager.bind(b.context));const Ae=p.getCrossfadeParameters();for(const Me of we){const de=y?Me.posMatrix:b.transform.calculatePosMatrix(Me.toUnwrapped()),Re=H?Zy(de,C,b,H,{tileID:Me,tileSize:V},Ae):Wy(de,C,S),ke=b.style.terrain&&b.style.terrain.getTerrainData(Me);ue.draw(k,z.TRIANGLES,he,J,se,cn.disabled,Re,ke,p.id,b.tileExtentBuffer,b.quadTriangleIndexBuffer,b.tileExtentSegments)}},debug:function(b,u,p){for(let y=0;y<p.length;y++)a0(b,u,p[y])},custom:function(b,u,p){const y=b.context,S=p.implementation;if(b.renderPass==="offscreen"){const C=S.prerender;C&&(b.setCustomLayerDefaults(),y.setColorMode(b.colorModeForRenderPass()),C.call(S,y.gl,b.transform.customLayerMatrix()),y.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),y.setColorMode(b.colorModeForRenderPass()),y.setStencilMode(en.disabled);const C=S.renderingMode==="3d"?new xr(b.context.gl.LEQUAL,xr.ReadWrite,b.depthRangeFor3D):b.depthModeForSublayer(0,xr.ReadOnly);y.setDepthMode(C),S.render(y.gl,b.transform.customLayerMatrix()),y.setDirty(),b.setBaseState(),y.bindFramebuffer.set(null)}}};class $f{constructor(u,p){this.context=new Nm(u),this.transform=p,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.create(),renderTime:0},this.setup(),this.numSublayers=Dt.maxUnderzooming+Dt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yt,this.gpuTimers={}}resize(u,p,y){if(this.width=u*y,this.height=p*y,this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const S of this.style._order)this.style._layers[S].resize()}setup(){const u=this.context,p=new o.PosArray;p.emplaceBack(0,0),p.emplaceBack(o.EXTENT,0),p.emplaceBack(0,o.EXTENT),p.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=u.createVertexBuffer(p,wr.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const y=new o.PosArray;y.emplaceBack(0,0),y.emplaceBack(o.EXTENT,0),y.emplaceBack(0,o.EXTENT),y.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=u.createVertexBuffer(y,wr.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const S=new o.RasterBoundsArray;S.emplaceBack(0,0,0,0),S.emplaceBack(o.EXTENT,0,o.EXTENT,0),S.emplaceBack(0,o.EXTENT,0,o.EXTENT),S.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=u.createVertexBuffer(S,tt.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const C=new o.PosArray;C.emplaceBack(0,0),C.emplaceBack(1,0),C.emplaceBack(0,1),C.emplaceBack(1,1),this.viewportBuffer=u.createVertexBuffer(C,wr.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const k=new o.LineStripIndexArray;k.emplaceBack(0),k.emplaceBack(1),k.emplaceBack(3),k.emplaceBack(2),k.emplaceBack(0),this.tileBorderIndexBuffer=u.createIndexBuffer(k);const z=new o.TriangleIndexArray;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=u.createIndexBuffer(z),this.emptyTexture=new M(u,{width:1,height:1,data:new Uint8Array([0,0,0,0])},u.gl.RGBA);const B=this.context.gl;this.stencilClearMode=new en({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const u=this.context,p=u.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=o.create();o.ortho(y,0,this.width,this.height,0,0,1),o.scale(y,y,[p.drawingBufferWidth,p.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(u,p.TRIANGLES,xr.disabled,this.stencilClearMode,an.disabled,cn.disabled,Ks(y),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(u,p){if(this.currentStencilSource===u.source||!u.isTileClipped()||!p||!p.length)return;this.currentStencilSource=u.source;const y=this.context,S=y.gl;this.nextStencilID+p.length>256&&this.clearStencil(),y.setColorMode(an.disabled),y.setDepthMode(xr.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const k of p){const z=this._tileClippingMaskIDs[k.key]=this.nextStencilID++,B=this.style.terrain&&this.style.terrain.getTerrainData(k);C.draw(y,S.TRIANGLES,xr.disabled,new en({func:S.ALWAYS,mask:0},z,255,S.KEEP,S.KEEP,S.REPLACE),an.disabled,cn.disabled,Ks(k.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const u=this.nextStencilID++,p=this.context.gl;return new en({func:p.NOTEQUAL,mask:255},u,255,p.KEEP,p.KEEP,p.REPLACE)}stencilModeForClipping(u){const p=this.context.gl;return new en({func:p.EQUAL,mask:255},this._tileClippingMaskIDs[u.key],0,p.KEEP,p.KEEP,p.REPLACE)}stencilConfigForOverlap(u){const p=this.context.gl,y=u.sort((k,z)=>z.overscaledZ-k.overscaledZ),S=y[y.length-1].overscaledZ,C=y[0].overscaledZ-S+1;if(C>1){this.currentStencilSource=void 0,this.nextStencilID+C>256&&this.clearStencil();const k={};for(let z=0;z<C;z++)k[z+S]=new en({func:p.GEQUAL,mask:255},z+this.nextStencilID,255,p.KEEP,p.KEEP,p.REPLACE);return this.nextStencilID+=C,[k,y]}return[{[S]:en.disabled},y]}colorModeForRenderPass(){const u=this.context.gl;return this._showOverdrawInspector?new an([u.CONSTANT_COLOR,u.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?an.unblended:an.alphaBlended}depthModeForSublayer(u,p,y){if(!this.opaquePassEnabledForLayer())return xr.disabled;const S=1-((1+this.currentLayer)*this.numSublayers+u)*this.depthEpsilon;return new xr(y||this.context.gl.LEQUAL,p,[S,S])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(u,p){this.style=u,this.options=p,this.lineAtlas=u.lineAtlas,this.imageManager=u.imageManager,this.glyphManager=u.glyphManager,this.symbolFadeChange=u.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const y=this.style._order,S=this.style.sourceCaches,C=this.style.terrain&&new Gm(this);for(const V in S){const H=S[V];H.used&&H.prepare(this.context)}const k={},z={},B={};for(const V in S){const H=S[V];k[V]=H.getVisibleCoordinates(),z[V]=k[V].slice().reverse(),B[V]=H.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let V=0;V<y.length;V++)if(this.style._layers[y[V]].is3D()){this.opaquePassCutoff=V;break}if(C){this.opaquePassCutoff=0;const V=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!o.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||V.length)&&(o.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(H,X){const J=H.context,he=J.gl,se=an.unblended,ue=new xr(he.LEQUAL,xr.ReadWrite,[0,1]),we=X.getTerrainMesh(),Ae=X.sourceCache.getRenderableTiles(),Me=H.useProgram("terrainDepth");J.bindFramebuffer.set(X.getFramebuffer("depth").framebuffer),J.viewport.set([0,0,H.width/devicePixelRatio,H.height/devicePixelRatio]),J.clear({color:o.Color.transparent,depth:1});for(const de of Ae){const Re=X.getTerrainData(de.tileID),ke=H.transform.calculatePosMatrix(de.tileID.toUnwrapped());Me.draw(J,he.TRIANGLES,ue,en.disabled,se,cn.backCCW,{u_matrix:ke},Re,"terrain",we.vertexBuffer,we.indexBuffer,we.segments)}J.bindFramebuffer.set(null),J.viewport.set([0,0,H.width,H.height])}(this,this.style.terrain),function(H,X){const J=H.context,he=J.gl,se=an.unblended,ue=new xr(he.LEQUAL,xr.ReadWrite,[0,1]),we=X.getTerrainMesh(),Ae=X.getCoordsTexture(),Me=X.sourceCache.getRenderableTiles(),de=H.useProgram("terrainCoords");J.bindFramebuffer.set(X.getFramebuffer("coords").framebuffer),J.viewport.set([0,0,H.width/devicePixelRatio,H.height/devicePixelRatio]),J.clear({color:o.Color.transparent,depth:1}),X.coordsIndex=[];for(const Re of Me){const ke=X.getTerrainData(Re.tileID);J.activeTexture.set(he.TEXTURE0),he.bindTexture(he.TEXTURE_2D,Ae.texture);const je=H.transform.calculatePosMatrix(Re.tileID.toUnwrapped());de.draw(J,he.TRIANGLES,ue,en.disabled,se,cn.backCCW,{u_matrix:je,u_terrain_coords_id:(255-X.coordsIndex.length)/255,u_texture:0},ke,"terrain",we.vertexBuffer,we.indexBuffer,we.segments),X.coordsIndex.push(Re.tileID.key)}J.bindFramebuffer.set(null),J.viewport.set([0,0,H.width,H.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const V of y){const H=this.style._layers[V];if(!H.hasOffscreenPass()||H.isHidden(this.transform.zoom))continue;const X=z[H.source];(H.type==="custom"||X.length)&&this.renderLayer(this,S[H.source],H,X)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:p.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=p.showOverdrawInspector,this.depthRangeFor3D=[0,1-(u._order.length+2)*this.numSublayers*this.depthEpsilon],!C)for(this.renderPass="opaque",this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const V=this.style._layers[y[this.currentLayer]],H=S[V.source],X=k[V.source];this._renderTileClippingMasks(V,X),this.renderLayer(this,H,V,X)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const V=this.style._layers[y[this.currentLayer]],H=S[V.source];if(C&&C.renderLayer(V))continue;const X=(V.type==="symbol"?B:z)[V.source];this._renderTileClippingMasks(V,k[V.source]),this.renderLayer(this,H,V,X)}if(this.options.showTileBoundaries){let V,H;Object.values(this.style._layers).forEach(X=>{X.source&&!X.isHidden(this.transform.zoom)&&(X.source!==(H&&H.id)&&(H=this.style.sourceCaches[X.source]),(!V||V.getSource().maxzoom<H.getSource().maxzoom)&&(V=H))}),V&&iu.debug(this,V,V.getVisibleCoordinates())}this.options.showPadding&&function(V){const H=V.transform.padding;cs(V,V.transform.height-(H.top||0),3,Fc),cs(V,H.bottom||0,3,va),nu(V,H.left||0,3,$m),nu(V,V.transform.width-(H.right||0),3,Uf);const X=V.transform.centerPoint;(function(J,he,se,ue){nl(J,he-1,se-10,2,20,ue),nl(J,he-10,se-1,20,2,ue)})(V,X.x,V.transform.height-X.y,jm)}(this),this.context.setDefault()}renderLayer(u,p,y,S){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(S||[]).length)&&(this.id=y.id,this.gpuTimingStart(y),iu[y.type](u,p,y,S,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(u){if(!this.options.gpuTiming)return;const p=this.context.extTimerQuery;let y=this.gpuTimers[u.id];y||(y=this.gpuTimers[u.id]={calls:0,cpuTime:0,query:p.createQueryEXT()}),y.calls++,p.beginQueryEXT(p.TIME_ELAPSED_EXT,y.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;u.endQueryEXT(u.TIME_ELAPSED_EXT)}collectGpuTimers(){const u=this.gpuTimers;return this.gpuTimers={},u}queryGpuTimers(u){const p={};for(const y in u){const S=u[y],C=this.context.extTimerQuery,k=C.getQueryObjectEXT(S.query,C.QUERY_RESULT_EXT)/1e6;C.deleteQueryEXT(S.query),p[y]=k}return p}translatePosMatrix(u,p,y,S,C){if(!y[0]&&!y[1])return u;const k=C?S==="map"?this.transform.angle:0:S==="viewport"?-this.transform.angle:0;if(k){const V=Math.sin(k),H=Math.cos(k);y=[y[0]*H-y[1]*V,y[0]*V+y[1]*H]}const z=[C?y[0]:Dn(p,y[0],this.transform.zoom),C?y[1]:Dn(p,y[1],this.transform.zoom),0],B=new Float32Array(16);return o.translate(B,u,z),B}saveTileTexture(u){const p=this._tileTextures[u.size[0]];p?p.push(u):this._tileTextures[u.size[0]]=[u]}getTileTexture(u){const p=this._tileTextures[u];return p&&p.length>0?p.pop():null}isPatternMissing(u){if(!u)return!1;if(!u.from||!u.to)return!0;const p=this.imageManager.getPattern(u.from.toString()),y=this.imageManager.getPattern(u.to.toString());return!p||!y}useProgram(u,p){this.cache=this.cache||{};const y=u+(p?p.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[y]||(this.cache[y]=new Tm(this.context,u,Wl[u],p,If[u],this._showOverdrawInspector,this.style.terrain)),this.cache[y]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const u=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(u.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new M(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Vc{constructor(u,p){this.points=u,this.planes=p}static fromInvProjectionMatrix(u,p,y){const S=Math.pow(2,y),C=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const B=1/(z=o.transformMat4([],z,u))[3]/p*S;return o.mul$1(z,z,[B,B,1/z[3],B])}),k=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const B=o.sub([],C[z[0]],C[z[1]]),V=o.sub([],C[z[2]],C[z[1]]),H=o.normalize([],o.cross([],B,V)),X=-o.dot(H,C[z[1]]);return H.concat(X)});return new Vc(C,k)}}class au{constructor(u,p){this.min=u,this.max=p,this.center=o.scale$1([],o.add([],this.min,this.max),.5)}quadrant(u){const p=[u%2==0,u<2],y=o.clone$2(this.min),S=o.clone$2(this.max);for(let C=0;C<p.length;C++)y[C]=p[C]?this.min[C]:this.center[C],S[C]=p[C]?this.center[C]:this.max[C];return S[2]=this.max[2],new au(y,S)}distanceX(u){return Math.max(Math.min(this.max[0],u[0]),this.min[0])-u[0]}distanceY(u){return Math.max(Math.min(this.max[1],u[1]),this.min[1])-u[1]}intersects(u){const p=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let y=!0;for(let S=0;S<u.planes.length;S++){const C=u.planes[S];let k=0;for(let z=0;z<p.length;z++)o.dot$1(C,p[z])>=0&&k++;if(k===0)return 0;k!==p.length&&(y=!1)}if(y)return 2;for(let S=0;S<3;S++){let C=Number.MAX_VALUE,k=-Number.MAX_VALUE;for(let z=0;z<u.points.length;z++){const B=u.points[z][S]-this.min[S];C=Math.min(C,B),k=Math.max(k,B)}if(k<0||C>this.max[S]-this.min[S])return 0}return 1}}class il{constructor(u=0,p=0,y=0,S=0){if(isNaN(u)||u<0||isNaN(p)||p<0||isNaN(y)||y<0||isNaN(S)||S<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=u,this.bottom=p,this.left=y,this.right=S}interpolate(u,p,y){return p.top!=null&&u.top!=null&&(this.top=o.number(u.top,p.top,y)),p.bottom!=null&&u.bottom!=null&&(this.bottom=o.number(u.bottom,p.bottom,y)),p.left!=null&&u.left!=null&&(this.left=o.number(u.left,p.left,y)),p.right!=null&&u.right!=null&&(this.right=o.number(u.right,p.right,y)),this}getCenter(u,p){const y=o.clamp((this.left+u-this.right)/2,0,u),S=o.clamp((this.top+p-this.bottom)/2,0,p);return new o.pointGeometry(y,S)}equals(u){return this.top===u.top&&this.bottom===u.bottom&&this.left===u.left&&this.right===u.right}clone(){return new il(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class ou{constructor(u,p,y,S,C){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=C===void 0||!!C,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=y==null?0:y,this._maxPitch=S==null?60:S,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new il,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const u=new ou(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return u.tileSize=this.tileSize,u.latRange=this.latRange,u.width=this.width,u.height=this.height,u._center=this._center,u._elevation=this._elevation,u.zoom=this.zoom,u.angle=this.angle,u._fov=this._fov,u._pitch=this._pitch,u._unmodified=this._unmodified,u._edgeInsets=this._edgeInsets.clone(),u._calcMatrices(),u}get minZoom(){return this._minZoom}set minZoom(u){this._minZoom!==u&&(this._minZoom=u,this.zoom=Math.max(this.zoom,u))}get maxZoom(){return this._maxZoom}set maxZoom(u){this._maxZoom!==u&&(this._maxZoom=u,this.zoom=Math.min(this.zoom,u))}get minPitch(){return this._minPitch}set minPitch(u){this._minPitch!==u&&(this._minPitch=u,this.pitch=Math.max(this.pitch,u))}get maxPitch(){return this._maxPitch}set maxPitch(u){this._maxPitch!==u&&(this._maxPitch=u,this.pitch=Math.min(this.pitch,u))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(u){u===void 0?u=!0:u===null&&(u=!1),this._renderWorldCopies=u}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(u){const p=-o.wrap(u,-180,180)*Math.PI/180;var y;this.angle!==p&&(this._unmodified=!1,this.angle=p,this._calcMatrices(),this.rotationMatrix=(y=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),function(S,C,k){var z=C[0],B=C[1],V=C[2],H=C[3],X=Math.sin(k),J=Math.cos(k);S[0]=z*J+V*X,S[1]=B*J+H*X,S[2]=z*-X+V*J,S[3]=B*-X+H*J}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(u){const p=o.clamp(u,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==p&&(this._unmodified=!1,this._pitch=p,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(u){u=Math.max(.01,Math.min(60,u)),this._fov!==u&&(this._unmodified=!1,this._fov=u/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(u){const p=Math.min(Math.max(u,this.minZoom),this.maxZoom);this._zoom!==p&&(this._unmodified=!1,this._zoom=p,this.scale=this.zoomScale(p),this.tileZoom=Math.floor(p),this.zoomFraction=p-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(u){u.lat===this._center.lat&&u.lng===this._center.lng||(this._unmodified=!1,this._center=u,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(u){u!==this._elevation&&(this._elevation=u,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(u){this._edgeInsets.equals(u)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,u,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(u){return this._edgeInsets.equals(u)}interpolatePadding(u,p,y){this._unmodified=!1,this._edgeInsets.interpolate(u,p,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(u){const p=(u.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/u.tileSize));return Math.max(0,p)}getVisibleUnwrappedCoordinates(u){const p=[new o.UnwrappedTileID(0,u)];if(this._renderWorldCopies){const y=this.pointCoordinate(new o.pointGeometry(0,0)),S=this.pointCoordinate(new o.pointGeometry(this.width,0)),C=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),k=this.pointCoordinate(new o.pointGeometry(0,this.height)),z=Math.floor(Math.min(y.x,S.x,C.x,k.x)),B=Math.floor(Math.max(y.x,S.x,C.x,k.x)),V=1;for(let H=z-V;H<=B+V;H++)H!==0&&p.push(new o.UnwrappedTileID(H,u))}return p}coveringTiles(u){var p,y;let S=this.coveringZoomLevel(u);const C=S;if(u.minzoom!==void 0&&S<u.minzoom)return[];u.maxzoom!==void 0&&S>u.maxzoom&&(S=u.maxzoom);const k=this.pointCoordinate(this.getCameraPoint()),z=o.MercatorCoordinate.fromLngLat(this.center),B=Math.pow(2,S),V=[B*k.x,B*k.y,0],H=[B*z.x,B*z.y,0],X=Vc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,S);let J=u.minzoom||0;!u.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(J=S);const he=u.terrain?2/Math.min(this.tileSize,u.tileSize)*this.tileSize:3,se=de=>({aabb:new au([de*B,0,0],[(de+1)*B,B,0]),zoom:0,x:0,y:0,wrap:de,fullyVisible:!1}),ue=[],we=[],Ae=S,Me=u.reparseOverscaled?C:S;if(this._renderWorldCopies)for(let de=1;de<=3;de++)ue.push(se(-de)),ue.push(se(de));for(ue.push(se(0));ue.length>0;){const de=ue.pop(),Re=de.x,ke=de.y;let je=de.fullyVisible;if(!je){const Tt=de.aabb.intersects(X);if(Tt===0)continue;je=Tt===2}const He=u.terrain?V:H,rt=de.aabb.distanceX(He),Ue=de.aabb.distanceY(He),St=Math.max(Math.abs(rt),Math.abs(Ue)),mt=he+(1<<Ae-de.zoom)-2;if(de.zoom===Ae||St>mt&&de.zoom>=J){const Tt=Ae-de.zoom,sr=V[0]-.5-(Re<<Tt),dr=V[1]-.5-(ke<<Tt);we.push({tileID:new o.OverscaledTileID(de.zoom===Ae?Me:de.zoom,de.wrap,de.zoom,Re,ke),distanceSq:o.sqrLen([H[0]-.5-Re,H[1]-.5-ke]),tileDistanceToCamera:Math.sqrt(sr*sr+dr*dr)})}else for(let Tt=0;Tt<4;Tt++){const sr=(Re<<1)+Tt%2,dr=(ke<<1)+(Tt>>1),jt=de.zoom+1;let Br=de.aabb.quadrant(Tt);if(u.terrain){const Fr=new o.OverscaledTileID(jt,de.wrap,jt,sr,dr),br=u.terrain.getMinMaxElevation(Fr),Tr=(p=br.minElevation)!==null&&p!==void 0?p:this.elevation,jr=(y=br.maxElevation)!==null&&y!==void 0?y:this.elevation;Br=new au([Br.min[0],Br.min[1],Tr],[Br.max[0],Br.max[1],jr])}ue.push({aabb:Br,zoom:jt,x:sr,y:dr,wrap:de.wrap,fullyVisible:je})}}return we.sort((de,Re)=>de.distanceSq-Re.distanceSq).map(de=>de.tileID)}resize(u,p){this.width=u,this.height=p,this.pixelsToGLUnits=[2/u,-2/p],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(u){return Math.pow(2,u)}scaleZoom(u){return Math.log(u)/Math.LN2}project(u){const p=o.clamp(u.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.pointGeometry(o.mercatorXfromLng(u.lng)*this.worldSize,o.mercatorYfromLat(p)*this.worldSize)}unproject(u){return new o.MercatorCoordinate(u.x/this.worldSize,u.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(u){this.freezeElevation||(this.elevation=u?this.getElevation(this._center,u):0)}getElevation(u,p){const y=o.MercatorCoordinate.fromLngLat(u),S=(1<<this.tileZoom)*o.EXTENT,C=y.x*S,k=y.y*S,z=Math.floor(C/o.EXTENT),B=Math.floor(k/o.EXTENT),V=new o.OverscaledTileID(this.tileZoom,0,this.tileZoom,z,B);return p.getElevation(V,C%o.EXTENT,k%o.EXTENT,o.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(u){const p=this.pointLocation(this.centerPoint,u),y=this.getElevation(p,u);if(!(this.elevation-y))return;const S=this.getCameraPosition(),C=o.MercatorCoordinate.fromLngLat(S.lngLat,S.altitude),k=o.MercatorCoordinate.fromLngLat(p,y),z=C.x-k.x,B=C.y-k.y,V=C.z-k.z,H=Math.sqrt(z*z+B*B+V*V),X=this.scaleZoom(this.cameraToCenterDistance/H/this.tileSize);this._elevation=y,this._center=p,this.zoom=X}setLocationAtPoint(u,p){const y=this.pointCoordinate(p),S=this.pointCoordinate(this.centerPoint),C=this.locationCoordinate(u),k=new o.MercatorCoordinate(C.x-(y.x-S.x),C.y-(y.y-S.y));this.center=this.coordinateLocation(k),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(u,p){return p?this.coordinatePoint(this.locationCoordinate(u),this.getElevation(u,p),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(u))}pointLocation(u,p){return this.coordinateLocation(this.pointCoordinate(u,p))}locationCoordinate(u){return o.MercatorCoordinate.fromLngLat(u)}coordinateLocation(u){return u&&u.toLngLat()}pointCoordinate(u,p){if(p){const J=p.pointCoordinate(u);if(J!=null)return J}const y=[u.x,u.y,0,1],S=[u.x,u.y,1,1];o.transformMat4(y,y,this.pixelMatrixInverse),o.transformMat4(S,S,this.pixelMatrixInverse);const C=y[3],k=S[3],z=y[1]/C,B=S[1]/k,V=y[2]/C,H=S[2]/k,X=V===H?0:(0-V)/(H-V);return new o.MercatorCoordinate(o.number(y[0]/C,S[0]/k,X)/this.worldSize,o.number(z,B,X)/this.worldSize)}coordinatePoint(u,p=0,y=this.pixelMatrix){const S=[u.x*this.worldSize,u.y*this.worldSize,p,1];return o.transformMat4(S,S,y),new o.pointGeometry(S[0]/S[3],S[1]/S[3])}getBounds(){const u=Math.max(0,this.height/2-this.getHorizon());return new o.LngLatBounds().extend(this.pointLocation(new o.pointGeometry(0,u))).extend(this.pointLocation(new o.pointGeometry(this.width,u))).extend(this.pointLocation(new o.pointGeometry(this.width,this.height))).extend(this.pointLocation(new o.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(u){u?(this.lngRange=[u.getWest(),u.getEast()],this.latRange=[u.getSouth(),u.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(u,p=!1){const y=u.key,S=p?this._alignedPosMatrixCache:this._posMatrixCache;if(S[y])return S[y];const C=u.canonical,k=this.worldSize/this.zoomScale(C.z),z=C.x+Math.pow(2,C.z)*u.wrap,B=o.identity(new Float64Array(16));return o.translate(B,B,[z*k,C.y*k,0]),o.scale(B,B,[k/o.EXTENT,k/o.EXTENT,1]),o.multiply(B,p?this.alignedProjMatrix:this.projMatrix,B),S[y]=new Float32Array(B),S[y]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let u,p,y,S,C=-90,k=90,z=-180,B=180;const V=this.size,H=this._unmodified;if(this.latRange){const he=this.latRange;C=o.mercatorYfromLat(he[1])*this.worldSize,k=o.mercatorYfromLat(he[0])*this.worldSize,u=k-C<V.y?V.y/(k-C):0}if(this.lngRange){const he=this.lngRange;z=o.wrap(o.mercatorXfromLng(he[0])*this.worldSize,0,this.worldSize),B=o.wrap(o.mercatorXfromLng(he[1])*this.worldSize,0,this.worldSize),B<z&&(B+=this.worldSize),p=B-z<V.x?V.x/(B-z):0}const X=this.point,J=Math.max(p||0,u||0);if(J)return this.center=this.unproject(new o.pointGeometry(p?(B+z)/2:X.x,u?(k+C)/2:X.y)),this.zoom+=this.scaleZoom(J),this._unmodified=H,void(this._constraining=!1);if(this.latRange){const he=X.y,se=V.y/2;he-se<C&&(S=C+se),he+se>k&&(S=k-se)}if(this.lngRange){const he=(z+B)/2,se=o.wrap(X.x,he-this.worldSize/2,he+this.worldSize/2),ue=V.x/2;se-ue<z&&(y=z+ue),se+ue>B&&(y=B-ue)}y===void 0&&S===void 0||(this.center=this.unproject(new o.pointGeometry(y!==void 0?y:X.x,S!==void 0?S:X.y)).wrap()),this._unmodified=H,this._constraining=!1}_calcMatrices(){if(!this.height)return;const u=this.centerOffset,p=this.point.x,y=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let S=o.identity(new Float64Array(16));o.scale(S,S,[this.width/2,-this.height/2,1]),o.translate(S,S,[1,-1,0]),this.labelPlaneMatrix=S,S=o.identity(new Float64Array(16)),o.scale(S,S,[1,-1,1]),o.translate(S,S,[-1,-1,0]),o.scale(S,S,[2/this.width,2/this.height,1]),this.glCoordMatrix=S,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const C=Math.PI/2+this._pitch,k=this._fov*(.5+u.y/this.height),z=Math.sin(k)*this.cameraToSeaLevelDistance/Math.sin(o.clamp(Math.PI-C-k,.01,Math.PI-.01)),B=this.getHorizon(),V=2*Math.atan(B/this.cameraToCenterDistance)*(.5+u.y/(2*B)),H=Math.sin(V)*this.cameraToSeaLevelDistance/Math.sin(o.clamp(Math.PI-C-V,.01,Math.PI-.01)),X=Math.cos(Math.PI/2-this._pitch)*z+this.cameraToSeaLevelDistance,J=Math.cos(Math.PI/2-this._pitch)*H+this.cameraToSeaLevelDistance,he=1.01*Math.min(X,J),se=this.height/50;S=new Float64Array(16),o.perspective(S,this._fov,this.width/this.height,se,he),S[8]=2*-u.x/this.width,S[9]=2*u.y/this.height,o.scale(S,S,[1,-1,1]),o.translate(S,S,[0,0,-this.cameraToCenterDistance]),o.rotateX(S,S,this._pitch),o.rotateZ(S,S,this.angle),o.translate(S,S,[-p,-y,0]),this.mercatorMatrix=o.scale([],S,[this.worldSize,this.worldSize,this.worldSize]),o.scale(S,S,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,S),o.translate(S,S,[0,0,-this.elevation]),this.projMatrix=S,this.invProjMatrix=o.invert([],S),this.pixelMatrix3D=o.multiply(new Float64Array(16),this.labelPlaneMatrix,S);const ue=this.width%2/2,we=this.height%2/2,Ae=Math.cos(this.angle),Me=Math.sin(this.angle),de=p-Math.round(p)+Ae*ue+Me*we,Re=y-Math.round(y)+Ae*we+Me*ue,ke=new Float64Array(S);if(o.translate(ke,ke,[de>.5?de-1:de,Re>.5?Re-1:Re,0]),this.alignedProjMatrix=ke,S=o.invert(new Float64Array(16),this.pixelMatrix),!S)throw new Error("failed to invert matrix");this.pixelMatrixInverse=S,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const u=this.pointCoordinate(new o.pointGeometry(0,0)),p=[u.x*this.worldSize,u.y*this.worldSize,0,1];return o.transformMat4(p,p,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const u=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,u))}getCameraQueryGeometry(u){const p=this.getCameraPoint();if(u.length===1)return[u[0],p];{let y=p.x,S=p.y,C=p.x,k=p.y;for(const z of u)y=Math.min(y,z.x),S=Math.min(S,z.y),C=Math.max(C,z.x),k=Math.max(k,z.y);return[new o.pointGeometry(y,S),new o.pointGeometry(C,S),new o.pointGeometry(C,k),new o.pointGeometry(y,k),new o.pointGeometry(y,S)]}}}class qm{constructor(u){this._hashName=u&&encodeURIComponent(u),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(p,y){let S=!1,C=null;const k=()=>{C=null,S&&(p(),C=setTimeout(k,300),S=!1)};return()=>(S=!0,C||k(),C)}(this._updateHashUnthrottled.bind(this))}addTo(u){return this._map=u,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(u){const p=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,S=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),C=Math.pow(10,S),k=Math.round(p.lng*C)/C,z=Math.round(p.lat*C)/C,B=this._map.getBearing(),V=this._map.getPitch();let H="";if(H+=u?`/${k}/${z}/${y}`:`${y}/${z}/${k}`,(B||V)&&(H+="/"+Math.round(10*B)/10),V&&(H+=`/${Math.round(V)}`),this._hashName){const X=this._hashName;let J=!1;const he=window.location.hash.slice(1).split("&").map(se=>{const ue=se.split("=")[0];return ue===X?(J=!0,`${ue}=${H}`):se}).filter(se=>se);return J||he.push(`${X}=${H}`),`#${he.join("&")}`}return`#${H}`}_getCurrentHash(){const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(p=y)}),(p&&p[1]||"").split("/")}return u.split("/")}_onHashChange(){const u=this._getCurrentHash();if(u.length>=3&&!u.some(p=>isNaN(p))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0}return!1}_updateHashUnthrottled(){const u=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,u)}catch{}}}const su={linearity:.3,easing:o.bezier(0,0,.3,1)},Wm=o.extend({deceleration:2500,maxSpeed:1400},su),Zm=o.extend({deceleration:20,maxSpeed:1400},su),Xm=o.extend({deceleration:1e3,maxSpeed:360},su),al=o.extend({deceleration:1e3,maxSpeed:90},su);class Ym{constructor(u){this._map=u,this.clear()}clear(){this._inertiaBuffer=[]}record(u){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:u})}_drainInertiaBuffer(){const u=this._inertiaBuffer,p=o.exported.now();for(;u.length>0&&p-u[0].time>160;)u.shift()}_onMoveEnd(u){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const p={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:C}of this._inertiaBuffer)p.zoom+=C.zoomDelta||0,p.bearing+=C.bearingDelta||0,p.pitch+=C.pitchDelta||0,C.panDelta&&p.pan._add(C.panDelta),C.around&&(p.around=C.around),C.pinchAround&&(p.pinchAround=C.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,S={};if(p.pan.mag()){const C=uu(p.pan.mag(),y,o.extend({},Wm,u||{}));S.offset=p.pan.mult(C.amount/p.pan.mag()),S.center=this._map.transform.center,lu(S,C)}if(p.zoom){const C=uu(p.zoom,y,Zm);S.zoom=this._map.transform.zoom+C.amount,lu(S,C)}if(p.bearing){const C=uu(p.bearing,y,Xm);S.bearing=this._map.transform.bearing+o.clamp(C.amount,-179,179),lu(S,C)}if(p.pitch){const C=uu(p.pitch,y,al);S.pitch=this._map.transform.pitch+C.amount,lu(S,C)}if(S.zoom||S.bearing){const C=p.pinchAround===void 0?p.around:p.pinchAround;S.around=C?this._map.unproject(C):this._map.getCenter()}return this.clear(),o.extend(S,{noMoveStart:!0})}}function lu(b,u){(!b.duration||b.duration<u.duration)&&(b.duration=u.duration,b.easing=u.easing)}function uu(b,u,p){const{maxSpeed:y,linearity:S,deceleration:C}=p,k=o.clamp(b*S/(u/1e3),-y,y),z=Math.abs(k)/(C*S);return{easing:p.easing,duration:1e3*z,amount:k*(z/2)}}class Bi extends o.Event{constructor(u,p,y,S={}){const C=_.mousePos(p.getCanvasContainer(),y),k=p.unproject(C);super(u,o.extend({point:C,lngLat:k,originalEvent:y},S)),this._defaultPrevented=!1,this.target=p}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class cu extends o.Event{constructor(u,p,y){const S=u==="touchend"?y.changedTouches:y.touches,C=_.touchPos(p.getCanvasContainer(),S),k=C.map(B=>p.unproject(B)),z=C.reduce((B,V,H,X)=>B.add(V.div(X.length)),new o.pointGeometry(0,0));super(u,{points:C,point:z,lngLats:k,lngLat:p.unproject(z),originalEvent:y}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Fi extends o.Event{constructor(u,p,y){super(u,{originalEvent:y}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class o0{constructor(u,p){this._map=u,this._clickTolerance=p.clickTolerance}reset(){delete this._mousedownPos}wheel(u){return this._firePreventable(new Fi(u.type,this._map,u))}mousedown(u,p){return this._mousedownPos=p,this._firePreventable(new Bi(u.type,this._map,u))}mouseup(u){this._map.fire(new Bi(u.type,this._map,u))}click(u,p){this._mousedownPos&&this._mousedownPos.dist(p)>=this._clickTolerance||this._map.fire(new Bi(u.type,this._map,u))}dblclick(u){return this._firePreventable(new Bi(u.type,this._map,u))}mouseover(u){this._map.fire(new Bi(u.type,this._map,u))}mouseout(u){this._map.fire(new Bi(u.type,this._map,u))}touchstart(u){return this._firePreventable(new cu(u.type,this._map,u))}touchmove(u){this._map.fire(new cu(u.type,this._map,u))}touchend(u){this._map.fire(new cu(u.type,this._map,u))}touchcancel(u){this._map.fire(new cu(u.type,this._map,u))}_firePreventable(u){if(this._map.fire(u),u.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Do{constructor(u){this._map=u}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(u){this._map.fire(new Bi(u.type,this._map,u))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Bi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(u){this._delayContextMenu?this._contextMenuEvent=u:this._ignoreContextMenu||this._map.fire(new Bi(u.type,this._map,u)),this._map.listens("contextmenu")&&u.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Km{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._container=u.getContainer(),this._clickTolerance=p.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(u,p){this.isEnabled()&&u.shiftKey&&u.button===0&&(_.disableDrag(),this._startPos=this._lastPos=p,this._active=!0)}mousemoveWindow(u,p){if(!this._active)return;const y=p;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const S=this._startPos;this._lastPos=y,this._box||(this._box=_.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",u));const C=Math.min(S.x,y.x),k=Math.max(S.x,y.x),z=Math.min(S.y,y.y),B=Math.max(S.y,y.y);_.setTransform(this._box,`translate(${C}px,${z}px)`),this._box.style.width=k-C+"px",this._box.style.height=B-z+"px"}mouseupWindow(u,p){if(!this._active||u.button!==0)return;const y=this._startPos,S=p;if(this.reset(),_.suppressClick(),y.x!==S.x||y.y!==S.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:u})),{cameraAnimation:C=>C.fitScreenCoordinates(y,S,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",u)}keydown(u){this._active&&u.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",u))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(_.remove(this._box),this._box=null),_.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(u,p){return this._map.fire(new o.Event(u,{originalEvent:p}))}}function so(b,u){if(b.length!==u.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${u.length}`);const p={};for(let y=0;y<b.length;y++)p[b[y].identifier]=u[y];return p}class hu{constructor(u){this.reset(),this.numTouches=u.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(u,p,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=u.timeStamp),y.length===this.numTouches&&(this.centroid=function(S){const C=new o.pointGeometry(0,0);for(const k of S)C._add(k);return C.div(S.length)}(p),this.touches=so(y,p)))}touchmove(u,p,y){if(this.aborted||!this.centroid)return;const S=so(y,p);for(const C in this.touches){const k=this.touches[C],z=S[C];(!z||z.dist(k)>30)&&(this.aborted=!0)}}touchend(u,p,y){if((!this.centroid||u.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const S=!this.aborted&&this.centroid;if(this.reset(),S)return S}}}class jf{constructor(u){this.singleTap=new hu(u),this.numTaps=u.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(u,p,y){this.singleTap.touchstart(u,p,y)}touchmove(u,p,y){this.singleTap.touchmove(u,p,y)}touchend(u,p,y){const S=this.singleTap.touchend(u,p,y);if(S){const C=u.timeStamp-this.lastTime<500,k=!this.lastTap||this.lastTap.dist(S)<30;if(C&&k||this.reset(),this.count++,this.lastTime=u.timeStamp,this.lastTap=S,this.count===this.numTaps)return this.reset(),S}}}class s0{constructor(){this._zoomIn=new jf({numTouches:1,numTaps:2}),this._zoomOut=new jf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(u,p,y){this._zoomIn.touchstart(u,p,y),this._zoomOut.touchstart(u,p,y)}touchmove(u,p,y){this._zoomIn.touchmove(u,p,y),this._zoomOut.touchmove(u,p,y)}touchend(u,p,y){const S=this._zoomIn.touchend(u,p,y),C=this._zoomOut.touchend(u,p,y);return S?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(S)},{originalEvent:u})}):C?(this._active=!0,u.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:k=>k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(C)},{originalEvent:u})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const l0={0:1,2:2};class Uc{constructor(u){this.reset(),this._clickTolerance=u.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(u,p){return!1}_move(u,p){return{}}mousedown(u,p){if(this._lastPoint)return;const y=_.mouseButton(u);this._correctButton(u,y)&&(this._lastPoint=p,this._eventButton=y)}mousemoveWindow(u,p){const y=this._lastPoint;if(y){if(u.preventDefault(),function(S,C){const k=l0[C];return S.buttons===void 0||(S.buttons&k)!==k}(u,this._eventButton))this.reset();else if(this._moved||!(p.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=p,this._move(y,p)}}mouseupWindow(u){this._lastPoint&&_.mouseButton(u)===this._eventButton&&(this._moved&&_.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fu extends Uc{mousedown(u,p){super.mousedown(u,p),this._lastPoint&&(this._active=!0)}_correctButton(u,p){return p===0&&!u.ctrlKey}_move(u,p){return{around:p,panDelta:p.sub(u)}}}class lo extends Uc{_correctButton(u,p){return p===0&&u.ctrlKey||p===2}_move(u,p){const y=.8*(p.x-u.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(u){u.preventDefault()}}class At extends Uc{_correctButton(u,p){return p===0&&u.ctrlKey||p===2}_move(u,p){const y=-.5*(p.y-u.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(u){u.preventDefault()}}class Jm{constructor(u,p){this._minTouches=u.cooperativeGestures?2:1,this._clickTolerance=u.clickTolerance||1,this._map=p,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(u,p,y){return this._calculateTransform(u,p,y)}touchmove(u,p,y){if(this._map._cooperativeGestures&&(this._minTouches===2&&y.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(u,!1,y.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(y.length<this._minTouches))return u.preventDefault(),this._calculateTransform(u,p,y)}touchend(u,p,y){this._calculateTransform(u,p,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(u,p,y){y.length>0&&(this._active=!0);const S=so(y,p),C=new o.pointGeometry(0,0),k=new o.pointGeometry(0,0);let z=0;for(const V in S){const H=S[V],X=this._touches[V];X&&(C._add(H),k._add(H.sub(X)),z++,S[V]=H)}if(this._touches=S,z<this._minTouches||!k.mag())return;const B=k.div(z);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:C.div(z),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class hs{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(u){}_move(u,p,y){return{}}touchstart(u,p,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([p[0],p[1]]))}touchmove(u,p,y){if(!this._firstTwoTouches)return;u.preventDefault();const[S,C]=this._firstTwoTouches,k=ko(y,p,S),z=ko(y,p,C);if(!k||!z)return;const B=this._aroundCenter?null:k.add(z).div(2);return this._move([k,z],B,u)}touchend(u,p,y){if(!this._firstTwoTouches)return;const[S,C]=this._firstTwoTouches,k=ko(y,p,S),z=ko(y,p,C);k&&z||(this._active&&_.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(u){this._enabled=!0,this._aroundCenter=!!u&&u.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function ko(b,u,p){for(let y=0;y<b.length;y++)if(b[y].identifier===p)return u[y]}function Hf(b,u){return Math.log(b/u)/Math.LN2}class _t extends hs{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(u){this._startDistance=this._distance=u[0].dist(u[1])}_move(u,p){const y=this._distance;if(this._distance=u[0].dist(u[1]),this._active||!(Math.abs(Hf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hf(this._distance,y),pinchAround:p}}}function $c(b,u){return 180*b.angleWith(u)/Math.PI}class u0 extends hs{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(u){this._startVector=this._vector=u[0].sub(u[1]),this._minDiameter=u[0].dist(u[1])}_move(u,p){const y=this._vector;if(this._vector=u[0].sub(u[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:$c(this._vector,y),pinchAround:p}}_isBelowThreshold(u){this._minDiameter=Math.min(this._minDiameter,u.mag());const p=25/(Math.PI*this._minDiameter)*360,y=$c(u,this._startVector);return Math.abs(y)<p}}function Gf(b){return Math.abs(b.y)>Math.abs(b.x)}class qf extends hs{constructor(u){super(),this._map=u}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(u,p,y){super.touchstart(u,p,y),this._currentTouchCount=y.length}_start(u){this._lastPoints=u,Gf(u[0].sub(u[1]))&&(this._valid=!1)}_move(u,p,y){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const S=u[0].sub(this._lastPoints[0]),C=u[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(S,C,y.timeStamp),this._valid?(this._lastPoints=u,this._active=!0,{pitchDelta:(S.y+C.y)/2*-.5}):void 0}gestureBeginsVertically(u,p,y){if(this._valid!==void 0)return this._valid;const S=u.mag()>=2,C=p.mag()>=2;if(!S&&!C)return;if(!S||!C)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const k=u.y>0==p.y>0;return Gf(u)&&Gf(p)&&k}}const Qm={panStep:100,bearingStep:15,pitchStep:10};class ev{constructor(){const u=Qm;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(u){if(u.altKey||u.ctrlKey||u.metaKey)return;let p=0,y=0,S=0,C=0,k=0;switch(u.keyCode){case 61:case 107:case 171:case 187:p=1;break;case 189:case 109:case 173:p=-1;break;case 37:u.shiftKey?y=-1:(u.preventDefault(),C=-1);break;case 39:u.shiftKey?y=1:(u.preventDefault(),C=1);break;case 38:u.shiftKey?S=1:(u.preventDefault(),k=-1);break;case 40:u.shiftKey?S=-1:(u.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(y=0,S=0),{cameraAnimation:z=>{const B=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:c0,zoom:p?Math.round(B)+p*(u.shiftKey?2:1):B,bearing:z.getBearing()+y*this._bearingStep,pitch:z.getPitch()+S*this._pitchStep,offset:[-C*this._panStep,-k*this._panStep],center:z.getCenter()},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function c0(b){return b*(2-b)}const tv=4.000244140625;class Wf{constructor(u,p){this._map=u,this._el=u.getCanvasContainer(),this._handler=p,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)}setZoomRate(u){this._defaultZoomRate=u}setWheelZoomRate(u){this._wheelZoomRate=u}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(u){this.isEnabled()||(this._enabled=!0,this._aroundCenter=u&&u.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(u){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;u.preventDefault()}let p=u.deltaMode===WheelEvent.DOM_DELTA_LINE?40*u.deltaY:u.deltaY;const y=o.exported.now(),S=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,p!==0&&p%tv==0?this._type="wheel":p!==0&&Math.abs(p)<4?this._type="trackpad":S>400?(this._type=null,this._lastValue=p,this._timeout=setTimeout(this._onTimeout,40,u)):this._type||(this._type=Math.abs(S*p)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,p+=this._lastValue)),u.shiftKey&&p&&(p/=4),this._type&&(this._lastWheelEvent=u,this._delta-=p,this._active||this._start(u)),u.preventDefault()}_onTimeout(u){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(u)}_start(u){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const p=_.mousePos(this._el,u);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(p)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const u=this._map.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>tv?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&B!==0&&(B=1/B);const V=typeof this._targetZoom=="number"?u.zoomScale(this._targetZoom):u.scale;this._targetZoom=Math.min(u.maxZoom,Math.max(u.minZoom,u.scaleZoom(V*B))),this._type==="wheel"&&(this._startZoom=u.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const p=typeof this._targetZoom=="number"?this._targetZoom:u.zoom,y=this._startZoom,S=this._easing;let C,k=!1;if(this._type==="wheel"&&y&&S){const z=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),B=S(z);C=o.number(y,p,B),z<1?this._frameId||(this._frameId=!0):k=!0}else C=p,k=!0;return this._active=!0,k&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!k,zoomDelta:C-u.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(u){let p=o.ease;if(this._prevEase){const y=this._prevEase,S=(o.exported.now()-y.start)/y.duration,C=y.easing(S+.01)-y.easing(S),k=.27/Math.sqrt(C*C+1e-4)*.01,z=Math.sqrt(.0729-k*k);p=o.bezier(k,z,.25,1)}return this._prevEase={start:o.exported.now(),duration:u,easing:p},p}reset(){this._active=!1}}class Zf{constructor(u,p){this._clickZoom=u,this._tapZoom=p}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Xf{constructor(){this.reset()}reset(){this._active=!1}dblclick(u,p){return u.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(u.shiftKey?-1:1),around:y.unproject(p)},{originalEvent:u})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yf{constructor(){this._tap=new jf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(u,p,y){this._swipePoint||(this._tapTime&&u.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=p[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(u,p,y))}touchmove(u,p,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const S=p[0],C=S.y-this._swipePoint.y;return this._swipePoint=S,u.preventDefault(),this._active=!0,{zoomDelta:C/128}}}else this._tap.touchmove(u,p,y)}touchend(u,p,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(u,p,y)&&(this._tapTime=u.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Si{constructor(u,p,y){this._el=u,this._mousePan=p,this._touchPan=y}enable(u){this._inertiaOptions=u||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Lo{constructor(u,p,y){this._pitchWithRotate=u.pitchWithRotate,this._mouseRotate=p,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class rv{constructor(u,p,y,S){this._el=u,this._touchZoom=p,this._touchRotate=y,this._tapDragZoom=S,this._rotationDisabled=!1,this._enabled=!0}enable(u){this._touchZoom.enable(u),this._rotationDisabled||this._touchRotate.enable(u),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const ol=b=>b.zoom||b.drag||b.pitch||b.rotate;class Kf extends o.Event{}function du(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta}class nv{constructor(u,p){this._map=u,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ym(u),this._bearingSnap=p.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(p),o.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[window,"blur",void 0]];for(const[S,C,k]of this._listeners)_.addEventListener(S,C,S===document?this.handleWindowEvent:this.handleEvent,k)}destroy(){for(const[u,p,y]of this._listeners)_.removeEventListener(u,p,u===document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(u){const p=this._map,y=p.getCanvasContainer();this._add("mapEvent",new o0(p,u));const S=p.boxZoom=new Km(p,u);this._add("boxZoom",S);const C=new s0,k=new Xf;p.doubleClickZoom=new Zf(k,C),this._add("tapZoom",C),this._add("clickZoom",k);const z=new Yf;this._add("tapDragZoom",z);const B=p.touchPitch=new qf(p);this._add("touchPitch",B);const V=new lo(u),H=new At(u);p.dragRotate=new Lo(u,V,H),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",H,["mouseRotate"]);const X=new fu(u),J=new Jm(u,p);p.dragPan=new Si(y,X,J),this._add("mousePan",X),this._add("touchPan",J,["touchZoom","touchRotate"]);const he=new u0,se=new _t;p.touchZoomRotate=new rv(y,se,he,z),this._add("touchRotate",he,["touchPan","touchZoom"]),this._add("touchZoom",se,["touchPan","touchRotate"]);const ue=p.scrollZoom=new Wf(p,this);this._add("scrollZoom",ue,["mousePan"]);const we=p.keyboard=new ev;this._add("keyboard",we),this._add("blockableMapEvent",new Do(p));for(const Ae of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])u.interactive&&u[Ae]&&p[Ae].enable(u[Ae])}_add(u,p,y){this._handlers.push({handlerName:u,handler:p,allowed:y}),this._handlersById[u]=p}stop(u){if(!this._updatingCamera){for(const{handler:p}of this._handlers)p.reset();this._inertia.clear(),this._fireEvents({},{},u),this._changes=[]}}isActive(){for(const{handler:u}of this._handlers)if(u.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(ol(this._eventsInProgress))||this.isZooming()}_blockedByActive(u,p,y){for(const S in u)if(S!==y&&(!p||p.indexOf(S)<0))return!0;return!1}handleWindowEvent(u){this.handleEvent(u,`${u.type}Window`)}_getMapTouches(u){const p=[];for(const y of u)this._el.contains(y.target)&&p.push(y);return p}handleEvent(u,p){if(u.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const y=u.type==="renderFrame"?void 0:u,S={needsRenderFrame:!1},C={},k={},z=u.touches,B=z?this._getMapTouches(z):void 0,V=B?_.touchPos(this._el,B):_.mousePos(this._el,u);for(const{handlerName:J,handler:he,allowed:se}of this._handlers){if(!he.isEnabled())continue;let ue;this._blockedByActive(k,se,J)?he.reset():he[p||u.type]&&(ue=he[p||u.type](u,V,B),this.mergeHandlerResult(S,C,ue,J,y),ue&&ue.needsRenderFrame&&this._triggerRenderFrame()),(ue||he.isActive())&&(k[J]=he)}const H={};for(const J in this._previousActiveHandlers)k[J]||(H[J]=y);this._previousActiveHandlers=k,(Object.keys(H).length||du(S))&&(this._changes.push([S,C,H]),this._triggerRenderFrame()),(Object.keys(k).length||du(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:X}=S;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))}mergeHandlerResult(u,p,y,S,C){if(!y)return;o.extend(u,y);const k={handlerName:S,originalEvent:y.originalEvent||C};y.zoomDelta!==void 0&&(p.zoom=k),y.panDelta!==void 0&&(p.drag=k),y.pitchDelta!==void 0&&(p.pitch=k),y.bearingDelta!==void 0&&(p.rotate=k)}_applyChanges(){const u={},p={},y={};for(const[S,C,k]of this._changes)S.panDelta&&(u.panDelta=(u.panDelta||new o.pointGeometry(0,0))._add(S.panDelta)),S.zoomDelta&&(u.zoomDelta=(u.zoomDelta||0)+S.zoomDelta),S.bearingDelta&&(u.bearingDelta=(u.bearingDelta||0)+S.bearingDelta),S.pitchDelta&&(u.pitchDelta=(u.pitchDelta||0)+S.pitchDelta),S.around!==void 0&&(u.around=S.around),S.pinchAround!==void 0&&(u.pinchAround=S.pinchAround),S.noInertia&&(u.noInertia=S.noInertia),o.extend(p,C),o.extend(y,k);this._updateMapTransform(u,p,y),this._changes=[]}_updateMapTransform(u,p,y){const S=this._map,C=S.transform,k=S.style&&S.style.terrain;if(!(du(u)||k&&this._drag))return this._fireEvents(p,y,!0);let{panDelta:z,zoomDelta:B,bearingDelta:V,pitchDelta:H,around:X,pinchAround:J}=u;J!==void 0&&(X=J),S._stop(!0),X=X||S.transform.centerPoint;const he=C.pointLocation(z?X.sub(z):X);V&&(C.bearing+=V),H&&(C.pitch+=H),B&&(C.zoom+=B),k?p.drag&&!this._drag?(this._drag={center:C.centerPoint,lngLat:C.pointLocation(X),point:X,handlerName:p.drag.handlerName},S.fire(new o.Event("freezeElevation",{freeze:!0}))):this._drag&&y[this._drag.handlerName]?(S.fire(new o.Event("freezeElevation",{freeze:!1})),this._drag=null):p.drag&&this._drag&&(C.center=C.pointLocation(C.centerPoint.sub(z))):C.setLocationAtPoint(he,X),this._map._update(),u.noInertia||this._inertia.record(u),this._fireEvents(p,y,!0)}_fireEvents(u,p,y){const S=ol(this._eventsInProgress),C=ol(u),k={};for(const H in u){const{originalEvent:X}=u[H];this._eventsInProgress[H]||(k[`${H}start`]=X),this._eventsInProgress[H]=u[H]}!S&&C&&this._fireEvent("movestart",C.originalEvent);for(const H in k)this._fireEvent(H,k[H]);C&&this._fireEvent("move",C.originalEvent);for(const H in u){const{originalEvent:X}=u[H];this._fireEvent(H,X)}const z={};let B;for(const H in this._eventsInProgress){const{handlerName:X,originalEvent:J}=this._eventsInProgress[H];this._handlersById[X].isActive()||(delete this._eventsInProgress[H],B=p[X]||J,z[`${H}end`]=B)}for(const H in z)this._fireEvent(H,z[H]);const V=ol(this._eventsInProgress);if(y&&(S||C)&&!V){this._updatingCamera=!0;const H=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=J=>J!==0&&-this._bearingSnap<J&&J<this._bearingSnap;H?(X(H.bearing||this._map.getBearing())&&(H.bearing=0),this._map.easeTo(H,{originalEvent:B})):(this._map.fire(new o.Event("moveend",{originalEvent:B})),X(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(u,p){this._map.fire(new o.Event(u,p?{originalEvent:p}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(u=>{delete this._frameId,this.handleEvent(new Kf("renderFrame",{timeStamp:u})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const ra={extend:(b,...u)=>o.extend(b,...u),run(b){b()},logToElement(b,u=!1,p="log"){const y=window.document.getElementById(p);y&&(u&&(y.innerHTML=""),y.innerHTML+=`<br>${b}`)}};class hn extends o.Evented{constructor(u,p){super(),this._moving=!1,this._zooming=!1,this.transform=u,this._bearingSnap=p.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(u,p){return this.jumpTo({center:u},p)}panBy(u,p,y){return u=o.pointGeometry.convert(u).mult(-1),this.panTo(this.transform.center,o.extend({offset:u},p),y)}panTo(u,p,y){return this.easeTo(o.extend({center:u},p),y)}getZoom(){return this.transform.zoom}setZoom(u,p){return this.jumpTo({zoom:u},p),this}zoomTo(u,p,y){return this.easeTo(o.extend({zoom:u},p),y)}zoomIn(u,p){return this.zoomTo(this.getZoom()+1,u,p),this}zoomOut(u,p){return this.zoomTo(this.getZoom()-1,u,p),this}getBearing(){return this.transform.bearing}setBearing(u,p){return this.jumpTo({bearing:u},p),this}getPadding(){return this.transform.padding}setPadding(u,p){return this.jumpTo({padding:u},p),this}rotateTo(u,p,y){return this.easeTo(o.extend({bearing:u},p),y)}resetNorth(u,p){return this.rotateTo(0,o.extend({duration:1e3},u),p),this}resetNorthPitch(u,p){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},u),p),this}snapToNorth(u,p){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(u,p):this}getPitch(){return this.transform.pitch}setPitch(u,p){return this.jumpTo({pitch:u},p),this}cameraForBounds(u,p){u=o.LngLatBounds.convert(u);const y=p&&p.bearing||0;return this._cameraForBoxAndBearing(u.getNorthWest(),u.getSouthEast(),y,p)}_cameraForBoxAndBearing(u,p,y,S){const C={top:0,bottom:0,right:0,left:0};if(typeof(S=o.extend({padding:C,offset:[0,0],maxZoom:this.transform.maxZoom},S)).padding=="number"){const ke=S.padding;S.padding={top:ke,bottom:ke,right:ke,left:ke}}S.padding=o.extend(C,S.padding);const k=this.transform,z=k.padding,B=k.project(o.LngLat.convert(u)),V=k.project(o.LngLat.convert(p)),H=B.rotate(-y*Math.PI/180),X=V.rotate(-y*Math.PI/180),J=new o.pointGeometry(Math.max(H.x,X.x),Math.max(H.y,X.y)),he=new o.pointGeometry(Math.min(H.x,X.x),Math.min(H.y,X.y)),se=J.sub(he),ue=(k.width-(z.left+z.right+S.padding.left+S.padding.right))/se.x,we=(k.height-(z.top+z.bottom+S.padding.top+S.padding.bottom))/se.y;if(we<0||ue<0)return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ae=Math.min(k.scaleZoom(k.scale*Math.min(ue,we)),S.maxZoom),Me=o.pointGeometry.convert(S.offset),de=new o.pointGeometry((S.padding.left-S.padding.right)/2,(S.padding.top-S.padding.bottom)/2).rotate(y*Math.PI/180),Re=Me.add(de).mult(k.scale/k.zoomScale(Ae));return{center:k.unproject(B.add(V).div(2).sub(Re)),zoom:Ae,bearing:y}}fitBounds(u,p,y){return this._fitInternal(this.cameraForBounds(u,p),p,y)}fitScreenCoordinates(u,p,y,S,C){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.pointGeometry.convert(u)),this.transform.pointLocation(o.pointGeometry.convert(p)),y,S),S,C)}_fitInternal(u,p,y){return u?(delete(p=o.extend(u,p)).padding,p.linear?this.easeTo(p,y):this.flyTo(p,y)):this}jumpTo(u,p){this.stop();const y=this.transform;let S=!1,C=!1,k=!1;return"zoom"in u&&y.zoom!==+u.zoom&&(S=!0,y.zoom=+u.zoom),u.center!==void 0&&(y.center=o.LngLat.convert(u.center)),"bearing"in u&&y.bearing!==+u.bearing&&(C=!0,y.bearing=+u.bearing),"pitch"in u&&y.pitch!==+u.pitch&&(k=!0,y.pitch=+u.pitch),u.padding==null||y.isPaddingEqual(u.padding)||(y.padding=u.padding),this.fire(new o.Event("movestart",p)).fire(new o.Event("move",p)),S&&this.fire(new o.Event("zoomstart",p)).fire(new o.Event("zoom",p)).fire(new o.Event("zoomend",p)),C&&this.fire(new o.Event("rotatestart",p)).fire(new o.Event("rotate",p)).fire(new o.Event("rotateend",p)),k&&this.fire(new o.Event("pitchstart",p)).fire(new o.Event("pitch",p)).fire(new o.Event("pitchend",p)),this.fire(new o.Event("moveend",p))}calculateCameraOptionsFromTo(u,p,y,S=0){const C=o.MercatorCoordinate.fromLngLat(u,p),k=o.MercatorCoordinate.fromLngLat(y,S),z=k.x-C.x,B=k.y-C.y,V=k.z-C.z,H=Math.hypot(z,B,V);if(H===0)throw new Error("Can't calculate camera options with same From and To");const X=Math.hypot(z,B),J=this.transform.scaleZoom(this.transform.cameraToCenterDistance/H/this.transform.tileSize),he=180*Math.atan2(z,-B)/Math.PI;let se=180*Math.acos(X/H)/Math.PI;return se=V<0?90-se:90+se,{center:k.toLngLat(),zoom:J,pitch:se,bearing:he}}easeTo(u,p){this._stop(!1,u.easeId),((u=o.extend({offset:[0,0],duration:500,easing:o.ease},u)).animate===!1||!u.essential&&o.exported.prefersReducedMotion)&&(u.duration=0);const y=this.transform,S=this.getZoom(),C=this.getBearing(),k=this.getPitch(),z=this.getPadding(),B="zoom"in u?+u.zoom:S,V="bearing"in u?this._normalizeBearing(u.bearing,C):C,H="pitch"in u?+u.pitch:k,X="padding"in u?u.padding:y.padding,J=o.pointGeometry.convert(u.offset);let he=y.centerPoint.add(J);const se=y.pointLocation(he),ue=o.LngLat.convert(u.center||se);this._normalizeCenter(ue);const we=y.project(se),Ae=y.project(ue).sub(we),Me=y.zoomScale(B-S);let de,Re;u.around&&(de=o.LngLat.convert(u.around),Re=y.locationPoint(de));const ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||B!==S,this._rotating=this._rotating||C!==V,this._pitching=this._pitching||H!==k,this._padding=!y.isPaddingEqual(X),this._easeId=u.easeId,this._prepareEase(p,u.noMoveStart,ke),this._ease(je=>{if(this._zooming&&(y.zoom=o.number(S,B,je)),this._rotating&&(y.bearing=o.number(C,V,je)),this._pitching&&(y.pitch=o.number(k,H,je)),this._padding&&(y.interpolatePadding(z,X,je),he=y.centerPoint.add(J)),de)y.setLocationAtPoint(de,Re);else{const He=y.zoomScale(y.zoom-S),rt=B>S?Math.min(2,Me):Math.max(.5,Me),Ue=Math.pow(rt,1-je),St=y.unproject(we.add(Ae.mult(je*Ue)).mult(He));y.setLocationAtPoint(y.renderWorldCopies?St.wrap():St,he)}this._fireMoveEvents(p)},je=>{this._afterEase(p,je)},u),this}_prepareEase(u,p,y={}){this._moving=!0,this.fire(new o.Event("freezeElevation",{freeze:!0})),p||y.moving||this.fire(new o.Event("movestart",u)),this._zooming&&!y.zooming&&this.fire(new o.Event("zoomstart",u)),this._rotating&&!y.rotating&&this.fire(new o.Event("rotatestart",u)),this._pitching&&!y.pitching&&this.fire(new o.Event("pitchstart",u))}_fireMoveEvents(u){this.fire(new o.Event("move",u)),this._zooming&&this.fire(new o.Event("zoom",u)),this._rotating&&this.fire(new o.Event("rotate",u)),this._pitching&&this.fire(new o.Event("pitch",u))}_afterEase(u,p){if(this._easeId&&p&&this._easeId===p)return;delete this._easeId,this.fire(new o.Event("freezeElevation",{freeze:!1}));const y=this._zooming,S=this._rotating,C=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new o.Event("zoomend",u)),S&&this.fire(new o.Event("rotateend",u)),C&&this.fire(new o.Event("pitchend",u)),this.fire(new o.Event("moveend",u))}flyTo(u,p){if(!u.essential&&o.exported.prefersReducedMotion){const jt=o.pick(u,["center","zoom","bearing","pitch","around"]);return this.jumpTo(jt,p)}this.stop(),u=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},u);const y=this.transform,S=this.getZoom(),C=this.getBearing(),k=this.getPitch(),z=this.getPadding(),B="zoom"in u?o.clamp(+u.zoom,y.minZoom,y.maxZoom):S,V="bearing"in u?this._normalizeBearing(u.bearing,C):C,H="pitch"in u?+u.pitch:k,X="padding"in u?u.padding:y.padding,J=y.zoomScale(B-S),he=o.pointGeometry.convert(u.offset);let se=y.centerPoint.add(he);const ue=y.pointLocation(se),we=o.LngLat.convert(u.center||ue);this._normalizeCenter(we);const Ae=y.project(ue),Me=y.project(we).sub(Ae);let de=u.curve;const Re=Math.max(y.width,y.height),ke=Re/J,je=Me.mag();if("minZoom"in u){const jt=o.clamp(Math.min(u.minZoom,S,B),y.minZoom,y.maxZoom),Br=Re/y.zoomScale(jt-S);de=Math.sqrt(Br/je*2)}const He=de*de;function rt(jt){const Br=(ke*ke-Re*Re+(jt?-1:1)*He*He*je*je)/(2*(jt?ke:Re)*He*je);return Math.log(Math.sqrt(Br*Br+1)-Br)}function Ue(jt){return(Math.exp(jt)-Math.exp(-jt))/2}function St(jt){return(Math.exp(jt)+Math.exp(-jt))/2}const mt=rt(0);let Tt=function(jt){return St(mt)/St(mt+de*jt)},sr=function(jt){return Re*((St(mt)*(Ue(Br=mt+de*jt)/St(Br))-Ue(mt))/He)/je;var Br},dr=(rt(1)-mt)/de;if(Math.abs(je)<1e-6||!isFinite(dr)){if(Math.abs(Re-ke)<1e-6)return this.easeTo(u,p);const jt=ke<Re?-1:1;dr=Math.abs(Math.log(ke/Re))/de,sr=function(){return 0},Tt=function(Br){return Math.exp(jt*de*Br)}}return u.duration="duration"in u?+u.duration:1e3*dr/("screenSpeed"in u?+u.screenSpeed/de:+u.speed),u.maxDuration&&u.duration>u.maxDuration&&(u.duration=0),this._zooming=!0,this._rotating=C!==V,this._pitching=H!==k,this._padding=!y.isPaddingEqual(X),this._prepareEase(p,!1),this._ease(jt=>{const Br=jt*dr,Fr=1/Tt(Br);y.zoom=jt===1?B:S+y.scaleZoom(Fr),this._rotating&&(y.bearing=o.number(C,V,jt)),this._pitching&&(y.pitch=o.number(k,H,jt)),this._padding&&(y.interpolatePadding(z,X,jt),se=y.centerPoint.add(he));const br=jt===1?we:y.unproject(Ae.add(Me.mult(sr(Br))).mult(Fr));y.setLocationAtPoint(y.renderWorldCopies?br.wrap():br,se),this._fireMoveEvents(p)},()=>this._afterEase(p),u),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(u,p){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,p)}if(!u){const y=this.handlers;y&&y.stop(!1)}return this}_ease(u,p,y){y.animate===!1||y.duration===0?(u(1),p()):(this._easeStart=o.exported.now(),this._easeOptions=y,this._onEaseFrame=u,this._onEaseEnd=p,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const u=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(u)),u<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(u,p){u=o.wrap(u,-180,180);const y=Math.abs(u-p);return Math.abs(u-360-p)<y&&(u-=360),Math.abs(u+360-p)<y&&(u+=360),u}_normalizeCenter(u){const p=this.transform;if(!p.renderWorldCopies||p.lngRange)return;const y=u.lng-p.center.lng;u.lng+=y>180?-360:y<-180?360:0}}class pu{constructor(u={}){this.options=u,o.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(u){return this._map=u,this._compact=this.options&&this.options.compact,this._container=_.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=_.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=_.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){_.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(u,p){const y=this._map._getUIString(`AttributionControl.${p}`);u.title=y,u.setAttribute("aria-label",y)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(u){!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let u=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?u=u.concat(this.options.customAttribution.map(S=>typeof S!="string"?"":S)):typeof this.options.customAttribution=="string"&&u.push(this.options.customAttribution)),this._map.style.stylesheet){const S=this._map.style.stylesheet;this.styleOwner=S.owner,this.styleId=S.id}const p=this._map.style.sourceCaches;for(const S in p){const C=p[S];if(C.used||C.usedForTerrain){const k=C.getSource();k.attribution&&u.indexOf(k.attribution)<0&&u.push(k.attribution)}}u=u.filter(S=>String(S).trim()),u.sort((S,C)=>S.length-C.length),u=u.filter((S,C)=>{for(let k=C+1;k<u.length;k++)if(u[k].indexOf(S)>=0)return!1;return!0});const y=u.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,u.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class jc{constructor(u={}){this.options=u,o.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(u){this._map=u,this._compact=this.options&&this.options.compact,this._container=_.create("div","maplibregl-ctrl mapboxgl-ctrl");const p=_.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return p.target="_blank",p.rel="noopener nofollow",p.href="https://maplibre.org/",p.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),p.setAttribute("rel","noopener nofollow"),this._container.appendChild(p),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){_.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact","mapboxgl-compact"):p.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class iv{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(u){const p=++this._id;return this._queue.push({callback:u,id:p,cancelled:!1}),p}remove(u){const p=this._currentlyRunning,y=p?this._queue.concat(p):this._queue;for(const S of y)if(S.id===u)return void(S.cancelled=!0)}run(u=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const p=this._currentlyRunning=this._queue;this._queue=[];for(const y of p)if(!y.cancelled&&(y.callback(u),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const av={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},ov={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},h0={showCompass:!0,showZoom:!0,visualizePitch:!1};class Da{constructor(u,p,y=!1){this._clickTolerance=10,this.element=p,this.mouseRotate=new lo({clickTolerance:u.dragRotate._mouseRotate._clickTolerance}),this.map=u,y&&(this.mousePitch=new At({clickTolerance:u.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),_.addEventListener(p,"mousedown",this.mousedown),_.addEventListener(p,"touchstart",this.touchstart,{passive:!1}),_.addEventListener(p,"touchmove",this.touchmove),_.addEventListener(p,"touchend",this.touchend),_.addEventListener(p,"touchcancel",this.reset)}down(u,p){this.mouseRotate.mousedown(u,p),this.mousePitch&&this.mousePitch.mousedown(u,p),_.disableDrag()}move(u,p){const y=this.map,S=this.mouseRotate.mousemoveWindow(u,p);if(S&&S.bearingDelta&&y.setBearing(y.getBearing()+S.bearingDelta),this.mousePitch){const C=this.mousePitch.mousemoveWindow(u,p);C&&C.pitchDelta&&y.setPitch(y.getPitch()+C.pitchDelta)}}off(){const u=this.element;_.removeEventListener(u,"mousedown",this.mousedown),_.removeEventListener(u,"touchstart",this.touchstart,{passive:!1}),_.removeEventListener(u,"touchmove",this.touchmove),_.removeEventListener(u,"touchend",this.touchend),_.removeEventListener(u,"touchcancel",this.reset),this.offTemp()}offTemp(){_.enableDrag(),_.removeEventListener(window,"mousemove",this.mousemove),_.removeEventListener(window,"mouseup",this.mouseup)}mousedown(u){this.down(o.extend({},u,{ctrlKey:!0,preventDefault:()=>u.preventDefault()}),_.mousePos(this.element,u)),_.addEventListener(window,"mousemove",this.mousemove),_.addEventListener(window,"mouseup",this.mouseup)}mousemove(u){this.move(u,_.mousePos(this.element,u))}mouseup(u){this.mouseRotate.mouseupWindow(u),this.mousePitch&&this.mousePitch.mouseupWindow(u),this.offTemp()}touchstart(u){u.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_.touchPos(this.element,u.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>u.preventDefault()},this._startPos))}touchmove(u){u.targetTouches.length!==1?this.reset():(this._lastPos=_.touchPos(this.element,u.targetTouches)[0],this.move({preventDefault:()=>u.preventDefault()},this._lastPos))}touchend(u){u.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function mu(b,u,p){if(b=new o.LngLat(b.lng,b.lat),u){const y=new o.LngLat(b.lng-360,b.lat),S=new o.LngLat(b.lng+360,b.lat),C=p.locationPoint(b).distSqr(u);p.locationPoint(y).distSqr(u)<C?b=y:p.locationPoint(S).distSqr(u)<C&&(b=S)}for(;Math.abs(b.lng-p.center.lng)>180;){const y=p.locationPoint(b);if(y.x>=0&&y.y>=0&&y.x<=p.width&&y.y<=p.height)break;b.lng>p.center.lng?b.lng-=360:b.lng+=360}return b}const Bt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Xt(b,u,p){const y=b.classList;for(const S in Bt)y.remove(`maplibregl-${p}-anchor-${S}`,`mapboxgl-${p}-anchor-${S}`);y.add(`maplibregl-${p}-anchor-${u}`,`mapboxgl-${p}-anchor-${u}`)}class sl extends o.Evented{constructor(u,p){if(super(),(u instanceof HTMLElement||p)&&(u=o.extend({element:u},p)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=u&&u.anchor||"center",this._color=u&&u.color||"#3FB1CE",this._scale=u&&u.scale||1,this._draggable=u&&u.draggable||!1,this._clickTolerance=u&&u.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=u&&u.rotation||0,this._rotationAlignment=u&&u.rotationAlignment||"auto",this._pitchAlignment=u&&u.pitchAlignment&&u.pitchAlignment!=="auto"?u.pitchAlignment:this._rotationAlignment,u&&u.element)this._element=u.element,this._offset=o.pointGeometry.convert(u&&u.offset||[0,0]);else{this._defaultMarker=!0,this._element=_.create("div"),this._element.setAttribute("aria-label","Map marker");const y=_.createNS("http://www.w3.org/2000/svg","svg"),S=41,C=27;y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height",`${S}px`),y.setAttributeNS(null,"width",`${C}px`),y.setAttributeNS(null,"viewBox",`0 0 ${C} ${S}`);const k=_.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"stroke","none"),k.setAttributeNS(null,"stroke-width","1"),k.setAttributeNS(null,"fill","none"),k.setAttributeNS(null,"fill-rule","evenodd");const z=_.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const B=_.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"transform","translate(3.0, 29.0)"),B.setAttributeNS(null,"fill","#000000");const V=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Me of V){const de=_.createNS("http://www.w3.org/2000/svg","ellipse");de.setAttributeNS(null,"opacity","0.04"),de.setAttributeNS(null,"cx","10.5"),de.setAttributeNS(null,"cy","5.80029008"),de.setAttributeNS(null,"rx",Me.rx),de.setAttributeNS(null,"ry",Me.ry),B.appendChild(de)}const H=_.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill",this._color);const X=_.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),H.appendChild(X);const J=_.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"opacity","0.25"),J.setAttributeNS(null,"fill","#000000");const he=_.createNS("http://www.w3.org/2000/svg","path");he.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),J.appendChild(he);const se=_.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"transform","translate(6.0, 7.0)"),se.setAttributeNS(null,"fill","#FFFFFF");const ue=_.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(8.0, 8.0)");const we=_.createNS("http://www.w3.org/2000/svg","circle");we.setAttributeNS(null,"fill","#000000"),we.setAttributeNS(null,"opacity","0.25"),we.setAttributeNS(null,"cx","5.5"),we.setAttributeNS(null,"cy","5.5"),we.setAttributeNS(null,"r","5.4999962");const Ae=_.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#FFFFFF"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962"),ue.appendChild(we),ue.appendChild(Ae),z.appendChild(B),z.appendChild(H),z.appendChild(J),z.appendChild(se),z.appendChild(ue),y.appendChild(z),y.setAttributeNS(null,"height",S*this._scale+"px"),y.setAttributeNS(null,"width",C*this._scale+"px"),this._element.appendChild(y),this._offset=o.pointGeometry.convert(u&&u.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",y=>{y.preventDefault()}),this._element.addEventListener("mousedown",y=>{y.preventDefault()}),Xt(this._element,this._anchor,"marker"),this._popup=null}addTo(u){return this.remove(),this._map=u,u.getCanvasContainer().appendChild(this._element),u.on("move",this._update),u.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),_.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(u){return this._lngLat=o.LngLat.convert(u),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(u){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),u){if(!("offset"in u.options)){const S=Math.sqrt(Math.pow(13.5,2)/2);u.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[S,-1*(38.1-13.5+S)],"bottom-right":[-S,-1*(38.1-13.5+S)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=u,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(u){const p=u.code,y=u.charCode||u.keyCode;p!=="Space"&&p!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(u){const p=u.originalEvent.target,y=this._element;this._popup&&(p===y||y.contains(p))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const u=this._popup;return u?(u.isOpen()?u.remove():u.addTo(this._map),this):this}_update(u){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=mu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y=`rotateX(${this._map.getPitch()}deg)`),u&&u.type!=="moveend"||(this._pos=this._pos.round()),_.setTransform(this._element,`${Bt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${y} ${p}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const S=this._map.unproject(this._pos),C=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=S.distanceTo(this._lngLat)>20*C?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(u){return this._offset=o.pointGeometry.convert(u),this._update(),this}_onMove(u){if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(u){this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(u){return this._draggable=!!u,this._map&&(u?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(u){return this._rotation=u||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(u){return this._rotationAlignment=u||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(u){return this._pitchAlignment=u&&u!=="auto"?u:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Jf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Oo,Jn=0,Ro=!1;const ka={maxWidth:100,unit:"metric"};function sv(b,u,p){const y=p&&p.maxWidth||100,S=b._container.clientHeight/2,C=b.unproject([0,S]),k=b.unproject([y,S]),z=C.distanceTo(k);if(p&&p.unit==="imperial"){const B=3.2808*z;B>5280?zo(u,y,B/5280,b._getUIString("ScaleControl.Miles")):zo(u,y,B,b._getUIString("ScaleControl.Feet"))}else p&&p.unit==="nautical"?zo(u,y,z/1852,b._getUIString("ScaleControl.NauticalMiles")):z>=1e3?zo(u,y,z/1e3,b._getUIString("ScaleControl.Kilometers")):zo(u,y,z,b._getUIString("ScaleControl.Meters"))}function zo(b,u,p,y){const S=function(C){const k=Math.pow(10,`${Math.floor(C)}`.length-1);let z=C/k;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(B){const V=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*V)/V}(z),k*z}(p);b.style.width=u*(S/p)+"px",b.innerHTML=`${S}&nbsp;${y}`}const Sn={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},kn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Qf(b){if(b){if(typeof b=="number"){const u=Math.round(Math.sqrt(.5*Math.pow(b,2)));return{center:new o.pointGeometry(0,0),top:new o.pointGeometry(0,b),"top-left":new o.pointGeometry(u,u),"top-right":new o.pointGeometry(-u,u),bottom:new o.pointGeometry(0,-b),"bottom-left":new o.pointGeometry(u,-u),"bottom-right":new o.pointGeometry(-u,-u),left:new o.pointGeometry(b,0),right:new o.pointGeometry(-b,0)}}if(b instanceof o.pointGeometry||Array.isArray(b)){const u=o.pointGeometry.convert(b);return{center:u,top:u,"top-left":u,"top-right":u,bottom:u,"bottom-left":u,"bottom-right":u,left:u,right:u}}return{center:o.pointGeometry.convert(b.center||[0,0]),top:o.pointGeometry.convert(b.top||[0,0]),"top-left":o.pointGeometry.convert(b["top-left"]||[0,0]),"top-right":o.pointGeometry.convert(b["top-right"]||[0,0]),bottom:o.pointGeometry.convert(b.bottom||[0,0]),"bottom-left":o.pointGeometry.convert(b["bottom-left"]||[0,0]),"bottom-right":o.pointGeometry.convert(b["bottom-right"]||[0,0]),left:o.pointGeometry.convert(b.left||[0,0]),right:o.pointGeometry.convert(b.right||[0,0])}}return Qf(new o.pointGeometry(0,0))}const fs={supported:h,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends hn{constructor(b){var u;if(o.PerformanceUtils.mark(o.PerformanceMarkers.create),(b=o.extend({},ov,b)).minZoom!=null&&b.maxZoom!=null&&b.minZoom>b.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(b.minPitch!=null&&b.maxPitch!=null&&b.minPitch>b.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(b.minPitch!=null&&b.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(b.maxPitch!=null&&b.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new ou(b.minZoom,b.maxZoom,b.minPitch,b.maxPitch,b.renderWorldCopies),{bearingSnap:b.bearingSnap}),this._interactive=b.interactive,this._cooperativeGestures=b.cooperativeGestures,this._maxTileCacheSize=b.maxTileCacheSize,this._failIfMajorPerformanceCaveat=b.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=b.preserveDrawingBuffer,this._antialias=b.antialias,this._trackResize=b.trackResize,this._bearingSnap=b.bearingSnap,this._refreshExpiredTiles=b.refreshExpiredTiles,this._fadeDuration=b.fadeDuration,this._crossSourceCollisions=b.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=b.collectResourceTiming,this._renderTaskQueue=new iv,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},av,b.locale),this._clickTolerance=b.clickTolerance,this._pixelRatio=(u=b.pixelRatio)!==null&&u!==void 0?u:devicePixelRatio,this._requestManager=new x(b.transformRequest),typeof b.container=="string"){if(this._container=document.getElementById(b.container),!this._container)throw new Error(`Container '${b.container}' not found.`)}else{if(!(b.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=b.container}if(b.maxBounds&&this.setMaxBounds(b.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new nv(this,b),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=b.hash&&new qm(typeof b.hash=="string"&&b.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),b.bounds&&(this.resize(),this.fitBounds(b.bounds,o.extend({},b.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=b.localIdeographFontFamily,b.style&&this.setStyle(b.style,{localIdeographFontFamily:b.localIdeographFontFamily}),b.attributionControl&&this.addControl(new pu({customAttribution:b.customAttribution})),b.maplibreLogo&&this.addControl(new jc,b.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",p=>{this._update(p.dataType==="style"),this.fire(new o.Event(`${p.dataType}data`,p))}),this.on("dataloading",p=>{this.fire(new o.Event(`${p.dataType}dataloading`,p))}),this.on("dataabort",p=>{this.fire(new o.Event("sourcedataabort",p))})}_getMapId(){return this._mapId}addControl(b,u){if(u===void 0&&(u=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const p=b.onAdd(this);this._controls.push(b);const y=this._controlPositions[u];return u.indexOf("bottom")!==-1?y.insertBefore(p,y.firstChild):y.appendChild(p),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const u=this._controls.indexOf(b);return u>-1&&this._controls.splice(u,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,u,p,y){return y==null&&this.style.terrain&&(y=this.transform.getElevation(p,this.style.terrain)),super.calculateCameraOptionsFromTo(b,u,p,y)}resize(b){const u=this._containerDimensions(),p=u[0],y=u[1];this._resizeCanvas(p,y,this.getPixelRatio()),this.transform.resize(p,y),this.painter.resize(p,y,this.getPixelRatio());const S=!this._moving;return S&&(this.stop(),this.fire(new o.Event("movestart",b)).fire(new o.Event("move",b))),this.fire(new o.Event("resize",b)),S&&this.fire(new o.Event("moveend",b)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(b){const[u,p]=this._containerDimensions();this._pixelRatio=b,this._resizeCanvas(u,p,b),this.painter.resize(u,p,b)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(o.LngLatBounds.convert(b)),this._update()}setMinZoom(b){if((b=b==null?-2:b)>=-2&&b<=this.transform.maxZoom)return this.transform.minZoom=b,this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b==null?22:b)>=this.transform.minZoom)return this.transform.maxZoom=b,this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b==null?0:b)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.minPitch=b,this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b==null?60:b)>85)throw new Error("maxPitch must be less than or equal to 85");if(b>=this.transform.minPitch)return this.transform.maxPitch=b,this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.renderWorldCopies=b,this._update()}project(b){return this.transform.locationPoint(o.LngLat.convert(b),this.style&&this.style.terrain)}unproject(b){return this.transform.pointLocation(o.pointGeometry.convert(b),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(b,u,p){if(b==="mouseenter"||b==="mouseover"){let y=!1;return{layer:u,listener:p,delegates:{mousemove:C=>{const k=this.getLayer(u)?this.queryRenderedFeatures(C.point,{layers:[u]}):[];k.length?y||(y=!0,p.call(this,new Bi(b,this,C.originalEvent,{features:k}))):y=!1},mouseout:()=>{y=!1}}}}if(b==="mouseleave"||b==="mouseout"){let y=!1;return{layer:u,listener:p,delegates:{mousemove:k=>{(this.getLayer(u)?this.queryRenderedFeatures(k.point,{layers:[u]}):[]).length?y=!0:y&&(y=!1,p.call(this,new Bi(b,this,k.originalEvent)))},mouseout:k=>{y&&(y=!1,p.call(this,new Bi(b,this,k.originalEvent)))}}}}{const y=S=>{const C=this.getLayer(u)?this.queryRenderedFeatures(S.point,{layers:[u]}):[];C.length&&(S.features=C,p.call(this,S),delete S.features)};return{layer:u,listener:p,delegates:{[b]:y}}}}on(b,u,p){if(p===void 0)return super.on(b,u);const y=this._createDelegatedListener(b,u,p);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(y);for(const S in y.delegates)this.on(S,y.delegates[S]);return this}once(b,u,p){if(p===void 0)return super.once(b,u);const y=this._createDelegatedListener(b,u,p);for(const S in y.delegates)this.once(S,y.delegates[S]);return this}off(b,u,p){return p===void 0?super.off(b,u):(this._delegatedListeners&&this._delegatedListeners[b]&&(y=>{const S=this._delegatedListeners[b];for(let C=0;C<S.length;C++){const k=S[C];if(k.layer===u&&k.listener===p){for(const z in k.delegates)this.off(z,k.delegates[z]);return S.splice(C,1),this}}})(),this)}queryRenderedFeatures(b,u){if(!this.style)return[];let p;if(u!==void 0||b===void 0||b instanceof o.pointGeometry||Array.isArray(b)||(u=b,b=void 0),u=u||{},(b=b||[[0,0],[this.transform.width,this.transform.height]])instanceof o.pointGeometry||typeof b[0]=="number")p=[o.pointGeometry.convert(b)];else{const y=o.pointGeometry.convert(b[0]),S=o.pointGeometry.convert(b[1]);p=[y,new o.pointGeometry(S.x,y.y),S,new o.pointGeometry(y.x,S.y),y]}return this.style.queryRenderedFeatures(p,u,this.transform)}querySourceFeatures(b,u){return this.style.querySourceFeatures(b,u)}setStyle(b,u){return(u=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},u)).diff!==!1&&u.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,u),this):(this._localIdeographFontFamily=u.localIdeographFontFamily,this._updateStyle(b,u))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const u=this._locale[b];if(u==null)throw new Error(`Missing UI string '${b}'`);return u}_updateStyle(b,u){return this.style&&(this.style.setEventedParent(null),this.style._remove()),b?(this.style=new ai(this,u||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b):this.style.loadJSON(b),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new ai(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,u){if(typeof b=="string"){const p=this._requestManager.transformRequest(b,o.ResourceType.Style);o.getJSON(p,(y,S)=>{y?this.fire(new o.ErrorEvent(y)):S&&this._updateDiff(S,u)})}else typeof b=="object"&&this._updateDiff(b,u)}_updateDiff(b,u){try{this.style.setState(b)&&this._update(!0)}catch(p){o.warnOnce(`Unable to perform style diff: ${p.message||p.error||p}.  Rebuilding the style from scratch.`),this._updateStyle(b,u)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")}addSource(b,u){return this._lazyInitEmptyStyle(),this.style.addSource(b,u),this._update(!0)}isSourceLoaded(b){const u=this.style&&this.style.sourceCaches[b];if(u!==void 0)return u.loaded();this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){return this.style.setTerrain(b),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const u in b){const p=b[u]._tiles;for(const y in p){const S=p[y];if(S.state!=="loaded"&&S.state!=="errored")return!1}}return!0}addSourceType(b,u,p){return this._lazyInitEmptyStyle(),this.style.addSourceType(b,u,p)}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}addImage(b,u,{pixelRatio:p=1,sdf:y=!1,stretchX:S,stretchY:C,content:k}={}){if(this._lazyInitEmptyStyle(),u instanceof HTMLImageElement||o.isImageBitmap(u)){const{width:z,height:B,data:V}=o.exported.getImageData(u);this.style.addImage(b,{data:new o.RGBAImage({width:z,height:B},V),pixelRatio:p,stretchX:S,stretchY:C,content:k,sdf:y,version:0})}else{if(u.width===void 0||u.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:B,data:V}=u,H=u;this.style.addImage(b,{data:new o.RGBAImage({width:z,height:B},new Uint8Array(V)),pixelRatio:p,stretchX:S,stretchY:C,content:k,sdf:y,version:0,userImage:H}),H.onAdd&&H.onAdd(this,b)}}}updateImage(b,u){const p=this.style.getImage(b);if(!p)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=u instanceof HTMLImageElement||o.isImageBitmap(u)?o.exported.getImageData(u):u,{width:S,height:C,data:k}=y;if(S===void 0||C===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(S!==p.data.width||C!==p.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(u instanceof HTMLImageElement||o.isImageBitmap(u));p.data.replace(k,z),this.style.updateImage(b,p)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b,u){o.getImage(this._requestManager.transformRequest(b,o.ResourceType.Image),u)}listImages(){return this.style.listImages()}addLayer(b,u){return this._lazyInitEmptyStyle(),this.style.addLayer(b,u),this._update(!0)}moveLayer(b,u){return this.style.moveLayer(b,u),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}setLayerZoomRange(b,u,p){return this.style.setLayerZoomRange(b,u,p),this._update(!0)}setFilter(b,u,p={}){return this.style.setFilter(b,u,p),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,u,p,y={}){return this.style.setPaintProperty(b,u,p,y),this._update(!0)}getPaintProperty(b,u){return this.style.getPaintProperty(b,u)}setLayoutProperty(b,u,p,y={}){return this.style.setLayoutProperty(b,u,p,y),this._update(!0)}getLayoutProperty(b,u){return this.style.getLayoutProperty(b,u)}setLight(b,u={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,u),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(b,u){return this.style.setFeatureState(b,u),this._update()}removeFeatureState(b,u){return this.style.removeFeatureState(b,u),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,u=0;return this._container&&(b=this._container.clientWidth||400,u=this._container.clientHeight||300),[b,u]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map","mapboxgl-map");const u=this._canvasContainer=_.create("div","maplibregl-canvas-container mapboxgl-canvas-container",b);this._interactive&&u.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=_.create("canvas","maplibregl-canvas mapboxgl-canvas",u),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const p=this._containerDimensions();this._resizeCanvas(p[0],p[1],this.getPixelRatio());const y=this._controlContainer=_.create("div","maplibregl-control-container mapboxgl-control-container",b),S=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{S[C]=_.create("div",`maplibregl-ctrl-${C} mapboxgl-ctrl-${C}`,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const b=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=_.create("div","maplibregl-cooperative-gesture-screen",b);let u="Control",p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(p=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use \u2318 + scroll to zoom the map",u="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${p}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",y=>{y.key===u&&(this._metaPress=!0)}),document.addEventListener("keyup",y=>{y.key===u&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",y=>{this._onCooperativeGesture(y,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(b,u,p){this._canvas.width=p*b,this._canvas.height=p*u,this._canvas.style.width=`${b}px`,this._canvas.style.height=`${u}px`}_setupPainter(){const b=o.extend({},h.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),u=this._canvas.getContext("webgl",b)||this._canvas.getContext("experimental-webgl",b);u?(this.painter=new $f(u,this.transform),o.exported$1.testSupport(u)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(b){b.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:b}))}_contextRestored(b){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:b}))}_onMapScroll(b){if(b.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(b,u,p){return!u&&p<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){let u,p=0;const y=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(u=y.createQueryEXT(),y.beginQueryEXT(y.TIME_ELAPSED_EXT,u),p=o.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let S=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const k=this.transform.zoom,z=o.exported.now();this.style.zoomHistory.update(k,z);const B=new o.EvaluationParameters(k,{now:z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),V=B.crossFadingFactor();V===1&&V===this._crossFadingFactor||(S=!0,this._crossFadingFactor=V),this.style.update(B)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.PerformanceUtils.mark(o.PerformanceMarkers.load),this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||S)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const k=o.exported.now()-p;y.endQueryEXT(y.TIME_ELAPSED_EXT,u),setTimeout(()=>{const z=y.getQueryObjectEXT(u,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(u),this.fire(new o.Event("gpu-timing-frame",{cpuTime:k,gpuTime:z}))},50)}if(this.listens("gpu-timing-layer")){const k=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(k);this.fire(new o.Event("gpu-timing-layer",{layerTimes:z}))},50)}const C=this._sourcesDirty||this._styleDirty||this._placementDirty;return C||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||C||(this._fullyLoaded=!0,o.PerformanceUtils.mark(o.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const b=this.painter.context.gl.getExtension("WEBGL_lose_context");b&&b.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),_.remove(this._canvasContainer),_.remove(this._controlContainer),this._cooperativeGestures&&_.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),o.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=o.exported.frame(b=>{o.PerformanceUtils.frame(b),this._frame=null,this._render(b)}))}_onWindowOnline(){this._update()}_onWindowResize(b){this._trackResize&&this.resize({originalEvent:b})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}_setCacheLimits(b,u){o.setCacheLimits(b,u)}get version(){return"2.4.0"}},NavigationControl:class{constructor(b){this.options=o.extend({},h0,b),this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",u=>u.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",u=>this._map.zoomIn({},{originalEvent:u})),_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",u=>this._map.zoomOut({},{originalEvent:u})),_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",u=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:u}):this._map.resetNorth({},{originalEvent:u})}),this._compassIcon=_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const b=this._map.getZoom(),u=b===this._map.getMaxZoom(),p=b===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())}_rotateCompassArrow(){const b=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=b}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Da(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){_.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,u){const p=_.create("button",b,this._container);return p.type="button",p.addEventListener("click",u),p}_setButtonTitle(b,u){const p=this._map._getUIString(`NavigationControl.${u}`);b.title=p,b.setAttribute("aria-label",p)}},GeolocateControl:class extends o.Evented{constructor(b){super(),this.options=o.extend({},Jf,b),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(b){var u;return this._map=b,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),u=this._setupUI,Oo!==void 0?u(Oo):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(p=>{Oo=p.state!=="denied",u(Oo)}):(Oo=!!window.navigator.geolocation,u(Oo)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),_.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Jn=0,Ro=!1}_isOutOfMapMaxBounds(b){const u=this._map.getMaxBounds(),p=b.coords;return u&&(p.longitude<u.getWest()||p.longitude>u.getEast()||p.latitude<u.getSouth()||p.latitude>u.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(b){if(this._map){if(this._isOutOfMapMaxBounds(b))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",b)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=b,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(b),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(b),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",b)),this._finish()}}_updateCamera(b){const u=new o.LngLat(b.coords.longitude,b.coords.latitude),p=b.coords.accuracy,y=this._map.getBearing(),S=o.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(u.toBounds(p),S,{geolocateSource:!0})}_updateMarker(b){if(b){const u=new o.LngLat(b.coords.longitude,b.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=b.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const b=this._map._container.clientHeight/2,u=this._map.unproject([0,b]),p=this._map.unproject([1,b]),y=u.distanceTo(p),S=Math.ceil(2*this._accuracy/y);this._circleElement.style.width=`${S}px`,this._circleElement.style.height=`${S}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(b){if(this._map){if(this.options.trackUserLocation)if(b.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(b.code===3&&Ro)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",b)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(b){if(this._container.addEventListener("contextmenu",u=>u.preventDefault()),this._geolocateButton=_.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",b===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=_.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new sl(this._dotElement),this._circleElement=_.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new sl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||u.originalEvent&&u.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Jn--,Ro=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Jn++,Jn>1?(b={maximumAge:6e5,timeout:0},Ro=!0):(b=this.options.positionOptions,Ro=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:pu,LogoControl:jc,ScaleControl:class{constructor(b){this.options=o.extend({},ka,b),o.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){sv(this._map,this._container,this.options)}onAdd(b){return this._map=b,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){_.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(b){this.options.unit=b,sv(this._map,this._container,this.options)}},FullscreenControl:class{constructor(b){this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=_.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){_.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const b=this._fullscreenButton=_.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(b){this.options=b,o.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(b){return this._map=b,this._container=_.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=_.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),_.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){_.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends o.Evented{constructor(b){super(),this.options=o.extend(Object.create(Sn),b),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&_.remove(this._content),this._container&&(_.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=o.LngLat.convert(b),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const u=document.createDocumentFragment(),p=document.createElement("body");let y;for(p.innerHTML=b;y=p.firstChild,y;)u.appendChild(y);return this.setDOMContent(u)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=_.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){this._container&&this._container.classList.add(b)}removeClassName(b){this._container&&this._container.classList.remove(b)}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}_createCloseButton(){this.options.closeButton&&(this._closeButton=_.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(b){this._update(b.point)}_onMouseMove(b){this._update(b.point)}_onDrag(b){this._update(b.point)}_update(b){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=_.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=_.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(C=>this._container.classList.add(C)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=mu(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!b))return;const u=this._pos=this._trackPointer&&b?b:this._map.project(this._lngLat);let p=this.options.anchor;const y=Qf(this.options.offset);if(!p){const C=this._container.offsetWidth,k=this._container.offsetHeight;let z;z=u.y+y.bottom.y<k?["top"]:u.y>this._map.transform.height-k?["bottom"]:[],u.x<C/2?z.push("left"):u.x>this._map.transform.width-C/2&&z.push("right"),p=z.length===0?"bottom":z.join("-")}const S=u.add(y[p]).round();_.setTransform(this._container,`${Bt[p]} translate(${S.x}px,${S.y}px)`),Xt(this._container,p,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(kn);b&&b.focus()}_onClose(){this.remove()}},Marker:sl,Style:ai,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,AJAXError:o.AJAXError,config:o.config,CanvasSource:Qt,GeoJSONSource:et,ImageSource:wt,RasterDEMTileSource:be,RasterTileSource:ye,VectorTileSource:fe,VideoSource:Rt,prewarm:function(){Ge().acquire(lt)},clearPrewarmedResources:function(){const b=De;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(lt),De=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return oe.workerCount},set workerCount(b){oe.workerCount=b},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(b){o.config.MAX_PARALLEL_IMAGE_REQUESTS=b},clearStorage(b){o.clearTileCache(b)},workerUrl:"",addProtocol(b,u){o.config.REGISTERED_PROTOCOLS[b]=u},removeProtocol(b){delete o.config.REGISTERED_PROTOCOLS[b]}};return ra.extend(fs,{isSafari:o.isSafari,getPerformanceMetrics:o.PerformanceUtils.getPerformanceMetrics}),fs});var l=i;return l})})(Uk);const Cd=Uk.exports;const AG={name:"MyMap",data:()=>({map_style_url:"https://mirrors.sustech.edu.cn/osm-tile/styles/osm-street/style.json",map_text_colour:"#000000",bus_location_data_api:[],bus_location_data_display:[],bus_plate_hash:{298:{plate:"\u7CA4BDF298"},363:{plate:"\u7CA4BDF363"},8040:{plate:"\u7CA4BDF040"},8147:{plate:"\u7CA4BDF147"},8267:{plate:"\u7CA4BDF267"},8330:{plate:"\u7CA4BDF330"},8335:{plate:"\u7CA4BDF335"},8338:{plate:"\u7CA4BDF338"},8345:{plate:"\u7CA4BDF345"},8365:{plate:"\u7CA4BDF365"},8371:{plate:"\u7CA4BDF371"},8411:{plate:"\u7CA4BDF411"},8421:{plate:"\u7CA4BDF421"},8430:{plate:"\u7CA4BDF430"},8447:{plate:"\u7CA4BDE447"},8458:{plate:"\u7CA4BDF458"},8470:{plate:"\u7CA4BDF470"},8471:{plate:"\u7CA4BDF471"},18447:{plate:"\u7CA4BDF447"}},geojson_line_1:[[113.99739584160139,22.610765716856296],[113.99770244929088,22.610602750604695],[113.99771094950285,22.61059767778233],[113.99771890653385,22.610591789421974],[113.99772624241524,22.61058514322198],[113.99773288526481,22.610577804306548],[113.99773876999119,22.610569844587616],[113.99824514560808,22.609808813574297],[113.998249208217,22.609802159245984],[113.99825274007058,22.60979520864264],[113.99898879543889,22.60819510708253],[113.99899240486543,22.608186143427105],[113.99899513228698,22.608176873246407],[113.99899695223624,22.60816738310082],[113.9989978477194,22.608157761604655],[113.99899781037489,22.60814809859871],[113.99899684055141,22.608138484311375],[113.99876376465981,22.606584405046835],[113.99876186005746,22.60657488398115],[113.99875904105679,22.60656559250995],[113.9987553342348,22.606556618231554],[113.99875077453878,22.606548045753847],[113.9987454049567,22.606539955896604],[113.99840124581259,22.606072409367975],[113.99839530892635,22.606065092796133],[113.9983887097732,22.60605836746942],[113.99838150693964,22.606052293094507],[113.9983737643716,22.606046923598996],[113.99836555080671,22.606042306652647],[113.99835693916405,22.60603848324417],[113.99834800589677,22.606035487317342],[113.99774294809698,22.605863822610463],[113.99773312637,22.605861563911226],[113.99772312717697,22.605860305268262],[113.99771305207776,22.60586005946536],[113.99770300340316,22.605860828999095],[113.99769308321561,22.605862606053456],[113.9976833922725,22.605865372579256],[113.996462081496,22.60628164325351],[113.99540699384544,22.60655007340282],[113.99537688636465,22.60638436471066],[113.99537457846512,22.606374521317747],[113.99537128843397,22.606364961271755],[113.99536704990152,22.60635578229431],[113.99536190619351,22.606347078211808],[113.99535590988829,22.606338937996323],[113.99534912227939,22.606331444856142],[113.99534161274892,22.60632467538524],[113.99533345805837,22.60631869878032],[113.995324741564,22.606313576133513],[113.99531555236477,22.60630935980789],[113.99491868014185,22.60615102642152],[113.99446803578164,22.605922922486105],[113.993628105381,22.605432281601264],[113.99361436378835,22.60541624974317],[113.99361283376653,22.605399929510398],[113.99403523011212,22.604697356220907],[113.99427914343141,22.604297776694622],[113.99454570612934,22.60407119840138],[113.99455101208882,22.604066349285663],[113.99481121659123,22.60381079129223],[113.99481565952753,22.603806137576637],[113.99515576701069,22.603426136652367],[113.99549648383878,22.60304833084697],[113.99570726599393,22.60298417975627],[113.99623267681147,22.60298349183956],[113.99686127008054,22.603078201644227],[113.99770971150042,22.60339811537432],[113.9977201426685,22.603401409146592],[113.99773087118898,22.603403543871796],[113.99774176868631,22.603404494006192],[113.99787229266123,22.603408704456996],[113.99788215074415,22.603408536156227],[113.9978919443383,22.60340739789566],[113.99790157824009,22.603405300740327],[113.99791095879819,22.603402265076713],[113.9979199948241,22.603398320414538],[113.9979285984785,22.60339350509991],[113.99793668612513,22.60338786594256],[113.99794417914393,22.60338145776082],[113.9980199672584,22.603309880097154],[113.99802683618526,22.603302715227613],[113.99803296099675,22.603294904709315],[113.99803828135273,22.603286525489548],[113.99804274483841,22.603277660118295],[113.9980463074806,22.603268395934986],[113.99804893418107,22.603258824208055],[113.99810024403767,22.60302739683338],[113.99810134953593,22.603021608404344],[113.99816665521513,22.602614977726315],[113.99835030416712,22.60216721735362],[113.99856193554633,22.601842951121434],[113.99880470491176,22.601545730488308],[113.99881031760918,22.601538156502247],[113.99881519216395,22.60153008765145],[113.99881928525701,22.6015215956419],[113.99882256051407,22.601512755940064],[113.99882498882864,22.601503647102295],[113.9988265486209,22.601494350076678],[113.99882722602932,22.60148494748368],[113.9988344317295,22.601194082723367],[113.99895072783376,22.600790214181995],[113.99965135994073,22.60015739690114],[113.9997487439255,22.600094924156195],[113.99975662585287,22.600089311655786],[113.99976392845348,22.6000829636668],[113.99977058335678,22.600075939622243],[113.99977652825628,22.600068305284697],[113.99978170749289,22.600060132130594],[113.99978607257604,22.600051496681044],[113.99978958263767,22.600042479785387],[113.99979220481484,22.60003316586426],[113.99979391455744,22.600023642119194],[113.99979469585801,22.60001399771619],[113.99979454140164,22.600004322950916],[113.9997934526344,22.599994708403305],[113.9997914397499,22.5999852440895],[113.99978852159374,22.599976018619078],[113.99978472548715,22.599967118365456],[113.99978008697113,22.5999586266572],[113.99977464947378,22.599950622997884],[113.99976846390364,22.599943182321713],[113.99976158817306,22.599936374291982],[113.99975408665603,22.59993026264882],[113.99974602958545,22.59992490461245],[113.99973749239562,22.59992035034746],[113.9997285550159,22.599916642493127],[113.99931433242868,22.59976784741106],[113.9988527029684,22.59945117882353],[113.99885252734994,22.599451058627373],[113.99811209682619,22.59894545191823],[113.99660435988763,22.59725046170577],[113.9966030867808,22.597249057512315],[113.99536067582889,22.595904550009735],[113.9953541984203,22.59589815108709],[113.99534716583669,22.59589236785265],[113.99533963638028,22.595887248251184],[113.99460302843119,22.595434010528884],[113.99459456469982,22.595429350779234],[113.99458569078772,22.595425529562213],[113.9945764895311,22.59542258254812],[113.99456704682186,22.595420537246756],[113.99455745080581,22.59541941275059],[113.99454779105987,22.59541921955658],[113.99453815775585,22.59541995946815],[113.99452864081873,22.59542162557837],[113.99451932908723,22.595424202334442],[113.9945103094845,22.595427665682845],[113.99450166620676,22.59543198329392],[113.99449347993728,22.59543711486362],[113.99448582709327,22.59544301248976],[113.99447877911251,22.595449621119172],[113.99447240178651,22.59545687906161],[113.99446675464631,22.595464718565623],[113.99446189040688,22.595473066451],[113.99420385593578,22.595969591352997],[113.99382768199821,22.59595993652297],[113.9938169603822,22.59596023674876],[113.99380633259398,22.59596168357378],[113.99379592089899,22.59596426035329],[113.99378584507669,22.595967937443213],[113.99321594303598,22.596211295714554],[113.99320787618828,22.59621517605677],[113.99320018866534,22.59621976224022],[113.99319294206812,22.596225017515316],[113.9931861944644,22.596230899770962],[113.99265363550316,22.596738860232236],[113.99200633643709,22.59716671060916],[113.99157366427197,22.5971462468509],[113.99090478252046,22.5969456920235],[113.99089489978897,22.59694326928491],[113.99088482201618,22.596941863390235],[113.9908746535454,22.596941488895837],[113.99086449965898,22.596942149679155],[113.99039476525739,22.596996829390125],[113.99038484213679,22.596998494112995],[113.99037513653565,22.597001147588333],[113.99036574671312,22.59700476295245],[113.99035676773141,22.597009303603546],[113.99034829049342,22.59701472357223],[113.99034040082233,22.597020967986946],[113.99033317859293,22.597027973629473],[113.99032669692278,22.59703566957495],[113.99032102143205,22.597043977909916],[113.99031620957922,22.597052814521092],[113.9903123100793,22.597062089946967],[113.99030936241067,22.59707171028347],[113.99020088374516,22.59750194984639],[113.99019873660492,22.597513104722935],[113.99019786842672,22.597524431141103],[113.99019829041364,22.59753578294312],[113.99030139387085,22.59862956838946],[113.99030286538937,22.59863964935582],[113.9903053549666,22.598649528285655],[113.99030883676294,22.59865910264432],[113.99048378356784,22.59907317753902],[113.99048795907763,22.599081866470787],[113.99049295183752,22.59909011297101],[113.99049871544861,22.599097840402962],[113.99050519634824,22.599104976953754],[113.99051233430787,22.599111456301692],[113.99052006299269,22.59911721823263],[113.99075599101839,22.599276010611053],[113.99076619844251,22.59928203412041],[113.99126127611241,22.599535900836155],[113.9917686585336,22.6000105337692],[113.99191211157755,22.60053218120178],[113.99183362959826,22.601016496848214],[113.99144872111891,22.60153952301182],[113.99077751816642,22.602118998056795],[113.99045237812743,22.602377905865616],[113.9904454049912,22.602384007276413],[113.99043902651476,22.60239072790739],[113.9904332974585,22.6023980100607],[113.99025180113084,22.60265210491943],[113.99024623928223,22.60266080939295],[113.99024160504972,22.60267004118088],[113.99023794788148,22.602679701778165],[113.99023530680027,22.60268968810428],[113.99010219314502,22.60332391993846]],geojson_line_2:[[113.9914596783045,22.59960492109923],[113.9918969233072,22.59993661748595],[113.9920105698998,22.6005318195689],[113.9919172423369,22.60102266627295],[113.9917196221943,22.601431625928],[113.9915262747645,22.601612498395962],[113.99204584987558,22.60262745159568],[113.99233952276445,22.60296808489611],[113.99279885728298,22.603280910653833],[113.99298710913483,22.60350336409337],[113.99385306765333,22.603677155592816],[113.99419945106074,22.60426804504929],[113.99386414857948,22.604784676421257],[113.9934784038899,22.60548092977822],[113.995278497141,22.60640224097063],[113.9953277666447,22.60667341560261],[113.9964905851169,22.6063775771138],[113.9977156537446,22.60596002561628],[113.9983207115444,22.60613169032316],[113.9986648706885,22.60659923685179],[113.9988979465801,22.60815331611633],[113.9981618912118,22.60975341767644],[113.9976555155949,22.61051444868976],[113.9973489079054,22.61067741494136]],stations_geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[113.9902,22.60336]},properties:{name:"\u5DE5\u5B66\u9662 COE"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99153,22.599643]},properties:{name:"\u79D1\u7814\u697C Research Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.990399,22.597132]},properties:{name:"\u4E03\u53F7\u95E8 Gate7"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.992403,22.597011]},properties:{name:"\u884C\u653F\u697C Administration Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.994898,22.59569]},properties:{name:"1\u53F7\u95E8 Gate1"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99939,22.599893]},properties:{name:"3\u53F7\u95E8 Gate3"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998329,22.601975]},properties:{name:"\u4E13\u5BB6\u516C\u5BD3 Guest Houses"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997811,22.603325]},properties:{name:"\u6559\u5DE5\u9910\u5385 Faculty Cafteria"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995981,22.60293]},properties:{name:"\u793E\u5EB7\u4E2D\u5FC3 C.Health.Center"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.993824,22.604854]},properties:{name:"\u5B66\u751F\u5BBF\u820D Stu. Dormitories"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995238,22.606518]},properties:{name:"\u8354\u56ED Lychee Hill"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.996732,22.606278]},properties:{name:"\u521B\u56ED Chuang Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998372,22.606102]},properties:{name:"\u6167\u56ED Hui Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997473,22.610667]},properties:{name:"\u6B23\u56ED Joy Highland"}}]},bus_marker_arr:[],map:[],timer:{}}),async created(){},methods:{async fetch_bus(){const e=await qa.get("https://bus.sustcra.com/api/v2/monitor_osm/");this.bus_location_data_api=e.data;const t=new Date;console.log("bus location data fetched at "+parseInt(t.getTime()/1e3)),typeof this.bus_location_data_api[0].time_rt<"u"&&console.log("The clock drift is "+parseInt(t.getTime()/1e3-this.bus_location_data_api[0].time_rt)+" seconds"),this.update_location()},update_location:function(){this.display_data=[],this.bus_marker_arr.forEach(a=>a.remove());let e;for(e=0;e<this.bus_location_data_api.length;e++)if(this.bus_location_data_api[e].time_rt-this.bus_location_data_api[e].time_mt<300){var t=document.createElement("div");t.className="marker",t.style.backgroundImage="url(https://bus.sustcra.com/bus-top-line1.png)",t.style.width=35+"px",t.style.height=35+"px",t.style.backgroundSize="cover";var r=document.createElement("div");r.className="marker",r.style.backgroundImage="url(https://bus.sustcra.com/bus-top-line2.png)",r.style.width=35+"px",r.style.height=35+"px",r.style.backgroundSize="cover";var n=document.createElement("div");n.className="marker",n.style.backgroundImage="url(https://bus.sustcra.com/bus-top-view.png)",n.style.width=35+"px",n.style.height=35+"px",n.style.backgroundSize="cover";var i=new Cd.Marker(n).setLngLat([this.bus_location_data_api[e].lng,this.bus_location_data_api[e].lat]).setRotation(parseInt(this.bus_location_data_api[e].course)).setPopup(new Cd.Popup({offset:25}).setHTML('<p class="car-plate">Plate: <b>'+this.bus_plate_hash[this.bus_location_data_api[e].id].plate+"</b></p><p>Speed: <b>"+this.bus_location_data_api[e].speed+"km/h</b></p>")).addTo(this.map);this.bus_marker_arr.push(i)}},async refresh(){await this.fetch_bus()}},async mounted(){const e={lng:113.99373,lat:22.60308,zoom:14},t={bus_location_data:this.bus_location_data,geojson_line_1:this.geojson_line_1,geojson_line_2:this.geojson_line_2},r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,await r&&(console.log("dark mode enabled."),this.map_text_colour="#FFFFFF",this.map_style_url="https://mirrors.sustech.edu.cn/osm-tile/styles/osm-blue/style.json"),this.map=new Cd.Map({container:this.$refs.myMap,style:this.map_style_url,center:[e.lng,e.lat],zoom:e.zoom});var n=new Cd.NavigationControl;this.map.addControl(n,"top-left"),this.map.addControl(new Cd.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),this.map.on("load",()=>{this.map.addSource("line1",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_1}}}),this.map.addSource("line2",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_2}}}),this.map.addLayer({id:"line1",type:"line",source:"line1",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f7911d","line-width":3}}),this.map.addLayer({id:"line2",type:"line",source:"line2",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#29abe2","line-width":3}}),this.map.loadImage("https://bus.sustcra.com/station_icon.png",(i,a)=>{if(i)throw i;this.map.addImage("custom-marker",a),this.map.addSource("stations",{type:"geojson",data:this.stations_geojson}),this.map.addLayer({id:"bus-station",type:"symbol",source:"stations",layout:{"icon-size":.075,"icon-image":"custom-marker","text-field":["get","name"],"text-size":10,"text-offset":[0,1.25],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]})})}),await this.fetch_bus(),this.timer=setInterval(()=>{this.refresh()},5e3)},async unmounted(){clearInterval(this.timer)}},IG={class:"map-container",ref:"myMap"};function PG(e,t,r,n,i,a){return ft(),Nt(Hr,null,[cr("div",IG,null,512),Vr('  <div id="map-style-menu">'),Vr('    <input id="osm-street" type="radio" name="rtoggle" value="light">'),Vr('    <label for="osm-street">light</label>'),Vr('    <input id="osm-blue" type="radio" name="rtoggle" value="dark">'),Vr('    <label for="osm-blue">dark</label>'),Vr("  </div>")],2112)}const MG=qr(AG,[["render",PG],["__scopeId","data-v-f8b94e67"],["__file","Realtime-map.vue"]]),DG={name:"weather-span",data:()=>({text:""}),mounted(){this.load_weather()},methods:{load_weather(){qa.get("https://api.sustech.online/weather").then(e=>{this.text=e.data.msg})}}},kG={id:"weather-container"},LG={id:"weather"};function OG(e,t,r,n,i,a){return ft(),Nt("div",kG,[cr("span",LG,Kr(e.text),1)])}const RG=qr(DG,[["render",OG],["__file","weather-span.vue"]]);var Di=63710088e-1,T2={centimeters:Di*100,centimetres:Di*100,degrees:Di/111325,feet:Di*3.28084,inches:Di*39.37,kilometers:Di/1e3,kilometres:Di/1e3,meters:Di,metres:Di,miles:Di/1609.344,millimeters:Di*1e3,millimetres:Di*1e3,nauticalmiles:Di/1852,radians:1,yards:Di*1.0936},zG={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/Di,yards:1.0936133},Lb={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function no(e,t,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function BG(e,t,r){switch(e){case"Point":return hi(t).geometry;case"LineString":return Qa(t).geometry;case"Polygon":return E2(t).geometry;case"MultiPoint":return Hk(t).geometry;case"MultiLineString":return jk(t).geometry;case"MultiPolygon":return Gk(t).geometry;default:throw new Error(e+" is invalid")}}function hi(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!A_(e[0])||!A_(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return no(n,t,r)}function FG(e,t,r){return r===void 0&&(r={}),mc(e.map(function(n){return hi(n,t)}),r)}function E2(e,t,r){r===void 0&&(r={});for(var n=0,i=e;n<i.length;n++){var a=i[n];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var l=0;l<a[a.length-1].length;l++)if(a[a.length-1][l]!==a[0][l])throw new Error("First and last Position are not equivalent.")}var o={type:"Polygon",coordinates:e};return no(o,t,r)}function NG(e,t,r){return r===void 0&&(r={}),mc(e.map(function(n){return E2(n,t)}),r)}function Qa(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var n={type:"LineString",coordinates:e};return no(n,t,r)}function VG(e,t,r){return r===void 0&&(r={}),mc(e.map(function(n){return Qa(n,t)}),r)}function mc(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function jk(e,t,r){r===void 0&&(r={});var n={type:"MultiLineString",coordinates:e};return no(n,t,r)}function Hk(e,t,r){r===void 0&&(r={});var n={type:"MultiPoint",coordinates:e};return no(n,t,r)}function Gk(e,t,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:e};return no(n,t,r)}function UG(e,t,r){r===void 0&&(r={});var n={type:"GeometryCollection",geometries:e};return no(n,t,r)}function $G(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function C2(e,t){t===void 0&&(t="kilometers");var r=T2[t];if(!r)throw new Error(t+" units is invalid");return e*r}function yy(e,t){t===void 0&&(t="kilometers");var r=T2[t];if(!r)throw new Error(t+" units is invalid");return e/r}function jG(e,t){return Yh(yy(e,t))}function HG(e){var t=e%360;return t<0&&(t+=360),t}function Yh(e){var t=e%(2*Math.PI);return t*180/Math.PI}function Ki(e){var t=e%360;return t*Math.PI/180}function GG(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return C2(yy(e,t),r)}function qG(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var n=Lb[t];if(!n)throw new Error("invalid original units");var i=Lb[r];if(!i)throw new Error("invalid final units");return e/n*i}function A_(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function A2(e){return!!e&&e.constructor===Object}function WG(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!A_(t))throw new Error("bbox must only contain numbers")})}function ZG(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const XG=Object.freeze(Object.defineProperty({__proto__:null,earthRadius:Di,factors:T2,unitsFactors:zG,areaFactors:Lb,feature:no,geometry:BG,point:hi,points:FG,polygon:E2,polygons:NG,lineString:Qa,lineStrings:VG,featureCollection:mc,multiLineString:jk,multiPoint:Hk,multiPolygon:Gk,geometryCollection:UG,round:$G,radiansToLength:C2,lengthToRadians:yy,lengthToDegrees:jG,bearingToAzimuth:HG,radiansToDegrees:Yh,degreesToRadians:Ki,convertLength:GG,convertArea:qG,isNumber:A_,isObject:A2,validateBBox:WG,validateId:ZG},Symbol.toStringTag,{value:"Module"}));function df(e,t,r){if(e!==null)for(var n,i,a,l,o,h,d,m=0,g=0,_,x=e.type,E=x==="FeatureCollection",M=x==="Feature",P=E?e.features.length:1,I=0;I<P;I++){d=E?e.features[I].geometry:M?e.geometry:e,_=d?d.type==="GeometryCollection":!1,o=_?d.geometries.length:1;for(var D=0;D<o;D++){var O=0,F=0;if(l=_?d.geometries[D]:d,l!==null){h=l.coordinates;var $=l.type;switch(m=r&&($==="Polygon"||$==="MultiPolygon")?1:0,$){case null:break;case"Point":if(t(h,g,I,O,F)===!1)return!1;g++,O++;break;case"LineString":case"MultiPoint":for(n=0;n<h.length;n++){if(t(h[n],g,I,O,F)===!1)return!1;g++,$==="MultiPoint"&&O++}$==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(n=0;n<h.length;n++){for(i=0;i<h[n].length-m;i++){if(t(h[n][i],g,I,O,F)===!1)return!1;g++}$==="MultiLineString"&&O++,$==="Polygon"&&F++}$==="Polygon"&&O++;break;case"MultiPolygon":for(n=0;n<h.length;n++){for(F=0,i=0;i<h[n].length;i++){for(a=0;a<h[n][i].length-m;a++){if(t(h[n][i][a],g,I,O,F)===!1)return!1;g++}F++}O++}break;case"GeometryCollection":for(n=0;n<l.geometries.length;n++)if(df(l.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function YG(e,t,r,n){var i=r;return df(e,function(a,l,o,h,d){l===0&&r===void 0?i=a:i=t(i,a,l,o,h,d)},n),i}function qk(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function KG(e,t,r){var n=r;return qk(e,function(i,a){a===0&&r===void 0?n=i:n=t(n,i,a)}),n}function Vp(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function JG(e,t,r){var n=r;return Vp(e,function(i,a){a===0&&r===void 0?n=i:n=t(n,i,a)}),n}function QG(e){var t=[];return df(e,function(r){t.push(r)}),t}function I2(e,t){var r,n,i,a,l,o,h,d,m,g,_=0,x=e.type==="FeatureCollection",E=e.type==="Feature",M=x?e.features.length:1;for(r=0;r<M;r++){for(o=x?e.features[r].geometry:E?e.geometry:e,d=x?e.features[r].properties:E?e.properties:{},m=x?e.features[r].bbox:E?e.bbox:void 0,g=x?e.features[r].id:E?e.id:void 0,h=o?o.type==="GeometryCollection":!1,l=h?o.geometries.length:1,i=0;i<l;i++){if(a=h?o.geometries[i]:o,a===null){if(t(null,_,d,m,g)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,_,d,m,g)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<a.geometries.length;n++)if(t(a.geometries[n],_,d,m,g)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}_++}}function eq(e,t,r){var n=r;return I2(e,function(i,a,l,o,h){a===0&&r===void 0?n=i:n=t(n,i,a,l,o,h)}),n}function pf(e,t){I2(e,function(r,n,i,a,l){var o=r===null?null:r.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(no(r,i,{bbox:a,id:l}),n,0)===!1?!1:void 0}var h;switch(o){case"MultiPoint":h="Point";break;case"MultiLineString":h="LineString";break;case"MultiPolygon":h="Polygon";break}for(var d=0;d<r.coordinates.length;d++){var m=r.coordinates[d],g={type:h,coordinates:m};if(t(no(g,i),n,d)===!1)return!1}})}function tq(e,t,r){var n=r;return pf(e,function(i,a,l){a===0&&l===0&&r===void 0?n=i:n=t(n,i,a,l)}),n}function Wk(e,t){pf(e,function(r,n,i){var a=0;if(!!r.geometry){var l=r.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var o,h=0,d=0,m=0;if(df(r,function(g,_,x,E,M){if(o===void 0||n>h||E>d||M>m){o=g,h=n,d=E,m=M,a=0;return}var P=Qa([o,g],r.properties);if(t(P,n,i,M,a)===!1)return!1;a++,o=g})===!1)return!1}}})}function Zk(e,t,r){var n=r,i=!1;return Wk(e,function(a,l,o,h,d){i===!1&&r===void 0?n=a:n=t(n,a,l,o,h,d),i=!0}),n}function Xk(e,t){if(!e)throw new Error("geojson is required");pf(e,function(r,n,i){if(r.geometry!==null){var a=r.geometry.type,l=r.geometry.coordinates;switch(a){case"LineString":if(t(r,n,i,0,0)===!1)return!1;break;case"Polygon":for(var o=0;o<l.length;o++)if(t(Qa(l[o],r.properties),n,i,o)===!1)return!1;break}}})}function rq(e,t,r){var n=r;return Xk(e,function(i,a,l,o){a===0&&r===void 0?n=i:n=t(n,i,a,l,o)}),n}function nq(e,t){if(t=t||{},!A2(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,a=t.segmentIndex||0,l=t.properties,o;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,o=e.features[r].geometry;break;case"Feature":l=l||e.properties,o=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=e;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var h=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=h.length+a-1),Qa([h[a],h[a+1]],l,t);case"Polygon":return i<0&&(i=h.length+i),a<0&&(a=h[i].length+a-1),Qa([h[i][a],h[i][a+1]],l,t);case"MultiLineString":return n<0&&(n=h.length+n),a<0&&(a=h[n].length+a-1),Qa([h[n][a],h[n][a+1]],l,t);case"MultiPolygon":return n<0&&(n=h.length+n),i<0&&(i=h[n].length+i),a<0&&(a=h[n][i].length-a-1),Qa([h[n][i][a],h[n][i][a+1]],l,t)}throw new Error("geojson is invalid")}function iq(e,t){if(t=t||{},!A2(t))throw new Error("options is invalid");var r=t.featureIndex||0,n=t.multiFeatureIndex||0,i=t.geometryIndex||0,a=t.coordIndex||0,l=t.properties,o;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),l=l||e.features[r].properties,o=e.features[r].geometry;break;case"Feature":l=l||e.properties,o=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=e;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var h=o.coordinates;switch(o.type){case"Point":return hi(h,l,t);case"MultiPoint":return n<0&&(n=h.length+n),hi(h[n],l,t);case"LineString":return a<0&&(a=h.length+a),hi(h[a],l,t);case"Polygon":return i<0&&(i=h.length+i),a<0&&(a=h[i].length+a),hi(h[i][a],l,t);case"MultiLineString":return n<0&&(n=h.length+n),a<0&&(a=h[n].length+a),hi(h[n][a],l,t);case"MultiPolygon":return n<0&&(n=h.length+n),i<0&&(i=h[n].length+i),a<0&&(a=h[n][i].length-a),hi(h[n][i][a],l,t)}throw new Error("geojson is invalid")}const aq=Object.freeze(Object.defineProperty({__proto__:null,coordAll:QG,coordEach:df,coordReduce:YG,featureEach:Vp,featureReduce:JG,findPoint:iq,findSegment:nq,flattenEach:pf,flattenReduce:tq,geomEach:I2,geomReduce:eq,lineEach:Xk,lineReduce:rq,propEach:qk,propReduce:KG,segmentEach:Wk,segmentReduce:Zk},Symbol.toStringTag,{value:"Module"}));function Ob(e){var t=[1/0,1/0,-1/0,-1/0];return df(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}Ob.default=Ob;const oq=Object.freeze(Object.defineProperty({__proto__:null,default:Ob},Symbol.toStringTag,{value:"Module"}));function Ds(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Kh(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function sq(e){return e.type==="Feature"?e.geometry:e}function Ml(e,t,r){r===void 0&&(r={});var n=Ds(e),i=Ds(t),a=Ki(i[1]-n[1]),l=Ki(i[0]-n[0]),o=Ki(n[1]),h=Ki(i[1]),d=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(o)*Math.cos(h);return C2(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),r.units)}function lq(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return Yk(e);case"FeatureCollection":return uq(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return P2(e);default:throw new Error("unknown GeoJSON type")}}function Yk(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=Kk(e.properties),t.geometry=P2(e.geometry),t}function Kk(e){var t={};return e&&Object.keys(e).forEach(function(r){var n=e[r];typeof n=="object"?n===null?t[r]=null:Array.isArray(n)?t[r]=n.map(function(i){return i}):t[r]=Kk(n):t[r]=n}),t}function uq(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(r){return Yk(r)}),t}function P2(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(r){return P2(r)}),t):(t.coordinates=Jk(e.coordinates),t)}function Jk(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(r){return Jk(r)})}function Rb(e,t,r,n){n===void 0&&(n={});var i=Ds(e),a=Ki(i[0]),l=Ki(i[1]),o=Ki(r),h=yy(t,n.units),d=Math.asin(Math.sin(l)*Math.cos(h)+Math.cos(l)*Math.sin(h)*Math.cos(o)),m=a+Math.atan2(Math.sin(o)*Math.sin(h)*Math.cos(l),Math.cos(h)-Math.sin(l)*Math.sin(d)),g=Yh(m),_=Yh(d);return hi([g,_],n.properties)}function M2(e,t,r){if(r===void 0&&(r={}),r.final===!0)return cq(e,t);var n=Ds(e),i=Ds(t),a=Ki(n[0]),l=Ki(i[0]),o=Ki(n[1]),h=Ki(i[1]),d=Math.sin(l-a)*Math.cos(h),m=Math.cos(o)*Math.sin(h)-Math.sin(o)*Math.cos(h)*Math.cos(l-a);return Yh(Math.atan2(d,m))}function cq(e,t){var r=M2(t,e);return r=(r+180)%360,r}function dI(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var r,n=1/0,i=0;return Vp(t,function(a,l){var o=Ml(e,a);o<n&&(i=l,n=o)}),r=lq(t.features[i]),r.properties.featureIndex=i,r.properties.distanceToPoint=n,r}function pI(e){if(!e)throw new Error("geojson is required");var t=[];return pf(e,function(r){hq(r,t)}),mc(t)}function hq(e,t){var r=[],n=e.geometry;if(n!==null){switch(n.type){case"Polygon":r=Kh(n);break;case"LineString":r=[Kh(n)]}r.forEach(function(i){var a=fq(i,e.properties);a.forEach(function(l){l.id=t.length,t.push(l)})})}}function fq(e,t){var r=[];return e.reduce(function(n,i){var a=Qa([n,i],t);return a.bbox=dq(n,i),r.push(a),i}),r}function dq(e,t){var r=e[0],n=e[1],i=t[0],a=t[1],l=r<i?r:i,o=n<a?n:a,h=r>i?r:i,d=n>a?n:a;return[l,o,h,d]}var D2={exports:{}},Qk={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(wk,function(){function r(D,O,F,$,q){(function K(Z,re,ie,ce,le){for(;ce>ie;){if(ce-ie>600){var fe=ce-ie+1,ye=re-ie+1,Ne=Math.log(fe),be=.5*Math.exp(2*Ne/3),et=.5*Math.sqrt(Ne*be*(fe-be)/fe)*(ye-fe/2<0?-1:1),tt=Math.max(ie,Math.floor(re-ye*be/fe+et)),wt=Math.min(ce,Math.floor(re+(fe-ye)*be/fe+et));K(Z,re,tt,wt,le)}var Rt=Z[re],Qt=ie,Ut=ce;for(n(Z,ie,re),le(Z[ce],Rt)>0&&n(Z,ie,ce);Qt<Ut;){for(n(Z,Qt,Ut),Qt++,Ut--;le(Z[Qt],Rt)<0;)Qt++;for(;le(Z[Ut],Rt)>0;)Ut--}le(Z[ie],Rt)===0?n(Z,ie,Ut):n(Z,++Ut,ce),Ut<=re&&(ie=Ut+1),re<=Ut&&(ce=Ut-1)}})(D,O,F||0,$||D.length-1,q||i)}function n(D,O,F){var $=D[O];D[O]=D[F],D[F]=$}function i(D,O){return D<O?-1:D>O?1:0}var a=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function l(D,O,F){if(!F)return O.indexOf(D);for(var $=0;$<O.length;$++)if(F(D,O[$]))return $;return-1}function o(D,O){h(D,0,D.children.length,O,D)}function h(D,O,F,$,q){q||(q=P(null)),q.minX=1/0,q.minY=1/0,q.maxX=-1/0,q.maxY=-1/0;for(var K=O;K<F;K++){var Z=D.children[K];d(q,D.leaf?$(Z):Z)}return q}function d(D,O){return D.minX=Math.min(D.minX,O.minX),D.minY=Math.min(D.minY,O.minY),D.maxX=Math.max(D.maxX,O.maxX),D.maxY=Math.max(D.maxY,O.maxY),D}function m(D,O){return D.minX-O.minX}function g(D,O){return D.minY-O.minY}function _(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function x(D){return D.maxX-D.minX+(D.maxY-D.minY)}function E(D,O){return D.minX<=O.minX&&D.minY<=O.minY&&O.maxX<=D.maxX&&O.maxY<=D.maxY}function M(D,O){return O.minX<=D.maxX&&O.minY<=D.maxY&&O.maxX>=D.minX&&O.maxY>=D.minY}function P(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function I(D,O,F,$,q){for(var K=[O,F];K.length;)if(!((F=K.pop())-(O=K.pop())<=$)){var Z=O+Math.ceil((F-O)/$/2)*$;r(D,Z,O,F,q),K.push(O,Z,Z,F)}}return a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(D){var O=this.data,F=[];if(!M(D,O))return F;for(var $=this.toBBox,q=[];O;){for(var K=0;K<O.children.length;K++){var Z=O.children[K],re=O.leaf?$(Z):Z;M(D,re)&&(O.leaf?F.push(Z):E(D,re)?this._all(Z,F):q.push(Z))}O=q.pop()}return F},a.prototype.collides=function(D){var O=this.data;if(!M(D,O))return!1;for(var F=[];O;){for(var $=0;$<O.children.length;$++){var q=O.children[$],K=O.leaf?this.toBBox(q):q;if(M(D,K)){if(O.leaf||E(D,K))return!0;F.push(q)}}O=F.pop()}return!1},a.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var O=0;O<D.length;O++)this.insert(D[O]);return this}var F=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length)if(this.data.height===F.height)this._splitRoot(this.data,F);else{if(this.data.height<F.height){var $=this.data;this.data=F,F=$}this._insert(F,this.data.height-F.height-1,!0)}else this.data=F;return this},a.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},a.prototype.clear=function(){return this.data=P([]),this},a.prototype.remove=function(D,O){if(!D)return this;for(var F,$,q,K=this.data,Z=this.toBBox(D),re=[],ie=[];K||re.length;){if(K||(K=re.pop(),$=re[re.length-1],F=ie.pop(),q=!0),K.leaf){var ce=l(D,K.children,O);if(ce!==-1)return K.children.splice(ce,1),re.push(K),this._condense(re),this}q||K.leaf||!E(K,Z)?$?(F++,K=$.children[F],q=!1):K=null:(re.push(K),ie.push(F),F=0,$=K,K=K.children[0])}return this},a.prototype.toBBox=function(D){return D},a.prototype.compareMinX=function(D,O){return D.minX-O.minX},a.prototype.compareMinY=function(D,O){return D.minY-O.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(D){return this.data=D,this},a.prototype._all=function(D,O){for(var F=[];D;)D.leaf?O.push.apply(O,D.children):F.push.apply(F,D.children),D=F.pop();return O},a.prototype._build=function(D,O,F,$){var q,K=F-O+1,Z=this._maxEntries;if(K<=Z)return o(q=P(D.slice(O,F+1)),this.toBBox),q;$||($=Math.ceil(Math.log(K)/Math.log(Z)),Z=Math.ceil(K/Math.pow(Z,$-1))),(q=P([])).leaf=!1,q.height=$;var re=Math.ceil(K/Z),ie=re*Math.ceil(Math.sqrt(Z));I(D,O,F,ie,this.compareMinX);for(var ce=O;ce<=F;ce+=ie){var le=Math.min(ce+ie-1,F);I(D,ce,le,re,this.compareMinY);for(var fe=ce;fe<=le;fe+=re){var ye=Math.min(fe+re-1,le);q.children.push(this._build(D,fe,ye,$-1))}}return o(q,this.toBBox),q},a.prototype._chooseSubtree=function(D,O,F,$){for(;$.push(O),!O.leaf&&$.length-1!==F;){for(var q=1/0,K=1/0,Z=void 0,re=0;re<O.children.length;re++){var ie=O.children[re],ce=_(ie),le=(fe=D,ye=ie,(Math.max(ye.maxX,fe.maxX)-Math.min(ye.minX,fe.minX))*(Math.max(ye.maxY,fe.maxY)-Math.min(ye.minY,fe.minY))-ce);le<K?(K=le,q=ce<q?ce:q,Z=ie):le===K&&ce<q&&(q=ce,Z=ie)}O=Z||O.children[0]}var fe,ye;return O},a.prototype._insert=function(D,O,F){var $=F?D:this.toBBox(D),q=[],K=this._chooseSubtree($,this.data,O,q);for(K.children.push(D),d(K,$);O>=0&&q[O].children.length>this._maxEntries;)this._split(q,O),O--;this._adjustParentBBoxes($,q,O)},a.prototype._split=function(D,O){var F=D[O],$=F.children.length,q=this._minEntries;this._chooseSplitAxis(F,q,$);var K=this._chooseSplitIndex(F,q,$),Z=P(F.children.splice(K,F.children.length-K));Z.height=F.height,Z.leaf=F.leaf,o(F,this.toBBox),o(Z,this.toBBox),O?D[O-1].children.push(Z):this._splitRoot(F,Z)},a.prototype._splitRoot=function(D,O){this.data=P([D,O]),this.data.height=D.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(D,O,F){for(var $,q,K,Z,re,ie,ce,le=1/0,fe=1/0,ye=O;ye<=F-O;ye++){var Ne=h(D,0,ye,this.toBBox),be=h(D,ye,F,this.toBBox),et=(q=Ne,K=be,Z=void 0,re=void 0,ie=void 0,ce=void 0,Z=Math.max(q.minX,K.minX),re=Math.max(q.minY,K.minY),ie=Math.min(q.maxX,K.maxX),ce=Math.min(q.maxY,K.maxY),Math.max(0,ie-Z)*Math.max(0,ce-re)),tt=_(Ne)+_(be);et<le?(le=et,$=ye,fe=tt<fe?tt:fe):et===le&&tt<fe&&(fe=tt,$=ye)}return $||F-O},a.prototype._chooseSplitAxis=function(D,O,F){var $=D.leaf?this.compareMinX:m,q=D.leaf?this.compareMinY:g;this._allDistMargin(D,O,F,$)<this._allDistMargin(D,O,F,q)&&D.children.sort($)},a.prototype._allDistMargin=function(D,O,F,$){D.children.sort($);for(var q=this.toBBox,K=h(D,0,O,q),Z=h(D,F-O,F,q),re=x(K)+x(Z),ie=O;ie<F-O;ie++){var ce=D.children[ie];d(K,D.leaf?q(ce):ce),re+=x(K)}for(var le=F-O-1;le>=O;le--){var fe=D.children[le];d(Z,D.leaf?q(fe):fe),re+=x(Z)}return re},a.prototype._adjustParentBBoxes=function(D,O,F){for(var $=F;$>=0;$--)d(O[$],D)},a.prototype._condense=function(D){for(var O=D.length-1,F=void 0;O>=0;O--)D[O].children.length===0?O>0?(F=D[O-1].children).splice(F.indexOf(D[O]),1):this.clear():o(D[O],this.toBBox)},a})})(Qk);const pq=m2(XG),mq=m2(aq),vq=m2(oq);var Vo=Qk.exports,eL=pq,tL=mq,sh=vq.default,gq=tL.featureEach;tL.coordEach;eL.polygon;var mI=eL.featureCollection;function rL(e){var t=new Vo(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:sh(r),Vo.prototype.insert.call(this,r)},t.load=function(r){var n=[];return Array.isArray(r)?r.forEach(function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:sh(i),n.push(i)}):gq(r,function(i){if(i.type!=="Feature")throw new Error("invalid features");i.bbox=i.bbox?i.bbox:sh(i),n.push(i)}),Vo.prototype.load.call(this,n)},t.remove=function(r,n){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:sh(r),Vo.prototype.remove.call(this,r,n)},t.clear=function(){return Vo.prototype.clear.call(this)},t.search=function(r){var n=Vo.prototype.search.call(this,this.toBBox(r));return mI(n)},t.collides=function(r){return Vo.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=Vo.prototype.all.call(this);return mI(r)},t.toJSON=function(){return Vo.prototype.toJSON.call(this)},t.fromJSON=function(r){return Vo.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var n;if(r.bbox)n=r.bbox;else if(Array.isArray(r)&&r.length===4)n=r;else if(Array.isArray(r)&&r.length===6)n=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")n=sh(r);else if(r.type==="FeatureCollection")n=sh(r);else throw new Error("invalid geojson");return{minX:n[0],minY:n[1],maxX:n[2],maxY:n[3]}},t}D2.exports=rL;D2.exports.default=rL;function _q(e,t){var r={},n=[];if(e.type==="LineString"&&(e=no(e)),t.type==="LineString"&&(t=no(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var i=vI(e,t);return i&&n.push(i),mc(n)}var a=D2.exports();return a.load(pI(t)),Vp(pI(e),function(l){Vp(a.search(l),function(o){var h=vI(l,o);if(h){var d=Kh(h).join(",");r[d]||(r[d]=!0,n.push(h))}})}),mc(n)}function vI(e,t){var r=Kh(e),n=Kh(t);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(n.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=r[0][0],a=r[0][1],l=r[1][0],o=r[1][1],h=n[0][0],d=n[0][1],m=n[1][0],g=n[1][1],_=(g-d)*(l-i)-(m-h)*(o-a),x=(m-h)*(a-d)-(g-d)*(i-h),E=(l-i)*(a-d)-(o-a)*(i-h);if(_===0)return x===0&&E===0,null;var M=x/_,P=E/_;if(M>=0&&M<=1&&P>=0&&P<=1){var I=i+M*(l-i),D=a+M*(o-a);return hi([I,D])}return null}function Uo(e,t,r){r===void 0&&(r={});var n=hi([1/0,1/0],{dist:1/0}),i=0;return pf(e,function(a){for(var l=Kh(a),o=0;o<l.length-1;o++){var h=hi(l[o]);h.properties.dist=Ml(t,h,r);var d=hi(l[o+1]);d.properties.dist=Ml(t,d,r);var m=Ml(h,d,r),g=Math.max(h.properties.dist,d.properties.dist),_=M2(h,d),x=Rb(t,g,_+90,r),E=Rb(t,g,_-90,r),M=_q(Qa([x.geometry.coordinates,E.geometry.coordinates]),Qa([h.geometry.coordinates,d.geometry.coordinates])),P=null;M.features.length>0&&(P=M.features[0],P.properties.dist=Ml(t,P,r),P.properties.location=i+Ml(h,P,r)),h.properties.dist<n.properties.dist&&(n=h,n.properties.index=o,n.properties.location=i),d.properties.dist<n.properties.dist&&(n=d,n.properties.index=o+1,n.properties.location=i+m),P&&P.properties.dist<n.properties.dist&&(n=P,n.properties.index=o),i+=m}}),n}function yq(e,t,r){r===void 0&&(r={});for(var n=sq(e),i=n.coordinates,a=0,l=0;l<i.length&&!(t>=a&&l===i.length-1);l++)if(a>=t){var o=t-a;if(o){var h=M2(i[l],i[l-1])-180,d=Rb(i[l],o,h,r);return d}else return hi(i[l])}else a+=Ml(i[l],i[l+1],r);return hi(i[i.length-1])}function Fa(e,t){return t===void 0&&(t={}),Zk(e,function(r,n){var i=n.geometry.coordinates;return r+Ml(i[0],i[1],t)},0)}function xq(e,t,r){r===void 0&&(r={});var n;r.final?n=gI(Ds(t),Ds(e)):n=gI(Ds(e),Ds(t));var i=n>180?-(360-n):n;return i}function gI(e,t){var r=Ki(e[1]),n=Ki(t[1]),i=Ki(t[0]-e[0]);i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var a=Math.log(Math.tan(n/2+Math.PI/4)/Math.tan(r/2+Math.PI/4)),l=Math.atan2(i,a);return(Yh(l)+360)%360}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var zb=function(e,t){return zb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},zb(e,t)};function Vt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");zb(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var bq=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),wq=function(){function e(){this.browser=new bq,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Ju=new wq;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Ju.wxa=!0,Ju.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Ju.worker=!0:typeof navigator>"u"?(Ju.node=!0,Ju.svgSupported=!0):Sq(navigator.userAgent,Ju);function Sq(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),l=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),a&&(r.edge=!0,r.version=a[1],r.newEdge=+a[1].split(".")[0]>18),l&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var o=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in o||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Or=Ju;var k2=12,nL="sans-serif",Hl=k2+"px "+nL,Tq=20,Eq=100,Cq="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Aq(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-Tq)/Eq;t[n]=i}return t}var Iq=Aq(Cq),mf={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=mf.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||Hl),e.measureText(r);r=r||"",n=n||Hl;var a=/^([0-9]*?)px$/.exec(n),l=+(a&&a[1])||k2,o=0;if(n.indexOf("mono")>=0)o=l*r.length;else for(var h=0;h<r.length;h++){var d=Iq[r[h]];o+=d==null?l:d*l}return{width:o}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},iL=vf(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),aL=vf(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),pm=Object.prototype.toString,xy=Array.prototype,Pq=xy.forEach,Mq=xy.filter,L2=xy.slice,Dq=xy.map,_I=function(){}.constructor,Zv=_I?_I.prototype:null,O2="__proto__",kq=2311;function oL(){return kq++}function sL(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function Ur(e){if(e==null||typeof e!="object")return e;var t=e,r=pm.call(e);if(r==="[object Array]"){if(!vp(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=Ur(e[n])}}else if(aL[r]){if(!vp(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!iL[r]&&!vp(e)&&!I_(e)){t={};for(var l in e)e.hasOwnProperty(l)&&l!==O2&&(t[l]=Ur(e[l]))}return t}function En(e,t,r){if(!ar(t)||!ar(e))return r?Ur(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==O2){var i=e[n],a=t[n];ar(a)&&ar(i)&&!Gt(a)&&!Gt(i)&&!I_(a)&&!I_(i)&&!yI(a)&&!yI(i)&&!vp(a)&&!vp(i)?En(i,a,r):(r||!(n in e))&&(e[n]=Ur(t[n]))}return e}function Lq(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=En(r,e[n],t);return r}function Ct(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==O2&&(e[r]=t[r]);return e}function yn(e,t,r){for(var n=Gr(t),i=0;i<n.length;i++){var a=n[i];(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}return e}mf.createCanvas;function gn(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function Oq(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function ns(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var a=n[i];a!=="constructor"&&(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}else yn(e,t,r)}function pa(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function Ce(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===Pq)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(r,e[a],a,e)}function nr(e,t,r){if(!e)return[];if(!t)return z2(e);if(e.map&&e.map===Dq)return e.map(t,r);for(var n=[],i=0,a=e.length;i<a;i++)n.push(t.call(r,e[i],i,e));return n}function vf(e,t,r,n){if(!!(e&&t)){for(var i=0,a=e.length;i<a;i++)r=t.call(n,r,e[i],i,e);return r}}function Wi(e,t,r){if(!e)return[];if(!t)return z2(e);if(e.filter&&e.filter===Mq)return e.filter(t,r);for(var n=[],i=0,a=e.length;i<a;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function Gr(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function Rq(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(L2.call(arguments)))}}var Rn=Zv&&Er(Zv.bind)?Zv.call.bind(Zv.bind):Rq;function to(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(L2.call(arguments)))}}function Gt(e){return Array.isArray?Array.isArray(e):pm.call(e)==="[object Array]"}function Er(e){return typeof e=="function"}function Jt(e){return typeof e=="string"}function Bb(e){return pm.call(e)==="[object String]"}function Mn(e){return typeof e=="number"}function ar(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function yI(e){return!!iL[pm.call(e)]}function Pa(e){return!!aL[pm.call(e)]}function I_(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function R2(e){return e.colorStops!=null}function P_(e){return e!==e}function Jh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function Lr(e,t){return e!=null?e:t}function Ng(e,t,r){return e!=null?e:t!=null?t:r}function z2(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return L2.apply(e,t)}function lL(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Ao(e,t){if(!e)throw new Error(t)}function Ko(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var uL="__ec_primitive__";function Fb(e){e[uL]=!0}function vp(e){return e[uL]}var zq=function(){function e(t){this.data={};var r=Gt(t);this.data={};var n=this;t instanceof e?t.each(i):t&&Ce(t,i);function i(a,l){r?n.set(a,l):n.set(l,a)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return Gr(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function Ir(e){return new zq(e)}function Nb(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function by(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&Ct(r,t),r}function Qh(e,t){return e.hasOwnProperty(t)}function ha(){}var Vg=180/Math.PI;function gf(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function Bq(e){return[e[0],e[1]]}function xI(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function cL(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function Fq(e){return Math.sqrt(Nq(e))}function Nq(e){return e[0]*e[0]+e[1]*e[1]}function k1(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function B2(e,t){var r=Fq(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function Vb(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Ph=Vb;function Vq(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Nh=Vq;function ro(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function Mh(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function Dh(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var lh=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),Uq=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new lh(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,a=n-this._x,l=i-this._y;this._x=n,this._y=i,r.drift(a,l,t),this.handler.dispatchToElement(new lh(r,t),"drag",t.event);var o=this.handler.findHover(n,i,r).target,h=this._dropTarget;this._dropTarget=o,r!==o&&(h&&o!==h&&this.handler.dispatchToElement(new lh(h,t),"dragleave",t.event),o&&o!==h&&this.handler.dispatchToElement(new lh(o,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new lh(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new lh(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const $q=Uq;var jq=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var l=this._$eventProcessor;r!=null&&l&&l.normalizeQuery&&(r=l.normalizeQuery(r)),a[t]||(a[t]=[]);for(var o=0;o<a[t].length;o++)if(a[t][o].h===n)return this;var h={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},d=a[t].length-1,m=a[t][d];return m&&m.callAtLast?a[t].splice(d,0,h):a[t].push(h),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],a=0,l=n[t].length;a<l;a++)n[t][a].h!==r&&i.push(n[t][a]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var l=r.length,o=i.length,h=0;h<o;h++){var d=i[h];if(!(a&&a.filter&&d.query!=null&&!a.filter(t,d.query)))switch(l){case 0:d.h.call(d.ctx);break;case 1:d.h.call(d.ctx,r[0]);break;case 2:d.h.call(d.ctx,r[0],r[1]);break;default:d.h.apply(d.ctx,r);break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],a=this._$eventProcessor;if(i)for(var l=r.length,o=r[l-1],h=i.length,d=0;d<h;d++){var m=i[d];if(!(a&&a.filter&&m.query!=null&&!a.filter(t,m.query)))switch(l){case 0:m.h.call(o);break;case 1:m.h.call(o,r[0]);break;case 2:m.h.call(o,r[0],r[1]);break;default:m.h.apply(o,r.slice(1,l-1));break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e}();const $s=jq;var Hq=Math.log(2);function Ub(e,t,r,n,i,a){var l=n+"-"+i,o=e.length;if(a.hasOwnProperty(l))return a[l];if(t===1){var h=Math.round(Math.log((1<<o)-1&~i)/Hq);return e[r][h]}for(var d=n|1<<r,m=r+1;n&1<<m;)m++;for(var g=0,_=0,x=0;_<o;_++){var E=1<<_;E&i||(g+=(x%2?-1:1)*e[r][_]*Ub(e,t-1,m,d,i|E,a),x++)}return a[l]=g,g}function bI(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=Ub(r,8,0,0,0,n);if(i!==0){for(var a=[],l=0;l<8;l++)for(var o=0;o<8;o++)a[o]==null&&(a[o]=0),a[o]+=((l+o)%2?-1:1)*Ub(r,7,l===0?1:0,1<<l,1<<o,n)/i*t[l];return function(h,d,m){var g=d*a[6]+m*a[7]+1;h[0]=(d*a[0]+m*a[1]+a[2])/g,h[1]=(d*a[3]+m*a[4]+a[5])/g}}}var wI="___zrEVENTSAVED",L1=[];function Gq(e,t,r,n,i){return $b(L1,t,n,i,!0)&&$b(e,r,L1[0],L1[1])}function $b(e,t,r,n,i){if(t.getBoundingClientRect&&Or.domSupported&&!hL(t)){var a=t[wI]||(t[wI]={}),l=qq(t,a),o=Wq(l,a,i);if(o)return o(e,r,n),!0}return!1}function qq(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],a=0;a<4;a++){var l=document.createElement("div"),o=l.style,h=a%2,d=(a>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[h]+":0",i[d]+":0",n[1-h]+":auto",i[1-d]+":auto",""].join("!important;"),e.appendChild(l),r.push(l)}return r}function Wq(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],a=t.srcCoords,l=[],o=[],h=!0,d=0;d<4;d++){var m=e[d].getBoundingClientRect(),g=2*d,_=m.left,x=m.top;l.push(_,x),h=h&&a&&_===a[g]&&x===a[g+1],o.push(e[d].offsetLeft,e[d].offsetTop)}return h&&i?i:(t.srcCoords=l,t[n]=r?bI(o,l):bI(l,o))}function hL(e){return e.nodeName.toUpperCase()==="CANVAS"}var Zq=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,O1=[],Xq=Or.browser.firefox&&+Or.browser.version.split(".")[0]<39;function jb(e,t,r,n){return r=r||{},n?SI(e,t,r):Xq&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):SI(e,t,r),r}function SI(e,t,r){if(Or.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(hL(e)){var a=e.getBoundingClientRect();r.zrX=n-a.left,r.zrY=i-a.top;return}else if($b(O1,e,n,i)){r.zrX=O1[0],r.zrY=O1[1];return}}r.zrX=r.zrY=0}function F2(e){return e||window.event}function Ha(e,t,r){if(t=F2(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var l=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];l&&jb(e,l,t,r)}else{jb(e,t,t,r);var a=Yq(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var o=t.button;return t.which==null&&o!==void 0&&Zq.test(t.type)&&(t.which=o&1?1:o&2?3:o&4?2:0),t}function Yq(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),a=n>0?-1:n<0?1:r>0?-1:1;return 3*i*a}function Kq(e,t,r,n){e.addEventListener(t,r,n)}function Jq(e,t,r,n){e.removeEventListener(t,r,n)}var fL=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0},Qq=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var a={points:[],touches:[],target:r,event:t},l=0,o=i.length;l<o;l++){var h=i[l],d=jb(n,h,{});a.points.push([d.zrX,d.zrY]),a.touches.push(h)}this._track.push(a)}},e.prototype._recognize=function(t){for(var r in R1)if(R1.hasOwnProperty(r)){var n=R1[r](this._track,t);if(n)return n}},e}();function TI(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function eW(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var R1={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var a=TI(n)/TI(i);!isFinite(a)&&(a=1),t.pinchScale=a;var l=eW(n);return t.pinchX=l[0],t.pinchY=l[1],{type:"pinch",target:e[0].target,event:t}}}}},dL="silent";function tW(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:rW}}function rW(){fL(this.event)}var nW=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}($s),Ad=function(){function e(t,r){this.x=t,this.y=r}return e}(),iW=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],pL=function(e){Vt(t,e);function t(r,n,i,a){var l=e.call(this)||this;return l._hovered=new Ad(0,0),l.storage=r,l.painter=n,l.painterRoot=a,i=i||new nW,l.proxy=null,l.setHandlerProxy(i),l._draggingMgr=new $q(l),l}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(Ce(iW,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,a=mL(this,n,i),l=this._hovered,o=l.target;o&&!o.__zr&&(l=this.findHover(l.x,l.y),o=l.target);var h=this._hovered=a?new Ad(n,i):this.findHover(n,i),d=h.target,m=this.proxy;m.setCursor&&m.setCursor(d?d.cursor:"default"),o&&d!==o&&this.dispatchToElement(l,"mouseout",r),this.dispatchToElement(h,"mousemove",r),d&&d!==o&&this.dispatchToElement(h,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new Ad(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var a=r.target;if(!(a&&a.silent)){for(var l="on"+n,o=tW(n,r,i);a&&(a[l]&&(o.cancelBubble=!!a[l].call(a,o)),a.trigger(n,o),a=a.__hostTarget?a.__hostTarget:a.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(n,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(h){typeof h[l]=="function"&&h[l].call(h,o),h.trigger&&h.trigger(n,o)}))}},t.prototype.findHover=function(r,n,i){for(var a=this.storage.getDisplayList(),l=new Ad(r,n),o=a.length-1;o>=0;o--){var h=void 0;if(a[o]!==i&&!a[o].ignore&&(h=aW(a[o],r,n))&&(!l.topTarget&&(l.topTarget=a[o]),h!==dL)){l.target=a[o];break}}return l},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new Qq);var i=this._gestureMgr;n==="start"&&i.clear();var a=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),a){var l=a.type;r.gestureEvent=l;var o=new Ad;o.target=a.target,this.dispatchToElement(o,l,a.event)}},t}($s);Ce(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){pL.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=mL(this,r,n),a,l;if((e!=="mouseup"||!i)&&(a=this.findHover(r,n),l=a.target),e==="mousedown")this._downEl=l,this._downPoint=[t.zrX,t.zrY],this._upEl=l;else if(e==="mouseup")this._upEl=l;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||Ph(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,e,t)}});function aW(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,a=!1;n;){if(n.ignoreClip&&(a=!0),!a){var l=n.getClipPath();if(l&&!l.contain(t,r))return!1;n.silent&&(i=!0)}var o=n.__hostTarget;n=o||n.parent}return i?dL:!0}return!1}function mL(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const oW=pL;var vL=32,Id=7;function sW(e){for(var t=0;e>=vL;)t|=e&1,e>>=1;return e+t}function EI(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;lW(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function lW(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function CI(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var a=e[n],l=t,o=n,h;l<o;)h=l+o>>>1,i(a,e[h])<0?o=h:l=h+1;var d=n-l;switch(d){case 3:e[l+3]=e[l+2];case 2:e[l+2]=e[l+1];case 1:e[l+1]=e[l];break;default:for(;d>0;)e[l+d]=e[l+d-1],d--}e[l]=a}}function z1(e,t,r,n,i,a){var l=0,o=0,h=1;if(a(e,t[r+i])>0){for(o=n-i;h<o&&a(e,t[r+i+h])>0;)l=h,h=(h<<1)+1,h<=0&&(h=o);h>o&&(h=o),l+=i,h+=i}else{for(o=i+1;h<o&&a(e,t[r+i-h])<=0;)l=h,h=(h<<1)+1,h<=0&&(h=o);h>o&&(h=o);var d=l;l=i-h,h=i-d}for(l++;l<h;){var m=l+(h-l>>>1);a(e,t[r+m])>0?l=m+1:h=m}return h}function B1(e,t,r,n,i,a){var l=0,o=0,h=1;if(a(e,t[r+i])<0){for(o=i+1;h<o&&a(e,t[r+i-h])<0;)l=h,h=(h<<1)+1,h<=0&&(h=o);h>o&&(h=o);var d=l;l=i-h,h=i-d}else{for(o=n-i;h<o&&a(e,t[r+i+h])>=0;)l=h,h=(h<<1)+1,h<=0&&(h=o);h>o&&(h=o),l+=i,h+=i}for(l++;l<h;){var m=l+(h-l>>>1);a(e,t[r+m])<0?h=m:l=m+1}return h}function uW(e,t){var r=Id,n,i,a=0;e.length;var l=[];n=[],i=[];function o(x,E){n[a]=x,i[a]=E,a+=1}function h(){for(;a>1;){var x=a-2;if(x>=1&&i[x-1]<=i[x]+i[x+1]||x>=2&&i[x-2]<=i[x]+i[x-1])i[x-1]<i[x+1]&&x--;else if(i[x]>i[x+1])break;m(x)}}function d(){for(;a>1;){var x=a-2;x>0&&i[x-1]<i[x+1]&&x--,m(x)}}function m(x){var E=n[x],M=i[x],P=n[x+1],I=i[x+1];i[x]=M+I,x===a-3&&(n[x+1]=n[x+2],i[x+1]=i[x+2]),a--;var D=B1(e[P],e,E,M,0,t);E+=D,M-=D,M!==0&&(I=z1(e[E+M-1],e,P,I,I-1,t),I!==0&&(M<=I?g(E,M,P,I):_(E,M,P,I)))}function g(x,E,M,P){var I=0;for(I=0;I<E;I++)l[I]=e[x+I];var D=0,O=M,F=x;if(e[F++]=e[O++],--P===0){for(I=0;I<E;I++)e[F+I]=l[D+I];return}if(E===1){for(I=0;I<P;I++)e[F+I]=e[O+I];e[F+P]=l[D];return}for(var $=r,q,K,Z;;){q=0,K=0,Z=!1;do if(t(e[O],l[D])<0){if(e[F++]=e[O++],K++,q=0,--P===0){Z=!0;break}}else if(e[F++]=l[D++],q++,K=0,--E===1){Z=!0;break}while((q|K)<$);if(Z)break;do{if(q=B1(e[O],l,D,E,0,t),q!==0){for(I=0;I<q;I++)e[F+I]=l[D+I];if(F+=q,D+=q,E-=q,E<=1){Z=!0;break}}if(e[F++]=e[O++],--P===0){Z=!0;break}if(K=z1(l[D],e,O,P,0,t),K!==0){for(I=0;I<K;I++)e[F+I]=e[O+I];if(F+=K,O+=K,P-=K,P===0){Z=!0;break}}if(e[F++]=l[D++],--E===1){Z=!0;break}$--}while(q>=Id||K>=Id);if(Z)break;$<0&&($=0),$+=2}if(r=$,r<1&&(r=1),E===1){for(I=0;I<P;I++)e[F+I]=e[O+I];e[F+P]=l[D]}else{if(E===0)throw new Error;for(I=0;I<E;I++)e[F+I]=l[D+I]}}function _(x,E,M,P){var I=0;for(I=0;I<P;I++)l[I]=e[M+I];var D=x+E-1,O=P-1,F=M+P-1,$=0,q=0;if(e[F--]=e[D--],--E===0){for($=F-(P-1),I=0;I<P;I++)e[$+I]=l[I];return}if(P===1){for(F-=E,D-=E,q=F+1,$=D+1,I=E-1;I>=0;I--)e[q+I]=e[$+I];e[F]=l[O];return}for(var K=r;;){var Z=0,re=0,ie=!1;do if(t(l[O],e[D])<0){if(e[F--]=e[D--],Z++,re=0,--E===0){ie=!0;break}}else if(e[F--]=l[O--],re++,Z=0,--P===1){ie=!0;break}while((Z|re)<K);if(ie)break;do{if(Z=E-B1(l[O],e,x,E,E-1,t),Z!==0){for(F-=Z,D-=Z,E-=Z,q=F+1,$=D+1,I=Z-1;I>=0;I--)e[q+I]=e[$+I];if(E===0){ie=!0;break}}if(e[F--]=l[O--],--P===1){ie=!0;break}if(re=P-z1(e[D],l,0,P,P-1,t),re!==0){for(F-=re,O-=re,P-=re,q=F+1,$=O+1,I=0;I<re;I++)e[q+I]=l[$+I];if(P<=1){ie=!0;break}}if(e[F--]=e[D--],--E===0){ie=!0;break}K--}while(Z>=Id||re>=Id);if(ie)break;K<0&&(K=0),K+=2}if(r=K,r<1&&(r=1),P===1){for(F-=E,D-=E,q=F+1,$=D+1,I=E-1;I>=0;I--)e[q+I]=e[$+I];e[F]=l[O]}else{if(P===0)throw new Error;for($=F-(P-1),I=0;I<P;I++)e[$+I]=l[I]}}return{mergeRuns:h,forceMergeRuns:d,pushRun:o}}function Ug(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var a=0;if(i<vL){a=EI(e,r,n,t),CI(e,r,n,r+a,t);return}var l=uW(e,t),o=sW(i);do{if(a=EI(e,r,n,t),a<o){var h=i;h>o&&(h=o),CI(e,r,r+h,r+a,t),a=h}l.pushRun(r,a),l.mergeRuns(),i-=a,r+=a}while(i!==0);l.forceMergeRuns()}}var Zo=1,Kd=2,Th=4,AI=!1;function F1(){AI||(AI=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function II(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var cW=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=II}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,a=r.length;i<a;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,Ug(n,II)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var a=i,l=t;a;)a.parent=l,a.updateTransform(),r.push(a),l=a,a=a.getClipPath()}if(t.childrenRef){for(var o=t.childrenRef(),h=0;h<o.length;h++){var d=o[h];t.__dirty&&(d.__dirty|=Zo),this._updateAndAddDisplayable(d,r,n)}t.__dirty=0}else{var m=t;r&&r.length?m.__clipPaths=r:m.__clipPaths&&m.__clipPaths.length>0&&(m.__clipPaths=[]),isNaN(m.z)&&(F1(),m.z=0),isNaN(m.z2)&&(F1(),m.z2=0),isNaN(m.zlevel)&&(F1(),m.zlevel=0),this._displayList[this._displayListLen++]=m}var g=t.getDecalElement&&t.getDecalElement();g&&this._updateAndAddDisplayable(g,r,n);var _=t.getTextGuideLine();_&&this._updateAndAddDisplayable(_,r,n);var x=t.getTextContent();x&&this._updateAndAddDisplayable(x,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=gn(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const hW=cW;var gL;gL=Or.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const PI=gL;var $g={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-$g.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?$g.bounceIn(e*2)*.5:$g.bounceOut(e*2-1)*.5+.5}};const _L=$g;var Xv=Math.pow,Fl=Math.sqrt,M_=1e-8,yL=1e-4,MI=Fl(3),Yv=1/3,Xo=gf(),Za=gf(),Vh=gf();function Dl(e){return e>-M_&&e<M_}function xL(e){return e>M_||e<-M_}function _i(e,t,r,n,i){var a=1-i;return a*a*(a*e+3*i*t)+i*i*(i*n+3*a*r)}function DI(e,t,r,n,i){var a=1-i;return 3*(((t-e)*a+2*(r-t)*i)*a+(n-r)*i*i)}function bL(e,t,r,n,i,a){var l=n+3*(t-r)-e,o=3*(r-t*2+e),h=3*(t-e),d=e-i,m=o*o-3*l*h,g=o*h-9*l*d,_=h*h-3*o*d,x=0;if(Dl(m)&&Dl(g))if(Dl(o))a[0]=0;else{var E=-h/o;E>=0&&E<=1&&(a[x++]=E)}else{var M=g*g-4*m*_;if(Dl(M)){var P=g/m,E=-o/l+P,I=-P/2;E>=0&&E<=1&&(a[x++]=E),I>=0&&I<=1&&(a[x++]=I)}else if(M>0){var D=Fl(M),O=m*o+1.5*l*(-g+D),F=m*o+1.5*l*(-g-D);O<0?O=-Xv(-O,Yv):O=Xv(O,Yv),F<0?F=-Xv(-F,Yv):F=Xv(F,Yv);var E=(-o-(O+F))/(3*l);E>=0&&E<=1&&(a[x++]=E)}else{var $=(2*m*o-3*l*g)/(2*Fl(m*m*m)),q=Math.acos($)/3,K=Fl(m),Z=Math.cos(q),E=(-o-2*K*Z)/(3*l),I=(-o+K*(Z+MI*Math.sin(q)))/(3*l),re=(-o+K*(Z-MI*Math.sin(q)))/(3*l);E>=0&&E<=1&&(a[x++]=E),I>=0&&I<=1&&(a[x++]=I),re>=0&&re<=1&&(a[x++]=re)}}return x}function wL(e,t,r,n,i){var a=6*r-12*t+6*e,l=9*t+3*n-3*e-9*r,o=3*t-3*e,h=0;if(Dl(l)){if(xL(a)){var d=-o/a;d>=0&&d<=1&&(i[h++]=d)}}else{var m=a*a-4*l*o;if(Dl(m))i[0]=-a/(2*l);else if(m>0){var g=Fl(m),d=(-a+g)/(2*l),_=(-a-g)/(2*l);d>=0&&d<=1&&(i[h++]=d),_>=0&&_<=1&&(i[h++]=_)}}return h}function D_(e,t,r,n,i,a){var l=(t-e)*i+e,o=(r-t)*i+t,h=(n-r)*i+r,d=(o-l)*i+l,m=(h-o)*i+o,g=(m-d)*i+d;a[0]=e,a[1]=l,a[2]=d,a[3]=g,a[4]=g,a[5]=m,a[6]=h,a[7]=n}function fW(e,t,r,n,i,a,l,o,h,d,m){var g,_=.005,x=1/0,E,M,P,I;Xo[0]=h,Xo[1]=d;for(var D=0;D<1;D+=.05)Za[0]=_i(e,r,i,l,D),Za[1]=_i(t,n,a,o,D),P=Nh(Xo,Za),P<x&&(g=D,x=P);x=1/0;for(var O=0;O<32&&!(_<yL);O++)E=g-_,M=g+_,Za[0]=_i(e,r,i,l,E),Za[1]=_i(t,n,a,o,E),P=Nh(Za,Xo),E>=0&&P<x?(g=E,x=P):(Vh[0]=_i(e,r,i,l,M),Vh[1]=_i(t,n,a,o,M),I=Nh(Vh,Xo),M<=1&&I<x?(g=M,x=I):_*=.5);return m&&(m[0]=_i(e,r,i,l,g),m[1]=_i(t,n,a,o,g)),Fl(x)}function dW(e,t,r,n,i,a,l,o,h){for(var d=e,m=t,g=0,_=1/h,x=1;x<=h;x++){var E=x*_,M=_i(e,r,i,l,E),P=_i(t,n,a,o,E),I=M-d,D=P-m;g+=Math.sqrt(I*I+D*D),d=M,m=P}return g}function yi(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function Hb(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function pW(e,t,r,n,i){var a=e-2*t+r,l=2*(t-e),o=e-n,h=0;if(Dl(a)){if(xL(l)){var d=-o/l;d>=0&&d<=1&&(i[h++]=d)}}else{var m=l*l-4*a*o;if(Dl(m)){var d=-l/(2*a);d>=0&&d<=1&&(i[h++]=d)}else if(m>0){var g=Fl(m),d=(-l+g)/(2*a),_=(-l-g)/(2*a);d>=0&&d<=1&&(i[h++]=d),_>=0&&_<=1&&(i[h++]=_)}}return h}function SL(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function k_(e,t,r,n,i){var a=(t-e)*n+e,l=(r-t)*n+t,o=(l-a)*n+a;i[0]=e,i[1]=a,i[2]=o,i[3]=o,i[4]=l,i[5]=r}function mW(e,t,r,n,i,a,l,o,h){var d,m=.005,g=1/0;Xo[0]=l,Xo[1]=o;for(var _=0;_<1;_+=.05){Za[0]=yi(e,r,i,_),Za[1]=yi(t,n,a,_);var x=Nh(Xo,Za);x<g&&(d=_,g=x)}g=1/0;for(var E=0;E<32&&!(m<yL);E++){var M=d-m,P=d+m;Za[0]=yi(e,r,i,M),Za[1]=yi(t,n,a,M);var x=Nh(Za,Xo);if(M>=0&&x<g)d=M,g=x;else{Vh[0]=yi(e,r,i,P),Vh[1]=yi(t,n,a,P);var I=Nh(Vh,Xo);P<=1&&I<g?(d=P,g=I):m*=.5}}return h&&(h[0]=yi(e,r,i,d),h[1]=yi(t,n,a,d)),Fl(g)}function vW(e,t,r,n,i,a,l){for(var o=e,h=t,d=0,m=1/l,g=1;g<=l;g++){var _=g*m,x=yi(e,r,i,_),E=yi(t,n,a,_),M=x-o,P=E-h;d+=Math.sqrt(M*M+P*P),o=x,h=E}return d}var gW=/cubic-bezier\(([0-9,\.e ]+)\)/;function N2(e){var t=e&&gW.exec(e);if(t){var r=t[1].split(","),n=+Ko(r[0]),i=+Ko(r[1]),a=+Ko(r[2]),l=+Ko(r[3]);if(isNaN(n+i+a+l))return;var o=[];return function(h){return h<=0?0:h>=1?1:bL(0,n,a,1,h,o)&&_i(0,i,l,1,o[0])}}}var _W=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||ha,this.ondestroy=t.ondestroy||ha,this.onrestart=t.onrestart||ha,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,a=i/n;a<0&&(a=0),a=Math.min(a,1);var l=this.easingFunc,o=l?l(a):a;if(this.onframe(o),a===1)if(this.loop){var h=i%n;this._startTime=t-h,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Er(t)?t:_L[t]||N2(t)},e}();const yW=_W;var TL=function(){function e(t){this.value=t}return e}(),xW=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new TL(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),bW=function(){function e(t){this._list=new xW,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,a=null;if(i[t]==null){var l=n.len(),o=this._lastRemovedEntry;if(l>=this._maxSize&&l>0){var h=n.head;n.remove(h),delete i[h.key],a=h.value,this._lastRemovedEntry=h}o?o.value=r:o=new TL(r),o.key=t,n.insertEntry(o),i[t]=o}return a},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const mm=bW;var kI={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function gp(e){return e=Math.round(e),e<0?0:e>255?255:e}function LI(e){return e<0?0:e>1?1:e}function N1(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?gp(parseFloat(t)/100*255):gp(parseInt(t,10))}function L_(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?LI(parseFloat(t)/100):LI(parseFloat(t))}function V1(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function $a(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function Gb(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var EL=new mm(20),Kv=null;function uh(e,t){Kv&&Gb(Kv,t),Kv=EL.put(e,Kv||t.slice())}function cc(e,t){if(!!e){t=t||[];var r=EL.get(e);if(r)return Gb(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in kI)return Gb(t,kI[n]),uh(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var a=parseInt(n.slice(1,4),16);if(!(a>=0&&a<=4095)){$a(t,0,0,0,1);return}return $a(t,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),uh(e,t),t}else if(i===7||i===9){var a=parseInt(n.slice(1,7),16);if(!(a>=0&&a<=16777215)){$a(t,0,0,0,1);return}return $a(t,(a&16711680)>>16,(a&65280)>>8,a&255,i===9?parseInt(n.slice(7),16)/255:1),uh(e,t),t}return}var l=n.indexOf("("),o=n.indexOf(")");if(l!==-1&&o+1===i){var h=n.substr(0,l),d=n.substr(l+1,o-(l+1)).split(","),m=1;switch(h){case"rgba":if(d.length!==4)return d.length===3?$a(t,+d[0],+d[1],+d[2],1):$a(t,0,0,0,1);m=L_(d.pop());case"rgb":if(d.length!==3){$a(t,0,0,0,1);return}return $a(t,N1(d[0]),N1(d[1]),N1(d[2]),m),uh(e,t),t;case"hsla":if(d.length!==4){$a(t,0,0,0,1);return}return d[3]=L_(d[3]),OI(d,t),uh(e,t),t;case"hsl":if(d.length!==3){$a(t,0,0,0,1);return}return OI(d,t),uh(e,t),t;default:return}}$a(t,0,0,0,1)}}function OI(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=L_(e[1]),i=L_(e[2]),a=i<=.5?i*(n+1):i+n-i*n,l=i*2-a;return t=t||[],$a(t,gp(V1(l,a,r+1/3)*255),gp(V1(l,a,r)*255),gp(V1(l,a,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function RI(e,t){var r=cc(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return CL(r,r.length===4?"rgba":"rgb")}}function CL(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function O_(e,t){var r=cc(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var R_=Math.round;function ef(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var r=cc(e);r&&(e="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:e,opacity:t==null?1:t}}var zI=1e-4;function kl(e){return e<zI&&e>-zI}function Jv(e){return R_(e*1e3)/1e3}function qb(e){return R_(e*1e4)/1e4}function wW(e){return"matrix("+Jv(e[0])+","+Jv(e[1])+","+Jv(e[2])+","+Jv(e[3])+","+qb(e[4])+","+qb(e[5])+")"}var SW={left:"start",right:"end",center:"middle",middle:"middle"};function TW(e,t,r){return r==="top"?e+=t/2:r==="bottom"&&(e-=t/2),e}function EW(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function CW(e){var t=e.style,r=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function AL(e){return e&&!!e.image}function AW(e){return e&&!!e.svgElement}function IW(e){return AL(e)||AW(e)}function IL(e){return e.type==="linear"}function PL(e){return e.type==="radial"}function PW(e){return e&&(e.type==="linear"||e.type==="radial")}function wy(e){return"url(#"+e+")"}function ML(e){var t=e.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function DL(e){var t=e.x||0,r=e.y||0,n=(e.rotation||0)*Vg,i=Lr(e.scaleX,1),a=Lr(e.scaleY,1),l=e.skewX||0,o=e.skewY||0,h=[];return(t||r)&&h.push("translate("+t+"px,"+r+"px)"),n&&h.push("rotate("+n+")"),(i!==1||a!==1)&&h.push("scale("+i+","+a+")"),(l||o)&&h.push("skew("+R_(l*Vg)+"deg, "+R_(o*Vg)+"deg)"),h.join(" ")}var MW=function(){return Or.hasGlobalWindow&&Er(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}(),Wb=Array.prototype.slice;function Cs(e,t,r){return(t-e)*r+e}function U1(e,t,r,n){for(var i=t.length,a=0;a<i;a++)e[a]=Cs(t[a],r[a],n);return e}function DW(e,t,r,n){for(var i=t.length,a=i&&t[0].length,l=0;l<i;l++){e[l]||(e[l]=[]);for(var o=0;o<a;o++)e[l][o]=Cs(t[l][o],r[l][o],n)}return e}function Qv(e,t,r,n){for(var i=t.length,a=0;a<i;a++)e[a]=t[a]+r[a]*n;return e}function BI(e,t,r,n){for(var i=t.length,a=i&&t[0].length,l=0;l<i;l++){e[l]||(e[l]=[]);for(var o=0;o<a;o++)e[l][o]=t[l][o]+r[l][o]*n}return e}function kW(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,a=Math.min(r,n),l=i[a-1]||{color:[0,0,0,0],offset:0},o=a;o<Math.max(r,n);o++)i.push({offset:l.offset,color:l.color.slice()})}function LW(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var a=n.length,l=i.length;if(a!==l){var o=a>l;if(o)n.length=l;else for(var h=a;h<l;h++)n.push(r===1?i[h]:Wb.call(i[h]))}for(var d=n[0]&&n[0].length,h=0;h<n.length;h++)if(r===1)isNaN(n[h])&&(n[h]=i[h]);else for(var m=0;m<d;m++)isNaN(n[h][m])&&(n[h][m]=i[h][m])}}function jg(e){if(pa(e)){var t=e.length;if(pa(e[0])){for(var r=[],n=0;n<t;n++)r.push(Wb.call(e[n]));return r}return Wb.call(e)}return e}function Hg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function OW(e){return pa(e&&e[0])?2:1}var eg=0,Gg=1,kL=2,Jd=3,Zb=4,Xb=5,FI=6;function NI(e){return e===Zb||e===Xb}function tg(e){return e===Gg||e===kL}var Pd=[0,0,0,0],RW=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,a=i.length,l=!1,o=FI,h=r;if(pa(r)){var d=OW(r);o=d,(d===1&&!Mn(r[0])||d===2&&!Mn(r[0][0]))&&(l=!0)}else if(Mn(r)&&!P_(r))o=eg;else if(Jt(r))if(!isNaN(+r))o=eg;else{var m=cc(r);m&&(h=m,o=Jd)}else if(R2(r)){var g=Ct({},h);g.colorStops=nr(r.colorStops,function(x){return{offset:x.offset,color:cc(x.color)}}),IL(r)?o=Zb:PL(r)&&(o=Xb),h=g}a===0?this.valType=o:(o!==this.valType||o===FI)&&(l=!0),this.discrete=this.discrete||l;var _={time:t,value:h,rawValue:r,percent:0};return n&&(_.easing=n,_.easingFunc=Er(n)?n:_L[n]||N2(n)),i.push(_),_},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(M,P){return M.time-P.time});for(var i=this.valType,a=n.length,l=n[a-1],o=this.discrete,h=tg(i),d=NI(i),m=0;m<a;m++){var g=n[m],_=g.value,x=l.value;g.percent=g.time/t,o||(h&&m!==a-1?LW(_,x,i):d&&kW(_.colorStops,x.colorStops))}if(!o&&i!==Xb&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var E=n[0].value,m=0;m<a;m++)i===eg?n[m].additiveValue=n[m].value-E:i===Jd?n[m].additiveValue=Qv([],n[m].value,E,-1):tg(i)&&(n[m].additiveValue=i===Gg?Qv([],n[m].value,E,-1):BI([],n[m].value,E,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",a=this.valType,l=this.keyframes,o=l.length,h=this.propName,d=a===Jd,m,g=this._lastFr,_=Math.min,x,E;if(o===1)x=E=l[0];else{if(r<0)m=0;else if(r<this._lastFrP){var M=_(g+1,o-1);for(m=M;m>=0&&!(l[m].percent<=r);m--);m=_(m,o-2)}else{for(m=g;m<o&&!(l[m].percent>r);m++);m=_(m-1,o-2)}E=l[m+1],x=l[m]}if(!!(x&&E)){this._lastFr=m,this._lastFrP=r;var P=E.percent-x.percent,I=P===0?1:_((r-x.percent)/P,1);E.easingFunc&&(I=E.easingFunc(I));var D=n?this._additiveValue:d?Pd:t[h];if((tg(a)||d)&&!D&&(D=this._additiveValue=[]),this.discrete)t[h]=I<1?x.rawValue:E.rawValue;else if(tg(a))a===Gg?U1(D,x[i],E[i],I):DW(D,x[i],E[i],I);else if(NI(a)){var O=x[i],F=E[i],$=a===Zb;t[h]={type:$?"linear":"radial",x:Cs(O.x,F.x,I),y:Cs(O.y,F.y,I),colorStops:nr(O.colorStops,function(K,Z){var re=F.colorStops[Z];return{offset:Cs(K.offset,re.offset,I),color:Hg(U1([],K.color,re.color,I))}}),global:F.global},$?(t[h].x2=Cs(O.x2,F.x2,I),t[h].y2=Cs(O.y2,F.y2,I)):t[h].r=Cs(O.r,F.r,I)}else if(d)U1(D,x[i],E[i],I),n||(t[h]=Hg(D));else{var q=Cs(x[i],E[i],I);n?this._additiveValue=q:t[h]=q}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===eg?t[n]=t[n]+i:r===Jd?(cc(t[n],Pd),Qv(Pd,Pd,i,1),t[n]=Hg(Pd)):r===Gg?Qv(t[n],t[n],i,1):r===kL&&BI(t[n],t[n],i,1)},e}(),zW=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){sL("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,Gr(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var a=this._tracks,l=0;l<n.length;l++){var o=n[l],h=a[o];if(!h){h=a[o]=new RW(o);var d=void 0,m=this._getAdditiveTrack(o);if(m){var g=m.keyframes,_=g[g.length-1];d=_&&_.value,m.valType===Jd&&d&&(d=Hg(d))}else d=this._target[o];if(d==null)continue;t>0&&h.addKeyframe(0,jg(d),i),this._trackKeys.push(o)}h.addKeyframe(t,jg(r[o]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var a=n[i].getTrack(t);a&&(r=a)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var l=this._trackKeys[a],o=this._tracks[l],h=this._getAdditiveTrack(l),d=o.keyframes,m=d.length;if(o.prepare(i,h),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var g=d[m-1];g&&(r._target[o.propName]=g.rawValue),o.setFinished()}else n.push(o)}if(n.length||this._force){var _=new yW({life:i,loop:this._loop,delay:this._delay||0,onframe:function(x){r._started=2;var E=r._additiveAnimators;if(E){for(var M=!1,P=0;P<E.length;P++)if(E[P]._clip){M=!0;break}M||(r._additiveAnimators=null)}for(var P=0;P<n.length;P++)n[P].step(r._target,x);var I=r._onframeCbs;if(I)for(var P=0;P<I.length;P++)I[P](r._target,x)},ondestroy:function(){r._doneCallback()}});this._clip=_,this.animation&&this.animation.addClip(_),t&&_.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return nr(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,a=0;a<t.length;a++){var l=n[t[a]];l&&!l.isFinished()&&(r?l.step(this._target,1):this._started===1&&l.step(this._target,0),l.setFinished())}for(var o=!0,a=0;a<i.length;a++)if(!n[i[a]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var a=r[i],l=this._tracks[a];if(!(!l||l.isFinished())){var o=l.keyframes,h=o[n?0:o.length-1];h&&(t[a]=jg(h.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||Gr(t);for(var n=0;n<r.length;n++){var i=r[n],a=this._tracks[i];if(!!a){var l=a.keyframes;if(l.length>1){var o=l.pop();a.addKeyframe(o.time,t[i]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},e}();const V2=zW;function kh(){return new Date().getTime()}var BW=function(e){Vt(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=kh()-this._pausedTime,i=n-this._time,a=this._head;a;){var l=a.next,o=a.step(n,i);o&&(a.ondestroy(),this.removeClip(a)),a=l}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(PI(n),!r._paused&&r.update())}PI(n)},t.prototype.start=function(){this._running||(this._time=kh(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=kh(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=kh()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new V2(r,n.loop);return this.addAnimator(i),i},t}($s);const FW=BW;var NW=300,$1=Or.domSupported,j1=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=nr(e,function(i){var a=i.replace("mouse","pointer");return r.hasOwnProperty(a)?a:i});return{mouse:e,touch:t,pointer:n}}(),VI={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},UI=!1;function Yb(e){var t=e.pointerType;return t==="pen"||t==="touch"}function VW(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function H1(e){e&&(e.zrByTouch=!0)}function UW(e,t){return Ha(e.dom,new $W(e,t),!0)}function LL(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var $W=function(){function e(t,r){this.stopPropagation=ha,this.stopImmediatePropagation=ha,this.preventDefault=ha,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),_o={mousedown:function(e){e=Ha(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Ha(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Ha(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Ha(this.dom,e);var t=e.toElement||e.relatedTarget;LL(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){UI=!0,e=Ha(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){UI||(e=Ha(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Ha(this.dom,e),H1(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),_o.mousemove.call(this,e),_o.mousedown.call(this,e)},touchmove:function(e){e=Ha(this.dom,e),H1(e),this.handler.processGesture(e,"change"),_o.mousemove.call(this,e)},touchend:function(e){e=Ha(this.dom,e),H1(e),this.handler.processGesture(e,"end"),_o.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<NW&&_o.click.call(this,e)},pointerdown:function(e){_o.mousedown.call(this,e)},pointermove:function(e){Yb(e)||_o.mousemove.call(this,e)},pointerup:function(e){_o.mouseup.call(this,e)},pointerout:function(e){Yb(e)||_o.mouseout.call(this,e)}};Ce(["click","dblclick","contextmenu"],function(e){_o[e]=function(t){t=Ha(this.dom,t),this.trigger(e,t)}});var Kb={pointermove:function(e){Yb(e)||Kb.mousemove.call(this,e)},pointerup:function(e){Kb.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function jW(e,t){var r=t.domHandlers;Or.pointerEventsSupported?Ce(j1.pointer,function(n){qg(t,n,function(i){r[n].call(e,i)})}):(Or.touchEventsSupported&&Ce(j1.touch,function(n){qg(t,n,function(i){r[n].call(e,i),VW(t)})}),Ce(j1.mouse,function(n){qg(t,n,function(i){i=F2(i),t.touching||r[n].call(e,i)})}))}function HW(e,t){Or.pointerEventsSupported?Ce(VI.pointer,r):Or.touchEventsSupported||Ce(VI.mouse,r);function r(n){function i(a){a=F2(a),LL(e,a.target)||(a=UW(e,a),t.domHandlers[n].call(e,a))}qg(t,n,i,{capture:!0})}}function qg(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,Kq(e.domTarget,t,r,n)}function G1(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&Jq(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var $I=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),GW=function(e){Vt(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new $I(r,_o),$1&&(i._globalHandlerScope=new $I(document,Kb)),jW(i,i._localHandlerScope),i}return t.prototype.dispose=function(){G1(this._localHandlerScope),$1&&G1(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,$1&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?HW(this,n):G1(n)}},t}($s);const qW=GW;var OL=1;Or.hasGlobalWindow&&(OL=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var jI=OL,Jb=.4,Qb="#333",ew="#ccc",WW="#eee";function Up(){return[1,0,0,1,0,0]}function U2(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function ZW(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Uh(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],a=t[0]*r[2]+t[2]*r[3],l=t[1]*r[2]+t[3]*r[3],o=t[0]*r[4]+t[2]*r[5]+t[4],h=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=a,e[3]=l,e[4]=o,e[5]=h,e}function tw(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function $2(e,t,r){var n=t[0],i=t[2],a=t[4],l=t[1],o=t[3],h=t[5],d=Math.sin(r),m=Math.cos(r);return e[0]=n*m+l*d,e[1]=-n*d+l*m,e[2]=i*m+o*d,e[3]=-i*d+m*o,e[4]=m*a+d*h,e[5]=m*h-d*a,e}function XW(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function j2(e,t){var r=t[0],n=t[2],i=t[4],a=t[1],l=t[3],o=t[5],h=r*l-a*n;return h?(h=1/h,e[0]=l*h,e[1]=-a*h,e[2]=-n*h,e[3]=r*h,e[4]=(n*o-l*i)*h,e[5]=(a*i-r*o)*h,e):null}var HI=U2,GI=5e-5;function Au(e){return e>GI||e<-GI}var Iu=[],ch=[],q1=Up(),W1=Math.abs,H2=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Au(this.rotation)||Au(this.x)||Au(this.y)||Au(this.scaleX-1)||Au(this.scaleY-1)||Au(this.skewX)||Au(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&HI(n);return}n=n||Up(),r?this.getLocalTransform(n):HI(n),t&&(r?Uh(n,t,n):ZW(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Iu);var n=Iu[0]<0?-1:1,i=Iu[1]<0?-1:1,a=((Iu[0]-n)*r+n)/Iu[0]||0,l=((Iu[1]-i)*r+i)/Iu[1]||0;t[0]*=a,t[1]*=a,t[2]*=l,t[3]*=l}this.invTransform=this.invTransform||Up(),j2(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),a=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(a),r=Math.sqrt(r),this.skewX=a,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(Uh(ch,t.invTransform,r),r=ch);var n=this.originX,i=this.originY;(n||i)&&(q1[4]=n,q1[5]=i,Uh(ch,r,q1),ch[4]-=n,ch[5]-=i,r=ch),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&ro(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&ro(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&W1(t[0]-1)>1e-10&&W1(t[3]-1)>1e-10?Math.sqrt(W1(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){RL(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,a=t.scaleX,l=t.scaleY,o=t.anchorX,h=t.anchorY,d=t.rotation||0,m=t.x,g=t.y,_=t.skewX?Math.tan(t.skewX):0,x=t.skewY?Math.tan(-t.skewY):0;if(n||i||o||h){var E=n+o,M=i+h;r[4]=-E*a-_*M*l,r[5]=-M*l-x*E*a}else r[4]=r[5]=0;return r[0]=a,r[3]=l,r[1]=x*a,r[2]=_*l,d&&$2(r,r,d),r[4]+=n+m,r[5]+=i+g,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),$p=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function RL(e,t){for(var r=0;r<$p.length;r++){var n=$p[r];e[n]=t[n]}}var YW=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var a=1-i;t.x=a*r.x+i*n.x,t.y=a*r.y+i*n.y},e}();const pn=YW;var rg=Math.min,ng=Math.max,Pu=new pn,Mu=new pn,Du=new pn,ku=new pn,Md=new pn,Dd=new pn,KW=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=rg(t.x,this.x),n=rg(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=ng(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=ng(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,a=Up();return tw(a,a,[-r.x,-r.y]),XW(a,a,[n,i]),tw(a,a,[t.x,t.y]),a},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,a=n.x+n.width,l=n.y,o=n.y+n.height,h=t.x,d=t.x+t.width,m=t.y,g=t.y+t.height,_=!(a<h||d<i||o<m||g<l);if(r){var x=1/0,E=0,M=Math.abs(a-h),P=Math.abs(d-i),I=Math.abs(o-m),D=Math.abs(g-l),O=Math.min(M,P),F=Math.min(I,D);a<h||d<i?O>E&&(E=O,M<P?pn.set(Dd,-M,0):pn.set(Dd,P,0)):O<x&&(x=O,M<P?pn.set(Md,M,0):pn.set(Md,-P,0)),o<m||g<l?F>E&&(E=F,I<D?pn.set(Dd,0,-I):pn.set(Dd,0,D)):O<x&&(x=O,I<D?pn.set(Md,0,I):pn.set(Md,0,-D))}return r&&pn.copy(r,_?Md:Dd),_},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],a=n[3],l=n[4],o=n[5];t.x=r.x*i+l,t.y=r.y*a+o,t.width=r.width*i,t.height=r.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Pu.x=Du.x=r.x,Pu.y=ku.y=r.y,Mu.x=ku.x=r.x+r.width,Mu.y=Du.y=r.y+r.height,Pu.transform(n),ku.transform(n),Mu.transform(n),Du.transform(n),t.x=rg(Pu.x,Mu.x,Du.x,ku.x),t.y=rg(Pu.y,Mu.y,Du.y,ku.y);var h=ng(Pu.x,Mu.x,Du.x,ku.x),d=ng(Pu.y,Mu.y,Du.y,ku.y);t.width=h-t.x,t.height=d-t.y},e}();const _n=KW;var qI={};function Aa(e,t){t=t||Hl;var r=qI[t];r||(r=qI[t]=new mm(500));var n=r.get(e);return n==null&&(n=mf.measureText(e,t).width,r.put(e,n)),n}function WI(e,t,r,n){var i=Aa(e,t),a=Sy(t),l=Qd(0,i,r),o=Eh(0,a,n),h=new _n(l,o,i,a);return h}function G2(e,t,r,n){var i=((e||"")+"").split(`
`),a=i.length;if(a===1)return WI(i[0],t,r,n);for(var l=new _n(0,0,0,0),o=0;o<i.length;o++){var h=WI(i[o],t,r,n);o===0?l.copy(h):l.union(h)}return l}function Qd(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function Eh(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function Sy(e){return Aa("\u56FD",e)}function vc(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function zL(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,a=r.height,l=r.width,o=a/2,h=r.x,d=r.y,m="left",g="top";if(n instanceof Array)h+=vc(n[0],r.width),d+=vc(n[1],r.height),m=null,g=null;else switch(n){case"left":h-=i,d+=o,m="right",g="middle";break;case"right":h+=i+l,d+=o,g="middle";break;case"top":h+=l/2,d-=i,m="center",g="bottom";break;case"bottom":h+=l/2,d+=a+i,m="center";break;case"inside":h+=l/2,d+=o,m="center",g="middle";break;case"insideLeft":h+=i,d+=o,g="middle";break;case"insideRight":h+=l-i,d+=o,m="right",g="middle";break;case"insideTop":h+=l/2,d+=i,m="center";break;case"insideBottom":h+=l/2,d+=a-i,m="center",g="bottom";break;case"insideTopLeft":h+=i,d+=i;break;case"insideTopRight":h+=l-i,d+=i,m="right";break;case"insideBottomLeft":h+=i,d+=a-i,g="bottom";break;case"insideBottomRight":h+=l-i,d+=a-i,m="right",g="bottom";break}return e=e||{},e.x=h,e.y=d,e.align=m,e.verticalAlign=g,e}var Z1="__zr_normal__",X1=$p.concat(["ignore"]),JW=vf($p,function(e,t){return e[t]=!0,e},{ignore:!1}),hh={},QW=new _n(0,0,0,0),q2=function(){function e(t){this.id=oL(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,a=r.innerTransformable,l=void 0,o=void 0,h=!1;a.parent=i?this:null;var d=!1;if(a.copyTransform(r),n.position!=null){var m=QW;n.layoutRect?m.copy(n.layoutRect):m.copy(this.getBoundingRect()),i||m.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(hh,n,m):zL(hh,n,m),a.x=hh.x,a.y=hh.y,l=hh.align,o=hh.verticalAlign;var g=n.origin;if(g&&n.rotation!=null){var _=void 0,x=void 0;g==="center"?(_=m.width*.5,x=m.height*.5):(_=vc(g[0],m.width),x=vc(g[1],m.height)),d=!0,a.originX=-a.x+_+(i?0:m.x),a.originY=-a.y+x+(i?0:m.y)}}n.rotation!=null&&(a.rotation=n.rotation);var E=n.offset;E&&(a.x+=E[0],a.y+=E[1],d||(a.originX=-E[0],a.originY=-E[1]));var M=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,P=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),I=void 0,D=void 0,O=void 0;M&&this.canBeInsideText()?(I=n.insideFill,D=n.insideStroke,(I==null||I==="auto")&&(I=this.getInsideTextFill()),(D==null||D==="auto")&&(D=this.getInsideTextStroke(I),O=!0)):(I=n.outsideFill,D=n.outsideStroke,(I==null||I==="auto")&&(I=this.getOutsideFill()),(D==null||D==="auto")&&(D=this.getOutsideStroke(I),O=!0)),I=I||"#000",(I!==P.fill||D!==P.stroke||O!==P.autoStroke||l!==P.align||o!==P.verticalAlign)&&(h=!0,P.fill=I,P.stroke=D,P.autoStroke=O,P.align=l,P.verticalAlign=o,r.setDefaultTextStyle(P)),r.__dirty|=Zo,h&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?ew:Qb},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&cc(r);n||(n=[255,255,255,1]);for(var i=n[3],a=this.__zr.isDarkMode(),l=0;l<3;l++)n[l]=n[l]*i+(a?0:255)*(1-i);return n[3]=1,CL(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},Ct(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(ar(t))for(var n=t,i=Gr(n),a=0;a<i.length;a++){var l=i[a];this.attrKV(l,t[l])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],a=i.__fromStateTransition;if(!(i.getLoop()||a&&a!==Z1)){var l=i.targetName,o=l?r[l]:r;i.saveTo(o)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,X1)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var a=n[i];t[a]!=null&&!(a in r)&&(r[a]=this[a])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(Z1,!1,t)},e.prototype.useState=function(t,r,n,i){var a=t===Z1,l=this.hasState();if(!(!l&&a)){var o=this.currentStates,h=this.stateTransition;if(!(gn(o,t)>=0&&(r||o.length===1))){var d;if(this.stateProxy&&!a&&(d=this.stateProxy(t)),d||(d=this.states&&this.states[t]),!d&&!a){sL("State "+t+" not exists.");return}a||this.saveCurrentToNormalState(d);var m=!!(d&&d.hoverLayer||i);m&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,d,this._normalState,r,!n&&!this.__inHover&&h&&h.duration>0,h);var g=this._textContent,_=this._textGuide;return g&&g.useState(t,r,n,m),_&&_.useState(t,r,n,m),a?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!m&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Zo),d}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],a=this.currentStates,l=t.length,o=l===a.length;if(o){for(var h=0;h<l;h++)if(t[h]!==a[h]){o=!1;break}}if(o)return;for(var h=0;h<l;h++){var d=t[h],m=void 0;this.stateProxy&&(m=this.stateProxy(d,t)),m||(m=this.states[d]),m&&i.push(m)}var g=i[l-1],_=!!(g&&g.hoverLayer||n);_&&this._toggleHoverLayerFlag(!0);var x=this._mergeStates(i),E=this.stateTransition;this.saveCurrentToNormalState(x),this._applyStateObj(t.join(","),x,this._normalState,!1,!r&&!this.__inHover&&E&&E.duration>0,E);var M=this._textContent,P=this._textGuide;M&&M.useStates(t,r,_),P&&P.useStates(t,r,_),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!_&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Zo)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=gn(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),a=gn(i,t),l=gn(i,r)>=0;a>=0?l?i.splice(a,1):i[a]=r:n&&!l&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var a=t[i];Ct(r,a),a.textConfig&&(n=n||{},Ct(n,a.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,a,l){var o=!(r&&i);r&&r.textConfig?(this.textConfig=Ct({},i?this.textConfig:n.textConfig),Ct(this.textConfig,r.textConfig)):o&&n.textConfig&&(this.textConfig=n.textConfig);for(var h={},d=!1,m=0;m<X1.length;m++){var g=X1[m],_=a&&JW[g];r&&r[g]!=null?_?(d=!0,h[g]=r[g]):this[g]=r[g]:o&&n[g]!=null&&(_?(d=!0,h[g]=n[g]):this[g]=n[g])}if(!a)for(var m=0;m<this.animators.length;m++){var x=this.animators[m],E=x.targetName;x.getLoop()||x.__changeFinalValue(E?(r||n)[E]:r||n)}d&&this._transitionState(t,h,l)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new H2,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),Ct(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=Zo;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,a=new V2(i,r,n);return t&&(a.targetName=t),this.addAnimator(a,t),a},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var a=i.animators,l=gn(a,t);l>=0&&a.splice(l,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,a=[],l=0;l<i;l++){var o=n[l];!t||t===o.scope?o.stop(r):a.push(o)}return this.animators=a,this},e.prototype.animateTo=function(t,r,n){Y1(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){Y1(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var a=Y1(this,r,n,i),l=0;l<a.length;l++)a[l].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=Zo;function r(n,i,a,l){Object.defineProperty(t,n,{get:function(){if(!this[i]){var h=this[i]=[];o(this,h)}return this[i]},set:function(h){this[a]=h[0],this[l]=h[1],this[i]=h,o(this,h)}});function o(h,d){Object.defineProperty(d,0,{get:function(){return h[a]},set:function(m){h[a]=m}}),Object.defineProperty(d,1,{get:function(){return h[l]},set:function(m){h[l]=m}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();ns(q2,$s);ns(q2,H2);function Y1(e,t,r,n,i){r=r||{};var a=[];BL(e,"",e,t,r,n,a,i);var l=a.length,o=!1,h=r.done,d=r.aborted,m=function(){o=!0,l--,l<=0&&(o?h&&h():d&&d())},g=function(){l--,l<=0&&(o?h&&h():d&&d())};l||h&&h(),a.length>0&&r.during&&a[0].during(function(E,M){r.during(M)});for(var _=0;_<a.length;_++){var x=a[_];m&&x.done(m),g&&x.aborted(g),r.force&&x.duration(r.duration),x.start(r.easing)}return a}function K1(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function eZ(e){return pa(e[0])}function tZ(e,t,r){if(pa(t[r]))if(pa(e[r])||(e[r]=[]),Pa(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),K1(e[r],t[r],n))}else{var i=t[r],a=e[r],l=i.length;if(eZ(i))for(var o=i[0].length,h=0;h<l;h++)a[h]?K1(a[h],i[h],o):a[h]=Array.prototype.slice.call(i[h]);else K1(a,i,l);a.length=i.length}else e[r]=t[r]}function rZ(e,t){return e===t||pa(e)&&pa(t)&&nZ(e,t)}function nZ(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function BL(e,t,r,n,i,a,l,o){for(var h=Gr(n),d=i.duration,m=i.delay,g=i.additive,_=i.setToFinal,x=!ar(a),E=e.animators,M=[],P=0;P<h.length;P++){var I=h[P],D=n[I];if(D!=null&&r[I]!=null&&(x||a[I]))if(ar(D)&&!pa(D)&&!R2(D)){if(t){o||(r[I]=D,e.updateDuringAnimation(t));continue}BL(e,I,r[I],D,i,a&&a[I],l,o)}else M.push(I);else o||(r[I]=D,e.updateDuringAnimation(t),M.push(I))}var O=M.length;if(!g&&O)for(var F=0;F<E.length;F++){var $=E[F];if($.targetName===t){var q=$.stopTracks(M);if(q){var K=gn(E,$);E.splice(K,1)}}}if(i.force||(M=Wi(M,function(ce){return!rZ(n[ce],r[ce])}),O=M.length),O>0||i.force&&!l.length){var Z=void 0,re=void 0,ie=void 0;if(o){re={},_&&(Z={});for(var F=0;F<O;F++){var I=M[F];re[I]=r[I],_?Z[I]=n[I]:r[I]=n[I]}}else if(_){ie={};for(var F=0;F<O;F++){var I=M[F];ie[I]=jg(r[I]),tZ(r,n,I)}}var $=new V2(r,!1,!1,g?Wi(E,function(le){return le.targetName===t}):null);$.targetName=t,i.scope&&($.scope=i.scope),_&&Z&&$.whenWithKeys(0,Z,M),ie&&$.whenWithKeys(0,ie,M),$.whenWithKeys(d==null?500:d,o?re:n,M).delay(m||0),e.addAnimator($,t),l.push($)}}const FL=q2;var NL=function(e){Vt(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,a=i.indexOf(n);a>=0&&(i.splice(a,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=gn(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,a=i[n];if(r&&r!==this&&r.parent!==this&&r!==a){i[n]=r,a.parent=null;var l=this.__zr;l&&a.removeSelfFromZr(l),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,a=gn(i,r);return a<0?this:(i.splice(a,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var a=r[i];n&&a.removeSelfFromZr(n),a.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,a=0;a<i.length;a++){var l=i[a];r.call(n,l,a)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var a=this._children[i],l=r.call(n,a);a.isGroup&&!l&&a.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new _n(0,0,0,0),i=r||this._children,a=[],l=null,o=0;o<i.length;o++){var h=i[o];if(!(h.ignore||h.invisible)){var d=h.getBoundingRect(),m=h.getLocalTransform(a);m?(_n.applyTransform(n,d,m),l=l||n.clone(),l.union(n)):(l=l||d.clone(),l.union(d))}}return l||n},t}(FL);NL.prototype.type="group";const bi=NL;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Wg={},VL={};function iZ(e){delete VL[e]}function aZ(e){if(!e)return!1;if(typeof e=="string")return O_(e,1)<Jb;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=O_(t[i].color,1);return r/=n,r<Jb}return!1}var oZ=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var a=new hW,l=n.renderer||"canvas";Wg[l]||(l=Gr(Wg)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var o=new Wg[l](r,a,n,t),h=n.ssr||o.ssrOnly;this.storage=a,this.painter=o;var d=!Or.node&&!Or.worker&&!h?new qW(o.getViewportRoot(),o.root):null;this.handler=new oW(a,o,d,o.root),this.animation=new FW({stage:{update:h?null:function(){return i._flush(!0)}}}),h||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=aZ(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=kh();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=kh();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof bi&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,iZ(this.id)},e}();function ZI(e,t){var r=new oZ(oL(),e,t);return VL[r.id]=r,r}function sZ(e,t){Wg[e]=t}var XI=1e-4,UL=20;function lZ(e){return e.replace(/^\s+|\s+$/g,"")}function YI(e,t,r,n){var i=t[0],a=t[1],l=r[0],o=r[1],h=a-i,d=o-l;if(h===0)return d===0?l:(l+o)/2;if(n)if(h>0){if(e<=i)return l;if(e>=a)return o}else{if(e>=i)return l;if(e<=a)return o}else{if(e===i)return l;if(e===a)return o}return(e-i)/h*d+l}function Zi(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Jt(e)?lZ(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function ri(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),UL),e=(+e).toFixed(t),r?e:+e}function jp(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return uZ(e)}function uZ(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,a=t.indexOf("."),l=a<0?0:i-1-a;return Math.max(0,l-n)}function cZ(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),a=Math.round(r(Math.abs(t[1]-t[0]))/n),l=Math.min(Math.max(-i+a,0),20);return isFinite(l)?l:20}function hZ(e,t){var r=Math.max(jp(e),jp(t)),n=e+t;return r>UL?n:ri(n,r)}function $L(e){var t=Math.PI*2;return(e%t+t)%t}function z_(e){return e>-XI&&e<XI}var fZ=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Ns(e){if(e instanceof Date)return e;if(Jt(e)){var t=fZ.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function dZ(e){return Math.pow(10,W2(e))}function W2(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function jL(e,t){var r=W2(e),n=Math.pow(10,r),i=e/n,a;return t?i<1.5?a=1:i<2.5?a=2:i<4?a=3:i<7?a=5:a=10:i<1?a=1:i<2?a=2:i<3?a=3:i<5?a=5:a=10,e=a*n,r>=-20?+e.toFixed(r<0?-r:0):e}function B_(e){var t=parseFloat(e);return t==e&&(t!==0||!Jt(e)||e.indexOf("x")<=0)?t:NaN}function pZ(e){return!isNaN(B_(e))}function HL(){return Math.round(Math.random()*9)}function GL(e,t){return t===0?e:GL(t,e%t)}function KI(e,t){return e==null?t:t==null?e:e*t/GL(e,t)}function ua(e){throw new Error(e)}var qL="series\0",mZ="\0_ec_\0";function ea(e){return e instanceof Array?e:e==null?[]:[e]}function JI(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var a=r[n];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var QI=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function vm(e){return ar(e)&&!Gt(e)&&!(e instanceof Date)?e.value:e}function vZ(e){return ar(e)&&!(e instanceof Array)}function gZ(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",a=r==="replaceAll";e=e||[],t=(t||[]).slice();var l=Ir();Ce(t,function(h,d){if(!ar(h)){t[d]=null;return}});var o=_Z(e,l,r);return(n||i)&&yZ(o,e,l,t),n&&xZ(o,t),n||i?bZ(o,t,i):a&&wZ(o,t),SZ(o),o}function _Z(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var a=e[i];a&&a.id!=null&&t.set(a.id,i),n.push({existing:r==="replaceMerge"||Hp(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return n}function yZ(e,t,r,n){Ce(n,function(i,a){if(!(!i||i.id==null)){var l=_p(i.id),o=r.get(l);if(o!=null){var h=e[o];Ao(!h.newOption,'Duplicated option on id "'+l+'".'),h.newOption=i,h.existing=t[o],n[a]=null}}})}function xZ(e,t){Ce(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var a=e[i].existing;if(!e[i].newOption&&a&&(a.id==null||r.id==null)&&!Hp(r)&&!Hp(a)&&WL("name",a,r)){e[i].newOption=r,t[n]=null;return}}})}function bZ(e,t,r){Ce(t,function(n){if(!!n){for(var i,a=0;(i=e[a])&&(i.newOption||Hp(i.existing)||i.existing&&n.id!=null&&!WL("id",n,i.existing));)a++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),a++}})}function wZ(e,t){Ce(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function SZ(e){var t=Ir();Ce(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),Ce(e,function(r){var n=r.newOption;Ao(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),Ce(e,function(r,n){var i=r.existing,a=r.newOption,l=r.keyInfo;if(!!ar(a)){if(l.name=a.name!=null?_p(a.name):i?i.name:qL+n,i)l.id=_p(i.id);else if(a.id!=null)l.id=_p(a.id);else{var o=0;do l.id="\0"+l.name+"\0"+o++;while(t.get(l.id))}t.set(l.id,r)}})}function WL(e,t,r){var n=es(t[e],null),i=es(r[e],null);return n!=null&&i!=null&&n===i}function _p(e){return es(e,"")}function es(e,t){return e==null?t:Jt(e)?e:Mn(e)||Bb(e)?e+"":t}function ZL(e){var t=e.name;return!!(t&&t.indexOf(qL))}function Hp(e){return e&&e.id!=null&&_p(e.id).indexOf(mZ)===0}function TZ(e,t,r){Ce(e,function(n){var i=n.newOption;ar(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=EZ(t,i,n.existing,r))})}function EZ(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function gm(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return Gt(t.dataIndex)?nr(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return Gt(t.name)?nr(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function ni(){var e="__ec_inner_"+CZ++;return function(t){return t[e]||(t[e]={})}}var CZ=HL();function J1(e,t,r){var n=Z2(t,r),i=n.mainTypeSpecified,a=n.queryOptionMap,l=n.others,o=l,h=r?r.defaultMainType:null;return!i&&h&&a.set(h,{}),a.each(function(d,m){var g=_m(e,m,d,{useDefault:h===m,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});o[m+"Models"]=g.models,o[m+"Model"]=g.models[0]}),o}function Z2(e,t){var r;if(Jt(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=Ir(),a={},l=!1;return Ce(r,function(o,h){if(h==="dataIndex"||h==="dataIndexInside"){a[h]=o;return}var d=h.match(/^(\w+)(Index|Id|Name)$/)||[],m=d[1],g=(d[2]||"").toLowerCase();if(!(!m||!g||t&&t.includeMainTypes&&gn(t.includeMainTypes,m)<0)){l=l||!!m;var _=i.get(m)||i.set(m,{});_[g]=o}}),{mainTypeSpecified:l,queryOptionMap:i,others:a}}var So={useDefault:!0,enableAll:!1,enableNone:!1};function _m(e,t,r,n){n=n||So;var i=r.index,a=r.id,l=r.name,o={models:null,specified:i!=null||a!=null||l!=null};if(!o.specified){var h=void 0;return o.models=n.useDefault&&(h=e.getComponent(t))?[h]:[],o}return i==="none"||i===!1?(Ao(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(i==="all"&&(Ao(n.enableAll,'`"all"` is not a valid value on index option.'),i=a=l=null),o.models=e.queryComponents({mainType:t,index:i,id:a,name:l}),o)}function XL(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function AZ(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function IZ(e){return e==="auto"?Or.domSupported?"html":"richText":e||"html"}var PZ=".",Lu="___EC__COMPONENT__CONTAINER___",YL="___EC__EXTENDED_CLASS___";function Jo(e){var t={main:"",sub:""};if(e){var r=e.split(PZ);t.main=r[0]||"",t.sub=r[1]||""}return t}function MZ(e){Ao(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function DZ(e){return!!(e&&e[YL])}function X2(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return kZ(n)?i=function(a){Vt(l,a);function l(){return a.apply(this,arguments)||this}return l}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},Oq(i,this)),Ct(i.prototype,r),i[YL]=!0,i.extend=this.extend,i.superCall=RZ,i.superApply=zZ,i.superClass=n,i}}function kZ(e){return Er(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function KL(e,t){e.extend=t.extend}var LZ=Math.round(Math.random()*10);function OZ(e){var t=["__\0is_clz",LZ++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function RZ(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function zZ(e,t,r){return this.superClass.prototype[t].apply(e,r)}function Ty(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){MZ(i),n.prototype.type=i;var a=Jo(i);if(!a.sub)t[a.main]=n;else if(a.sub!==Lu){var l=r(a);l[a.sub]=n}}return n},e.getClass=function(n,i,a){var l=t[n];if(l&&l[Lu]&&(l=i?l[i]:null),a&&!l)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return l},e.getClassesByMainType=function(n){var i=Jo(n),a=[],l=t[i.main];return l&&l[Lu]?Ce(l,function(o,h){h!==Lu&&a.push(o)}):a.push(l),a},e.hasClass=function(n){var i=Jo(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return Ce(t,function(i,a){n.push(a)}),n},e.hasSubTypes=function(n){var i=Jo(n),a=t[i.main];return a&&a[Lu]};function r(n){var i=t[n.main];return(!i||!i[Lu])&&(i=t[n.main]={},i[Lu]=!0),i}}function Gp(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,a){for(var l={},o=0;o<e.length;o++){var h=e[o][1];if(!(i&&gn(i,h)>=0||a&&gn(a,h)<0)){var d=n.getShallow(h,t);d!=null&&(l[e[o][0]]=d)}}return l}}var BZ=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],FZ=Gp(BZ),NZ=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return FZ(this,t,r)},e}(),rw=new mm(50);function VZ(e){if(typeof e=="string"){var t=rw.get(e);return t&&t.image}else return e}function Y2(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var a=rw.get(e),l={hostEl:r,cb:n,cbPayload:i};return a?(t=a.image,!Ey(t)&&a.pending.push(l)):(t=mf.loadImage(e,eP,eP),t.__zrImageSrc=e,rw.put(e,t.__cachedImgObj={image:t,pending:[l]})),t}else return e;else return t}function eP(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function Ey(e){return e&&e.width&&e.height}var Q1=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function UZ(e,t,r,n,i){if(!t)return"";var a=(e+"").split(`
`);i=JL(t,r,n,i);for(var l=0,o=a.length;l<o;l++)a[l]=QL(a[l],i);return a.join(`
`)}function JL(e,t,r,n){n=n||{};var i=Ct({},n);i.font=t,r=Lr(r,"..."),i.maxIterations=Lr(n.maxIterations,2);var a=i.minChar=Lr(n.minChar,0);i.cnCharWidth=Aa("\u56FD",t);var l=i.ascCharWidth=Aa("a",t);i.placeholder=Lr(n.placeholder,"");for(var o=e=Math.max(0,e-1),h=0;h<a&&o>=l;h++)o-=l;var d=Aa(r,t);return d>o&&(r="",d=0),o=e-d,i.ellipsis=r,i.ellipsisWidth=d,i.contentWidth=o,i.containerWidth=e,i}function QL(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var a=Aa(e,n);if(a<=r)return e;for(var l=0;;l++){if(a<=i||l>=t.maxIterations){e+=t.ellipsis;break}var o=l===0?$Z(e,i,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*i/a):0;e=e.substr(0,o),a=Aa(e,n)}return e===""&&(e=t.placeholder),e}function $Z(e,t,r,n){for(var i=0,a=0,l=e.length;a<l&&i<t;a++){var o=e.charCodeAt(a);i+=0<=o&&o<=127?r:n}return a}function jZ(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,a=r==="truncate",l=Sy(i),o=Lr(t.lineHeight,l),h=!!t.backgroundColor,d=t.lineOverflow==="truncate",m=t.width,g;m!=null&&(r==="break"||r==="breakAll")?g=e?e4(e,t.font,m,r==="breakAll",0).lines:[]:g=e?e.split(`
`):[];var _=g.length*o,x=Lr(t.height,_);if(_>x&&d){var E=Math.floor(x/o);g=g.slice(0,E)}if(e&&a&&m!=null)for(var M=JL(m,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),P=0;P<g.length;P++)g[P]=QL(g[P],M);for(var I=x,D=0,P=0;P<g.length;P++)D=Math.max(Aa(g[P],i),D);m==null&&(m=D);var O=D;return n&&(I+=n[0]+n[2],O+=n[1]+n[3],m+=n[1]+n[3]),h&&(O=m),{lines:g,height:x,outerWidth:O,outerHeight:I,lineHeight:o,calculatedLineHeight:l,contentWidth:D,contentHeight:_,width:m}}var HZ=function(){function e(){}return e}(),tP=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),GZ=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function qZ(e,t){var r=new GZ;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,a=t.overflow,l=(a==="break"||a==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:a==="breakAll"}:null,o=Q1.lastIndex=0,h;(h=Q1.exec(e))!=null;){var d=h.index;d>o&&ex(r,e.substring(o,d),t,l),ex(r,h[2],t,l,h[1]),o=Q1.lastIndex}o<e.length&&ex(r,e.substring(o,e.length),t,l);var m=[],g=0,_=0,x=t.padding,E=a==="truncate",M=t.lineOverflow==="truncate";function P(tt,wt,Rt){tt.width=wt,tt.lineHeight=Rt,g+=Rt,_=Math.max(_,wt)}e:for(var I=0;I<r.lines.length;I++){for(var D=r.lines[I],O=0,F=0,$=0;$<D.tokens.length;$++){var q=D.tokens[$],K=q.styleName&&t.rich[q.styleName]||{},Z=q.textPadding=K.padding,re=Z?Z[1]+Z[3]:0,ie=q.font=K.font||t.font;q.contentHeight=Sy(ie);var ce=Lr(K.height,q.contentHeight);if(q.innerHeight=ce,Z&&(ce+=Z[0]+Z[2]),q.height=ce,q.lineHeight=Ng(K.lineHeight,t.lineHeight,ce),q.align=K&&K.align||t.align,q.verticalAlign=K&&K.verticalAlign||"middle",M&&i!=null&&g+q.lineHeight>i){$>0?(D.tokens=D.tokens.slice(0,$),P(D,F,O),r.lines=r.lines.slice(0,I+1)):r.lines=r.lines.slice(0,I);break e}var le=K.width,fe=le==null||le==="auto";if(typeof le=="string"&&le.charAt(le.length-1)==="%")q.percentWidth=le,m.push(q),q.contentWidth=Aa(q.text,ie);else{if(fe){var ye=K.backgroundColor,Ne=ye&&ye.image;Ne&&(Ne=VZ(Ne),Ey(Ne)&&(q.width=Math.max(q.width,Ne.width*ce/Ne.height)))}var be=E&&n!=null?n-F:null;be!=null&&be<q.width?!fe||be<re?(q.text="",q.width=q.contentWidth=0):(q.text=UZ(q.text,be-re,ie,t.ellipsis,{minChar:t.truncateMinChar}),q.width=q.contentWidth=Aa(q.text,ie)):q.contentWidth=Aa(q.text,ie)}q.width+=re,F+=q.width,K&&(O=Math.max(O,q.lineHeight))}P(D,F,O)}r.outerWidth=r.width=Lr(n,_),r.outerHeight=r.height=Lr(i,g),r.contentHeight=g,r.contentWidth=_,x&&(r.outerWidth+=x[1]+x[3],r.outerHeight+=x[0]+x[2]);for(var I=0;I<m.length;I++){var q=m[I],et=q.percentWidth;q.width=parseInt(et,10)/100*r.width}return r}function ex(e,t,r,n,i){var a=t==="",l=i&&r.rich[i]||{},o=e.lines,h=l.font||r.font,d=!1,m,g;if(n){var _=l.padding,x=_?_[1]+_[3]:0;if(l.width!=null&&l.width!=="auto"){var E=vc(l.width,n.width)+x;o.length>0&&E+n.accumWidth>n.width&&(m=t.split(`
`),d=!0),n.accumWidth=E}else{var M=e4(t,h,n.width,n.breakAll,n.accumWidth);n.accumWidth=M.accumWidth+x,g=M.linesWidths,m=M.lines}}else m=t.split(`
`);for(var P=0;P<m.length;P++){var I=m[P],D=new HZ;if(D.styleName=i,D.text=I,D.isLineHolder=!I&&!a,typeof l.width=="number"?D.width=l.width:D.width=g?g[P]:Aa(I,h),!P&&!d){var O=(o[o.length-1]||(o[0]=new tP)).tokens,F=O.length;F===1&&O[0].isLineHolder?O[0]=D:(I||!F||a)&&O.push(D)}else o.push(new tP([D]))}}function WZ(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var ZZ=vf(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function XZ(e){return WZ(e)?!!ZZ[e]:!0}function e4(e,t,r,n,i){for(var a=[],l=[],o="",h="",d=0,m=0,g=0;g<e.length;g++){var _=e.charAt(g);if(_===`
`){h&&(o+=h,m+=d),a.push(o),l.push(m),o="",h="",d=0,m=0;continue}var x=Aa(_,t),E=n?!1:!XZ(_);if(a.length?m+x>r:i+m+x>r){m?(o||h)&&(E?(o||(o=h,h="",d=0,m=d),a.push(o),l.push(m-d),h+=_,d+=x,o="",m=d):(h&&(o+=h,h="",d=0),a.push(o),l.push(m),o=_,m=x)):E?(a.push(h),l.push(d),h=_,d=x):(a.push(_),l.push(x));continue}m+=x,E?(h+=_,d+=x):(h&&(o+=h,h="",d=0),o+=_)}return!a.length&&!o&&(o=e,h="",d=0),h&&(o+=h),o&&(a.push(o),l.push(m)),a.length===1&&(m+=i),{accumWidth:m,lines:a,linesWidths:l}}var nw="__zr_style_"+Math.round(Math.random()*10),hc={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},Cy={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};hc[nw]=!0;var rP=["z","z2","invisible"],YZ=["invisible"],KZ=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=Gr(r),i=0;i<n.length;i++){var a=n[i];a==="style"?this.useStyle(r[a]):e.prototype.attrKV.call(this,a,r[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,a){var l=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&JZ(this,r,n)||l&&!l[0]&&!l[3])return!1;if(i&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(a&&this.parent)for(var h=this.parent;h;){if(h.ignore)return!1;h=h.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();return a.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),a=this.style,l=a.shadowBlur||0,o=a.shadowOffsetX||0,h=a.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new _n(0,0,0,0)),n?_n.applyTransform(r,i,n):r.copy(i),(l||o||h)&&(r.width+=l*2+Math.abs(o),r.height+=l*2+Math.abs(h),r.x=Math.min(r.x,r.x+o-l),r.y=Math.min(r.y,r.y+h-l));var d=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-d),r.y=Math.floor(r.y-d),r.width=Math.ceil(r.width+1+d*2),r.height=Math.ceil(r.height+1+d*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new _n(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:Ct(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Kd,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Kd)},t.prototype.styleUpdated=function(){this.__dirty&=~Kd},t.prototype.createStyle=function(r){return by(hc,r)},t.prototype.useStyle=function(r){r[nw]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[nw]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,rP)},t.prototype._applyStateObj=function(r,n,i,a,l,o){e.prototype._applyStateObj.call(this,r,n,i,a,l,o);var h=!(n&&a),d;if(n&&n.style?l?a?d=n.style:(d=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(d,n.style)):(d=this._mergeStyle(this.createStyle(),a?this.style:i.style),this._mergeStyle(d,n.style)):h&&(d=i.style),d)if(l){var m=this.style;if(this.style=this.createStyle(h?{}:m),h)for(var g=Gr(m),_=0;_<g.length;_++){var x=g[_];x in d&&(d[x]=d[x],this.style[x]=m[x])}for(var E=Gr(d),_=0;_<E.length;_++){var x=E[_];this.style[x]=this.style[x]}this._transitionState(r,{style:d},o,this.getAnimationStyleProps())}else this.useStyle(d);for(var M=this.__inHover?YZ:rP,_=0;_<M.length;_++){var x=M[_];n&&n[x]!=null?this[x]=n[x]:h&&i[x]!=null&&(this[x]=i[x])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,a=0;a<r.length;a++){var l=r[a];l.style&&(i=i||{},this._mergeStyle(i,l.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return Ct(r,n),r},t.prototype.getAnimationStyleProps=function(){return Cy},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=Zo|Kd}(),t}(FL),tx=new _n(0,0,0,0),rx=new _n(0,0,0,0);function JZ(e,t,r){return tx.copy(e.getBoundingRect()),e.transform&&tx.applyTransform(e.transform),rx.width=t,rx.height=r,!tx.intersect(rx)}const ym=KZ;var Xa=Math.min,Ya=Math.max,nx=Math.sin,ix=Math.cos,Ou=Math.PI*2,ig=gf(),ag=gf(),og=gf();function nP(e,t,r,n,i,a){i[0]=Xa(e,r),i[1]=Xa(t,n),a[0]=Ya(e,r),a[1]=Ya(t,n)}var iP=[],aP=[];function QZ(e,t,r,n,i,a,l,o,h,d){var m=wL,g=_i,_=m(e,r,i,l,iP);h[0]=1/0,h[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var x=0;x<_;x++){var E=g(e,r,i,l,iP[x]);h[0]=Xa(E,h[0]),d[0]=Ya(E,d[0])}_=m(t,n,a,o,aP);for(var x=0;x<_;x++){var M=g(t,n,a,o,aP[x]);h[1]=Xa(M,h[1]),d[1]=Ya(M,d[1])}h[0]=Xa(e,h[0]),d[0]=Ya(e,d[0]),h[0]=Xa(l,h[0]),d[0]=Ya(l,d[0]),h[1]=Xa(t,h[1]),d[1]=Ya(t,d[1]),h[1]=Xa(o,h[1]),d[1]=Ya(o,d[1])}function eX(e,t,r,n,i,a,l,o){var h=SL,d=yi,m=Ya(Xa(h(e,r,i),1),0),g=Ya(Xa(h(t,n,a),1),0),_=d(e,r,i,m),x=d(t,n,a,g);l[0]=Xa(e,i,_),l[1]=Xa(t,a,x),o[0]=Ya(e,i,_),o[1]=Ya(t,a,x)}function tX(e,t,r,n,i,a,l,o,h){var d=Mh,m=Dh,g=Math.abs(i-a);if(g%Ou<1e-4&&g>1e-4){o[0]=e-r,o[1]=t-n,h[0]=e+r,h[1]=t+n;return}if(ig[0]=ix(i)*r+e,ig[1]=nx(i)*n+t,ag[0]=ix(a)*r+e,ag[1]=nx(a)*n+t,d(o,ig,ag),m(h,ig,ag),i=i%Ou,i<0&&(i=i+Ou),a=a%Ou,a<0&&(a=a+Ou),i>a&&!l?a+=Ou:i<a&&l&&(i+=Ou),l){var _=a;a=i,i=_}for(var x=0;x<a;x+=Math.PI/2)x>i&&(og[0]=ix(x)*r+e,og[1]=nx(x)*n+t,d(o,og,o),m(h,og,h))}var Qr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Ru=[],zu=[],$o=[],_l=[],jo=[],Ho=[],ax=Math.min,ox=Math.max,Bu=Math.cos,Fu=Math.sin,Ss=Math.abs,iw=Math.PI,Tl=iw*2,sx=typeof Float32Array<"u",kd=[];function lx(e){var t=Math.round(e/iw*1e8)/1e8;return t%2*iw}function rX(e,t){var r=lx(e[0]);r<0&&(r+=Tl);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=Tl?i=r+Tl:t&&r-i>=Tl?i=r-Tl:!t&&r>i?i=r+(Tl-lx(r-i)):t&&r<i&&(i=r-(Tl-lx(i-r))),e[0]=r,e[1]=i}var nX=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=Ss(n/jI/t)||0,this._uy=Ss(n/jI/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(Qr.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=Ss(t-this._xi),i=Ss(r-this._yi),a=n>this._ux||i>this._uy;if(this.addData(Qr.L,t,r),this._ctx&&a&&this._ctx.lineTo(t,r),a)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var l=n*n+i*i;l>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=l)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,a,l){return this._drawPendingPt(),this.addData(Qr.C,t,r,n,i,a,l),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,a,l),this._xi=a,this._yi=l,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(Qr.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,a,l){this._drawPendingPt(),kd[0]=i,kd[1]=a,rX(kd,l),i=kd[0],a=kd[1];var o=a-i;return this.addData(Qr.A,t,r,n,n,i,o,0,l?0:1),this._ctx&&this._ctx.arc(t,r,n,i,a,l),this._xi=Bu(a)*n+t,this._yi=Fu(a)*n+r,this},e.prototype.arcTo=function(t,r,n,i,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,a),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(Qr.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(Qr.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&sx&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,a=0;a<r;a++)n+=t[a].len();sx&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var a=0;a<r;a++)for(var l=t[a].data,o=0;o<l.length;o++)this.data[i++]=l[o];this._len=i},e.prototype.addData=function(t,r,n,i,a,l,o,h,d){if(!!this._saveData){var m=this.data;this._len+arguments.length>m.length&&(this._expandData(),m=this.data);for(var g=0;g<arguments.length;g++)m[this._len++]=arguments[g]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,sx&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){$o[0]=$o[1]=jo[0]=jo[1]=Number.MAX_VALUE,_l[0]=_l[1]=Ho[0]=Ho[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,a=0,l;for(l=0;l<this._len;){var o=t[l++],h=l===1;switch(h&&(r=t[l],n=t[l+1],i=r,a=n),o){case Qr.M:r=i=t[l++],n=a=t[l++],jo[0]=i,jo[1]=a,Ho[0]=i,Ho[1]=a;break;case Qr.L:nP(r,n,t[l],t[l+1],jo,Ho),r=t[l++],n=t[l++];break;case Qr.C:QZ(r,n,t[l++],t[l++],t[l++],t[l++],t[l],t[l+1],jo,Ho),r=t[l++],n=t[l++];break;case Qr.Q:eX(r,n,t[l++],t[l++],t[l],t[l+1],jo,Ho),r=t[l++],n=t[l++];break;case Qr.A:var d=t[l++],m=t[l++],g=t[l++],_=t[l++],x=t[l++],E=t[l++]+x;l+=1;var M=!t[l++];h&&(i=Bu(x)*g+d,a=Fu(x)*_+m),tX(d,m,g,_,x,E,M,jo,Ho),r=Bu(E)*g+d,n=Fu(E)*_+m;break;case Qr.R:i=r=t[l++],a=n=t[l++];var P=t[l++],I=t[l++];nP(i,a,i+P,a+I,jo,Ho);break;case Qr.Z:r=i,n=a;break}Mh($o,$o,jo),Dh(_l,_l,Ho)}return l===0&&($o[0]=$o[1]=_l[0]=_l[1]=0),new _n($o[0],$o[1],_l[0]-$o[0],_l[1]-$o[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,a=0,l=0,o=0,h=0;this._pathSegLen||(this._pathSegLen=[]);for(var d=this._pathSegLen,m=0,g=0,_=0;_<r;){var x=t[_++],E=_===1;E&&(a=t[_],l=t[_+1],o=a,h=l);var M=-1;switch(x){case Qr.M:a=o=t[_++],l=h=t[_++];break;case Qr.L:{var P=t[_++],I=t[_++],D=P-a,O=I-l;(Ss(D)>n||Ss(O)>i||_===r-1)&&(M=Math.sqrt(D*D+O*O),a=P,l=I);break}case Qr.C:{var F=t[_++],$=t[_++],P=t[_++],I=t[_++],q=t[_++],K=t[_++];M=dW(a,l,F,$,P,I,q,K,10),a=q,l=K;break}case Qr.Q:{var F=t[_++],$=t[_++],P=t[_++],I=t[_++];M=vW(a,l,F,$,P,I,10),a=P,l=I;break}case Qr.A:var Z=t[_++],re=t[_++],ie=t[_++],ce=t[_++],le=t[_++],fe=t[_++],ye=fe+le;_+=1,t[_++],E&&(o=Bu(le)*ie+Z,h=Fu(le)*ce+re),M=ox(ie,ce)*ax(Tl,Math.abs(fe)),a=Bu(ye)*ie+Z,l=Fu(ye)*ce+re;break;case Qr.R:{o=a=t[_++],h=l=t[_++];var Ne=t[_++],be=t[_++];M=Ne*2+be*2;break}case Qr.Z:{var D=o-a,O=h-l;M=Math.sqrt(D*D+O*O),a=o,l=h;break}}M>=0&&(d[g++]=M,m+=M)}return this._pathLen=m,m},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,a=this._uy,l=this._len,o,h,d,m,g,_,x=r<1,E,M,P=0,I=0,D,O=0,F,$;if(x&&(this._pathSegLen||this._calculateLength(),E=this._pathSegLen,M=this._pathLen,D=r*M,!D))return;e:for(var q=0;q<l;){var K=n[q++],Z=q===1;switch(Z&&(d=n[q],m=n[q+1],o=d,h=m),K!==Qr.L&&O>0&&(t.lineTo(F,$),O=0),K){case Qr.M:o=d=n[q++],h=m=n[q++],t.moveTo(d,m);break;case Qr.L:{g=n[q++],_=n[q++];var re=Ss(g-d),ie=Ss(_-m);if(re>i||ie>a){if(x){var ce=E[I++];if(P+ce>D){var le=(D-P)/ce;t.lineTo(d*(1-le)+g*le,m*(1-le)+_*le);break e}P+=ce}t.lineTo(g,_),d=g,m=_,O=0}else{var fe=re*re+ie*ie;fe>O&&(F=g,$=_,O=fe)}break}case Qr.C:{var ye=n[q++],Ne=n[q++],be=n[q++],et=n[q++],tt=n[q++],wt=n[q++];if(x){var ce=E[I++];if(P+ce>D){var le=(D-P)/ce;D_(d,ye,be,tt,le,Ru),D_(m,Ne,et,wt,le,zu),t.bezierCurveTo(Ru[1],zu[1],Ru[2],zu[2],Ru[3],zu[3]);break e}P+=ce}t.bezierCurveTo(ye,Ne,be,et,tt,wt),d=tt,m=wt;break}case Qr.Q:{var ye=n[q++],Ne=n[q++],be=n[q++],et=n[q++];if(x){var ce=E[I++];if(P+ce>D){var le=(D-P)/ce;k_(d,ye,be,le,Ru),k_(m,Ne,et,le,zu),t.quadraticCurveTo(Ru[1],zu[1],Ru[2],zu[2]);break e}P+=ce}t.quadraticCurveTo(ye,Ne,be,et),d=be,m=et;break}case Qr.A:var Rt=n[q++],Qt=n[q++],Ut=n[q++],vr=n[q++],yr=n[q++],$e=n[q++],pt=n[q++],it=!n[q++],dt=Ut>vr?Ut:vr,Dt=Ss(Ut-vr)>.001,qt=yr+$e,ot=!1;if(x){var ce=E[I++];P+ce>D&&(qt=yr+$e*(D-P)/ce,ot=!0),P+=ce}if(Dt&&t.ellipse?t.ellipse(Rt,Qt,Ut,vr,pt,yr,qt,it):t.arc(Rt,Qt,dt,yr,qt,it),ot)break e;Z&&(o=Bu(yr)*Ut+Rt,h=Fu(yr)*vr+Qt),d=Bu(qt)*Ut+Rt,m=Fu(qt)*vr+Qt;break;case Qr.R:o=d=n[q],h=m=n[q+1],g=n[q++],_=n[q++];var lt=n[q++],oe=n[q++];if(x){var ce=E[I++];if(P+ce>D){var ve=D-P;t.moveTo(g,_),t.lineTo(g+ax(ve,lt),_),ve-=lt,ve>0&&t.lineTo(g+lt,_+ax(ve,oe)),ve-=oe,ve>0&&t.lineTo(g+ox(lt-ve,0),_+oe),ve-=lt,ve>0&&t.lineTo(g,_+ox(oe-ve,0));break e}P+=ce}t.rect(g,_,lt,oe);break;case Qr.Z:if(x){var ce=E[I++];if(P+ce>D){var le=(D-P)/ce;t.lineTo(d*(1-le)+o*le,m*(1-le)+h*le);break e}P+=ce}t.closePath(),d=o,m=h}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=Qr,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const gc=nX;function Pl(e,t,r,n,i,a,l){if(i===0)return!1;var o=i,h=0,d=e;if(l>t+o&&l>n+o||l<t-o&&l<n-o||a>e+o&&a>r+o||a<e-o&&a<r-o)return!1;if(e!==r)h=(t-n)/(e-r),d=(e*n-r*t)/(e-r);else return Math.abs(a-e)<=o/2;var m=h*a-l+d,g=m*m/(h*h+1);return g<=o/2*o/2}function iX(e,t,r,n,i,a,l,o,h,d,m){if(h===0)return!1;var g=h;if(m>t+g&&m>n+g&&m>a+g&&m>o+g||m<t-g&&m<n-g&&m<a-g&&m<o-g||d>e+g&&d>r+g&&d>i+g&&d>l+g||d<e-g&&d<r-g&&d<i-g&&d<l-g)return!1;var _=fW(e,t,r,n,i,a,l,o,d,m,null);return _<=g/2}function t4(e,t,r,n,i,a,l,o,h){if(l===0)return!1;var d=l;if(h>t+d&&h>n+d&&h>a+d||h<t-d&&h<n-d&&h<a-d||o>e+d&&o>r+d&&o>i+d||o<e-d&&o<r-d&&o<i-d)return!1;var m=mW(e,t,r,n,i,a,o,h,null);return m<=d/2}var oP=Math.PI*2;function sg(e){return e%=oP,e<0&&(e+=oP),e}var Ld=Math.PI*2;function aX(e,t,r,n,i,a,l,o,h){if(l===0)return!1;var d=l;o-=e,h-=t;var m=Math.sqrt(o*o+h*h);if(m-d>r||m+d<r)return!1;if(Math.abs(n-i)%Ld<1e-4)return!0;if(a){var g=n;n=sg(i),i=sg(g)}else n=sg(n),i=sg(i);n>i&&(i+=Ld);var _=Math.atan2(h,o);return _<0&&(_+=Ld),_>=n&&_<=i||_+Ld>=n&&_+Ld<=i}function Nu(e,t,r,n,i,a){if(a>t&&a>n||a<t&&a<n||n===t)return 0;var l=(a-t)/(n-t),o=n<t?1:-1;(l===1||l===0)&&(o=n<t?.5:-.5);var h=l*(r-e)+e;return h===i?1/0:h>i?o:0}var yl=gc.CMD,Vu=Math.PI*2,oX=1e-4;function sX(e,t){return Math.abs(e-t)<oX}var qi=[-1,-1,-1],Wa=[-1,-1];function lX(){var e=Wa[0];Wa[0]=Wa[1],Wa[1]=e}function uX(e,t,r,n,i,a,l,o,h,d){if(d>t&&d>n&&d>a&&d>o||d<t&&d<n&&d<a&&d<o)return 0;var m=bL(t,n,a,o,d,qi);if(m===0)return 0;for(var g=0,_=-1,x=void 0,E=void 0,M=0;M<m;M++){var P=qi[M],I=P===0||P===1?.5:1,D=_i(e,r,i,l,P);D<h||(_<0&&(_=wL(t,n,a,o,Wa),Wa[1]<Wa[0]&&_>1&&lX(),x=_i(t,n,a,o,Wa[0]),_>1&&(E=_i(t,n,a,o,Wa[1]))),_===2?P<Wa[0]?g+=x<t?I:-I:P<Wa[1]?g+=E<x?I:-I:g+=o<E?I:-I:P<Wa[0]?g+=x<t?I:-I:g+=o<x?I:-I)}return g}function cX(e,t,r,n,i,a,l,o){if(o>t&&o>n&&o>a||o<t&&o<n&&o<a)return 0;var h=pW(t,n,a,o,qi);if(h===0)return 0;var d=SL(t,n,a);if(d>=0&&d<=1){for(var m=0,g=yi(t,n,a,d),_=0;_<h;_++){var x=qi[_]===0||qi[_]===1?.5:1,E=yi(e,r,i,qi[_]);E<l||(qi[_]<d?m+=g<t?x:-x:m+=a<g?x:-x)}return m}else{var x=qi[0]===0||qi[0]===1?.5:1,E=yi(e,r,i,qi[0]);return E<l?0:a<t?x:-x}}function hX(e,t,r,n,i,a,l,o){if(o-=t,o>r||o<-r)return 0;var h=Math.sqrt(r*r-o*o);qi[0]=-h,qi[1]=h;var d=Math.abs(n-i);if(d<1e-4)return 0;if(d>=Vu-1e-4){n=0,i=Vu;var m=a?1:-1;return l>=qi[0]+e&&l<=qi[1]+e?m:0}if(n>i){var g=n;n=i,i=g}n<0&&(n+=Vu,i+=Vu);for(var _=0,x=0;x<2;x++){var E=qi[x];if(E+e>l){var M=Math.atan2(o,E),m=a?1:-1;M<0&&(M=Vu+M),(M>=n&&M<=i||M+Vu>=n&&M+Vu<=i)&&(M>Math.PI/2&&M<Math.PI*1.5&&(m=-m),_+=m)}}return _}function r4(e,t,r,n,i){for(var a=e.data,l=e.len(),o=0,h=0,d=0,m=0,g=0,_,x,E=0;E<l;){var M=a[E++],P=E===1;switch(M===yl.M&&E>1&&(r||(o+=Nu(h,d,m,g,n,i))),P&&(h=a[E],d=a[E+1],m=h,g=d),M){case yl.M:m=a[E++],g=a[E++],h=m,d=g;break;case yl.L:if(r){if(Pl(h,d,a[E],a[E+1],t,n,i))return!0}else o+=Nu(h,d,a[E],a[E+1],n,i)||0;h=a[E++],d=a[E++];break;case yl.C:if(r){if(iX(h,d,a[E++],a[E++],a[E++],a[E++],a[E],a[E+1],t,n,i))return!0}else o+=uX(h,d,a[E++],a[E++],a[E++],a[E++],a[E],a[E+1],n,i)||0;h=a[E++],d=a[E++];break;case yl.Q:if(r){if(t4(h,d,a[E++],a[E++],a[E],a[E+1],t,n,i))return!0}else o+=cX(h,d,a[E++],a[E++],a[E],a[E+1],n,i)||0;h=a[E++],d=a[E++];break;case yl.A:var I=a[E++],D=a[E++],O=a[E++],F=a[E++],$=a[E++],q=a[E++];E+=1;var K=!!(1-a[E++]);_=Math.cos($)*O+I,x=Math.sin($)*F+D,P?(m=_,g=x):o+=Nu(h,d,_,x,n,i);var Z=(n-I)*F/O+I;if(r){if(aX(I,D,F,$,$+q,K,t,Z,i))return!0}else o+=hX(I,D,F,$,$+q,K,Z,i);h=Math.cos($+q)*O+I,d=Math.sin($+q)*F+D;break;case yl.R:m=h=a[E++],g=d=a[E++];var re=a[E++],ie=a[E++];if(_=m+re,x=g+ie,r){if(Pl(m,g,_,g,t,n,i)||Pl(_,g,_,x,t,n,i)||Pl(_,x,m,x,t,n,i)||Pl(m,x,m,g,t,n,i))return!0}else o+=Nu(_,g,_,x,n,i),o+=Nu(m,x,m,g,n,i);break;case yl.Z:if(r){if(Pl(h,d,m,g,t,n,i))return!0}else o+=Nu(h,d,m,g,n,i);h=m,d=g;break}}return!r&&!sX(d,g)&&(o+=Nu(h,d,m,g,n,i)||0),o!==0}function fX(e,t,r){return r4(e,0,!1,t,r)}function dX(e,t,r,n){return r4(e,t,!0,r,n)}var F_=yn({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},hc),pX={style:yn({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},Cy.style)},ux=$p.concat(["invisible","culling","z","z2","zlevel","parent"]),mX=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(h){r.buildPath(h,r.shape)}),i.silent=!0;var a=i.style;for(var l in n)a[l]!==n[l]&&(a[l]=n[l]);a.fill=n.fill?n.decal:null,a.decal=null,a.shadowColor=null,n.strokeFirst&&(a.stroke=null);for(var o=0;o<ux.length;++o)i[ux[o]]=this[ux[o]];i.__dirty|=Zo}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=Gr(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var a=0;a<n.length;a++){var l=n[a],o=r[l];l==="style"?this.style?Ct(this.style,o):this.useStyle(o):l==="shape"?Ct(this.shape,o):e.prototype.attrKV.call(this,l,o)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Jt(r)){var n=O_(r,0);return n>.5?Qb:n>.2?WW:ew}else if(r)return ew}return Qb},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Jt(n)){var i=this.__zr,a=!!(i&&i.isDarkMode()),l=O_(r,0)<Jb;if(a===l)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~Th},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new gc(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var a=!1;this.path||(a=!0,this.createPathProxy());var l=this.path;(a||this.__dirty&Th)&&(l.beginPath(),this.buildPath(l,this.shape,!1),this.pathUpdated()),r=l.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){o.copy(r);var h=n.strokeNoScale?this.getLineScale():1,d=n.lineWidth;if(!this.hasFill()){var m=this.strokeContainThreshold;d=Math.max(d,m==null?4:m)}h>1e-10&&(o.width+=d/h,o.height+=d/h,o.x-=d/h/2,o.y-=d/h/2)}return o}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect(),l=this.style;if(r=i[0],n=i[1],a.contain(r,n)){var o=this.path;if(this.hasStroke()){var h=l.lineWidth,d=l.strokeNoScale?this.getLineScale():1;if(d>1e-10&&(this.hasFill()||(h=Math.max(h,this.strokeContainThreshold)),dX(o,h/d,r,n)))return!0}if(this.hasFill())return fX(o,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=Th,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:Ct(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&Th)},t.prototype.createStyle=function(r){return by(F_,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=Ct({},this.shape))},t.prototype._applyStateObj=function(r,n,i,a,l,o){e.prototype._applyStateObj.call(this,r,n,i,a,l,o);var h=!(n&&a),d;if(n&&n.shape?l?a?d=n.shape:(d=Ct({},i.shape),Ct(d,n.shape)):(d=Ct({},a?this.shape:i.shape),Ct(d,n.shape)):h&&(d=i.shape),d)if(l){this.shape=Ct({},this.shape);for(var m={},g=Gr(d),_=0;_<g.length;_++){var x=g[_];typeof d[x]=="object"?this.shape[x]=d[x]:m[x]=d[x]}this._transitionState(r,{shape:m},o)}else this.shape=d,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,a=0;a<r.length;a++){var l=r[a];l.shape&&(i=i||{},this._mergeStyle(i,l.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return pX},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(a){Vt(l,a);function l(o){var h=a.call(this,o)||this;return r.init&&r.init.call(h,o),h}return l.prototype.getDefaultStyle=function(){return Ur(r.style)},l.prototype.getDefaultShape=function(){return Ur(r.shape)},l}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=Zo|Kd|Th}(),t}(ym);const nn=mX;var vX=yn({strokeFirst:!0,font:Hl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},F_),n4=function(e){Vt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return by(vX,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=G2(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var a=r.lineWidth;i.x-=a/2,i.y-=a/2,i.width+=a,i.height+=a}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(ym);n4.prototype.type="tspan";const N_=n4;var gX=yn({x:0,y:0},hc),_X={style:yn({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},Cy.style)};function yX(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var i4=function(e){Vt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return by(gX,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var a=yX(n.image)?n.image:this.__image;if(!a)return 0;var l=r==="width"?"height":"width",o=n[l];return o==null?a[r]:a[r]/a[l]*o},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return _X},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new _n(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(ym);i4.prototype.type="image";const js=i4;function xX(e,t){var r=t.x,n=t.y,i=t.width,a=t.height,l=t.r,o,h,d,m;i<0&&(r=r+i,i=-i),a<0&&(n=n+a,a=-a),typeof l=="number"?o=h=d=m=l:l instanceof Array?l.length===1?o=h=d=m=l[0]:l.length===2?(o=d=l[0],h=m=l[1]):l.length===3?(o=l[0],h=m=l[1],d=l[2]):(o=l[0],h=l[1],d=l[2],m=l[3]):o=h=d=m=0;var g;o+h>i&&(g=o+h,o*=i/g,h*=i/g),d+m>i&&(g=d+m,d*=i/g,m*=i/g),h+d>a&&(g=h+d,h*=a/g,d*=a/g),o+m>a&&(g=o+m,o*=a/g,m*=a/g),e.moveTo(r+o,n),e.lineTo(r+i-h,n),h!==0&&e.arc(r+i-h,n+h,h,-Math.PI/2,0),e.lineTo(r+i,n+a-d),d!==0&&e.arc(r+i-d,n+a-d,d,0,Math.PI/2),e.lineTo(r+m,n+a),m!==0&&e.arc(r+m,n+a-m,m,Math.PI/2,Math.PI),e.lineTo(r,n+o),o!==0&&e.arc(r+o,n+o,o,Math.PI,Math.PI*1.5)}var Lh=Math.round;function a4(e,t,r){if(!!t){var n=t.x1,i=t.x2,a=t.y1,l=t.y2;e.x1=n,e.x2=i,e.y1=a,e.y2=l;var o=r&&r.lineWidth;return o&&(Lh(n*2)===Lh(i*2)&&(e.x1=e.x2=oc(n,o,!0)),Lh(a*2)===Lh(l*2)&&(e.y1=e.y2=oc(a,o,!0))),e}}function o4(e,t,r){if(!!t){var n=t.x,i=t.y,a=t.width,l=t.height;e.x=n,e.y=i,e.width=a,e.height=l;var o=r&&r.lineWidth;return o&&(e.x=oc(n,o,!0),e.y=oc(i,o,!0),e.width=Math.max(oc(n+a,o,!1)-e.x,a===0?0:1),e.height=Math.max(oc(i+l,o,!1)-e.y,l===0?0:1)),e}}function oc(e,t,r){if(!t)return e;var n=Lh(e*2);return(n+Lh(t))%2===0?n/2:(n+(r?1:-1))/2}var bX=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),wX={},s4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new bX},t.prototype.buildPath=function(r,n){var i,a,l,o;if(this.subPixelOptimize){var h=o4(wX,n,this.style);i=h.x,a=h.y,l=h.width,o=h.height,h.r=n.r,n=h}else i=n.x,a=n.y,l=n.width,o=n.height;n.r?xX(r,n):r.rect(i,a,l,o)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(nn);s4.prototype.type="rect";const fa=s4;var sP={fill:"#000"},lP=2,SX={style:yn({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},Cy.style)},l4=function(e){Vt(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=sP,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,CX(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new _n(0,0,0,0),n=this._children,i=[],a=null,l=0;l<n.length;l++){var o=n[l],h=o.getBoundingRect(),d=o.getLocalTransform(i);d?(r.copy(h),r.applyTransform(d),a=a||r.clone(),a.union(r)):(a=a||h.clone(),a.union(h))}this._rect=a||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||sP},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,a=r.rich||i&&{};return Ct(r,n),i&&a?(this._mergeRich(a,i),r.rich=a):a&&(r.rich=a),r},t.prototype._mergeRich=function(r,n){for(var i=Gr(n),a=0;a<i.length;a++){var l=i[a];r[l]=r[l]||{},Ct(r[l],n[l])}},t.prototype.getAnimationStyleProps=function(){return SX},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||Hl,i=r.padding,a=mP(r),l=jZ(a,r),o=cx(r),h=!!r.backgroundColor,d=l.outerHeight,m=l.outerWidth,g=l.contentWidth,_=l.lines,x=l.lineHeight,E=this._defaultStyle,M=r.x||0,P=r.y||0,I=r.align||E.align||"left",D=r.verticalAlign||E.verticalAlign||"top",O=M,F=Eh(P,l.contentHeight,D);if(o||i){var $=Qd(M,m,I),q=Eh(P,d,D);o&&this._renderBackground(r,r,$,q,m,d)}F+=x/2,i&&(O=pP(M,I,i),D==="top"?F+=i[0]:D==="bottom"&&(F-=i[2]));for(var K=0,Z=!1,re=dP("fill"in r?r.fill:(Z=!0,E.fill)),ie=fP("stroke"in r?r.stroke:!h&&(!E.autoStroke||Z)?(K=lP,E.stroke):null),ce=r.textShadowBlur>0,le=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),fe=l.calculatedLineHeight,ye=0;ye<_.length;ye++){var Ne=this._getOrCreateChild(N_),be=Ne.createStyle();Ne.useStyle(be),be.text=_[ye],be.x=O,be.y=F,I&&(be.textAlign=I),be.textBaseline="middle",be.opacity=r.opacity,be.strokeFirst=!0,ce&&(be.shadowBlur=r.textShadowBlur||0,be.shadowColor=r.textShadowColor||"transparent",be.shadowOffsetX=r.textShadowOffsetX||0,be.shadowOffsetY=r.textShadowOffsetY||0),be.stroke=ie,be.fill=re,ie&&(be.lineWidth=r.lineWidth||K,be.lineDash=r.lineDash,be.lineDashOffset=r.lineDashOffset||0),be.font=n,cP(be,r),F+=x,le&&Ne.setBoundingRect(new _n(Qd(be.x,r.width,be.textAlign),Eh(be.y,fe,be.textBaseline),g,fe))}},t.prototype._updateRichTexts=function(){var r=this.style,n=mP(r),i=qZ(n,r),a=i.width,l=i.outerWidth,o=i.outerHeight,h=r.padding,d=r.x||0,m=r.y||0,g=this._defaultStyle,_=r.align||g.align,x=r.verticalAlign||g.verticalAlign,E=Qd(d,l,_),M=Eh(m,o,x),P=E,I=M;h&&(P+=h[3],I+=h[0]);var D=P+a;cx(r)&&this._renderBackground(r,r,E,M,l,o);for(var O=!!r.backgroundColor,F=0;F<i.lines.length;F++){for(var $=i.lines[F],q=$.tokens,K=q.length,Z=$.lineHeight,re=$.width,ie=0,ce=P,le=D,fe=K-1,ye=void 0;ie<K&&(ye=q[ie],!ye.align||ye.align==="left");)this._placeToken(ye,r,Z,I,ce,"left",O),re-=ye.width,ce+=ye.width,ie++;for(;fe>=0&&(ye=q[fe],ye.align==="right");)this._placeToken(ye,r,Z,I,le,"right",O),re-=ye.width,le-=ye.width,fe--;for(ce+=(a-(ce-P)-(D-le)-re)/2;ie<=fe;)ye=q[ie],this._placeToken(ye,r,Z,I,ce+ye.width/2,"center",O),ce+=ye.width,ie++;I+=Z}},t.prototype._placeToken=function(r,n,i,a,l,o,h){var d=n.rich[r.styleName]||{};d.text=r.text;var m=r.verticalAlign,g=a+i/2;m==="top"?g=a+r.height/2:m==="bottom"&&(g=a+i-r.height/2);var _=!r.isLineHolder&&cx(d);_&&this._renderBackground(d,n,o==="right"?l-r.width:o==="center"?l-r.width/2:l,g-r.height/2,r.width,r.height);var x=!!d.backgroundColor,E=r.textPadding;E&&(l=pP(l,o,E),g-=r.height/2-E[0]-r.innerHeight/2);var M=this._getOrCreateChild(N_),P=M.createStyle();M.useStyle(P);var I=this._defaultStyle,D=!1,O=0,F=dP("fill"in d?d.fill:"fill"in n?n.fill:(D=!0,I.fill)),$=fP("stroke"in d?d.stroke:"stroke"in n?n.stroke:!x&&!h&&(!I.autoStroke||D)?(O=lP,I.stroke):null),q=d.textShadowBlur>0||n.textShadowBlur>0;P.text=r.text,P.x=l,P.y=g,q&&(P.shadowBlur=d.textShadowBlur||n.textShadowBlur||0,P.shadowColor=d.textShadowColor||n.textShadowColor||"transparent",P.shadowOffsetX=d.textShadowOffsetX||n.textShadowOffsetX||0,P.shadowOffsetY=d.textShadowOffsetY||n.textShadowOffsetY||0),P.textAlign=o,P.textBaseline="middle",P.font=r.font||Hl,P.opacity=Ng(d.opacity,n.opacity,1),cP(P,d),$&&(P.lineWidth=Ng(d.lineWidth,n.lineWidth,O),P.lineDash=Lr(d.lineDash,n.lineDash),P.lineDashOffset=n.lineDashOffset||0,P.stroke=$),F&&(P.fill=F);var K=r.contentWidth,Z=r.contentHeight;M.setBoundingRect(new _n(Qd(P.x,K,P.textAlign),Eh(P.y,Z,P.textBaseline),K,Z))},t.prototype._renderBackground=function(r,n,i,a,l,o){var h=r.backgroundColor,d=r.borderWidth,m=r.borderColor,g=h&&h.image,_=h&&!g,x=r.borderRadius,E=this,M,P;if(_||r.lineHeight||d&&m){M=this._getOrCreateChild(fa),M.useStyle(M.createStyle()),M.style.fill=null;var I=M.shape;I.x=i,I.y=a,I.width=l,I.height=o,I.r=x,M.dirtyShape()}if(_){var D=M.style;D.fill=h||null,D.fillOpacity=Lr(r.fillOpacity,1)}else if(g){P=this._getOrCreateChild(js),P.onload=function(){E.dirtyStyle()};var O=P.style;O.image=h.image,O.x=i,O.y=a,O.width=l,O.height=o}if(d&&m){var D=M.style;D.lineWidth=d,D.stroke=m,D.strokeOpacity=Lr(r.strokeOpacity,1),D.lineDash=r.borderDash,D.lineDashOffset=r.borderDashOffset||0,M.strokeContainThreshold=0,M.hasFill()&&M.hasStroke()&&(D.strokeFirst=!0,D.lineWidth*=2)}var F=(M||P).style;F.shadowBlur=r.shadowBlur||0,F.shadowColor=r.shadowColor||"transparent",F.shadowOffsetX=r.shadowOffsetX||0,F.shadowOffsetY=r.shadowOffsetY||0,F.opacity=Ng(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return c4(r)&&(n=[r.fontStyle,r.fontWeight,u4(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&Ko(n)||r.textFont||r.font},t}(ym),TX={left:!0,right:1,center:1},EX={top:1,bottom:1,middle:1},uP=["fontStyle","fontWeight","fontSize","fontFamily"];function u4(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?k2+"px":e+"px"}function cP(e,t){for(var r=0;r<uP.length;r++){var n=uP[r],i=t[n];i!=null&&(e[n]=i)}}function c4(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function CX(e){return hP(e),Ce(e.rich,hP),e}function hP(e){if(e){e.font=l4.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||TX[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||EX[r]?r:"top";var n=e.padding;n&&(e.padding=lL(e.padding))}}function fP(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function dP(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function pP(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function mP(e){var t=e.text;return t!=null&&(t+=""),t}function cx(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const Io=l4;var bn=ni(),AX=function(e,t,r,n){if(n){var i=bn(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(a){var l=bn(a);l.seriesIndex=e,l.dataIndex=r,l.dataType=t})}},vP=1,gP={},h4=ni(),K2=ni(),f4=0,J2=1,Q2=2,rs=["emphasis","blur","select"],_P=["normal","emphasis","blur","select"],IX=10,PX=9,fc="highlight",Zg="downplay",yp="select",Xg="unselect",xp="toggleSelect";function fh(e){return e!=null&&e!=="none"}var yP=new mm(100);function xP(e){if(Jt(e)){var t=yP.get(e);return t||(t=RI(e,-.1),yP.put(e,t)),t}else if(R2(e)){var r=Ct({},e);return r.colorStops=nr(e.colorStops,function(n){return{offset:n.offset,color:RI(n.color,-.1)}}),r}return e}function Ay(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function d4(e){Ay(e,"emphasis",Q2)}function p4(e){e.hoverState===Q2&&Ay(e,"normal",f4)}function eS(e){Ay(e,"blur",J2)}function m4(e){e.hoverState===J2&&Ay(e,"normal",f4)}function MX(e){e.selected=!0}function DX(e){e.selected=!1}function bP(e,t,r){t(e,r)}function Hs(e,t,r){bP(e,t,r),e.isGroup&&e.traverse(function(n){bP(n,t,r)})}function kX(e,t,r,n){for(var i=e.style,a={},l=0;l<t.length;l++){var o=t[l],h=i[o];a[o]=h==null?n&&n[o]:h}for(var l=0;l<e.animators.length;l++){var d=e.animators[l];d.__fromStateTransition&&d.__fromStateTransition.indexOf(r)<0&&d.targetName==="style"&&d.saveTo(a,t)}return a}function LX(e,t,r,n){var i=r&&gn(r,"select")>=0,a=!1;if(e instanceof nn){var l=h4(e),o=i&&l.selectFill||l.normalFill,h=i&&l.selectStroke||l.normalStroke;if(fh(o)||fh(h)){n=n||{};var d=n.style||{};d.fill==="inherit"?(a=!0,n=Ct({},n),d=Ct({},d),d.fill=o):!fh(d.fill)&&fh(o)?(a=!0,n=Ct({},n),d=Ct({},d),d.fill=xP(o)):!fh(d.stroke)&&fh(h)&&(a||(n=Ct({},n),d=Ct({},d)),d.stroke=xP(h)),n.style=d}}if(n&&n.z2==null){a||(n=Ct({},n));var m=e.z2EmphasisLift;n.z2=e.z2+(m!=null?m:IX)}return n}function OX(e,t,r){if(r&&r.z2==null){r=Ct({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:PX)}return r}function RX(e,t,r){var n=gn(e.currentStates,t)>=0,i=e.style.opacity,a=n?null:kX(e,["opacity"],t,{opacity:1});r=r||{};var l=r.style||{};return l.opacity==null&&(r=Ct({},r),l=Ct({opacity:n?i:a.opacity*.1},l),r.style=l),r}function hx(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return LX(this,e,t,r);if(e==="blur")return RX(this,e,r);if(e==="select")return OX(this,e,r)}return r}function zX(e){e.stateProxy=hx;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=hx),r&&(r.stateProxy=hx)}function wP(e,t){!y4(e,t)&&!e.__highByOuter&&Hs(e,d4)}function SP(e,t){!y4(e,t)&&!e.__highByOuter&&Hs(e,p4)}function qp(e,t){e.__highByOuter|=1<<(t||0),Hs(e,d4)}function Wp(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Hs(e,p4)}function BX(e){Hs(e,eS)}function v4(e){Hs(e,m4)}function g4(e){Hs(e,MX)}function _4(e){Hs(e,DX)}function y4(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function x4(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,a){var l=K2(a),o=i==="series",h=o?e.getViewOfSeriesModel(a):e.getViewOfComponentModel(a);!o&&n.push(h),l.isBlured&&(h.group.traverse(function(d){m4(d)}),o&&r.push(a)),l.isBlured=!1}),Ce(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function aw(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function a(d,m){for(var g=0;g<m.length;g++){var _=d.getItemGraphicEl(m[g]);_&&v4(_)}}if(e!=null&&!(!t||t==="none")){var l=i.getSeriesByIndex(e),o=l.coordinateSystem;o&&o.master&&(o=o.master);var h=[];i.eachSeries(function(d){var m=l===d,g=d.coordinateSystem;g&&g.master&&(g=g.master);var _=g&&o?g===o:m;if(!(r==="series"&&!m||r==="coordinateSystem"&&!_||t==="series"&&m)){var x=n.getViewOfSeriesModel(d);if(x.group.traverse(function(P){eS(P)}),pa(t))a(d.getData(),t);else if(ar(t))for(var E=Gr(t),M=0;M<E.length;M++)a(d.getData(E[M]),t[E[M]]);h.push(d),K2(d).isBlured=!0}}),i.eachComponent(function(d,m){if(d!=="series"){var g=n.getViewOfComponentModel(m);g&&g.toggleBlurSeries&&g.toggleBlurSeries(h,!0,i)}})}}function ow(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){K2(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(a){eS(a)})}}}function FX(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var a=gm(i,t);a=(Gt(a)?a[0]:a)||0;var l=i.getItemGraphicEl(a);if(!l)for(var o=i.count(),h=0;!l&&h<o;)l=i.getItemGraphicEl(h++);if(l){var d=bn(l);aw(n,d.focus,d.blurScope,r)}else{var m=e.get(["emphasis","focus"]),g=e.get(["emphasis","blurScope"]);m!=null&&aw(n,m,g,r)}}}function tS(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var a=n.getModel().getComponent(e,t);if(!a)return i;var l=n.getViewOfComponentModel(a);if(!l||!l.findHighDownDispatchers)return i;for(var o=l.findHighDownDispatchers(r),h,d=0;d<o.length;d++)if(bn(o[d]).focus==="self"){h=!0;break}return{focusSelf:h,dispatchers:o}}function NX(e,t,r){var n=bn(e),i=tS(n.componentMainType,n.componentIndex,n.componentHighDownName,r),a=i.dispatchers,l=i.focusSelf;a?(l&&ow(n.componentMainType,n.componentIndex,r),Ce(a,function(o){return wP(o,t)})):(aw(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&ow(n.componentMainType,n.componentIndex,r),wP(e,t))}function VX(e,t,r){x4(r);var n=bn(e),i=tS(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?Ce(i,function(a){return SP(a,t)}):SP(e,t)}function UX(e,t,r){if(!!lw(t)){var n=t.dataType,i=e.getData(n),a=gm(i,t);Gt(a)||(a=[a]),e[t.type===xp?"toggleSelect":t.type===yp?"select":"unselect"](a,n)}}function TP(e){var t=e.getAllData();Ce(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(a,l){e.isSelected(l,i)?g4(a):_4(a)})})}function $X(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();Ce(n,function(i){i.data;var a=i.type,l=r.getSelectedDataIndices();if(l.length>0){var o={dataIndex:l,seriesIndex:r.seriesIndex};a!=null&&(o.dataType=a),t.push(o)}})}),t}function jX(e,t,r){b4(e,!0),Hs(e,zX),GX(e,t,r)}function HX(e){b4(e,!1)}function rS(e,t,r,n){n?HX(e):jX(e,t,r)}function GX(e,t,r){var n=bn(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}function b4(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function sw(e){return!!(e&&e.__highDownDispatcher)}function qX(e){var t=gP[e];return t==null&&vP<=32&&(t=gP[e]=vP++),t}function lw(e){var t=e.type;return t===yp||t===Xg||t===xp}function EP(e){var t=e.type;return t===fc||t===Zg}function WX(e){var t=h4(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var dh=gc.CMD,ZX=[[],[],[]],CP=Math.sqrt,XX=Math.atan2;function YX(e,t){if(!!t){var r=e.data,n=e.len(),i,a,l,o,h,d,m=dh.M,g=dh.C,_=dh.L,x=dh.R,E=dh.A,M=dh.Q;for(l=0,o=0;l<n;){switch(i=r[l++],o=l,a=0,i){case m:a=1;break;case _:a=1;break;case g:a=3;break;case M:a=2;break;case E:var P=t[4],I=t[5],D=CP(t[0]*t[0]+t[1]*t[1]),O=CP(t[2]*t[2]+t[3]*t[3]),F=XX(-t[1]/O,t[0]/D);r[l]*=D,r[l++]+=P,r[l]*=O,r[l++]+=I,r[l++]*=D,r[l++]*=O,r[l++]+=F,r[l++]+=F,l+=2,o=l;break;case x:d[0]=r[l++],d[1]=r[l++],ro(d,d,t),r[o++]=d[0],r[o++]=d[1],d[0]+=r[l++],d[1]+=r[l++],ro(d,d,t),r[o++]=d[0],r[o++]=d[1]}for(h=0;h<a;h++){var $=ZX[h];$[0]=r[l++],$[1]=r[l++],ro($,$,t),r[o++]=$[0],r[o++]=$[1]}}e.increaseVersion()}}var fx=Math.sqrt,lg=Math.sin,ug=Math.cos,Od=Math.PI;function AP(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function uw(e,t){return(e[0]*t[0]+e[1]*t[1])/(AP(e)*AP(t))}function IP(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(uw(e,t))}function PP(e,t,r,n,i,a,l,o,h,d,m){var g=h*(Od/180),_=ug(g)*(e-r)/2+lg(g)*(t-n)/2,x=-1*lg(g)*(e-r)/2+ug(g)*(t-n)/2,E=_*_/(l*l)+x*x/(o*o);E>1&&(l*=fx(E),o*=fx(E));var M=(i===a?-1:1)*fx((l*l*(o*o)-l*l*(x*x)-o*o*(_*_))/(l*l*(x*x)+o*o*(_*_)))||0,P=M*l*x/o,I=M*-o*_/l,D=(e+r)/2+ug(g)*P-lg(g)*I,O=(t+n)/2+lg(g)*P+ug(g)*I,F=IP([1,0],[(_-P)/l,(x-I)/o]),$=[(_-P)/l,(x-I)/o],q=[(-1*_-P)/l,(-1*x-I)/o],K=IP($,q);if(uw($,q)<=-1&&(K=Od),uw($,q)>=1&&(K=0),K<0){var Z=Math.round(K/Od*1e6)/1e6;K=Od*2+Z%2*Od}m.addData(d,D,O,l,o,F,K,g,a)}var KX=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,JX=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function QX(e){var t=new gc;if(!e)return t;var r=0,n=0,i=r,a=n,l,o=gc.CMD,h=e.match(KX);if(!h)return t;for(var d=0;d<h.length;d++){for(var m=h[d],g=m.charAt(0),_=void 0,x=m.match(JX)||[],E=x.length,M=0;M<E;M++)x[M]=parseFloat(x[M]);for(var P=0;P<E;){var I=void 0,D=void 0,O=void 0,F=void 0,$=void 0,q=void 0,K=void 0,Z=r,re=n,ie=void 0,ce=void 0;switch(g){case"l":r+=x[P++],n+=x[P++],_=o.L,t.addData(_,r,n);break;case"L":r=x[P++],n=x[P++],_=o.L,t.addData(_,r,n);break;case"m":r+=x[P++],n+=x[P++],_=o.M,t.addData(_,r,n),i=r,a=n,g="l";break;case"M":r=x[P++],n=x[P++],_=o.M,t.addData(_,r,n),i=r,a=n,g="L";break;case"h":r+=x[P++],_=o.L,t.addData(_,r,n);break;case"H":r=x[P++],_=o.L,t.addData(_,r,n);break;case"v":n+=x[P++],_=o.L,t.addData(_,r,n);break;case"V":n=x[P++],_=o.L,t.addData(_,r,n);break;case"C":_=o.C,t.addData(_,x[P++],x[P++],x[P++],x[P++],x[P++],x[P++]),r=x[P-2],n=x[P-1];break;case"c":_=o.C,t.addData(_,x[P++]+r,x[P++]+n,x[P++]+r,x[P++]+n,x[P++]+r,x[P++]+n),r+=x[P-2],n+=x[P-1];break;case"S":I=r,D=n,ie=t.len(),ce=t.data,l===o.C&&(I+=r-ce[ie-4],D+=n-ce[ie-3]),_=o.C,Z=x[P++],re=x[P++],r=x[P++],n=x[P++],t.addData(_,I,D,Z,re,r,n);break;case"s":I=r,D=n,ie=t.len(),ce=t.data,l===o.C&&(I+=r-ce[ie-4],D+=n-ce[ie-3]),_=o.C,Z=r+x[P++],re=n+x[P++],r+=x[P++],n+=x[P++],t.addData(_,I,D,Z,re,r,n);break;case"Q":Z=x[P++],re=x[P++],r=x[P++],n=x[P++],_=o.Q,t.addData(_,Z,re,r,n);break;case"q":Z=x[P++]+r,re=x[P++]+n,r+=x[P++],n+=x[P++],_=o.Q,t.addData(_,Z,re,r,n);break;case"T":I=r,D=n,ie=t.len(),ce=t.data,l===o.Q&&(I+=r-ce[ie-4],D+=n-ce[ie-3]),r=x[P++],n=x[P++],_=o.Q,t.addData(_,I,D,r,n);break;case"t":I=r,D=n,ie=t.len(),ce=t.data,l===o.Q&&(I+=r-ce[ie-4],D+=n-ce[ie-3]),r+=x[P++],n+=x[P++],_=o.Q,t.addData(_,I,D,r,n);break;case"A":O=x[P++],F=x[P++],$=x[P++],q=x[P++],K=x[P++],Z=r,re=n,r=x[P++],n=x[P++],_=o.A,PP(Z,re,r,n,q,K,O,F,$,_,t);break;case"a":O=x[P++],F=x[P++],$=x[P++],q=x[P++],K=x[P++],Z=r,re=n,r+=x[P++],n+=x[P++],_=o.A,PP(Z,re,r,n,q,K,O,F,$,_,t);break}}(g==="z"||g==="Z")&&(_=o.Z,t.addData(_),r=i,n=a),l=_}return t.toStatic(),t}var w4=function(e){Vt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(nn);function S4(e){return e.setData!=null}function T4(e,t){var r=QX(e),n=Ct({},t);return n.buildPath=function(i){if(S4(i)){i.setData(r.data);var a=i.getContext();a&&i.rebuildPath(a,1)}else{var a=i;r.rebuildPath(a,1)}},n.applyTransform=function(i){YX(r,i),this.dirtyShape()},n}function eY(e,t){return new w4(T4(e,t))}function tY(e,t){var r=T4(e,t),n=function(i){Vt(a,i);function a(l){var o=i.call(this,l)||this;return o.applyTransform=r.applyTransform,o.buildPath=r.buildPath,o}return a}(w4);return n}function rY(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var a=e[i];r.push(a.getUpdatedPathProxy(!0))}var l=new nn(t);return l.createPathProxy(),l.buildPath=function(o){if(S4(o)){o.appendPath(r);var h=o.getContext();h&&o.rebuildPath(h,1)}},l}var nY=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),E4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new nY},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(nn);E4.prototype.type="circle";const nS=E4;var iY=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),C4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new iY},t.prototype.buildPath=function(r,n){var i=.5522848,a=n.cx,l=n.cy,o=n.rx,h=n.ry,d=o*i,m=h*i;r.moveTo(a-o,l),r.bezierCurveTo(a-o,l-m,a-d,l-h,a,l-h),r.bezierCurveTo(a+d,l-h,a+o,l-m,a+o,l),r.bezierCurveTo(a+o,l+m,a+d,l+h,a,l+h),r.bezierCurveTo(a-d,l+h,a-o,l+m,a-o,l),r.closePath()},t}(nn);C4.prototype.type="ellipse";const A4=C4;var I4=Math.PI,dx=I4*2,Uu=Math.sin,ph=Math.cos,aY=Math.acos,Pi=Math.atan2,MP=Math.abs,bp=Math.sqrt,ep=Math.max,Go=Math.min,go=1e-4;function oY(e,t,r,n,i,a,l,o){var h=r-e,d=n-t,m=l-i,g=o-a,_=g*h-m*d;if(!(_*_<go))return _=(m*(t-a)-g*(e-i))/_,[e+_*h,t+_*d]}function cg(e,t,r,n,i,a,l){var o=e-r,h=t-n,d=(l?a:-a)/bp(o*o+h*h),m=d*h,g=-d*o,_=e+m,x=t+g,E=r+m,M=n+g,P=(_+E)/2,I=(x+M)/2,D=E-_,O=M-x,F=D*D+O*O,$=i-a,q=_*M-E*x,K=(O<0?-1:1)*bp(ep(0,$*$*F-q*q)),Z=(q*O-D*K)/F,re=(-q*D-O*K)/F,ie=(q*O+D*K)/F,ce=(-q*D+O*K)/F,le=Z-P,fe=re-I,ye=ie-P,Ne=ce-I;return le*le+fe*fe>ye*ye+Ne*Ne&&(Z=ie,re=ce),{cx:Z,cy:re,x0:-m,y0:-g,x1:Z*(i/$-1),y1:re*(i/$-1)}}function sY(e){var t;if(Gt(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function lY(e,t){var r,n=ep(t.r,0),i=ep(t.r0||0,0),a=n>0,l=i>0;if(!(!a&&!l)){if(a||(n=i,i=0),i>n){var o=n;n=i,i=o}var h=t.startAngle,d=t.endAngle;if(!(isNaN(h)||isNaN(d))){var m=t.cx,g=t.cy,_=!!t.clockwise,x=MP(d-h),E=x>dx&&x%dx;if(E>go&&(x=E),!(n>go))e.moveTo(m,g);else if(x>dx-go)e.moveTo(m+n*ph(h),g+n*Uu(h)),e.arc(m,g,n,h,d,!_),i>go&&(e.moveTo(m+i*ph(d),g+i*Uu(d)),e.arc(m,g,i,d,h,_));else{var M=void 0,P=void 0,I=void 0,D=void 0,O=void 0,F=void 0,$=void 0,q=void 0,K=void 0,Z=void 0,re=void 0,ie=void 0,ce=void 0,le=void 0,fe=void 0,ye=void 0,Ne=n*ph(h),be=n*Uu(h),et=i*ph(d),tt=i*Uu(d),wt=x>go;if(wt){var Rt=t.cornerRadius;Rt&&(r=sY(Rt),M=r[0],P=r[1],I=r[2],D=r[3]);var Qt=MP(n-i)/2;if(O=Go(Qt,I),F=Go(Qt,D),$=Go(Qt,M),q=Go(Qt,P),re=K=ep(O,F),ie=Z=ep($,q),(K>go||Z>go)&&(ce=n*ph(d),le=n*Uu(d),fe=i*ph(h),ye=i*Uu(h),x<I4)){var Ut=oY(Ne,be,fe,ye,ce,le,et,tt);if(Ut){var vr=Ne-Ut[0],yr=be-Ut[1],$e=ce-Ut[0],pt=le-Ut[1],it=1/Uu(aY((vr*$e+yr*pt)/(bp(vr*vr+yr*yr)*bp($e*$e+pt*pt)))/2),dt=bp(Ut[0]*Ut[0]+Ut[1]*Ut[1]);re=Go(K,(n-dt)/(it+1)),ie=Go(Z,(i-dt)/(it-1))}}}if(!wt)e.moveTo(m+Ne,g+be);else if(re>go){var Dt=Go(I,re),qt=Go(D,re),ot=cg(fe,ye,Ne,be,n,Dt,_),lt=cg(ce,le,et,tt,n,qt,_);e.moveTo(m+ot.cx+ot.x0,g+ot.cy+ot.y0),re<K&&Dt===qt?e.arc(m+ot.cx,g+ot.cy,re,Pi(ot.y0,ot.x0),Pi(lt.y0,lt.x0),!_):(Dt>0&&e.arc(m+ot.cx,g+ot.cy,Dt,Pi(ot.y0,ot.x0),Pi(ot.y1,ot.x1),!_),e.arc(m,g,n,Pi(ot.cy+ot.y1,ot.cx+ot.x1),Pi(lt.cy+lt.y1,lt.cx+lt.x1),!_),qt>0&&e.arc(m+lt.cx,g+lt.cy,qt,Pi(lt.y1,lt.x1),Pi(lt.y0,lt.x0),!_))}else e.moveTo(m+Ne,g+be),e.arc(m,g,n,h,d,!_);if(!(i>go)||!wt)e.lineTo(m+et,g+tt);else if(ie>go){var Dt=Go(M,ie),qt=Go(P,ie),ot=cg(et,tt,ce,le,i,-qt,_),lt=cg(Ne,be,fe,ye,i,-Dt,_);e.lineTo(m+ot.cx+ot.x0,g+ot.cy+ot.y0),ie<Z&&Dt===qt?e.arc(m+ot.cx,g+ot.cy,ie,Pi(ot.y0,ot.x0),Pi(lt.y0,lt.x0),!_):(qt>0&&e.arc(m+ot.cx,g+ot.cy,qt,Pi(ot.y0,ot.x0),Pi(ot.y1,ot.x1),!_),e.arc(m,g,i,Pi(ot.cy+ot.y1,ot.cx+ot.x1),Pi(lt.cy+lt.y1,lt.cx+lt.x1),_),Dt>0&&e.arc(m+lt.cx,g+lt.cy,Dt,Pi(lt.y1,lt.x1),Pi(lt.y0,lt.x0),!_))}else e.lineTo(m+et,g+tt),e.arc(m,g,i,d,h,_)}e.closePath()}}}var uY=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),P4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new uY},t.prototype.buildPath=function(r,n){lY(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(nn);P4.prototype.type="sector";const iS=P4;var cY=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),M4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new cY},t.prototype.buildPath=function(r,n){var i=n.cx,a=n.cy,l=Math.PI*2;r.moveTo(i+n.r,a),r.arc(i,a,n.r,0,l,!1),r.moveTo(i+n.r0,a),r.arc(i,a,n.r0,0,l,!0)},t}(nn);M4.prototype.type="ring";const D4=M4;function hY(e,t,r,n){var i=[],a=[],l=[],o=[],h,d,m,g;if(n){m=[1/0,1/0],g=[-1/0,-1/0];for(var _=0,x=e.length;_<x;_++)Mh(m,m,e[_]),Dh(g,g,e[_]);Mh(m,m,n[0]),Dh(g,g,n[1])}for(var _=0,x=e.length;_<x;_++){var E=e[_];if(r)h=e[_?_-1:x-1],d=e[(_+1)%x];else if(_===0||_===x-1){i.push(Bq(e[_]));continue}else h=e[_-1],d=e[_+1];cL(a,d,h),k1(a,a,t);var M=Vb(E,h),P=Vb(E,d),I=M+P;I!==0&&(M/=I,P/=I),k1(l,a,-M),k1(o,a,P);var D=xI([],E,l),O=xI([],E,o);n&&(Dh(D,D,m),Mh(D,D,g),Dh(O,O,m),Mh(O,O,g)),i.push(D),i.push(O)}return r&&i.push(i.shift()),i}function k4(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var a=hY(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var l=i.length,o=0;o<(r?l:l-1);o++){var h=a[o*2],d=a[o*2+1],m=i[(o+1)%l];e.bezierCurveTo(h[0],h[1],d[0],d[1],m[0],m[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var o=1,g=i.length;o<g;o++)e.lineTo(i[o][0],i[o][1])}r&&e.closePath()}}var fY=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),L4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new fY},t.prototype.buildPath=function(r,n){k4(r,n,!0)},t}(nn);L4.prototype.type="polygon";const O4=L4;var dY=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),R4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new dY},t.prototype.buildPath=function(r,n){k4(r,n,!1)},t}(nn);R4.prototype.type="polyline";const aS=R4;var pY={},mY=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),z4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new mY},t.prototype.buildPath=function(r,n){var i,a,l,o;if(this.subPixelOptimize){var h=a4(pY,n,this.style);i=h.x1,a=h.y1,l=h.x2,o=h.y2}else i=n.x1,a=n.y1,l=n.x2,o=n.y2;var d=n.percent;d!==0&&(r.moveTo(i,a),d<1&&(l=i*(1-d)+l*d,o=a*(1-d)+o*d),r.lineTo(l,o))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(nn);z4.prototype.type="line";const Gl=z4;var oa=[],vY=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function DP(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?DI:_i)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?DI:_i)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?Hb:yi)(e.x1,e.cpx1,e.x2,t),(r?Hb:yi)(e.y1,e.cpy1,e.y2,t)]}var B4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new vY},t.prototype.buildPath=function(r,n){var i=n.x1,a=n.y1,l=n.x2,o=n.y2,h=n.cpx1,d=n.cpy1,m=n.cpx2,g=n.cpy2,_=n.percent;_!==0&&(r.moveTo(i,a),m==null||g==null?(_<1&&(k_(i,h,l,_,oa),h=oa[1],l=oa[2],k_(a,d,o,_,oa),d=oa[1],o=oa[2]),r.quadraticCurveTo(h,d,l,o)):(_<1&&(D_(i,h,m,l,_,oa),h=oa[1],m=oa[2],l=oa[3],D_(a,d,g,o,_,oa),d=oa[1],g=oa[2],o=oa[3]),r.bezierCurveTo(h,d,m,g,l,o)))},t.prototype.pointAt=function(r){return DP(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=DP(this.shape,r,!0);return B2(n,n)},t}(nn);B4.prototype.type="bezier-curve";const oS=B4;var gY=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),F4=function(e){Vt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new gY},t.prototype.buildPath=function(r,n){var i=n.cx,a=n.cy,l=Math.max(n.r,0),o=n.startAngle,h=n.endAngle,d=n.clockwise,m=Math.cos(o),g=Math.sin(o);r.moveTo(m*l+i,g*l+a),r.arc(i,a,l,o,h,!d)},t}(nn);F4.prototype.type="arc";const sS=F4;var _Y=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],a=0;a<i.length;a++)i[a].buildPath(r,i[a].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),nn.prototype.getBoundingRect.call(this)},t}(nn);const N4=_Y;var yY=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const V4=yY;var xY=function(e){Vt(t,e);function t(r,n,i,a,l,o){var h=e.call(this,l)||this;return h.x=r==null?0:r,h.y=n==null?0:n,h.x2=i==null?1:i,h.y2=a==null?0:a,h.type="linear",h.global=o||!1,h}return t}(V4);const bY=xY;var wY=function(e){Vt(t,e);function t(r,n,i,a,l){var o=e.call(this,a)||this;return o.x=r==null?.5:r,o.y=n==null?.5:n,o.r=i==null?.5:i,o.type="radial",o.global=l||!1,o}return t}(V4);const SY=wY;var $u=[0,0],ju=[0,0],hg=new pn,fg=new pn,TY=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new pn;for(var n=0;n<2;n++)this._axes[n]=new pn;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,a=t.x,l=t.y,o=a+t.width,h=l+t.height;if(n[0].set(a,l),n[1].set(o,l),n[2].set(o,h),n[3].set(a,h),r)for(var d=0;d<4;d++)n[d].transform(r);pn.sub(i[0],n[1],n[0]),pn.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var d=0;d<2;d++)this._origin[d]=i[d].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return hg.set(1/0,1/0),fg.set(0,0),!this._intersectCheckOneSide(this,t,hg,fg,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,hg,fg,i,-1)&&(n=!1,i)||i||pn.copy(r,n?hg:fg),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,a,l){for(var o=!0,h=0;h<2;h++){var d=this._axes[h];if(this._getProjMinMaxOnAxis(h,t._corners,$u),this._getProjMinMaxOnAxis(h,r._corners,ju),$u[1]<ju[0]||$u[0]>ju[1]){if(o=!1,a)return o;var m=Math.abs(ju[0]-$u[1]),g=Math.abs($u[0]-ju[1]);Math.min(m,g)>i.len()&&(m<g?pn.scale(i,d,-m*l):pn.scale(i,d,g*l))}else if(n){var m=Math.abs(ju[0]-$u[1]),g=Math.abs($u[0]-ju[1]);Math.min(m,g)<n.len()&&(m<g?pn.scale(n,d,m*l):pn.scale(n,d,-g*l))}}return o},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],a=this._origin,l=r[0].dot(i)+a[t],o=l,h=l,d=1;d<r.length;d++){var m=r[d].dot(i)+a[t];o=Math.min(m,o),h=Math.max(m,h)}n[0]=o,n[1]=h},e}();const V_=TY;var EY=[],CY=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new _n(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],a=i.getBoundingRect().clone();i.needLocalTransform()&&a.applyTransform(i.getLocalTransform(EY)),r.union(a)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(a.contain(i[0],i[1]))for(var l=0;l<this._displayables.length;l++){var o=this._displayables[l];if(o.contain(r,n))return!0}return!1},t}(ym);const AY=CY;var IY=ni();function PY(e,t,r,n,i){var a;if(t&&t.ecModel){var l=t.ecModel.getUpdatePayload();a=l&&l.animation}var o=t&&t.isAnimationEnabled(),h=e==="update";if(o){var d=void 0,m=void 0,g=void 0;n?(d=Lr(n.duration,200),m=Lr(n.easing,"cubicOut"),g=0):(d=t.getShallow(h?"animationDurationUpdate":"animationDuration"),m=t.getShallow(h?"animationEasingUpdate":"animationEasing"),g=t.getShallow(h?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(d=a.duration),a.easing!=null&&(m=a.easing),a.delay!=null&&(g=a.delay)),Er(g)&&(g=g(r,i)),Er(d)&&(d=d(r));var _={duration:d||0,delay:g,easing:m};return _}else return null}function lS(e,t,r,n,i,a,l){var o=!1,h;Er(i)?(l=a,a=i,i=null):ar(i)&&(a=i.cb,l=i.during,o=i.isFrom,h=i.removeOpt,i=i.dataIndex);var d=e==="leave";d||t.stopAnimation("leave");var m=PY(e,n,i,d?h||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(m&&m.duration>0){var g=m.duration,_=m.delay,x=m.easing,E={duration:g,delay:_||0,easing:x,done:a,force:!!a||!!l,setToFinal:!d,scope:e,during:l};o?t.animateFrom(r,E):t.animateTo(r,E)}else t.stopAnimation(),!o&&t.attr(r),l&&l(1),a&&a()}function wc(e,t,r,n,i,a){lS("update",e,t,r,n,i,a)}function xm(e,t,r,n,i,a){lS("enter",e,t,r,n,i,a)}function wp(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function U_(e,t,r,n,i,a){wp(e)||lS("leave",e,t,r,n,i,a)}function kP(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),U_(e,{style:{opacity:0}},t,r,n)}function MY(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||kP(i,t,r,n)}):kP(e,t,r,n)}function DY(e){IY(e).oldStyle=e.style}var $_=Math.max,j_=Math.min,cw={};function kY(e){return nn.extend(e)}var LY=tY;function OY(e,t){return LY(e,t)}function Po(e,t){cw[e]=t}function RY(e){if(cw.hasOwnProperty(e))return cw[e]}function uS(e,t,r,n){var i=eY(e,t);return r&&(n==="center"&&(r=$4(r,i.getBoundingRect())),j4(i,r)),i}function U4(e,t,r){var n=new js({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var a={width:i.width,height:i.height};n.setStyle($4(t,a))}}});return n}function $4(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var a=e.x+e.width/2,l=e.y+e.height/2;return{x:a-n/2,y:l-i/2,width:n,height:i}}var zY=rY;function j4(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function BY(e){return a4(e.shape,e.shape,e.style),e}function FY(e){return o4(e.shape,e.shape,e.style),e}var NY=oc;function VY(e,t){for(var r=U2([]);e&&e!==t;)Uh(r,e.getLocalTransform(),r),e=e.parent;return r}function cS(e,t,r){return t&&!pa(t)&&(t=H2.getLocalTransform(t)),r&&(t=j2([],t)),ro([],e,t)}function UY(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),a=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return a=cS(a,t,r),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function LP(e){return!e.isGroup}function $Y(e){return e.shape!=null}function H4(e,t,r){if(!e||!t)return;function n(l){var o={};return l.traverse(function(h){LP(h)&&h.anid&&(o[h.anid]=h)}),o}function i(l){var o={x:l.x,y:l.y,rotation:l.rotation};return $Y(l)&&(o.shape=Ct({},l.shape)),o}var a=n(e);t.traverse(function(l){if(LP(l)&&l.anid){var o=a[l.anid];if(o){var h=i(l);l.attr(i(o)),wc(l,h,r,bn(l).dataIndex)}}})}function jY(e,t){return nr(e,function(r){var n=r[0];n=$_(n,t.x),n=j_(n,t.x+t.width);var i=r[1];return i=$_(i,t.y),i=j_(i,t.y+t.height),[n,i]})}function HY(e,t){var r=$_(e.x,t.x),n=j_(e.x+e.width,t.x+t.width),i=$_(e.y,t.y),a=j_(e.y+e.height,t.y+t.height);if(n>=r&&a>=i)return{x:r,y:i,width:n-r,height:a-i}}function G4(e,t,r){var n=Ct({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),yn(i,r),new js(n)):uS(e.replace("path://",""),n,r,"center")}function GY(e,t,r,n,i){for(var a=0,l=i[i.length-1];a<i.length;a++){var o=i[a];if(q4(e,t,r,n,o[0],o[1],l[0],l[1]))return!0;l=o}}function q4(e,t,r,n,i,a,l,o){var h=r-e,d=n-t,m=l-i,g=o-a,_=px(m,g,h,d);if(qY(_))return!1;var x=e-i,E=t-a,M=px(x,E,h,d)/_;if(M<0||M>1)return!1;var P=px(x,E,m,g)/_;return!(P<0||P>1)}function px(e,t,r,n){return e*n-r*t}function qY(e){return e<=1e-6&&e>=-1e-6}function W4(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Jt(t)?{formatter:t}:t,a=r.mainType,l=r.componentIndex,o={componentType:a,name:n,$vars:["name"]};o[a+"Index"]=l;var h=e.formatterParamsExtra;h&&Ce(Gr(h),function(m){Qh(o,m)||(o[m]=h[m],o.$vars.push(m))});var d=bn(e.el);d.componentMainType=a,d.componentIndex=l,d.tooltipConfig={name:n,option:yn({content:n,formatterParams:o},i)}}function OP(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function Iy(e,t){if(e)if(Gt(e))for(var r=0;r<e.length;r++)OP(e[r],t);else OP(e,t)}Po("circle",nS);Po("ellipse",A4);Po("sector",iS);Po("ring",D4);Po("polygon",O4);Po("polyline",aS);Po("rect",fa);Po("line",Gl);Po("bezierCurve",oS);Po("arc",sS);const WY=Object.freeze(Object.defineProperty({__proto__:null,updateProps:wc,initProps:xm,removeElement:U_,removeElementWithFadeOut:MY,isElementRemoved:wp,extendShape:kY,extendPath:OY,registerShape:Po,getShapeClass:RY,makePath:uS,makeImage:U4,mergePath:zY,resizePath:j4,subPixelOptimizeLine:BY,subPixelOptimizeRect:FY,subPixelOptimize:NY,getTransform:VY,applyTransform:cS,transformDirection:UY,groupTransition:H4,clipPointsByRect:jY,clipRectByRect:HY,createIcon:G4,linePolygonIntersect:GY,lineLineIntersect:q4,setTooltipConfig:W4,traverseElements:Iy,Group:bi,Image:js,Text:Io,Circle:nS,Ellipse:A4,Sector:iS,Ring:D4,Polygon:O4,Polyline:aS,Rect:fa,Line:Gl,BezierCurve:oS,Arc:sS,IncrementalDisplayable:AY,CompoundPath:N4,LinearGradient:bY,RadialGradient:SY,BoundingRect:_n,OrientedBoundingRect:V_,Point:pn,Path:nn},Symbol.toStringTag,{value:"Module"}));var Py={};function ZY(e,t){for(var r=0;r<rs.length;r++){var n=rs[r],i=t[n],a=e.ensureState(n);a.style=a.style||{},a.style.text=i}var l=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(l,!0)}function RP(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,a=e.labelDimIndex,l=t.normal,o;n&&(o=n.getFormattedLabel(i,"normal",null,a,l&&l.get("formatter"),r!=null?{interpolatedValue:r}:null)),o==null&&(o=Er(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var h={normal:o},d=0;d<rs.length;d++){var m=rs[d],g=t[m];h[m]=Lr(n?n.getFormattedLabel(i,m,null,a,g&&g.get("formatter")):null,o)}return h}function Z4(e,t,r,n){r=r||Py;for(var i=e instanceof Io,a=!1,l=0;l<_P.length;l++){var o=t[_P[l]];if(o&&o.getShallow("show")){a=!0;break}}var h=i?e:e.getTextContent();if(a){i||(h||(h=new Io,e.setTextContent(h)),e.stateProxy&&(h.stateProxy=e.stateProxy));var d=RP(r,t),m=t.normal,g=!!m.getShallow("show"),_=_c(m,n&&n.normal,r,!1,!i);_.text=d.normal,i||e.setTextConfig(zP(m,r,!1));for(var l=0;l<rs.length;l++){var x=rs[l],o=t[x];if(o){var E=h.ensureState(x),M=!!Lr(o.getShallow("show"),g);if(M!==g&&(E.ignore=!M),E.style=_c(o,n&&n[x],r,!0,!i),E.style.text=d[x],!i){var P=e.ensureState(x);P.textConfig=zP(o,r,!0)}}}h.silent=!!m.getShallow("silent"),h.style.x!=null&&(_.x=h.style.x),h.style.y!=null&&(_.y=h.style.y),h.ignore=!g,h.useStyle(_),h.dirty(),r.enableTextSetter&&(JY(h).setLabelText=function(I){var D=RP(r,t,I);ZY(h,D)})}else h&&(h.ignore=!0);e.dirty()}function My(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<rs.length;n++){var i=rs[n];r[i]=e.getModel([i,t])}return r}function _c(e,t,r,n,i){var a={};return XY(a,e,r,n,i),t&&Ct(a,t),a}function zP(e,t,r){t=t||{};var n={},i,a=e.getShallow("rotate"),l=Lr(e.getShallow("distance"),r?null:5),o=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),o!=null&&(n.offset=o),a!=null&&(a*=Math.PI/180,n.rotation=a),l!=null&&(n.distance=l),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function XY(e,t,r,n,i){r=r||Py;var a=t.ecModel,l=a&&a.option.textStyle,o=YY(t),h;if(o){h={};for(var d in o)if(o.hasOwnProperty(d)){var m=t.getModel(["rich",d]);VP(h[d]={},m,l,r,n,i,!1,!0)}}h&&(e.rich=h);var g=t.get("overflow");g&&(e.overflow=g);var _=t.get("minMargin");_!=null&&(e.margin=_),VP(e,t,l,r,n,i,!0,!1)}function YY(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||Py).rich;if(r){t=t||{};for(var n=Gr(r),i=0;i<n.length;i++){var a=n[i];t[a]=1}}e=e.parentModel}return t}var BP=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],FP=["align","lineHeight","width","height","tag","verticalAlign"],NP=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function VP(e,t,r,n,i,a,l,o){r=!i&&r||Py;var h=n&&n.inheritColor,d=t.getShallow("color"),m=t.getShallow("textBorderColor"),g=Lr(t.getShallow("opacity"),r.opacity);(d==="inherit"||d==="auto")&&(h?d=h:d=null),(m==="inherit"||m==="auto")&&(h?m=h:m=null),a||(d=d||r.color,m=m||r.textBorderColor),d!=null&&(e.fill=d),m!=null&&(e.stroke=m);var _=Lr(t.getShallow("textBorderWidth"),r.textBorderWidth);_!=null&&(e.lineWidth=_);var x=Lr(t.getShallow("textBorderType"),r.textBorderType);x!=null&&(e.lineDash=x);var E=Lr(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);E!=null&&(e.lineDashOffset=E),!i&&g==null&&!o&&(g=n&&n.defaultOpacity),g!=null&&(e.opacity=g),!i&&!a&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var M=0;M<BP.length;M++){var P=BP[M],I=Lr(t.getShallow(P),r[P]);I!=null&&(e[P]=I)}for(var M=0;M<FP.length;M++){var P=FP[M],I=t.getShallow(P);I!=null&&(e[P]=I)}if(e.verticalAlign==null){var D=t.getShallow("baseline");D!=null&&(e.verticalAlign=D)}if(!l||!n.disableBox){for(var M=0;M<NP.length;M++){var P=NP[M],I=t.getShallow(P);I!=null&&(e[P]=I)}var O=t.getShallow("borderType");O!=null&&(e.borderDash=O),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&h&&(e.backgroundColor=h),(e.borderColor==="auto"||e.borderColor==="inherit")&&h&&(e.borderColor=h)}}function KY(e,t){var r=t&&t.getModel("textStyle");return Ko([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var JY=ni(),QY=["textStyle","color"],mx=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],vx=new Io,eK=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(QY):null)},e.prototype.getFont=function(){return KY({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<mx.length;n++)r[mx[n]]=this.getShallow(mx[n]);return vx.useStyle(r),vx.update(),vx.getBoundingRect()},e}();const tK=eK;var X4=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],rK=Gp(X4),nK=function(){function e(){}return e.prototype.getLineStyle=function(t){return rK(this,t)},e}(),Y4=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],iK=Gp(Y4),aK=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return iK(this,t,r)},e}(),Sc=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){En(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var a=this.parentModel;a&&(i=a.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,a=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(a,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(Ur(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Or.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();X2(Sc);OZ(Sc);ns(Sc,nK);ns(Sc,aK);ns(Sc,NZ);ns(Sc,tK);const Ji=Sc;var oK=Math.round(Math.random()*10);function Dy(e){return[e||"",oK++].join("_")}function sK(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=Jo(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var a=Jo(r).main;e.hasSubTypes(r)&&t[a]&&(i=t[a](n))}return i}}function lK(e,t){e.topologicalTravel=function(a,l,o,h){if(!a.length)return;var d=r(l),m=d.graph,g=d.noEntryList,_={};for(Ce(a,function(D){_[D]=!0});g.length;){var x=g.pop(),E=m[x],M=!!_[x];M&&(o.call(h,x,E.originalDeps.slice()),delete _[x]),Ce(E.successor,M?I:P)}Ce(_,function(){var D="";throw new Error(D)});function P(D){m[D].entryCount--,m[D].entryCount===0&&g.push(D)}function I(D){_[D]=!0,P(D)}};function r(a){var l={},o=[];return Ce(a,function(h){var d=n(l,h),m=d.originalDeps=t(h),g=i(m,a);d.entryCount=g.length,d.entryCount===0&&o.push(h),Ce(g,function(_){gn(d.predecessor,_)<0&&d.predecessor.push(_);var x=n(l,_);gn(x.successor,_)<0&&x.successor.push(h)})}),{graph:l,noEntryList:o}}function n(a,l){return a[l]||(a[l]={predecessor:[],successor:[]}),a[l]}function i(a,l){var o=[];return Ce(a,function(h){gn(l,h)>=0&&o.push(h)}),o}}const uK={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},cK={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var H_="ZH",hS="EN",Zp=hS,Yg={},fS={},K4=Or.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(H_)>-1?H_:Zp}():Zp;function J4(e,t){e=e.toUpperCase(),fS[e]=new Ji(t),Yg[e]=t}function hK(e){if(Jt(e)){var t=Yg[e.toUpperCase()]||{};return e===H_||e===hS?Ur(t):En(Ur(t),Ur(Yg[Zp]),!1)}else return En(Ur(e),Ur(Yg[Zp]),!1)}function fK(e){return fS[e]}function dK(){return fS[Zp]}J4(hS,uK);J4(H_,cK);var dS=1e3,pS=dS*60,Sp=pS*60,Ja=Sp*24,UP=Ja*365,tp={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},dg="{yyyy}-{MM}-{dd}",$P={year:"{yyyy}",month:"{yyyy}-{MM}",day:dg,hour:dg+" "+tp.hour,minute:dg+" "+tp.minute,second:dg+" "+tp.second,millisecond:tp.none},gx=["year","month","day","hour","minute","second","millisecond"],Q4=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Hu(e,t){return e+="","0000".substr(0,t-e.length)+e}function $h(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function pK(e){return e===$h(e)}function mK(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function ky(e,t,r,n){var i=Ns(e),a=i[mS(r)](),l=i[jh(r)]()+1,o=Math.floor((l-1)/3)+1,h=i[Ly(r)](),d=i["get"+(r?"UTC":"")+"Day"](),m=i[Xp(r)](),g=(m-1)%12+1,_=i[Oy(r)](),x=i[Ry(r)](),E=i[zy(r)](),M=n instanceof Ji?n:fK(n||K4)||dK(),P=M.getModel("time"),I=P.get("month"),D=P.get("monthAbbr"),O=P.get("dayOfWeek"),F=P.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,a%100+"").replace(/{Q}/g,o+"").replace(/{MMMM}/g,I[l-1]).replace(/{MMM}/g,D[l-1]).replace(/{MM}/g,Hu(l,2)).replace(/{M}/g,l+"").replace(/{dd}/g,Hu(h,2)).replace(/{d}/g,h+"").replace(/{eeee}/g,O[d]).replace(/{ee}/g,F[d]).replace(/{e}/g,d+"").replace(/{HH}/g,Hu(m,2)).replace(/{H}/g,m+"").replace(/{hh}/g,Hu(g+"",2)).replace(/{h}/g,g+"").replace(/{mm}/g,Hu(_,2)).replace(/{m}/g,_+"").replace(/{ss}/g,Hu(x,2)).replace(/{s}/g,x+"").replace(/{SSS}/g,Hu(E,3)).replace(/{S}/g,E+"")}function vK(e,t,r,n,i){var a=null;if(Jt(r))a=r;else if(Er(r))a=r(e.value,t,{level:e.level});else{var l=Ct({},tp);if(e.level>0)for(var o=0;o<gx.length;++o)l[gx[o]]="{primary|"+l[gx[o]]+"}";var h=r?r.inherit===!1?r:yn(r,l):l,d=eO(e.value,i);if(h[d])a=h[d];else if(h.inherit){for(var m=Q4.indexOf(d),o=m-1;o>=0;--o)if(h[d]){a=h[d];break}a=a||l.none}if(Gt(a)){var g=e.level==null?0:e.level>=0?e.level:a.length+e.level;g=Math.min(g,a.length-1),a=a[g]}}return ky(new Date(e.value),a,i,n)}function eO(e,t){var r=Ns(e),n=r[jh(t)]()+1,i=r[Ly(t)](),a=r[Xp(t)](),l=r[Oy(t)](),o=r[Ry(t)](),h=r[zy(t)](),d=h===0,m=d&&o===0,g=m&&l===0,_=g&&a===0,x=_&&i===1,E=x&&n===1;return E?"year":x?"month":_?"day":g?"hour":m?"minute":d?"second":"millisecond"}function jP(e,t,r){var n=Mn(e)?Ns(e):e;switch(t=t||eO(e,r),t){case"year":return n[mS(r)]();case"half-year":return n[jh(r)]()>=6?1:0;case"quarter":return Math.floor((n[jh(r)]()+1)/4);case"month":return n[jh(r)]();case"day":return n[Ly(r)]();case"half-day":return n[Xp(r)]()/24;case"hour":return n[Xp(r)]();case"minute":return n[Oy(r)]();case"second":return n[Ry(r)]();case"millisecond":return n[zy(r)]()}}function mS(e){return e?"getUTCFullYear":"getFullYear"}function jh(e){return e?"getUTCMonth":"getMonth"}function Ly(e){return e?"getUTCDate":"getDate"}function Xp(e){return e?"getUTCHours":"getHours"}function Oy(e){return e?"getUTCMinutes":"getMinutes"}function Ry(e){return e?"getUTCSeconds":"getSeconds"}function zy(e){return e?"getUTCMilliseconds":"getMilliseconds"}function gK(e){return e?"setUTCFullYear":"setFullYear"}function tO(e){return e?"setUTCMonth":"setMonth"}function rO(e){return e?"setUTCDate":"setDate"}function nO(e){return e?"setUTCHours":"setHours"}function iO(e){return e?"setUTCMinutes":"setMinutes"}function aO(e){return e?"setUTCSeconds":"setSeconds"}function oO(e){return e?"setUTCMilliseconds":"setMilliseconds"}function sO(e){if(!pZ(e))return Jt(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function lO(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var vS=lL,_K=/([&<>"'])/g,yK={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ka(e){return e==null?"":(e+"").replace(_K,function(t,r){return yK[r]})}function hw(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(m){return m&&Ko(m)?m:"-"}function a(m){return!!(m!=null&&!isNaN(m)&&isFinite(m))}var l=t==="time",o=e instanceof Date;if(l||o){var h=l?Ns(e):e;if(isNaN(+h)){if(o)return"-"}else return ky(h,n,r)}if(t==="ordinal")return Bb(e)?i(e):Mn(e)&&a(e)?e+"":"-";var d=B_(e);return a(d)?sO(d):Bb(e)?i(e):typeof e=="boolean"?e+"":"-"}var HP=["a","b","c","d","e","f","g"],_x=function(e,t){return"{"+e+(t==null?"":t)+"}"};function uO(e,t,r){Gt(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],a=0;a<i.length;a++){var l=HP[a];e=e.replace(_x(l),_x(l,0))}for(var o=0;o<n;o++)for(var h=0;h<i.length;h++){var d=t[o][i[h]];e=e.replace(_x(HP[h],o),r?Ka(d):d)}return e}function xK(e,t){var r=Jt(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var a=r.renderMode||"html";if(!n)return"";if(a==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Ka(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Ka(n)+";"+(t||"")+'"></span>';var l=r.markerId||"markerX";return{renderMode:a,content:"{"+l+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function Yp(e,t){return t=t||"transparent",Jt(e)?e:ar(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function GP(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var Kg=Ce,bK=["left","right","top","bottom","width","height"],pg=[["width","left","right"],["height","top","bottom"]];function cO(e,t,r,n,i){var a=0,l=0;n==null&&(n=1/0),i==null&&(i=1/0);var o=0;t.eachChild(function(h,d){var m=h.getBoundingRect(),g=t.childAt(d+1),_=g&&g.getBoundingRect(),x,E;if(e==="horizontal"){var M=m.width+(_?-_.x+m.x:0);x=a+M,x>n||h.newline?(a=0,x=M,l+=o+r,o=m.height):o=Math.max(o,m.height)}else{var P=m.height+(_?-_.y+m.y:0);E=l+P,E>i||h.newline?(a+=o+r,l=0,E=P,o=m.width):o=Math.max(o,m.width)}h.newline||(h.x=a,h.y=l,h.markRedraw(),e==="horizontal"?a=x+r:l=E+r)})}to(cO,"vertical");to(cO,"horizontal");function gS(e,t,r){r=vS(r||0);var n=t.width,i=t.height,a=Zi(e.left,n),l=Zi(e.top,i),o=Zi(e.right,n),h=Zi(e.bottom,i),d=Zi(e.width,n),m=Zi(e.height,i),g=r[2]+r[0],_=r[1]+r[3],x=e.aspect;switch(isNaN(d)&&(d=n-o-_-a),isNaN(m)&&(m=i-h-g-l),x!=null&&(isNaN(d)&&isNaN(m)&&(x>n/i?d=n*.8:m=i*.8),isNaN(d)&&(d=x*m),isNaN(m)&&(m=d/x)),isNaN(a)&&(a=n-o-d-_),isNaN(l)&&(l=i-h-m-g),e.left||e.right){case"center":a=n/2-d/2-r[3];break;case"right":a=n-d-_;break}switch(e.top||e.bottom){case"middle":case"center":l=i/2-m/2-r[0];break;case"bottom":l=i-m-g;break}a=a||0,l=l||0,isNaN(d)&&(d=n-_-a-(o||0)),isNaN(m)&&(m=i-g-l-(h||0));var E=new _n(a+r[3],l+r[0],d,m);return E.margin=r,E}function Kp(e){var t=e.layoutMode||e.constructor.layoutMode;return ar(t)?t:t?{type:t}:null}function Jp(e,t,r){var n=r&&r.ignoreSize;!Gt(n)&&(n=[n,n]);var i=l(pg[0],0),a=l(pg[1],1);d(pg[0],e,i),d(pg[1],e,a);function l(m,g){var _={},x=0,E={},M=0,P=2;if(Kg(m,function(O){E[O]=e[O]}),Kg(m,function(O){o(t,O)&&(_[O]=E[O]=t[O]),h(_,O)&&x++,h(E,O)&&M++}),n[g])return h(t,m[1])?E[m[2]]=null:h(t,m[2])&&(E[m[1]]=null),E;if(M===P||!x)return E;if(x>=P)return _;for(var I=0;I<m.length;I++){var D=m[I];if(!o(_,D)&&o(e,D)){_[D]=e[D];break}}return _}function o(m,g){return m.hasOwnProperty(g)}function h(m,g){return m[g]!=null&&m[g]!=="auto"}function d(m,g,_){Kg(m,function(x){g[x]=_[x]})}}function _S(e){return wK({},e)}function wK(e,t){return t&&e&&Kg(bK,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var SK=ni(),_f=function(e){Vt(t,e);function t(r,n,i){var a=e.call(this,r,n,i)||this;return a.uid=Dy("ec_cpt_model"),a}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=Kp(this),a=i?_S(r):{},l=n.getTheme();En(r,l.get(this.mainType)),En(r,this.getDefaultOption()),i&&Jp(r,a,i)},t.prototype.mergeOption=function(r,n){En(this.option,r,!0);var i=Kp(this);i&&Jp(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!DZ(r))return r.defaultOption;var n=SK(this);if(!n.defaultOption){for(var i=[],a=r;a;){var l=a.prototype.defaultOption;l&&i.push(l),a=a.superClass}for(var o={},h=i.length-1;h>=0;h--)o=En(o,i[h],!0);n.defaultOption=o}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",a=r+"Id";return _m(this.ecModel,r,{index:this.get(i,!0),id:this.get(a,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Ji);KL(_f,Ji);Ty(_f);sK(_f);lK(_f,TK);function TK(e){var t=[];return Ce(_f.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=nr(t,function(r){return Jo(r).main}),e!=="dataset"&&gn(t,"dataset")<=0&&t.unshift("dataset"),t}const An=_f;var hO="";typeof navigator<"u"&&(hO=navigator.platform||"");var mh="rgba(0, 0, 0, 0.2)";const EK={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:mh,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:mh,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:mh,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:mh,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:mh,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:mh,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:hO.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var fO=Ir(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),ao="original",ma="arrayRows",is="objectRows",Gs="keyedColumns",Nl="typedArray",dO="unknown",Rs="column",yf="row",Sa={Must:1,Might:2,Not:3},pO=ni();function CK(e){pO(e).datasetMap=Ir()}function AK(e,t,r){var n={},i=mO(t);if(!i||!e)return n;var a=[],l=[],o=t.ecModel,h=pO(o).datasetMap,d=i.uid+"_"+r.seriesLayoutBy,m,g;e=e.slice(),Ce(e,function(M,P){var I=ar(M)?M:e[P]={name:M};I.type==="ordinal"&&m==null&&(m=P,g=E(I)),n[I.name]=[]});var _=h.get(d)||h.set(d,{categoryWayDim:g,valueWayDim:0});Ce(e,function(M,P){var I=M.name,D=E(M);if(m==null){var O=_.valueWayDim;x(n[I],O,D),x(l,O,D),_.valueWayDim+=D}else if(m===P)x(n[I],0,D),x(a,0,D);else{var O=_.categoryWayDim;x(n[I],O,D),x(l,O,D),_.categoryWayDim+=D}});function x(M,P,I){for(var D=0;D<I;D++)M.push(P+D)}function E(M){var P=M.dimsDef;return P?P.length:1}return a.length&&(n.itemName=a),l.length&&(n.seriesName=l),n}function mO(e){var t=e.get("data",!0);if(!t)return _m(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},So).models[0]}function IK(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:_m(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},So).models}function vO(e,t){return PK(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function PK(e,t,r,n,i,a){var l,o=5;if(Pa(e))return Sa.Not;var h,d;if(n){var m=n[a];ar(m)?(h=m.name,d=m.type):Jt(m)&&(h=m)}if(d!=null)return d==="ordinal"?Sa.Must:Sa.Not;if(t===ma){var g=e;if(r===yf){for(var _=g[a],x=0;x<(_||[]).length&&x<o;x++)if((l=F(_[i+x]))!=null)return l}else for(var x=0;x<g.length&&x<o;x++){var E=g[i+x];if(E&&(l=F(E[a]))!=null)return l}}else if(t===is){var M=e;if(!h)return Sa.Not;for(var x=0;x<M.length&&x<o;x++){var P=M[x];if(P&&(l=F(P[h]))!=null)return l}}else if(t===Gs){var I=e;if(!h)return Sa.Not;var _=I[h];if(!_||Pa(_))return Sa.Not;for(var x=0;x<_.length&&x<o;x++)if((l=F(_[x]))!=null)return l}else if(t===ao)for(var D=e,x=0;x<D.length&&x<o;x++){var P=D[x],O=vm(P);if(!Gt(O))return Sa.Not;if((l=F(O[a]))!=null)return l}function F($){var q=Jt($);if($!=null&&isFinite($)&&$!=="")return q?Sa.Might:Sa.Not;if(q&&$!=="-")return Sa.Must}return Sa.Not}var MK=Ir();function DK(e,t,r){var n=MK.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var qP=ni();ni();var yS=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=ea(this.get("color",!0)),a=this.get("colorLayer",!0);return LK(this,qP,i,a,t,r,n)},e.prototype.clearColorPalette=function(){OK(this,qP)},e}();function kK(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function LK(e,t,r,n,i,a,l){a=a||e;var o=t(a),h=o.paletteIdx||0,d=o.paletteNameMap=o.paletteNameMap||{};if(d.hasOwnProperty(i))return d[i];var m=l==null||!n?r:kK(n,l);if(m=m||r,!(!m||!m.length)){var g=m[h];return i&&(d[i]=g),o.paletteIdx=(h+1)%m.length,g}}function OK(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var mg,Rd,WP,ZP="\0_ec_inner",RK=1,gO=function(e){Vt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,a,l,o){a=a||{},this.option=null,this._theme=new Ji(a),this._locale=new Ji(l),this._optionManager=o},t.prototype.setOption=function(r,n,i){var a=KP(n);this._optionManager.setOption(r,i,a),this._resetOption(null,a)},t.prototype.resetOption=function(r,n){return this._resetOption(r,KP(n))},t.prototype._resetOption=function(r,n){var i=!1,a=this._optionManager;if(!r||r==="recreate"){var l=a.mountOption(r==="recreate");!this.option||r==="recreate"?WP(this,l):(this.restoreData(),this._mergeOption(l,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var o=a.getTimelineOption(this);o&&(i=!0,this._mergeOption(o,n))}if(!r||r==="recreate"||r==="media"){var h=a.getMediaOption(this);h.length&&Ce(h,function(d){i=!0,this._mergeOption(d,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,a=this._componentsMap,l=this._componentsCount,o=[],h=Ir(),d=n&&n.replaceMergeMainTypeMap;CK(this),Ce(r,function(g,_){g!=null&&(An.hasClass(_)?_&&(o.push(_),h.set(_,!0)):i[_]=i[_]==null?Ur(g):En(i[_],g,!0))}),d&&d.each(function(g,_){An.hasClass(_)&&!h.get(_)&&(o.push(_),h.set(_,!0))}),An.topologicalTravel(o,An.getAllClassMainTypes(),m,this);function m(g){var _=DK(this,g,ea(r[g])),x=a.get(g),E=x?d&&d.get(g)?"replaceMerge":"normalMerge":"replaceAll",M=gZ(x,_,E);TZ(M,g,An),i[g]=null,a.set(g,null),l.set(g,0);var P=[],I=[],D=0,O;Ce(M,function(F,$){var q=F.existing,K=F.newOption;if(!K)q&&(q.mergeOption({},this),q.optionUpdated({},!1));else{var Z=g==="series",re=An.getClass(g,F.keyInfo.subType,!Z);if(!re)return;if(g==="tooltip"){if(O)return;O=!0}if(q&&q.constructor===re)q.name=F.keyInfo.name,q.mergeOption(K,this),q.optionUpdated(K,!1);else{var ie=Ct({componentIndex:$},F.keyInfo);q=new re(K,this,this,ie),Ct(q,ie),F.brandNew&&(q.__requireNewView=!0),q.init(K,this,this),q.optionUpdated(null,!0)}}q?(P.push(q.option),I.push(q),D++):(P.push(void 0),I.push(void 0))},this),i[g]=P,a.set(g,I),l.set(g,D),g==="series"&&mg(this)}this._seriesIndices||mg(this)},t.prototype.getOption=function(){var r=Ur(this.option);return Ce(r,function(n,i){if(An.hasClass(i)){for(var a=ea(n),l=a.length,o=!1,h=l-1;h>=0;h--)a[h]&&!Hp(a[h])?o=!0:(a[h]=null,!o&&l--);a.length=l,r[i]=a}}),delete r[ZP],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var a=i[n||0];if(a)return a;if(n==null){for(var l=0;l<i.length;l++)if(i[l])return i[l]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,a=r.id,l=r.name,o=this._componentsMap.get(n);if(!o||!o.length)return[];var h;return i!=null?(h=[],Ce(ea(i),function(d){o[d]&&h.push(o[d])})):a!=null?h=XP("id",a,o):l!=null?h=XP("name",l,o):h=Wi(o,function(d){return!!d}),YP(h,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,a=o(n),l=a?this.queryComponents(a):Wi(this._componentsMap.get(i),function(d){return!!d});return h(YP(l,r));function o(d){var m=i+"Index",g=i+"Id",_=i+"Name";return d&&(d[m]!=null||d[g]!=null||d[_]!=null)?{mainType:i,index:d[m],id:d[g],name:d[_]}:null}function h(d){return r.filter?Wi(d,r.filter):d}},t.prototype.eachComponent=function(r,n,i){var a=this._componentsMap;if(Er(r)){var l=n,o=r;a.each(function(g,_){for(var x=0;g&&x<g.length;x++){var E=g[x];E&&o.call(l,_,E,E.componentIndex)}})}else for(var h=Jt(r)?a.get(r):ar(r)?this.findComponents(r):null,d=0;h&&d<h.length;d++){var m=h[d];m&&n.call(i,m,m.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=es(r,null);return Wi(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return Wi(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return Wi(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){Rd(this),Ce(this._seriesIndices,function(i){var a=this._componentsMap.get("series")[i];r.call(n,a,i)},this)},t.prototype.eachRawSeries=function(r,n){Ce(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){Rd(this),Ce(this._seriesIndices,function(a){var l=this._componentsMap.get("series")[a];l.subType===r&&n.call(i,l,a)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return Ce(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return Rd(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){Rd(this);var i=[];Ce(this._seriesIndices,function(a){var l=this._componentsMap.get("series")[a];r.call(n,l,a)&&i.push(a)},this),this._seriesIndices=i,this._seriesIndicesMap=Ir(i)},t.prototype.restoreData=function(r){mg(this);var n=this._componentsMap,i=[];n.each(function(a,l){An.hasClass(l)&&i.push(l)}),An.topologicalTravel(i,An.getAllClassMainTypes(),function(a){Ce(n.get(a),function(l){l&&(a!=="series"||!zK(l,r))&&l.restoreData()})})},t.internalField=function(){mg=function(r){var n=r._seriesIndices=[];Ce(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=Ir(n)},Rd=function(r){},WP=function(r,n){r.option={},r.option[ZP]=RK,r._componentsMap=Ir({series:[]}),r._componentsCount=Ir();var i=n.aria;ar(i)&&i.enabled==null&&(i.enabled=!0),BK(n,r._theme.option),En(n,EK,!1),r._mergeOption(n,null)}}(),t}(Ji);function zK(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function BK(e,t){var r=e.color&&!e.colorLayer;Ce(t,function(n,i){i==="colorLayer"&&r||An.hasClass(i)||(typeof n=="object"?e[i]=e[i]?En(e[i],n,!1):Ur(n):e[i]==null&&(e[i]=n))})}function XP(e,t,r){if(Gt(t)){var n=Ir();return Ce(t,function(a){if(a!=null){var l=es(a,null);l!=null&&n.set(a,!0)}}),Wi(r,function(a){return a&&n.get(a[e])})}else{var i=es(t,null);return Wi(r,function(a){return a&&i!=null&&a[e]===i})}}function YP(e,t){return t.hasOwnProperty("subType")?Wi(e,function(r){return r&&r.subType===t.subType}):e}function KP(e){var t=Ir();return e&&Ce(ea(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}ns(gO,yS);const _O=gO;var FK=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],NK=function(){function e(t){Ce(FK,function(r){this[r]=Rn(t[r],t)},this)}return e}();const yO=NK;var yx={},VK=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];Ce(yx,function(i,a){var l=i.create(t,r);n=n.concat(l||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){Ce(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){yx[t]=r},e.get=function(t){return yx[t]},e}();const xS=VK;var UK=/^(min|max)?(.+)$/,$K=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(Ce(ea(t.series),function(l){l&&l.data&&Pa(l.data)&&Fb(l.data)}),Ce(ea(t.dataset),function(l){l&&l.source&&Pa(l.source)&&Fb(l.source)})),t=Ur(t);var i=this._optionBackup,a=jK(t,r,!i);this._newBaseOption=a.baseOption,i?(a.timelineOptions.length&&(i.timelineOptions=a.timelineOptions),a.mediaList.length&&(i.mediaList=a.mediaList),a.mediaDefault&&(i.mediaDefault=a.mediaDefault)):this._optionBackup=a},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],Ur(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=Ur(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,a=this._mediaDefault,l=[],o=[];if(!i.length&&!a)return o;for(var h=0,d=i.length;h<d;h++)HK(i[h].query,r,n)&&l.push(h);return!l.length&&a&&(l=[-1]),l.length&&!qK(l,this._currentMediaIndices)&&(o=nr(l,function(m){return Ur(m===-1?a.option:i[m].option)})),this._currentMediaIndices=l,o},e}();function jK(e,t,r){var n=[],i,a,l=e.baseOption,o=e.timeline,h=e.options,d=e.media,m=!!e.media,g=!!(h||o||l&&l.timeline);l?(a=l,a.timeline||(a.timeline=o)):((g||m)&&(e.options=e.media=null),a=e),m&&Gt(d)&&Ce(d,function(x){x&&x.option&&(x.query?n.push(x):i||(i=x))}),_(a),Ce(h,function(x){return _(x)}),Ce(n,function(x){return _(x.option)});function _(x){Ce(t,function(E){E(x,r)})}return{baseOption:a,timelineOptions:h||[],mediaDefault:i,mediaList:n}}function HK(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return Ce(e,function(a,l){var o=l.match(UK);if(!(!o||!o[1]||!o[2])){var h=o[1],d=o[2].toLowerCase();GK(n[d],a,h)||(i=!1)}}),i}function GK(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function qK(e,t){return e.join(",")===t.join(",")}const WK=$K;var vo=Ce,Qp=ar,JP=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function xx(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=JP.length;r<n;r++){var i=JP[r],a=t.normal,l=t.emphasis;a&&a[i]&&(e[i]=e[i]||{},e[i].normal?En(e[i].normal,a[i]):e[i].normal=a[i],a[i]=null),l&&l[i]&&(e[i]=e[i]||{},e[i].emphasis?En(e[i].emphasis,l[i]):e[i].emphasis=l[i],l[i]=null)}}function ki(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,yn(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function rp(e){ki(e,"itemStyle"),ki(e,"lineStyle"),ki(e,"areaStyle"),ki(e,"label"),ki(e,"labelLine"),ki(e,"upperLabel"),ki(e,"edgeLabel")}function Un(e,t){var r=Qp(e)&&e[t],n=Qp(r)&&r.textStyle;if(n)for(var i=0,a=QI.length;i<a;i++){var l=QI[i];n.hasOwnProperty(l)&&(r[l]=n[l])}}function Ga(e){e&&(rp(e),Un(e,"label"),e.emphasis&&Un(e.emphasis,"label"))}function ZK(e){if(!!Qp(e)){xx(e),rp(e),Un(e,"label"),Un(e,"upperLabel"),Un(e,"edgeLabel"),e.emphasis&&(Un(e.emphasis,"label"),Un(e.emphasis,"upperLabel"),Un(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(xx(t),Ga(t));var r=e.markLine;r&&(xx(r),Ga(r));var n=e.markArea;n&&Ga(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var a=e.links||e.edges;if(a&&!Pa(a))for(var l=0;l<a.length;l++)Ga(a[l]);Ce(e.categories,function(d){rp(d)})}if(i&&!Pa(i))for(var l=0;l<i.length;l++)Ga(i[l]);if(t=e.markPoint,t&&t.data)for(var o=t.data,l=0;l<o.length;l++)Ga(o[l]);if(r=e.markLine,r&&r.data)for(var h=r.data,l=0;l<h.length;l++)Gt(h[l])?(Ga(h[l][0]),Ga(h[l][1])):Ga(h[l]);e.type==="gauge"?(Un(e,"axisLabel"),Un(e,"title"),Un(e,"detail")):e.type==="treemap"?(ki(e.breadcrumb,"itemStyle"),Ce(e.levels,function(d){rp(d)})):e.type==="tree"&&rp(e.leaves)}}function Ts(e){return Gt(e)?e:e?[e]:[]}function QP(e){return(Gt(e)?e[0]:e)||{}}function XK(e,t){vo(Ts(e.series),function(n){Qp(n)&&ZK(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),vo(r,function(n){vo(Ts(e[n]),function(i){i&&(Un(i,"axisLabel"),Un(i.axisPointer,"label"))})}),vo(Ts(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Un(i,"axisLabel"),Un(i&&i.axisPointer,"label")}),vo(Ts(e.calendar),function(n){ki(n,"itemStyle"),Un(n,"dayLabel"),Un(n,"monthLabel"),Un(n,"yearLabel")}),vo(Ts(e.radar),function(n){Un(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),vo(Ts(e.geo),function(n){Qp(n)&&(Ga(n),vo(Ts(n.regions),function(i){Ga(i)}))}),vo(Ts(e.timeline),function(n){Ga(n),ki(n,"label"),ki(n,"itemStyle"),ki(n,"controlStyle",!0);var i=n.data;Gt(i)&&Ce(i,function(a){ar(a)&&(ki(a,"label"),ki(a,"itemStyle"))})}),vo(Ts(e.toolbox),function(n){ki(n,"iconStyle"),vo(n.feature,function(i){ki(i,"iconStyle")})}),Un(QP(e.axisPointer),"label"),Un(QP(e.tooltip).axisPointer,"label")}function YK(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function KK(e,t,r,n){for(var i=t.split(","),a=e,l,o=0;o<i.length-1;o++)l=i[o],a[l]==null&&(a[l]={}),a=a[l];(n||a[i[o]]==null)&&(a[i[o]]=r)}function eM(e){e&&Ce(JK,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var JK=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],QK=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],bx=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function zd(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<bx.length;r++){var n=bx[r][1],i=bx[r][0];t[n]!=null&&(t[i]=t[n])}}function tM(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function rM(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function eJ(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function xO(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&xO(e[r].children,t)}function bO(e,t){XK(e,t),e.series=ea(e.series),Ce(e.series,function(r){if(!!ar(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),tM(r.label);var i=r.data;if(i&&!Pa(i))for(var a=0;a<i.length;a++)tM(i[a]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var l=YK(r,"pointer.color");l!=null&&KK(r,"itemStyle.color",l)}else if(n==="bar"){zd(r),zd(r.backgroundStyle),zd(r.emphasis);var i=r.data;if(i&&!Pa(i))for(var a=0;a<i.length;a++)typeof i[a]=="object"&&(zd(i[a]),zd(i[a]&&i[a].emphasis))}else if(n==="sunburst"){var o=r.highlightPolicy;o&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=o)),rM(r),xO(r.data,rM)}else n==="graph"||n==="sankey"?eJ(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&yn(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),eM(r)}}),e.dataRange&&(e.visualMap=e.dataRange),Ce(QK,function(r){var n=e[r];n&&(Gt(n)||(n=[n]),Ce(n,function(i){eM(i)}))})}function tJ(e){var t=Ir();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),a=r.getData(),l={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:r};if(!l.stackedDimension||!(l.isStackedByIndex||l.stackedByDimension))return;i.length&&a.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(l)}}),t.each(rJ)}function rJ(e){Ce(e,function(t,r){var n=[],i=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],l=t.data,o=t.isStackedByIndex,h=t.seriesModel.get("stackStrategy")||"samesign";l.modify(a,function(d,m,g){var _=l.get(t.stackedDimension,g);if(isNaN(_))return i;var x,E;o?E=l.getRawIndex(g):x=l.get(t.stackedByDimension,g);for(var M=NaN,P=r-1;P>=0;P--){var I=e[P];if(o||(E=I.data.rawIndexOf(I.stackedByDimension,x)),E>=0){var D=I.data.getByRawIndex(I.stackResultDimension,E);if(h==="all"||h==="positive"&&D>0||h==="negative"&&D<0||h==="samesign"&&_>=0&&D>0||h==="samesign"&&_<=0&&D<0){_=hZ(_,D),M=D;break}}}return n[0]=_,n[1]=M,n})})}var By=function(){function e(t){this.data=t.data||(t.sourceFormat===Gs?{}:[]),this.sourceFormat=t.sourceFormat||dO,this.seriesLayoutBy=t.seriesLayoutBy||Rs,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&vO(this,n)===Sa.Must&&(i.type="ordinal")}}return e}();function bS(e){return e instanceof By}function fw(e,t,r){r=r||wO(e);var n=t.seriesLayoutBy,i=iJ(e,r,n,t.sourceHeader,t.dimensions),a=new By({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:Ur(t)});return a}function wS(e){return new By({data:e,sourceFormat:Pa(e)?Nl:ao})}function nJ(e){return new By({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:Ur(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function wO(e){var t=dO;if(Pa(e))t=Nl;else if(Gt(e)){e.length===0&&(t=ma);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(Gt(i)){t=ma;break}else if(ar(i)){t=is;break}}}}else if(ar(e)){for(var a in e)if(Qh(e,a)&&pa(e[a])){t=Gs;break}}return t}function iJ(e,t,r,n,i){var a,l;if(!e)return{dimensionsDefine:nM(i),startIndex:l,dimensionsDetectedCount:a};if(t===ma){var o=e;n==="auto"||n==null?iM(function(d){d!=null&&d!=="-"&&(Jt(d)?l==null&&(l=1):l=0)},r,o,10):l=Mn(n)?n:n?1:0,!i&&l===1&&(i=[],iM(function(d,m){i[m]=d!=null?d+"":""},r,o,1/0)),a=i?i.length:r===yf?o.length:o[0]?o[0].length:null}else if(t===is)i||(i=aJ(e));else if(t===Gs)i||(i=[],Ce(e,function(d,m){i.push(m)}));else if(t===ao){var h=vm(e[0]);a=Gt(h)&&h.length||1}return{startIndex:l,dimensionsDefine:nM(i),dimensionsDetectedCount:a}}function aJ(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return Ce(r,function(i,a){n.push(a)}),n}}function nM(e){if(!!e){var t=Ir();return nr(e,function(r,n){r=ar(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var a=t.get(i.name);return a?i.name+="-"+a.count++:t.set(i.name,{count:1}),i})}}function iM(e,t,r,n){if(t===yf)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var a=r[0]||[],i=0;i<a.length&&i<n;i++)e(a[i],i)}function SO(e){var t=e.sourceFormat;return t===is||t===Gs}var Gu,qu,Wu,aM,oM,TO=function(){function e(t,r){var n=bS(t)?t:wS(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Nl&&(this._offset=0,this._dimSize=r,this._data=i),oM(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;oM=function(l,o,h){var d=h.sourceFormat,m=h.seriesLayoutBy,g=h.startIndex,_=h.dimensionsDefine,x=aM[SS(d,m)];if(Ct(l,x),d===Nl)l.getItem=r,l.count=i,l.fillStorage=n;else{var E=EO(d,m);l.getItem=Rn(E,null,o,g,_);var M=CO(d,m);l.count=Rn(M,null,o,g,_)}};var r=function(l,o){l=l-this._offset,o=o||[];for(var h=this._data,d=this._dimSize,m=d*l,g=0;g<d;g++)o[g]=h[m+g];return o},n=function(l,o,h,d){for(var m=this._data,g=this._dimSize,_=0;_<g;_++){for(var x=d[_],E=x[0]==null?1/0:x[0],M=x[1]==null?-1/0:x[1],P=o-l,I=h[_],D=0;D<P;D++){var O=m[D*g+_];I[l+D]=O,O<E&&(E=O),O>M&&(M=O)}x[0]=E,x[1]=M}},i=function(){return this._data?this._data.length/this._dimSize:0};aM=(t={},t[ma+"_"+Rs]={pure:!0,appendData:a},t[ma+"_"+yf]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[is]={pure:!0,appendData:a},t[Gs]={pure:!0,appendData:function(l){var o=this._data;Ce(l,function(h,d){for(var m=o[d]||(o[d]=[]),g=0;g<(h||[]).length;g++)m.push(h[g])})}},t[ao]={appendData:a},t[Nl]={persistent:!1,pure:!0,appendData:function(l){this._data=l},clean:function(){this._offset+=this.count(),this._data=null}},t);function a(l){for(var o=0;o<l.length;o++)this._data.push(l[o])}}(),e}(),sM=function(e,t,r,n){return e[n]},oJ=(Gu={},Gu[ma+"_"+Rs]=function(e,t,r,n){return e[n+t]},Gu[ma+"_"+yf]=function(e,t,r,n,i){n+=t;for(var a=i||[],l=e,o=0;o<l.length;o++){var h=l[o];a[o]=h?h[n]:null}return a},Gu[is]=sM,Gu[Gs]=function(e,t,r,n,i){for(var a=i||[],l=0;l<r.length;l++){var o=r[l].name,h=e[o];a[l]=h?h[n]:null}return a},Gu[ao]=sM,Gu);function EO(e,t){var r=oJ[SS(e,t)];return r}var lM=function(e,t,r){return e.length},sJ=(qu={},qu[ma+"_"+Rs]=function(e,t,r){return Math.max(0,e.length-t)},qu[ma+"_"+yf]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},qu[is]=lM,qu[Gs]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},qu[ao]=lM,qu);function CO(e,t){var r=sJ[SS(e,t)];return r}var Sx=function(e,t,r){return e[t]},lJ=(Wu={},Wu[ma]=Sx,Wu[is]=function(e,t,r){return e[r]},Wu[Gs]=Sx,Wu[ao]=function(e,t,r){var n=vm(e);return n instanceof Array?n[t]:n},Wu[Nl]=Sx,Wu);function AO(e){var t=lJ[e];return t}function SS(e,t){return e===ma?e+"_"+t:e}function tf(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),a=i.getSource().sourceFormat;if(r!=null){var l=e.getDimensionIndex(r),o=i.getDimensionProperty(l);return AO(a)(n,l,o)}else{var h=n;return a===ao&&(h=vm(n)),h}}}}var uJ=/\{@(.+?)\}/g,cJ=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),a=n.getRawIndex(t),l=n.getName(t),o=n.getRawDataItem(t),h=n.getItemVisual(t,"style"),d=h&&h[n.getItemVisual(t,"drawType")||"fill"],m=h&&h.stroke,g=this.mainType,_=g==="series",x=n.userOutput&&n.userOutput.get();return{componentType:g,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:_?this.subType:null,seriesIndex:this.seriesIndex,seriesId:_?this.id:null,seriesName:_?this.name:null,name:l,dataIndex:a,data:o,dataType:r,value:i,color:d,borderColor:m,dimensionNames:x?x.fullDimensions:null,encode:x?x.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,a,l){r=r||"normal";var o=this.getData(n),h=this.getDataParams(t,n);if(l&&(h.value=l.interpolatedValue),i!=null&&Gt(h.value)&&(h.value=h.value[i]),!a){var d=o.getItemModel(t);a=d.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Er(a))return h.status=r,h.dimensionIndex=i,a(h);if(Jt(a)){var m=uO(a,h);return m.replace(uJ,function(g,_){var x=_.length,E=_;E.charAt(0)==="["&&E.charAt(x-1)==="]"&&(E=+E.slice(1,x-1));var M=tf(o,t,E);if(l&&Gt(l.interpolatedValue)){var P=o.getDimensionIndex(E);P>=0&&(M=l.interpolatedValue[P])}return M!=null?M+"":""})}},e.prototype.getRawValue=function(t,r){return tf(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function uM(e){var t,r;return ar(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Tp(e){return new hJ(e)}var hJ=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!n&&(a=this._plan(this.context));var l=m(this._modBy),o=this._modDataCount||0,h=m(t&&t.modBy),d=t&&t.modDataCount||0;(l!==h||o!==d)&&(a="reset");function m(D){return!(D>=1)&&(D=1),D}var g;(this._dirty||a==="reset")&&(this._dirty=!1,g=this._doReset(n)),this._modBy=h,this._modDataCount=d;var _=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var x=this._dueIndex,E=Math.min(_!=null?this._dueIndex+_:1/0,this._dueEnd);if(!n&&(g||x<E)){var M=this._progress;if(Gt(M))for(var P=0;P<M.length;P++)this._doProgress(M[P],x,E,h,d);else this._doProgress(M,x,E,h,d)}this._dueIndex=E;var I=this._settedOutputEnd!=null?this._settedOutputEnd:E;this._outputDueEnd=I}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,a){cM.reset(r,n,i,a),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:cM.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),Gt(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),cM=function(){var e,t,r,n,i,a={reset:function(h,d,m,g){t=h,e=d,r=m,n=g,i=Math.ceil(n/r),a.next=r>1&&n>0?o:l}};return a;function l(){return t<e?t++:null}function o(){var h=t%i*r+Math.ceil(t/i),d=t>=e?null:h<n?h:t;return t++,d}}();function Jg(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!Mn(e)&&e!=null&&e!=="-"&&(e=+Ns(e)),e==null||e===""?NaN:+e)}Ir({number:function(e){return parseFloat(e)},time:function(e){return+Ns(e)},trim:function(e){return Jt(e)?Ko(e):e}});var fJ=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=Mn(t)?t:B_(t),i=Mn(r)?r:B_(r),a=isNaN(n),l=isNaN(i);if(a&&(n=this._incomparable),l&&(i=this._incomparable),a&&l){var o=Jt(t),h=Jt(r);o&&(n=h?t:0),h&&(i=o?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),dJ=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Jg(t,r)},e}();function pJ(e,t){var r=new dJ,n=e.data,i=r.sourceFormat=e.sourceFormat,a=e.startIndex,l="";e.seriesLayoutBy!==Rs&&ua(l);var o=[],h={},d=e.dimensionsDefine;if(d)Ce(d,function(M,P){var I=M.name,D={index:P,name:I,displayName:M.displayName};if(o.push(D),I!=null){var O="";Qh(h,I)&&ua(O),h[I]=D}});else for(var m=0;m<e.dimensionsDetectedCount;m++)o.push({index:m});var g=EO(i,Rs);t.__isBuiltIn&&(r.getRawDataItem=function(M){return g(n,a,o,M)},r.getRawData=Rn(mJ,null,e)),r.cloneRawData=Rn(vJ,null,e);var _=CO(i,Rs);r.count=Rn(_,null,n,a,o);var x=AO(i);r.retrieveValue=function(M,P){var I=g(n,a,o,M);return E(I,P)};var E=r.retrieveValueFromItem=function(M,P){if(M!=null){var I=o[P];if(I)return x(M,P,I.name)}};return r.getDimensionInfo=Rn(gJ,null,o,h),r.cloneAllDimensionInfo=Rn(_J,null,o),r}function mJ(e){var t=e.sourceFormat;if(!TS(t)){var r="";ua(r)}return e.data}function vJ(e){var t=e.sourceFormat,r=e.data;if(!TS(t)){var n="";ua(n)}if(t===ma){for(var i=[],a=0,l=r.length;a<l;a++)i.push(r[a].slice());return i}else if(t===is){for(var i=[],a=0,l=r.length;a<l;a++)i.push(Ct({},r[a]));return i}}function gJ(e,t,r){if(r!=null){if(Mn(r)||!isNaN(r)&&!Qh(t,r))return e[r];if(Qh(t,r))return t[r]}}function _J(e){return Ur(e)}var IO=Ir();function yJ(e){e=Ur(e);var t=e.type,r="";t||ua(r);var n=t.split(":");n.length!==2&&ua(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,IO.set(t,e)}function xJ(e,t,r){var n=ea(e),i=n.length,a="";i||ua(a);for(var l=0,o=i;l<o;l++){var h=n[l];t=bJ(h,t),l!==o-1&&(t.length=Math.max(t.length,1))}return t}function bJ(e,t,r,n){var i="";t.length||ua(i),ar(e)||ua(i);var a=e.type,l=IO.get(a);l||ua(i);var o=nr(t,function(d){return pJ(d,l)}),h=ea(l.transform({upstream:o[0],upstreamList:o,config:Ur(e.config)}));return nr(h,function(d,m){var g="";ar(d)||ua(g),d.data||ua(g);var _=wO(d.data);TS(_)||ua(g);var x,E=t[0];if(E&&m===0&&!d.dimensions){var M=E.startIndex;M&&(d.data=E.data.slice(0,M).concat(d.data)),x={seriesLayoutBy:Rs,sourceHeader:M,dimensions:E.metaRawOption.dimensions}}else x={seriesLayoutBy:Rs,sourceHeader:0,dimensions:d.dimensions};return fw(d.data,x,null)})}function TS(e){return e===ma||e===is}var Fy="undefined",wJ=typeof Uint32Array===Fy?Array:Uint32Array,SJ=typeof Uint16Array===Fy?Array:Uint16Array,PO=typeof Int32Array===Fy?Array:Int32Array,hM=typeof Float64Array===Fy?Array:Float64Array,MO={float:hM,int:PO,ordinal:Array,number:Array,time:hM},Tx;function Bd(e){return e>65535?wJ:SJ}function vh(){return[1/0,-1/0]}function TJ(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function fM(e,t,r,n,i){var a=MO[r||"float"];if(i){var l=e[t],o=l&&l.length;if(o!==n){for(var h=new a(n),d=0;d<o;d++)h[d]=l[d];e[t]=h}}else e[t]=new a(n)}var dw=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Ir()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),a=this.defaultDimValueGetter=Tx[i.sourceFormat];this._dimValueGetter=n||a,this._rawExtent=[],SO(i),this._dimensions=nr(r,function(l){return{type:l.type,property:l.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,a=n.get(t);if(a!=null){if(i[a].type===r)return a}else a=i.length;return i[a]={type:r},n.set(t,a),this._chunks[a]=new MO[r||"float"](this._rawCount),this._rawExtent[a]=vh(),a},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],a=this._rawExtent,l=i.ordinalOffset||0,o=n.length;l===0&&(a[t]=vh());for(var h=a[t],d=l;d<o;d++){var m=n[d]=r.parseAndCollect(n[d]);isNaN(m)||(h[0]=Math.min(m,h[0]),h[1]=Math.max(m,h[1]))}i.ordinalMeta=r,i.ordinalOffset=o,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,a=i.length,l=this._rawExtent,o=this.count(),h=o+Math.max(t.length,r||0),d=0;d<a;d++){var m=i[d];fM(n,d,m.type,h,!0)}for(var g=[],_=o;_<h;_++)for(var x=_-o,E=0;E<a;E++){var m=i[E],M=Tx.arrayRows.call(this,t[x]||g,m.property,x,E);n[E][_]=M;var P=l[E];M<P[0]&&(P[0]=M),M>P[1]&&(P[1]=M)}return this._rawCount=this._count=h,{start:o,end:h}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,a=this._chunks,l=this._dimensions,o=l.length,h=this._rawExtent,d=nr(l,function(D){return D.property}),m=0;m<o;m++){var g=l[m];h[m]||(h[m]=vh()),fM(a,m,g.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,a,h);else for(var _=[],x=t;x<r;x++){_=i.getItem(x,_);for(var E=0;E<o;E++){var M=a[E],P=this._dimValueGetter(_,d[E],x,E);M[x]=P;var I=h[E];P<I[0]&&(I[0]=P),P>I[1]&&(I[1]=P)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var a=0;a<this._dimensions.length;a++)i.push(a)}else i=t;for(var a=0,l=i.length;a<l;a++)n.push(this.get(i[a],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,a=this.count();i<a;i++){var l=this.get(t,i);isNaN(l)||(n+=l)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(a){isNaN(a)||r.push(a)});var n=r.sort(function(a,l){return a-l}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,a=this._count-1;i<=a;){var l=(i+a)/2|0;if(r[l]<t)i=l+1;else if(r[l]>t)a=l-1;else return l}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,a=i[t],l=[];if(!a)return l;n==null&&(n=1/0);for(var o=1/0,h=-1,d=0,m=0,g=this.count();m<g;m++){var _=this.getRawIndex(m),x=r-a[_],E=Math.abs(x);E<=n&&((E<o||E===o&&x>=0&&h<0)&&(o=E,h=x,d=0),x===h&&(l[d++]=m))}return l.length=d,l},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var a=0;a<i;a++)t[a]=r[a]}else t=new n(r.buffer,0,i)}else{var n=Bd(this._rawCount);t=new n(this.count());for(var a=0;a<t.length;a++)t[a]=a}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),a=Bd(n._rawCount),l=new a(i),o=[],h=t.length,d=0,m=t[0],g=n._chunks,_=0;_<i;_++){var x=void 0,E=n.getRawIndex(_);if(h===0)x=r(_);else if(h===1){var M=g[m][E];x=r(M,_)}else{for(var P=0;P<h;P++)o[P]=g[t[P]][E];o[P]=_,x=r.apply(null,o)}x&&(l[d++]=E)}return d<i&&(n._indices=l),n._count=d,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=Gr(t),a=i.length;if(!a)return this;var l=r.count(),o=Bd(r._rawCount),h=new o(l),d=0,m=i[0],g=t[m][0],_=t[m][1],x=r._chunks,E=!1;if(!r._indices){var M=0;if(a===1){for(var P=x[i[0]],I=0;I<n;I++){var D=P[I];(D>=g&&D<=_||isNaN(D))&&(h[d++]=M),M++}E=!0}else if(a===2){for(var P=x[i[0]],O=x[i[1]],F=t[i[1]][0],$=t[i[1]][1],I=0;I<n;I++){var D=P[I],q=O[I];(D>=g&&D<=_||isNaN(D))&&(q>=F&&q<=$||isNaN(q))&&(h[d++]=M),M++}E=!0}}if(!E)if(a===1)for(var I=0;I<l;I++){var K=r.getRawIndex(I),D=x[i[0]][K];(D>=g&&D<=_||isNaN(D))&&(h[d++]=K)}else for(var I=0;I<l;I++){for(var Z=!0,K=r.getRawIndex(I),re=0;re<a;re++){var ie=i[re],D=x[ie][K];(D<t[ie][0]||D>t[ie][1])&&(Z=!1)}Z&&(h[d++]=r.getRawIndex(I))}return d<l&&(r._indices=h),r._count=d,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,a=[],l=r.length,o=t.count(),h=[],d=t._rawExtent,m=0;m<r.length;m++)d[r[m]]=vh();for(var g=0;g<o;g++){for(var _=t.getRawIndex(g),x=0;x<l;x++)h[x]=i[r[x]][_];h[l]=g;var E=n&&n.apply(null,h);if(E!=null){typeof E!="object"&&(a[0]=E,E=a);for(var m=0;m<E.length;m++){var M=r[m],P=E[m],I=d[M],D=i[M];D&&(D[_]=P),P<I[0]&&(I[0]=P),P>I[1]&&(I[1]=P)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,a=i[t],l=this.count(),o=0,h=Math.floor(1/r),d=this.getRawIndex(0),m,g,_,x=new(Bd(this._rawCount))(Math.min((Math.ceil(l/h)+2)*2,l));x[o++]=d;for(var E=1;E<l-1;E+=h){for(var M=Math.min(E+h,l-1),P=Math.min(E+h*2,l),I=(P+M)/2,D=0,O=M;O<P;O++){var F=this.getRawIndex(O),$=a[F];isNaN($)||(D+=$)}D/=P-M;var q=E,K=Math.min(E+h,l),Z=E-1,re=a[d];m=-1,_=q;for(var ie=-1,ce=0,O=q;O<K;O++){var F=this.getRawIndex(O),$=a[F];if(isNaN($)){ce++,ie<0&&(ie=F);continue}g=Math.abs((Z-I)*($-re)-(Z-O)*(D-re)),g>m&&(m=g,_=F)}ce>0&&ce<K-q&&(x[o++]=Math.min(ie,_),_=Math.max(ie,_)),x[o++]=_,d=_}return x[o++]=this.getRawIndex(l-1),n._count=o,n._indices=x,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var a=this.clone([t],!0),l=a._chunks,o=[],h=Math.floor(1/r),d=l[t],m=this.count(),g=a._rawExtent[t]=vh(),_=new(Bd(this._rawCount))(Math.ceil(m/h)),x=0,E=0;E<m;E+=h){h>m-E&&(h=m-E,o.length=h);for(var M=0;M<h;M++){var P=this.getRawIndex(E+M);o[M]=d[P]}var I=n(o),D=this.getRawIndex(Math.min(E+i(o,I)||0,m-1));d[D]=I,I<g[0]&&(g[0]=I),I>g[1]&&(g[1]=I),_[x++]=D}return a._count=x,a._indices=_,a._updateGetRawIdx(),a},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,a=0,l=this.count();a<l;a++){var o=this.getRawIndex(a);switch(n){case 0:r(a);break;case 1:r(i[t[0]][o],a);break;case 2:r(i[t[0]][o],i[t[1]][o],a);break;default:for(var h=0,d=[];h<n;h++)d[h]=i[t[h]][o];d[h]=a,r.apply(null,d)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=vh();if(!r)return n;var i=this.count(),a=!this._indices,l;if(a)return this._rawExtent[t].slice();if(l=this._extent[t],l)return l.slice();l=n;for(var o=l[0],h=l[1],d=0;d<i;d++){var m=this.getRawIndex(d),g=r[m];g<o&&(o=g),g>h&&(h=g)}return l=[o,h],this._extent[t]=l,l},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,a=0;a<i.length;a++)n.push(i[a][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,a=t&&vf(t,function(o,h){return o[h]=!0,o},{});if(a)for(var l=0;l<i.length;l++)n._chunks[l]=a[l]?TJ(i[l]):i[l];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Ur(this._extent),t._rawExtent=Ur(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,a){return Jg(r[a],this._dimensions[a])}Tx={arrayRows:t,objectRows:function(r,n,i,a){return Jg(r[n],this._dimensions[a])},keyedColumns:t,original:function(r,n,i,a){var l=r&&(r.value==null?r:r.value);return Jg(l instanceof Array?l[a]:l,this._dimensions[a])},typedArray:function(r,n,i,a){return r[a]}}}(),e}(),EJ=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,a;if(vg(t)){var l=t,o=void 0,h=void 0,d=void 0;if(n){var m=r[0];m.prepareSource(),d=m.getSource(),o=d.data,h=d.sourceFormat,a=[m._getVersionSign()]}else o=l.get("data",!0),h=Pa(o)?Nl:ao,a=[];var g=this._getSourceMetaRawOption()||{},_=d&&d.metaRawOption||{},x=Lr(g.seriesLayoutBy,_.seriesLayoutBy)||null,E=Lr(g.sourceHeader,_.sourceHeader),M=Lr(g.dimensions,_.dimensions),P=x!==_.seriesLayoutBy||!!E!=!!_.sourceHeader||M;i=P?[fw(o,{seriesLayoutBy:x,sourceHeader:E,dimensions:M},h)]:[]}else{var I=t;if(n){var D=this._applyTransform(r);i=D.sourceList,a=D.upstreamSignList}else{var O=I.get("source",!0);i=[fw(O,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(i,a)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var a="";t.length!==1&&dM(a)}var l,o=[],h=[];return Ce(t,function(d){d.prepareSource();var m=d.getSource(i||0),g="";i!=null&&!m&&dM(g),o.push(m),h.push(d._getVersionSign())}),n?l=xJ(n,o,{datasetIndex:r.componentIndex}):i!=null&&(l=[nJ(o[0])]),{sourceList:l,upstreamSignList:h}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,a=this._storeList,l=a[i];l||(l=a[i]={});var o=l[n];if(!o){var h=this._getUpstreamSourceManagers()[0];vg(this._sourceHost)&&h?o=h._innerGetDataStore(t,r,n):(o=new dw,o.initData(new TO(r,t.length),t)),l[n]=o}return o},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(vg(t)){var r=mO(t);return r?[r.getSourceManager()]:[]}else return nr(IK(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(vg(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=t;r=a.get("seriesLayoutBy",!0),n=a.get("sourceHeader",!0),i=a.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function vg(e){return e.mainType==="series"}function dM(e){throw new Error(e)}var DO="line-height:1";function kO(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",a=e.color||"#464646",l=e.fontSize||14,o=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Ka(n+"")+"px;color:"+Ka(r)+";font-weight:"+Ka(i+""),valueStyle:"font-size:"+Ka(l+"")+"px;color:"+Ka(a)+";font-weight:"+Ka(o+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:l,fill:a,fontWeight:o}}}var CJ=[0,10,20,30],AJ=["",`
`,`

`,`


`];function rf(e,t){return t.type=e,t}function pw(e){return e.type==="section"}function LO(e){return pw(e)?IJ:PJ}function OO(e){if(pw(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return Ce(e.blocks,function(i){var a=OO(i);a>=t&&(t=a+ +(n&&(!a||pw(i)&&!i.noHeader)))}),t}return 0}function IJ(e,t,r,n){var i=t.noHeader,a=MJ(OO(t)),l=[],o=t.blocks||[];Ao(!o||Gt(o)),o=o||[];var h=e.orderMode;if(t.sortBlocks&&h){o=o.slice();var d={valueAsc:"asc",valueDesc:"desc"};if(Qh(d,h)){var m=new fJ(d[h],null);o.sort(function(E,M){return m.evaluate(E.sortParam,M.sortParam)})}else h==="seriesDesc"&&o.reverse()}Ce(o,function(E,M){var P=t.valueFormatter,I=LO(E)(P?Ct(Ct({},e),{valueFormatter:P}):e,E,M>0?a.html:0,n);I!=null&&l.push(I)});var g=e.renderMode==="richText"?l.join(a.richText):mw(l.join(""),i?r:a.html);if(i)return g;var _=hw(t.header,"ordinal",e.useUTC),x=kO(n,e.renderMode).nameStyle;return e.renderMode==="richText"?RO(e,_,x)+a.richText+g:mw('<div style="'+x+";"+DO+';">'+Ka(_)+"</div>"+g,r)}function PJ(e,t,r,n){var i=e.renderMode,a=t.noName,l=t.noValue,o=!t.markerType,h=t.name,d=e.useUTC,m=t.valueFormatter||e.valueFormatter||function(F){return F=Gt(F)?F:[F],nr(F,function($,q){return hw($,Gt(x)?x[q]:x,d)})};if(!(a&&l)){var g=o?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),_=a?"":hw(h,"ordinal",d),x=t.valueType,E=l?[]:m(t.value),M=!o||!a,P=!o&&a,I=kO(n,i),D=I.nameStyle,O=I.valueStyle;return i==="richText"?(o?"":g)+(a?"":RO(e,_,D))+(l?"":LJ(e,E,M,P,O)):mw((o?"":g)+(a?"":DJ(_,!o,D))+(l?"":kJ(E,M,P,O)),r)}}function pM(e,t,r,n,i,a){if(!!e){var l=LO(e),o={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return l(o,e,0,a)}}function MJ(e){return{html:CJ[e],richText:AJ[e]}}function mw(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+DO+';">'+e+r+"</div>"}function DJ(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Ka(e)+"</span>"}function kJ(e,t,r,n){var i=r?"10px":"20px",a=t?"float:right;margin-left:"+i:"";return e=Gt(e)?e:[e],'<span style="'+a+";"+n+'">'+nr(e,function(l){return Ka(l)}).join("&nbsp;&nbsp;")+"</span>"}function RO(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function LJ(e,t,r,n,i){var a=[i],l=n?10:20;return r&&a.push({padding:[0,0,0,l],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(Gt(t)?t.join("  "):t,a)}function OJ(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return Yp(n)}function zO(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var Ex=function(){function e(){this.richTextStyles={},this._nextStyleNameId=HL()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,a=xK({color:r,type:t,renderMode:n,markerId:i});return Jt(a)?a:(this.richTextStyles[i]=a.style,a.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};Gt(r)?Ce(r,function(a){return Ct(n,a)}):Ct(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function RJ(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),a=i.mapDimensionsAll("defaultedTooltip"),l=a.length,o=t.getRawValue(r),h=Gt(o),d=OJ(t,r),m,g,_,x;if(l>1||h&&!l){var E=zJ(o,t,r,a,d);m=E.inlineValues,g=E.inlineValueTypes,_=E.blocks,x=E.inlineValues[0]}else if(l){var M=i.getDimensionInfo(a[0]);x=m=tf(i,r,a[0]),g=M.type}else x=m=h?o[0]:o;var P=ZL(t),I=P&&t.name||"",D=i.getName(r),O=n?I:D;return rf("section",{header:I,noHeader:n||!P,sortParam:x,blocks:[rf("nameValue",{markerType:"item",markerColor:d,name:O,noName:!Ko(O),value:m,valueType:g})].concat(_||[])})}function zJ(e,t,r,n,i){var a=t.getData(),l=vf(e,function(g,_,x){var E=a.getDimensionInfo(x);return g=g||E&&E.tooltip!==!1&&E.displayName!=null},!1),o=[],h=[],d=[];n.length?Ce(n,function(g){m(tf(a,r,g),g)}):Ce(e,m);function m(g,_){var x=a.getDimensionInfo(_);!x||x.otherDims.tooltip===!1||(l?d.push(rf("nameValue",{markerType:"subItem",markerColor:i,name:x.displayName,value:g,valueType:x.type})):(o.push(g),h.push(x.type)))}return{inlineValues:o,inlineValueTypes:h,blocks:d}}var xl=ni();function gg(e,t){return e.getName(t)||e.getId(t)}var BJ="__universalTransitionEnabled",Ny=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Tp({count:NJ,reset:VJ}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var a=xl(this).sourceManager=new EJ(this);a.prepareSource();var l=this.getInitialData(r,i);vM(l,this),this.dataTask.context.data=l,xl(this).dataBeforeProcessed=l,mM(this),this._initSelectedMapFromData(l)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=Kp(this),a=i?_S(r):{},l=this.subType;An.hasClass(l)&&(l+="Series"),En(r,n.getTheme().get(this.subType)),En(r,this.getDefaultOption()),JI(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&Jp(r,a,i)},t.prototype.mergeOption=function(r,n){r=En(this.option,r,!0),this.fillDataTextStyle(r.data);var i=Kp(this);i&&Jp(this.option,r,i);var a=xl(this).sourceManager;a.dirty(),a.prepareSource();var l=this.getInitialData(r,n);vM(l,this),this.dataTask.dirty(),this.dataTask.context.data=l,xl(this).dataBeforeProcessed=l,mM(this),this._initSelectedMapFromData(l)},t.prototype.fillDataTextStyle=function(r){if(r&&!Pa(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&JI(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=vw(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return xl(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=vw(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}xl(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return Ir(r)},t.prototype.getSourceManager=function(){return xl(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return xl(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return RJ({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Or.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var a=this.ecModel,l=yS.prototype.getColorFromPalette.call(this,r,n,i);return l||(l=a.getColorFromPalette(r,n,i)),l},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var a=this.option.selectedMode,l=this.getData(n);if(a==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<r.length;o++){var h=r[o],d=gg(l,h);i[d]=!1,this._selectedDataIndicesMap[d]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],a=0;a<r.length;a++)i[0]=r[a],this.isSelected(r[a],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=Gr(r),i=[],a=0;a<n.length;a++){var l=r[n[a]];l>=0&&i.push(l)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var a=this.getData(n);return(i==="all"||i[gg(a,r)])&&!a.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[BJ])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,a,l=this.option,o=l.selectedMode,h=n.length;if(!(!o||!h)){if(o==="series")l.selectedMap="all";else if(o==="multiple"){ar(l.selectedMap)||(l.selectedMap={});for(var d=l.selectedMap,m=0;m<h;m++){var g=n[m],_=gg(r,g);d[_]=!0,this._selectedDataIndicesMap[_]=r.getRawIndex(g)}}else if(o==="single"||o===!0){var x=n[h-1],_=gg(r,x);l.selectedMap=(i={},i[_]=!0,i),this._selectedDataIndicesMap=(a={},a[_]=r.getRawIndex(x),a)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var a=r.getRawDataItem(i);a&&a.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return An.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(An);ns(Ny,cJ);ns(Ny,yS);KL(Ny,An);function mM(e){var t=e.name;ZL(e)||(e.name=FJ(e)||t)}function FJ(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return Ce(r,function(i){var a=t.getDimensionInfo(i);a.displayName&&n.push(a.displayName)}),n.join(" ")}function NJ(e){return e.model.getRawData().count()}function VJ(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),UJ}function UJ(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function vM(e,t){Ce(Nb(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,to($J,t))})}function $J(e,t){var r=vw(e);return r&&r.setOutputEnd((t||this).count()),t}function vw(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const nf=Ny;var ES=function(){function e(){this.group=new bi,this.uid=Dy("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();X2(ES);Ty(ES);const ql=ES;function CS(){var e=ni();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,a=!!r.progressiveRender,l=r.large=!!(n&&n.large),o=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==l||a!==o)&&"reset"}}var BO=ni(),jJ=CS(),AS=function(){function e(){this.group=new bi,this.uid=Dy("viewChart"),this.renderTask=Tp({plan:HJ,reset:GJ}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var a=t.getData(i&&i.dataType);!a||_M(a,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var a=t.getData(i&&i.dataType);!a||_M(a,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){Iy(this.group,t)},e.markUpdateMethod=function(t,r){BO(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function gM(e,t,r){e&&sw(e)&&(t==="emphasis"?qp:Wp)(e,r)}function _M(e,t,r){var n=gm(e,t),i=t&&t.highlightKey!=null?qX(t.highlightKey):null;n!=null?Ce(ea(n),function(a){gM(e.getItemGraphicEl(a),r,i)}):e.eachItemGraphicEl(function(a){gM(a,r,i)})}X2(AS);Ty(AS);function HJ(e){return jJ(e.model)}function GJ(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,a=t.pipelineContext.progressiveRender,l=e.view,o=i&&BO(i).updateMethod,h=a?"incrementalPrepareRender":o&&l[o]?o:"render";return h!=="render"&&l[h](t,r,n,i),qJ[h]}var qJ={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const dc=AS;var G_="\0__throttleOriginMethod",yM="\0__throttleRate",xM="\0__throttleType";function IS(e,t,r){var n,i=0,a=0,l=null,o,h,d,m;t=t||0;function g(){a=new Date().getTime(),l=null,e.apply(h,d||[])}var _=function(){for(var x=[],E=0;E<arguments.length;E++)x[E]=arguments[E];n=new Date().getTime(),h=this,d=x;var M=m||t,P=m||r;m=null,o=n-(P?i:a)-M,clearTimeout(l),P?l=setTimeout(g,M):o>=0?g():l=setTimeout(g,-o),i=n};return _.clear=function(){l&&(clearTimeout(l),l=null)},_.debounceNextCall=function(x){m=x},_}function FO(e,t,r,n){var i=e[t];if(!!i){var a=i[G_]||i,l=i[xM],o=i[yM];if(o!==r||l!==n){if(r==null||!n)return e[t]=a;i=e[t]=IS(a,r,n==="debounce"),i[G_]=a,i[xM]=n,i[yM]=r}return i}}function gw(e,t){var r=e[t];r&&r[G_]&&(r.clear&&r.clear(),e[t]=r[G_])}var bM=ni(),wM={itemStyle:Gp(Y4,!0),lineStyle:Gp(X4,!0)},WJ={lineStyle:"stroke",itemStyle:"fill"};function NO(e,t){var r=e.visualStyleMapper||wM[t];return r||(console.warn("Unkown style type '"+t+"'."),wM.itemStyle)}function VO(e,t){var r=e.visualDrawType||WJ[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var ZJ={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),a=NO(e,n),l=a(i),o=i.getShallow("decal");o&&(r.setVisual("decal",o),o.dirty=!0);var h=VO(e,n),d=l[h],m=Er(d)?d:null,g=l.fill==="auto"||l.stroke==="auto";if(!l[h]||m||g){var _=e.getColorFromPalette(e.name,null,t.getSeriesCount());l[h]||(l[h]=_,r.setVisual("colorFromPalette",!0)),l.fill=l.fill==="auto"||Er(l.fill)?_:l.fill,l.stroke=l.stroke==="auto"||Er(l.stroke)?_:l.stroke}if(r.setVisual("style",l),r.setVisual("drawType",h),!t.isSeriesFiltered(e)&&m)return r.setVisual("colorFromPalette",!1),{dataEach:function(x,E){var M=e.getDataParams(E),P=Ct({},l);P[h]=m(M),x.setItemVisual(E,"style",P)}}}},Fd=new Ji,XJ={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=NO(e,n),a=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(l,o){var h=l.getRawDataItem(o);if(h&&h[n]){Fd.option=h[n];var d=i(Fd),m=l.ensureUniqueItemVisual(o,"style");Ct(m,d),Fd.option.decal&&(l.setItemVisual(o,"decal",Fd.option.decal),Fd.option.decal.dirty=!0),a in d&&l.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},YJ={performRawSeries:!0,overallReset:function(e){var t=Ir();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,a=t.get(i);a||(a={},t.set(i,a)),bM(r).scope=a}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},a=r.getData(),l=bM(r).scope,o=r.visualStyleAccessPath||"itemStyle",h=VO(r,o);a.each(function(d){var m=a.getRawIndex(d);i[m]=d}),n.each(function(d){var m=i[d],g=a.getItemVisual(m,"colorFromPalette");if(g){var _=a.ensureUniqueItemVisual(m,"style"),x=n.getName(d)||d+"",E=n.count();_[h]=r.getColorFromPalette(x,l,E)}})}})}},_g=Math.PI;function KJ(e,t){t=t||{},yn(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new bi,n=new fa({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new Io({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new fa({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(a);var l;return t.showSpinner&&(l=new sS({shape:{startAngle:-_g/2,endAngle:-_g/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),l.animateShape(!0).when(1e3,{endAngle:_g*3/2}).start("circularInOut"),l.animateShape(!0).when(1e3,{startAngle:_g*3/2}).delay(300).start("circularInOut"),r.add(l)),r.resize=function(){var o=i.getBoundingRect().width,h=t.showSpinner?t.spinnerRadius:0,d=(e.getWidth()-h*2-(t.showSpinner&&o?10:0)-o)/2-(t.showSpinner&&o?0:5+o/2)+(t.showSpinner?0:o/2)+(o?0:h),m=e.getHeight()/2;t.showSpinner&&l.setShape({cx:d,cy:m}),a.setShape({x:d-h,y:m-h,width:h*2,height:h*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var JJ=function(){function e(t,r,n,i){this._stageTaskMap=Ir(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,a=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,l=a?n.step:null,o=i&&i.modDataCount,h=o!=null?Math.ceil(o/l):null;return{step:l,modBy:h,modDataCount:o}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),a=i.count(),l=n.progressiveEnabled&&r.incrementalPrepareRender&&a>=n.threshold,o=t.get("large")&&a>=t.get("largeThreshold"),h=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=n.context={progressiveRender:l,modDataCount:h,large:o}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=Ir();t.eachSeries(function(i){var a=i.getProgressive(),l=i.uid;n.set(l,{id:l,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:a&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;Ce(this._allHandlers,function(i){var a=t.get(i.uid)||t.set(i.uid,{}),l="";Ao(!(i.reset&&i.overallReset),l),i.reset&&this._createSeriesStageTask(i,a,r,n),i.overallReset&&this._createOverallStageTask(i,a,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var a=t.renderTask,l=a.context;l.model=r,l.ecModel=n,l.api=i,a.__block=!t.incrementalPrepareRender,this._pipe(r,a)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var a=!1,l=this;Ce(t,function(h,d){if(!(i.visualType&&i.visualType!==h.visualType)){var m=l._stageTaskMap.get(h.uid),g=m.seriesTaskMap,_=m.overallTask;if(_){var x,E=_.agentStubMap;E.each(function(P){o(i,P)&&(P.dirty(),x=!0)}),x&&_.dirty(),l.updatePayload(_,n);var M=l.getPerformArgs(_,i.block);E.each(function(P){P.perform(M)}),_.perform(M)&&(a=!0)}else g&&g.each(function(P,I){o(i,P)&&P.dirty();var D=l.getPerformArgs(P,i.block);D.skip=!h.performRawSeries&&r.isSeriesFiltered(P.context.model),l.updatePayload(P,n),P.perform(D)&&(a=!0)})}});function o(h,d){return h.setDirty&&(!h.dirtyMap||h.dirtyMap.get(d.__pipeline.id))}this.unfinished=a||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var a=this,l=r.seriesTaskMap,o=r.seriesTaskMap=Ir(),h=t.seriesType,d=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(m):h?n.eachRawSeriesByType(h,m):d&&d(n,i).each(m);function m(g){var _=g.uid,x=o.set(_,l&&l.get(_)||Tp({plan:nQ,reset:iQ,count:oQ}));x.context={model:g,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:a},a._pipe(g,x)}},e.prototype._createOverallStageTask=function(t,r,n,i){var a=this,l=r.overallTask=r.overallTask||Tp({reset:QJ});l.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:a};var o=l.agentStubMap,h=l.agentStubMap=Ir(),d=t.seriesType,m=t.getTargetSeries,g=!0,_=!1,x="";Ao(!t.createOnAllSeries,x),d?n.eachRawSeriesByType(d,E):m?m(n,i).each(E):(g=!1,Ce(n.getSeries(),E));function E(M){var P=M.uid,I=h.set(P,o&&o.get(P)||(_=!0,Tp({reset:eQ,onDirty:rQ})));I.context={model:M,overallProgress:g},I.agent=l,I.__block=g,a._pipe(M,I)}_&&l.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Er(t)&&(t={overallReset:t,seriesType:sQ(t)}),t.uid=Dy("stageHandler"),r&&(t.visualType=r),t},e}();function QJ(e){e.overallReset(e.ecModel,e.api,e.payload)}function eQ(e){return e.overallProgress&&tQ}function tQ(){this.agent.dirty(),this.getDownstream().dirty()}function rQ(){this.agent&&this.agent.dirty()}function nQ(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function iQ(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=ea(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?nr(t,function(r,n){return UO(n)}):aQ}var aQ=UO(0);function UO(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var a=t.start;a<t.end;a++)i.dataEach(n,a);else i&&i.progress&&i.progress(t,n)}}function oQ(e){return e.data.count()}function sQ(e){q_=null;try{e(em,$O)}catch{}return q_}var em={},$O={},q_;jO(em,_O);jO($O,yO);em.eachSeriesByType=em.eachRawSeriesByType=function(e){q_=e};em.eachComponent=function(e){e.mainType==="series"&&e.subType&&(q_=e.subType)};function jO(e,t){for(var r in t.prototype)e[r]=ha}const HO=JJ;var SM=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const lQ={color:SM,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],SM]};var Gi="#B9B8CE",TM="#100C2A",yg=function(){return{axisLine:{lineStyle:{color:Gi}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},EM=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],GO={darkMode:!0,color:EM,backgroundColor:TM,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Gi}},textStyle:{color:Gi},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Gi}},dataZoom:{borderColor:"#71708A",textStyle:{color:Gi},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Gi}},timeline:{lineStyle:{color:Gi},label:{color:Gi},controlStyle:{color:Gi,borderColor:Gi}},calendar:{itemStyle:{color:TM},dayLabel:{color:Gi},monthLabel:{color:Gi},yearLabel:{color:Gi}},timeAxis:yg(),logAxis:yg(),valueAxis:yg(),categoryAxis:yg(),line:{symbol:"circle"},graph:{color:EM},gauge:{title:{color:Gi},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Gi},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};GO.categoryAxis.splitLine.show=!1;const uQ=GO;var cQ=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Jt(t)){var a=Jo(t);r.mainType=a.main||null,r.subType=a.sub||null}else{var l=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};Ce(t,function(h,d){for(var m=!1,g=0;g<l.length;g++){var _=l[g],x=d.lastIndexOf(_);if(x>0&&x===d.length-_.length){var E=d.slice(0,x);E!=="data"&&(r.mainType=E,r[_.toLowerCase()]=h,m=!0)}}o.hasOwnProperty(d)&&(n[d]=h,m=!0),m||(i[d]=h)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,a=n.packedEvent,l=n.model,o=n.view;if(!l||!o)return!0;var h=r.cptQuery,d=r.dataQuery;return m(h,l,"mainType")&&m(h,l,"subType")&&m(h,l,"index","componentIndex")&&m(h,l,"name")&&m(h,l,"id")&&m(d,a,"name")&&m(d,a,"dataIndex")&&m(d,a,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(t,r.otherQuery,i,a));function m(g,_,x,E){return g[x]==null||_[E||x]===g[x]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),_w=["symbol","symbolSize","symbolRotate","symbolOffset"],CM=_w.concat(["symbolKeepAspect"]),hQ={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},a=!1,l=0;l<_w.length;l++){var o=_w[l],h=e.get(o);Er(h)?(a=!0,i[o]=h):n[o]=h}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(Ct({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var d=Gr(i);function m(g,_){for(var x=e.getRawValue(_),E=e.getDataParams(_),M=0;M<d.length;M++){var P=d[M];g.setItemVisual(_,P,i[P](x,E))}}return{dataEach:a?m:null}}},fQ={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,a){for(var l=i.getItemModel(a),o=0;o<CM.length;o++){var h=CM[o],d=l.getShallow(h,!0);d!=null&&i.setItemVisual(a,h,d)}}return{dataEach:r.hasItemOption?n:null}}};function dQ(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function pQ(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function gh(e,t,r,n,i){var a=e+t;r.isSilent(a)||n.eachComponent({mainType:"series",subType:"pie"},function(l){for(var o=l.seriesIndex,h=l.option.selectedMap,d=i.selected,m=0;m<d.length;m++)if(d[m].seriesIndex===o){var g=l.getData(),_=gm(g,i.fromActionPayload);r.trigger(a,{type:a,seriesId:l.id,name:Gt(_)?g.getName(_[0]):g.getName(_),selected:Jt(h)?h:Ct({},h)})}})}function mQ(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(gh("map","selectchanged",t,i,n),gh("pie","selectchanged",t,i,n)):n.fromAction==="select"?(gh("map","selected",t,i,n),gh("pie","selected",t,i,n)):n.fromAction==="unselect"&&(gh("map","unselected",t,i,n),gh("pie","unselected",t,i,n))})}function np(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var vQ=Math.round(Math.random()*9),gQ=typeof Object.defineProperty=="function",_Q=function(){function e(){this._id="__ec_inner_"+vQ++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return gQ?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const yQ=_Q;var xQ=nn.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,a=t.height/2;e.moveTo(r,n-a),e.lineTo(r+i,n+a),e.lineTo(r-i,n+a),e.closePath()}}),bQ=nn.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,a=t.height/2;e.moveTo(r,n-a),e.lineTo(r+i,n),e.lineTo(r,n+a),e.lineTo(r-i,n),e.closePath()}}),wQ=nn.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,a=Math.max(i,t.height),l=i/2,o=l*l/(a-l),h=n-a+l+o,d=Math.asin(o/l),m=Math.cos(d)*l,g=Math.sin(d),_=Math.cos(d),x=l*.6,E=l*.7;e.moveTo(r-m,h+o),e.arc(r,h,l,Math.PI-d,Math.PI*2+d),e.bezierCurveTo(r+m-g*x,h+o+_*x,r,n-E,r,n),e.bezierCurveTo(r,n-E,r-m+g*x,h+o+_*x,r-m,h+o),e.closePath()}}),SQ=nn.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,a=t.y,l=n/3*2;e.moveTo(i,a),e.lineTo(i+l,a+r),e.lineTo(i,a+r/4*3),e.lineTo(i-l,a+r),e.lineTo(i,a),e.closePath()}}),TQ={line:Gl,rect:fa,roundRect:fa,square:fa,circle:nS,diamond:bQ,pin:wQ,arrow:SQ,triangle:xQ},EQ={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var a=Math.min(r,n);i.x=e,i.y=t,i.width=a,i.height=a},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},yw={};Ce(TQ,function(e,t){yw[t]=new e});var CQ=nn.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=zL(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=yw[n];i||(n="rect",i=yw[n]),EQ[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function AQ(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function xf(e,t,r,n,i,a,l){var o=e.indexOf("empty")===0;o&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var h;return e.indexOf("image://")===0?h=U4(e.slice(8),new _n(t,r,n,i),l?"center":"cover"):e.indexOf("path://")===0?h=uS(e.slice(7),{},new _n(t,r,n,i),l?"center":"cover"):h=new CQ({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),h.__isEmptyBrush=o,h.setColor=AQ,a&&h.setColor(a),h}function qO(e){return Gt(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function PS(e,t){if(e!=null)return Gt(e)||(e=[e,e]),[Zi(e[0],t[0])||0,Zi(Lr(e[1],e[0]),t[1])||0]}function sc(e){return isFinite(e)}function IQ(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,a=t.y==null?0:t.y,l=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,a=a*r.height+r.y,l=l*r.height+r.y),n=sc(n)?n:0,i=sc(i)?i:1,a=sc(a)?a:0,l=sc(l)?l:0;var o=e.createLinearGradient(n,a,i,l);return o}function PQ(e,t,r){var n=r.width,i=r.height,a=Math.min(n,i),l=t.x==null?.5:t.x,o=t.y==null?.5:t.y,h=t.r==null?.5:t.r;t.global||(l=l*n+r.x,o=o*i+r.y,h=h*a),l=sc(l)?l:.5,o=sc(o)?o:.5,h=h>=0&&sc(h)?h:.5;var d=e.createRadialGradient(l,o,0,l,o,h);return d}function AM(e,t,r){for(var n=t.type==="radial"?PQ(e,t,r):IQ(e,t,r),i=t.colorStops,a=0;a<i.length;a++)n.addColorStop(i[a].offset,i[a].color);return n}function MQ(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function xg(e){return parseInt(e,10)}function IM(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],l=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var o=document.defaultView.getComputedStyle(e);return(e[i]||xg(o[n])||xg(e.style[n]))-(xg(o[a])||0)-(xg(o[l])||0)|0}function DQ(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:Mn(e)?[e]:Gt(e)?e:null}function MS(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&DQ(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=nr(r,function(a){return a/i}),n/=i)}return[r,n]}var kQ=new gc(!0);function W_(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function PM(e){return typeof e=="string"&&e!=="none"}function Z_(e){var t=e.fill;return t!=null&&t!=="none"}function MM(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function DM(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function kM(e,t,r){var n=Y2(t.image,t.__image,r);if(Ey(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*Vg),a.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(a)}return i}}function LQ(e,t,r,n){var i,a=W_(r),l=Z_(r),o=r.strokePercent,h=o<1,d=!t.path;(!t.silent||h)&&d&&t.createPathProxy();var m=t.path||kQ,g=t.__dirty;if(!n){var _=r.fill,x=r.stroke,E=l&&!!_.colorStops,M=a&&!!x.colorStops,P=l&&!!_.image,I=a&&!!x.image,D=void 0,O=void 0,F=void 0,$=void 0,q=void 0;(E||M)&&(q=t.getBoundingRect()),E&&(D=g?AM(e,_,q):t.__canvasFillGradient,t.__canvasFillGradient=D),M&&(O=g?AM(e,x,q):t.__canvasStrokeGradient,t.__canvasStrokeGradient=O),P&&(F=g||!t.__canvasFillPattern?kM(e,_,t):t.__canvasFillPattern,t.__canvasFillPattern=F),I&&($=g||!t.__canvasStrokePattern?kM(e,x,t):t.__canvasStrokePattern,t.__canvasStrokePattern=F),E?e.fillStyle=D:P&&(F?e.fillStyle=F:l=!1),M?e.strokeStyle=O:I&&($?e.strokeStyle=$:a=!1)}var K=t.getGlobalScale();m.setScale(K[0],K[1],t.segmentIgnoreThreshold);var Z,re;e.setLineDash&&r.lineDash&&(i=MS(t),Z=i[0],re=i[1]);var ie=!0;(d||g&Th)&&(m.setDPR(e.dpr),h?m.setContext(null):(m.setContext(e),ie=!1),m.reset(),t.buildPath(m,t.shape,n),m.toStatic(),t.pathUpdated()),ie&&m.rebuildPath(e,h?o:1),Z&&(e.setLineDash(Z),e.lineDashOffset=re),n||(r.strokeFirst?(a&&DM(e,r),l&&MM(e,r)):(l&&MM(e,r),a&&DM(e,r))),Z&&e.setLineDash([])}function OQ(e,t,r){var n=t.__image=Y2(r.image,t.__image,t,t.onload);if(!(!n||!Ey(n))){var i=r.x||0,a=r.y||0,l=t.getWidth(),o=t.getHeight(),h=n.width/n.height;if(l==null&&o!=null?l=o*h:o==null&&l!=null?o=l/h:l==null&&o==null&&(l=n.width,o=n.height),r.sWidth&&r.sHeight){var d=r.sx||0,m=r.sy||0;e.drawImage(n,d,m,r.sWidth,r.sHeight,i,a,l,o)}else if(r.sx&&r.sy){var d=r.sx,m=r.sy,g=l-d,_=o-m;e.drawImage(n,d,m,g,_,i,a,l,o)}else e.drawImage(n,i,a,l,o)}}function RQ(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||Hl,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var a=void 0,l=void 0;e.setLineDash&&r.lineDash&&(n=MS(t),a=n[0],l=n[1]),a&&(e.setLineDash(a),e.lineDashOffset=l),r.strokeFirst?(W_(r)&&e.strokeText(i,r.x,r.y),Z_(r)&&e.fillText(i,r.x,r.y)):(Z_(r)&&e.fillText(i,r.x,r.y),W_(r)&&e.strokeText(i,r.x,r.y)),a&&e.setLineDash([])}}var LM=["shadowBlur","shadowOffsetX","shadowOffsetY"],OM=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function WO(e,t,r,n,i){var a=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){ca(e,i),a=!0;var l=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(l)?hc.opacity:l}(n||t.blend!==r.blend)&&(a||(ca(e,i),a=!0),e.globalCompositeOperation=t.blend||hc.blend);for(var o=0;o<LM.length;o++){var h=LM[o];(n||t[h]!==r[h])&&(a||(ca(e,i),a=!0),e[h]=e.dpr*(t[h]||0))}return(n||t.shadowColor!==r.shadowColor)&&(a||(ca(e,i),a=!0),e.shadowColor=t.shadowColor||hc.shadowColor),a}function RM(e,t,r,n,i){var a=tm(t,i.inHover),l=n?null:r&&tm(r,i.inHover)||{};if(a===l)return!1;var o=WO(e,a,l,n,i);if((n||a.fill!==l.fill)&&(o||(ca(e,i),o=!0),PM(a.fill)&&(e.fillStyle=a.fill)),(n||a.stroke!==l.stroke)&&(o||(ca(e,i),o=!0),PM(a.stroke)&&(e.strokeStyle=a.stroke)),(n||a.opacity!==l.opacity)&&(o||(ca(e,i),o=!0),e.globalAlpha=a.opacity==null?1:a.opacity),t.hasStroke()){var h=a.lineWidth,d=h/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==d&&(o||(ca(e,i),o=!0),e.lineWidth=d)}for(var m=0;m<OM.length;m++){var g=OM[m],_=g[0];(n||a[_]!==l[_])&&(o||(ca(e,i),o=!0),e[_]=a[_]||g[1])}return o}function zQ(e,t,r,n,i){return WO(e,tm(t,i.inHover),r&&tm(r,i.inHover),n,i)}function ZO(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function BQ(e,t,r){for(var n=!1,i=0;i<e.length;i++){var a=e[i];n=n||a.isZeroArea(),ZO(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}r.allClipped=n}function FQ(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var zM=1,BM=2,FM=3,NM=4;function NQ(e){var t=Z_(e),r=W_(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function ca(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function tm(e,t){return t&&e.__hoverStyle||e.style}function VQ(e,t){xw(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function xw(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~Zo,t.__isRendered=!1;return}var a=t.__clipPaths,l=r.prevElClipPaths,o=!1,h=!1;if((!l||MQ(a,l))&&(l&&l.length&&(ca(e,r),e.restore(),h=o=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),a&&a.length&&(ca(e,r),e.save(),BQ(a,e,r),o=!0),r.prevElClipPaths=a),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var d=r.prevEl;d||(h=o=!0);var m=t instanceof nn&&t.autoBatch&&NQ(t.style);o||FQ(i,d.transform)?(ca(e,r),ZO(e,t)):m||ca(e,r);var g=tm(t,r.inHover);t instanceof nn?(r.lastDrawType!==zM&&(h=!0,r.lastDrawType=zM),RM(e,t,d,h,r),(!m||!r.batchFill&&!r.batchStroke)&&e.beginPath(),LQ(e,t,g,m),m&&(r.batchFill=g.fill||"",r.batchStroke=g.stroke||"")):t instanceof N_?(r.lastDrawType!==FM&&(h=!0,r.lastDrawType=FM),RM(e,t,d,h,r),RQ(e,t,g)):t instanceof js?(r.lastDrawType!==BM&&(h=!0,r.lastDrawType=BM),zQ(e,t,d,h,r),OQ(e,t,g)):t.getTemporalDisplayables&&(r.lastDrawType!==NM&&(h=!0,r.lastDrawType=NM),UQ(e,t,r)),m&&n&&ca(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function UQ(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},l,o;for(l=t.getCursor(),o=n.length;l<o;l++){var h=n[l];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),xw(e,h,a,l===o-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),a.prevEl=h}for(var d=0,m=i.length;d<m;d++){var h=i[d];h.beforeBrush&&h.beforeBrush(),h.innerBeforeBrush(),xw(e,h,a,d===m-1),h.innerAfterBrush(),h.afterBrush&&h.afterBrush(),a.prevEl=h}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var Cx=new yQ,VM=new mm(100),UM=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function $M(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&Cx.delete(e);var a=Cx.get(e);if(a)return a;var l=yn(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});l.backgroundColor==="none"&&(l.backgroundColor=null);var o={repeat:"repeat"};return h(o),o.rotation=l.rotation,o.scaleX=o.scaleY=i?1:1/r,Cx.set(e,o),e.dirty=!1,o;function h(d){for(var m=[r],g=!0,_=0;_<UM.length;++_){var x=l[UM[_]];if(x!=null&&!Gt(x)&&!Jt(x)&&!Mn(x)&&typeof x!="boolean"){g=!1;break}m.push(x)}var E;if(g){E=m.join(",")+(i?"-svg":"");var M=VM.get(E);M&&(i?d.svgElement=M:d.image=M)}var P=YO(l.dashArrayX),I=$Q(l.dashArrayY),D=XO(l.symbol),O=jQ(P),F=KO(I),$=!i&&mf.createCanvas(),q=i&&{tag:"g",attrs:{},key:"dcl",children:[]},K=re(),Z;$&&($.width=K.width*r,$.height=K.height*r,Z=$.getContext("2d")),ie(),g&&VM.put(E,$||q),d.image=$,d.svgElement=q,d.svgWidth=K.width,d.svgHeight=K.height;function re(){for(var ce=1,le=0,fe=O.length;le<fe;++le)ce=KI(ce,O[le]);for(var ye=1,le=0,fe=D.length;le<fe;++le)ye=KI(ye,D[le].length);ce*=ye;var Ne=F*O.length*D.length;return{width:Math.max(1,Math.min(ce,l.maxTileWidth)),height:Math.max(1,Math.min(Ne,l.maxTileHeight))}}function ie(){Z&&(Z.clearRect(0,0,$.width,$.height),l.backgroundColor&&(Z.fillStyle=l.backgroundColor,Z.fillRect(0,0,$.width,$.height)));for(var ce=0,le=0;le<I.length;++le)ce+=I[le];if(ce<=0)return;for(var fe=-F,ye=0,Ne=0,be=0;fe<K.height;){if(ye%2===0){for(var et=Ne/2%D.length,tt=0,wt=0,Rt=0;tt<K.width*2;){for(var Qt=0,le=0;le<P[be].length;++le)Qt+=P[be][le];if(Qt<=0)break;if(wt%2===0){var Ut=(1-l.symbolSize)*.5,vr=tt+P[be][wt]*Ut,yr=fe+I[ye]*Ut,$e=P[be][wt]*l.symbolSize,pt=I[ye]*l.symbolSize,it=Rt/2%D[et].length;dt(vr,yr,$e,pt,D[et][it])}tt+=P[be][wt],++Rt,++wt,wt===P[be].length&&(wt=0)}++be,be===P.length&&(be=0)}fe+=I[ye],++Ne,++ye,ye===I.length&&(ye=0)}function dt(Dt,qt,ot,lt,oe){var ve=i?1:r,De=xf(oe,Dt*ve,qt*ve,ot*ve,lt*ve,l.color,l.symbolKeepAspect);if(i){var Ge=n.painter.renderOneToVNode(De);Ge&&q.children.push(Ge)}else VQ(Z,De)}}}}function XO(e){if(!e||e.length===0)return[["rect"]];if(Jt(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Jt(e[r])){t=!1;break}if(t)return XO([e]);for(var n=[],r=0;r<e.length;++r)Jt(e[r])?n.push([e[r]]):n.push(e[r]);return n}function YO(e){if(!e||e.length===0)return[[0,0]];if(Mn(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!Mn(e[n])){r=!1;break}if(r)return YO([e]);for(var i=[],n=0;n<e.length;++n)if(Mn(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=nr(e[n],function(o){return Math.ceil(o)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function $Q(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(Mn(e)){var t=Math.ceil(e);return[t,t]}var r=nr(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function jQ(e){return nr(e,function(t){return KO(t)})}function KO(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function HQ(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(l){var o=n.getItemVisual(l,"decal");if(o){var h=n.ensureUniqueItemVisual(l,"style");h.decal=$M(o,t)}});var i=n.getVisual("decal");if(i){var a=n.getVisual("style");a.decal=$M(i,t)}}})}var GQ=new $s;const yo=GQ;var JO={};function qQ(e,t){JO[e]=t}function WQ(e){return JO[e]}var ZQ=typeof window<"u",XQ=1,YQ=800,KQ=900,JQ=1e3,QQ=2e3,eee=5e3,QO=1e3,tee=1100,DS=2e3,eR=3e3,ree=4e3,Vy=4500,nee=4600,iee=5e3,aee=6e3,tR=7e3,oee={PROCESSOR:{FILTER:JQ,SERIES_FILTER:YQ,STATISTIC:eee},VISUAL:{LAYOUT:QO,PROGRESSIVE_LAYOUT:tee,GLOBAL:DS,CHART:eR,POST_CHART_LAYOUT:nee,COMPONENT:ree,BRUSH:iee,CHART_ITEM:Vy,ARIA:aee,DECAL:tR}},Mi="__flagInMainProcess",sa="__pendingUpdate",Ax="__needsUpdateStatus",jM=/^[a-zA-Z0-9_]+$/,Ix="__connectUpdateStatus",HM=0,see=1,lee=2;function rR(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return iR(this,e,t)}}function nR(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return iR(this,e,t)}}function iR(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),$s.prototype[t].apply(e,r)}var aR=function(e){Vt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}($s),oR=aR.prototype;oR.on=nR("on");oR.off=nR("off");var _h,Px,bg,bl,Mx,Dx,kx,Nd,Vd,GM,qM,Lx,WM,wg,ZM,sR,Na,XM,lR=function(e){Vt(t,e);function t(r,n,i){var a=e.call(this,new cQ)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},Jt(n)&&(n=uR[n]),a._dom=r;var l="canvas",o=!1,h=a._zr=ZI(r,{renderer:i.renderer||l,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:i.useDirtyRect==null?o:i.useDirtyRect});a._ssr=i.ssr,a._throttledZrFlush=IS(Rn(h.flush,h),17),n=Ur(n),n&&bO(n,!0),a._theme=n,a._locale=hK(i.locale||K4),a._coordSysMgr=new xS;var d=a._api=ZM(a);function m(g,_){return g.__prio-_.__prio}return Ug(Y_,m),Ug(bw,m),a._scheduler=new HO(a,d,bw,Y_),a._messageCenter=new aR,a._initEvents(),a.resize=Rn(a.resize,a),h.animation.on("frame",a._onframe,a),GM(h,a),qM(h,a),Fb(a),a}return t.prototype._onframe=function(){if(!this._disposed){XM(this);var r=this._scheduler;if(this[sa]){var n=this[sa].silent;this[Mi]=!0;try{_h(this),bl.update.call(this,null,this[sa].updateParams)}catch(h){throw this[Mi]=!1,this[sa]=null,h}this._zr.flush(),this[Mi]=!1,this[sa]=null,Nd.call(this,n),Vd.call(this,n)}else if(r.unfinished){var i=XQ,a=this._model,l=this._api;r.unfinished=!1;do{var o=+new Date;r.performSeriesTasks(a),r.performDataProcessorTasks(a),Dx(this,a),r.performVisualTasks(a),wg(this,this._model,l,"remain",{}),i-=+new Date-o}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[Mi]){if(this._disposed){this.id;return}var a,l,o;if(ar(n)&&(i=n.lazyUpdate,a=n.silent,l=n.replaceMerge,o=n.transition,n=n.notMerge),this[Mi]=!0,!this._model||n){var h=new WK(this._api),d=this._theme,m=this._model=new _O;m.scheduler=this._scheduler,m.ssr=this._ssr,m.init(null,null,null,d,this._locale,h)}this._model.setOption(r,{replaceMerge:l},ww);var g={seriesTransition:o,optionChanged:!0};if(i)this[sa]={silent:a,updateParams:g},this[Mi]=!1,this.getZr().wakeUp();else{try{_h(this),bl.update.call(this,null,g)}catch(_){throw this[sa]=null,this[Mi]=!1,_}this._ssr||this._zr.flush(),this[sa]=null,this[Mi]=!1,Nd.call(this,a),Vd.call(this,a)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||ZQ&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Or.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return Ce(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,a=[],l=this;Ce(n,function(h){i.eachComponent({mainType:h},function(d){var m=l._componentsMap[d.__viewId];m.group.ignore||(a.push(m),m.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return Ce(a,function(h){h.group.ignore=!1}),o},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,a=Math.min,l=Math.max,o=1/0;if(YM[i]){var h=o,d=o,m=-o,g=-o,_=[],x=r&&r.pixelRatio||this.getDevicePixelRatio();Ce(Cp,function(O,F){if(O.group===i){var $=n?O.getZr().painter.getSvgDom().innerHTML:O.renderToCanvas(Ur(r)),q=O.getDom().getBoundingClientRect();h=a(q.left,h),d=a(q.top,d),m=l(q.right,m),g=l(q.bottom,g),_.push({dom:$,left:q.left,top:q.top})}}),h*=x,d*=x,m*=x,g*=x;var E=m-h,M=g-d,P=mf.createCanvas(),I=ZI(P,{renderer:n?"svg":"canvas"});if(I.resize({width:E,height:M}),n){var D="";return Ce(_,function(O){var F=O.left-h,$=O.top-d;D+='<g transform="translate('+F+","+$+')">'+O.dom+"</g>"}),I.painter.getSvgRoot().innerHTML=D,r.connectedBackgroundColor&&I.painter.setBackgroundColor(r.connectedBackgroundColor),I.refreshImmediately(),I.painter.toDataURL()}else return r.connectedBackgroundColor&&I.add(new fa({shape:{x:0,y:0,width:E,height:M},style:{fill:r.connectedBackgroundColor}})),Ce(_,function(O){var F=new js({style:{x:O.left*x-h,y:O.top*x-d,image:O.dom}});I.add(F)}),I.refreshImmediately(),P.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return Mx(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return Mx(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,a,l=J1(i,r);return Ce(l,function(o,h){h.indexOf("Models")>=0&&Ce(o,function(d){var m=d.coordinateSystem;if(m&&m.containPoint)a=a||!!m.containPoint(n);else if(h==="seriesModels"){var g=this._chartsMap[d.__viewId];g&&g.containPoint&&(a=a||g.containPoint(n,d))}},this)},this),!!a},t.prototype.getVisual=function(r,n){var i=this._model,a=J1(i,r,{defaultMainType:"series"}),l=a.seriesModel,o=l.getData(),h=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?o.indexOfRawIndex(a.dataIndex):null;return h!=null?dQ(o,h,n):pQ(o,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;Ce(uee,function(n){var i=function(a){var l=r.getModel(),o=a.target,h,d=n==="globalout";if(d?h={}:o&&np(o,function(E){var M=bn(E);if(M&&M.dataIndex!=null){var P=M.dataModel||l.getSeriesByIndex(M.seriesIndex);return h=P&&P.getDataParams(M.dataIndex,M.dataType)||{},!0}else if(M.eventData)return h=Ct({},M.eventData),!0},!0),h){var m=h.componentType,g=h.componentIndex;(m==="markLine"||m==="markPoint"||m==="markArea")&&(m="series",g=h.seriesIndex);var _=m&&g!=null&&l.getComponent(m,g),x=_&&r[_.mainType==="series"?"_chartsMap":"_componentsMap"][_.__viewId];h.event=a,h.type=n,r._$eventProcessor.eventInfo={targetEl:o,packedEvent:h,model:_,view:x},r.trigger(n,h)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),Ce(Ep,function(n,i){r._messageCenter.on(i,function(a){this.trigger(i,a)},r)}),Ce(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),mQ(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&XL(this.getDom(),LS,"");var n=this,i=n._api,a=n._model;Ce(n._componentsViews,function(l){l.dispose(a,i)}),Ce(n._chartsViews,function(l){l.dispose(a,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Cp[n.id]},t.prototype.resize=function(r){if(!this[Mi]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),a=r&&r.silent;this[sa]&&(a==null&&(a=this[sa].silent),i=!0,this[sa]=null),this[Mi]=!0;try{i&&_h(this),bl.update.call(this,{type:"resize",animation:Ct({duration:0},r&&r.animation)})}catch(l){throw this[Mi]=!1,l}this[Mi]=!1,Nd.call(this,a),Vd.call(this,a)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(ar(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!Sw[r]){var i=Sw[r](this._api,n),a=this._zr;this._loadingFX=i,a.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=Ct({},r);return n.type=Ep[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(ar(n)||(n={silent:!!n}),!!X_[r.type]&&!!this._model){if(this[Mi]){this._pendingActions.push(r);return}var i=n.silent;kx.call(this,r,i);var a=n.flush;a?this._zr.flush():a!==!1&&Or.browser.weChat&&this._throttledZrFlush(),Nd.call(this,i),Vd.call(this,i)}},t.prototype.updateLabelLayout=function(){yo.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),a=i.getSeriesByIndex(n);a.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){_h=function(g){var _=g._scheduler;_.restorePipelines(g._model),_.prepareStageTasks(),Px(g,!0),Px(g,!1),_.plan()},Px=function(g,_){for(var x=g._model,E=g._scheduler,M=_?g._componentsViews:g._chartsViews,P=_?g._componentsMap:g._chartsMap,I=g._zr,D=g._api,O=0;O<M.length;O++)M[O].__alive=!1;_?x.eachComponent(function(q,K){q!=="series"&&F(K)}):x.eachSeries(F);function F(q){var K=q.__requireNewView;q.__requireNewView=!1;var Z="_ec_"+q.id+"_"+q.type,re=!K&&P[Z];if(!re){var ie=Jo(q.type),ce=_?ql.getClass(ie.main,ie.sub):dc.getClass(ie.sub);re=new ce,re.init(x,D),P[Z]=re,M.push(re),I.add(re.group)}q.__viewId=re.__id=Z,re.__alive=!0,re.__model=q,re.group.__ecComponentInfo={mainType:q.mainType,index:q.componentIndex},!_&&E.prepareView(re,q,x,D)}for(var O=0;O<M.length;){var $=M[O];$.__alive?O++:(!_&&$.renderTask.dispose(),I.remove($.group),$.dispose(x,D),M.splice(O,1),P[$.__id]===$&&delete P[$.__id],$.__id=$.group.__ecComponentInfo=null)}},bg=function(g,_,x,E,M){var P=g._model;if(P.setUpdatePayload(x),!E){Ce([].concat(g._componentsViews).concat(g._chartsViews),$);return}var I={};I[E+"Id"]=x[E+"Id"],I[E+"Index"]=x[E+"Index"],I[E+"Name"]=x[E+"Name"];var D={mainType:E,query:I};M&&(D.subType=M);var O=x.excludeSeriesId,F;O!=null&&(F=Ir(),Ce(ea(O),function(q){var K=es(q,null);K!=null&&F.set(K,!0)})),P&&P.eachComponent(D,function(q){var K=F&&F.get(q.id)!==null;if(!K)if(EP(x))if(q instanceof nf)x.type===fc&&!x.notBlur&&!q.get(["emphasis","disabled"])&&FX(q,x,g._api);else{var Z=tS(q.mainType,q.componentIndex,x.name,g._api),re=Z.focusSelf,ie=Z.dispatchers;x.type===fc&&re&&!x.notBlur&&ow(q.mainType,q.componentIndex,g._api),ie&&Ce(ie,function(ce){x.type===fc?qp(ce):Wp(ce)})}else lw(x)&&q instanceof nf&&(UX(q,x,g._api),TP(q),Na(g))},g),P&&P.eachComponent(D,function(q){var K=F&&F.get(q.id)!==null;K||$(g[E==="series"?"_chartsMap":"_componentsMap"][q.__viewId])},g);function $(q){q&&q.__alive&&q[_]&&q[_](q.__model,P,g._api,x)}},bl={prepareAndUpdate:function(g){_h(this),bl.update.call(this,g,{optionChanged:g.newOption!=null})},update:function(g,_){var x=this._model,E=this._api,M=this._zr,P=this._coordSysMgr,I=this._scheduler;if(!!x){x.setUpdatePayload(g),I.restoreData(x,g),I.performSeriesTasks(x),P.create(x,E),I.performDataProcessorTasks(x,g),Dx(this,x),P.update(x,E),r(x),I.performVisualTasks(x,g),Lx(this,x,E,g,_);var D=x.get("backgroundColor")||"transparent",O=x.get("darkMode");M.setBackgroundColor(D),O!=null&&O!=="auto"&&M.setDarkMode(O),yo.trigger("afterupdate",x,E)}},updateTransform:function(g){var _=this,x=this._model,E=this._api;if(!!x){x.setUpdatePayload(g);var M=[];x.eachComponent(function(I,D){if(I!=="series"){var O=_.getViewOfComponentModel(D);if(O&&O.__alive)if(O.updateTransform){var F=O.updateTransform(D,x,E,g);F&&F.update&&M.push(O)}else M.push(O)}});var P=Ir();x.eachSeries(function(I){var D=_._chartsMap[I.__viewId];if(D.updateTransform){var O=D.updateTransform(I,x,E,g);O&&O.update&&P.set(I.uid,1)}else P.set(I.uid,1)}),r(x),this._scheduler.performVisualTasks(x,g,{setDirty:!0,dirtyMap:P}),wg(this,x,E,g,{},P),yo.trigger("afterupdate",x,E)}},updateView:function(g){var _=this._model;!_||(_.setUpdatePayload(g),dc.markUpdateMethod(g,"updateView"),r(_),this._scheduler.performVisualTasks(_,g,{setDirty:!0}),Lx(this,_,this._api,g,{}),yo.trigger("afterupdate",_,this._api))},updateVisual:function(g){var _=this,x=this._model;!x||(x.setUpdatePayload(g),x.eachSeries(function(E){E.getData().clearAllVisual()}),dc.markUpdateMethod(g,"updateVisual"),r(x),this._scheduler.performVisualTasks(x,g,{visualType:"visual",setDirty:!0}),x.eachComponent(function(E,M){if(E!=="series"){var P=_.getViewOfComponentModel(M);P&&P.__alive&&P.updateVisual(M,x,_._api,g)}}),x.eachSeries(function(E){var M=_._chartsMap[E.__viewId];M.updateVisual(E,x,_._api,g)}),yo.trigger("afterupdate",x,this._api))},updateLayout:function(g){bl.update.call(this,g)}},Mx=function(g,_,x,E){if(g._disposed){g.id;return}for(var M=g._model,P=g._coordSysMgr.getCoordinateSystems(),I,D=J1(M,x),O=0;O<P.length;O++){var F=P[O];if(F[_]&&(I=F[_](M,D,E))!=null)return I}},Dx=function(g,_){var x=g._chartsMap,E=g._scheduler;_.eachSeries(function(M){E.updateStreamModes(M,x[M.__viewId])})},kx=function(g,_){var x=this,E=this.getModel(),M=g.type,P=g.escapeConnect,I=X_[M],D=I.actionInfo,O=(D.update||"update").split(":"),F=O.pop(),$=O[0]!=null&&Jo(O[0]);this[Mi]=!0;var q=[g],K=!1;g.batch&&(K=!0,q=nr(g.batch,function(ye){return ye=yn(Ct({},ye),g),ye.batch=null,ye}));var Z=[],re,ie=lw(g),ce=EP(g);if(ce&&x4(this._api),Ce(q,function(ye){if(re=I.action(ye,x._model,x._api),re=re||Ct({},ye),re.type=D.event||re.type,Z.push(re),ce){var Ne=Z2(g),be=Ne.queryOptionMap,et=Ne.mainTypeSpecified,tt=et?be.keys()[0]:"series";bg(x,F,ye,tt),Na(x)}else ie?(bg(x,F,ye,"series"),Na(x)):$&&bg(x,F,ye,$.main,$.sub)}),F!=="none"&&!ce&&!ie&&!$)try{this[sa]?(_h(this),bl.update.call(this,g),this[sa]=null):bl[F].call(this,g)}catch(ye){throw this[Mi]=!1,ye}if(K?re={type:D.event||M,escapeConnect:P,batch:Z}:re=Z[0],this[Mi]=!1,!_){var le=this._messageCenter;if(le.trigger(re.type,re),ie){var fe={type:"selectchanged",escapeConnect:P,selected:$X(E),isFromClick:g.isFromClick||!1,fromAction:g.type,fromActionPayload:g};le.trigger(fe.type,fe)}}},Nd=function(g){for(var _=this._pendingActions;_.length;){var x=_.shift();kx.call(this,x,g)}},Vd=function(g){!g&&this.trigger("updated")},GM=function(g,_){g.on("rendered",function(x){_.trigger("rendered",x),g.animation.isFinished()&&!_[sa]&&!_._scheduler.unfinished&&!_._pendingActions.length&&_.trigger("finished")})},qM=function(g,_){g.on("mouseover",function(x){var E=x.target,M=np(E,sw);M&&(NX(M,x,_._api),Na(_))}).on("mouseout",function(x){var E=x.target,M=np(E,sw);M&&(VX(M,x,_._api),Na(_))}).on("click",function(x){var E=x.target,M=np(E,function(D){return bn(D).dataIndex!=null},!0);if(M){var P=M.selected?"unselect":"select",I=bn(M);_._api.dispatchAction({type:P,dataType:I.dataType,dataIndexInside:I.dataIndex,seriesIndex:I.seriesIndex,isFromClick:!0})}})};function r(g){g.clearColorPalette(),g.eachSeries(function(_){_.clearColorPalette()})}function n(g){var _=[],x=[],E=!1;if(g.eachComponent(function(D,O){var F=O.get("zlevel")||0,$=O.get("z")||0,q=O.getZLevelKey();E=E||!!q,(D==="series"?x:_).push({zlevel:F,z:$,idx:O.componentIndex,type:D,key:q})}),E){var M=_.concat(x),P,I;Ug(M,function(D,O){return D.zlevel===O.zlevel?D.z-O.z:D.zlevel-O.zlevel}),Ce(M,function(D){var O=g.getComponent(D.type,D.idx),F=D.zlevel,$=D.key;P!=null&&(F=Math.max(P,F)),$?(F===P&&$!==I&&F++,I=$):I&&(F===P&&F++,I=""),P=F,O.setZLevel(F)})}}Lx=function(g,_,x,E,M){n(_),WM(g,_,x,E,M),Ce(g._chartsViews,function(P){P.__alive=!1}),wg(g,_,x,E,M),Ce(g._chartsViews,function(P){P.__alive||P.remove(_,x)})},WM=function(g,_,x,E,M,P){Ce(P||g._componentsViews,function(I){var D=I.__model;d(D,I),I.render(D,_,x,E),o(D,I),m(D,I)})},wg=function(g,_,x,E,M,P){var I=g._scheduler;M=Ct(M||{},{updatedSeries:_.getSeries()}),yo.trigger("series:beforeupdate",_,x,M);var D=!1;_.eachSeries(function(O){var F=g._chartsMap[O.__viewId];F.__alive=!0;var $=F.renderTask;I.updatePayload($,E),d(O,F),P&&P.get(O.uid)&&$.dirty(),$.perform(I.getPerformArgs($))&&(D=!0),F.group.silent=!!O.get("silent"),l(O,F),TP(O)}),I.unfinished=D||I.unfinished,yo.trigger("series:layoutlabels",_,x,M),yo.trigger("series:transition",_,x,M),_.eachSeries(function(O){var F=g._chartsMap[O.__viewId];o(O,F),m(O,F)}),a(g,_),yo.trigger("series:afterupdate",_,x,M)},Na=function(g){g[Ax]=!0,g.getZr().wakeUp()},XM=function(g){!g[Ax]||(g.getZr().storage.traverse(function(_){wp(_)||i(_)}),g[Ax]=!1)};function i(g){for(var _=[],x=g.currentStates,E=0;E<x.length;E++){var M=x[E];M==="emphasis"||M==="blur"||M==="select"||_.push(M)}g.selected&&g.states.select&&_.push("select"),g.hoverState===Q2&&g.states.emphasis?_.push("emphasis"):g.hoverState===J2&&g.states.blur&&_.push("blur"),g.useStates(_)}function a(g,_){var x=g._zr,E=x.storage,M=0;E.traverse(function(P){P.isGroup||M++}),M>_.get("hoverLayerThreshold")&&!Or.node&&!Or.worker&&_.eachSeries(function(P){if(!P.preventUsingHoverLayer){var I=g._chartsMap[P.__viewId];I.__alive&&I.eachRendered(function(D){D.states.emphasis&&(D.states.emphasis.hoverLayer=!0)})}})}function l(g,_){var x=g.get("blendMode")||null;_.eachRendered(function(E){E.isGroup||(E.style.blend=x)})}function o(g,_){if(!g.preventAutoZ){var x=g.get("z")||0,E=g.get("zlevel")||0;_.eachRendered(function(M){return h(M,x,E,-1/0),!0})}}function h(g,_,x,E){var M=g.getTextContent(),P=g.getTextGuideLine(),I=g.isGroup;if(I)for(var D=g.childrenRef(),O=0;O<D.length;O++)E=Math.max(h(D[O],_,x,E),E);else g.z=_,g.zlevel=x,E=Math.max(g.z2,E);if(M&&(M.z=_,M.zlevel=x,isFinite(E)&&(M.z2=E+2)),P){var F=g.textGuideLineConfig;P.z=_,P.zlevel=x,isFinite(E)&&(P.z2=E+(F&&F.showAbove?1:-1))}return E}function d(g,_){_.eachRendered(function(x){if(!wp(x)){var E=x.getTextContent(),M=x.getTextGuideLine();x.stateTransition&&(x.stateTransition=null),E&&E.stateTransition&&(E.stateTransition=null),M&&M.stateTransition&&(M.stateTransition=null),x.hasState()?(x.prevStates=x.currentStates,x.clearStates()):x.prevStates&&(x.prevStates=null)}})}function m(g,_){var x=g.getModel("stateAnimation"),E=g.isAnimationEnabled(),M=x.get("duration"),P=M>0?{duration:M,delay:x.get("delay"),easing:x.get("easing")}:null;_.eachRendered(function(I){if(I.states&&I.states.emphasis){if(wp(I))return;if(I instanceof nn&&WX(I),I.__dirty){var D=I.prevStates;D&&I.useStates(D)}if(E){I.stateTransition=P;var O=I.getTextContent(),F=I.getTextGuideLine();O&&(O.stateTransition=P),F&&(F.stateTransition=P)}I.__dirty&&i(I)}})}ZM=function(g){return new(function(_){Vt(x,_);function x(){return _!==null&&_.apply(this,arguments)||this}return x.prototype.getCoordinateSystems=function(){return g._coordSysMgr.getCoordinateSystems()},x.prototype.getComponentByElement=function(E){for(;E;){var M=E.__ecComponentInfo;if(M!=null)return g._model.getComponent(M.mainType,M.index);E=E.parent}},x.prototype.enterEmphasis=function(E,M){qp(E,M),Na(g)},x.prototype.leaveEmphasis=function(E,M){Wp(E,M),Na(g)},x.prototype.enterBlur=function(E){BX(E),Na(g)},x.prototype.leaveBlur=function(E){v4(E),Na(g)},x.prototype.enterSelect=function(E){g4(E),Na(g)},x.prototype.leaveSelect=function(E){_4(E),Na(g)},x.prototype.getModel=function(){return g.getModel()},x.prototype.getViewOfComponentModel=function(E){return g.getViewOfComponentModel(E)},x.prototype.getViewOfSeriesModel=function(E){return g.getViewOfSeriesModel(E)},x}(yO))(g)},sR=function(g){function _(x,E){for(var M=0;M<x.length;M++){var P=x[M];P[Ix]=E}}Ce(Ep,function(x,E){g._messageCenter.on(E,function(M){if(YM[g.group]&&g[Ix]!==HM){if(M&&M.escapeConnect)return;var P=g.makeActionFromEvent(M),I=[];Ce(Cp,function(D){D!==g&&D.group===g.group&&I.push(D)}),_(I,HM),Ce(I,function(D){D[Ix]!==see&&D.dispatchAction(P)}),_(I,lee)}})})}}(),t}($s),kS=lR.prototype;kS.on=rR("on");kS.off=rR("off");kS.one=function(e,t,r){var n=this;function i(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];t&&t.apply&&t.apply(this,a),n.off(e,i)}this.on.call(this,e,i,r)};var uee=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var X_={},Ep={},bw=[],ww=[],Y_=[],uR={},Sw={},Cp={},YM={},cee=+new Date-0,LS="_echarts_instance_";function hee(e,t,r){var n=!(r&&r.ssr);if(n){var i=fee(e);if(i)return i}var a=new lR(e,t,r);return a.id="ec_"+cee++,Cp[a.id]=a,n&&XL(e,LS,a.id),sR(a),yo.trigger("afterinit",a),a}function fee(e){return Cp[AZ(e,LS)]}function cR(e,t){uR[e]=t}function hR(e){gn(ww,e)<0&&ww.push(e)}function fR(e,t){RS(bw,e,t,QQ)}function dee(e){OS("afterinit",e)}function pee(e){OS("afterupdate",e)}function OS(e,t){yo.on(e,t)}function bf(e,t,r){Er(t)&&(r=t,t="");var n=ar(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!Ep[t]&&(Ao(jM.test(n)&&jM.test(t)),X_[n]||(X_[n]={action:r,actionInfo:e}),Ep[t]=n)}function mee(e,t){xS.register(e,t)}function vee(e,t){RS(Y_,e,t,QO,"layout")}function Tc(e,t){RS(Y_,e,t,eR,"visual")}var KM=[];function RS(e,t,r,n,i){if((Er(t)||ar(t))&&(r=t,t=n),!(gn(KM,r)>=0)){KM.push(r);var a=HO.wrapStageHandler(r,i);a.__prio=t,a.__raw=r,e.push(a)}}function dR(e,t){Sw[e]=t}function gee(e,t,r){var n=WQ("registerMap");n&&n(e,t,r)}var _ee=yJ;Tc(DS,ZJ);Tc(Vy,XJ);Tc(Vy,YJ);Tc(DS,hQ);Tc(Vy,fQ);Tc(tR,HQ);hR(bO);fR(KQ,tJ);dR("default",KJ);bf({type:fc,event:fc,update:fc},ha);bf({type:Zg,event:Zg,update:Zg},ha);bf({type:yp,event:yp,update:yp},ha);bf({type:Xg,event:Xg,update:Xg},ha);bf({type:xp,event:xp,update:xp},ha);cR("light",lQ);cR("dark",uQ);function Ud(e){return e==null?0:e.length||1}function JM(e){return e}var yee=function(){function e(t,r,n,i,a,l){this._old=t,this._new=r,this._oldKeyGetter=n||JM,this._newKeyGetter=i||JM,this.context=a,this._diffModeMultiple=l==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),a=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,a,"_newKeyGetter");for(var l=0;l<t.length;l++){var o=i[l],h=n[o],d=Ud(h);if(d>1){var m=h.shift();h.length===1&&(n[o]=h[0]),this._update&&this._update(m,l)}else d===1?(n[o]=null,this._update&&this._update(h,l)):this._remove&&this._remove(l)}this._performRestAdd(a,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},a=[],l=[];this._initIndexMap(t,n,a,"_oldKeyGetter"),this._initIndexMap(r,i,l,"_newKeyGetter");for(var o=0;o<a.length;o++){var h=a[o],d=n[h],m=i[h],g=Ud(d),_=Ud(m);if(g>1&&_===1)this._updateManyToOne&&this._updateManyToOne(m,d),i[h]=null;else if(g===1&&_>1)this._updateOneToMany&&this._updateOneToMany(m,d),i[h]=null;else if(g===1&&_===1)this._update&&this._update(m,d),i[h]=null;else if(g>1&&_>1)this._updateManyToMany&&this._updateManyToMany(m,d),i[h]=null;else if(g>1)for(var x=0;x<g;x++)this._remove&&this._remove(d[x]);else this._remove&&this._remove(d)}this._performRestAdd(l,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],a=r[i],l=Ud(a);if(l>1)for(var o=0;o<l;o++)this._add&&this._add(a[o]);else l===1&&this._add&&this._add(a);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var a=this._diffModeMultiple,l=0;l<t.length;l++){var o="_ec_"+this[i](t[l],l);if(a||(n[l]=o),!!r){var h=r[o],d=Ud(h);d===0?(r[o]=l,a&&n.push(o)):d===1?r[o]=[h,l]:h.push(l)}}},e}();const xee=yee;var bee=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function wee(e,t){var r={},n=r.encode={},i=Ir(),a=[],l=[],o={};Ce(e.dimensions,function(_){var x=e.getDimensionInfo(_),E=x.coordDim;if(E){var M=x.coordDimIndex;Ox(n,E)[M]=_,x.isExtraCoord||(i.set(E,1),Tee(x.type)&&(a[0]=_),Ox(o,E)[M]=e.getDimensionIndex(x.name)),x.defaultTooltip&&l.push(_)}fO.each(function(P,I){var D=Ox(n,I),O=x.otherDims[I];O!=null&&O!==!1&&(D[O]=x.name)})});var h=[],d={};i.each(function(_,x){var E=n[x];d[x]=E[0],h=h.concat(E)}),r.dataDimsOnCoord=h,r.dataDimIndicesOnCoord=nr(h,function(_){return e.getDimensionInfo(_).storeDimIndex}),r.encodeFirstDimNotExtra=d;var m=n.label;m&&m.length&&(a=m.slice());var g=n.tooltip;return g&&g.length?l=g.slice():l.length||(l=a.slice()),n.defaultedLabel=a,n.defaultedTooltip=l,r.userOutput=new bee(o,t),r}function Ox(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function See(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function Tee(e){return!(e==="ordinal"||e==="time")}var Eee=function(){function e(t){this.otherDims={},t!=null&&Ct(this,t)}return e}();const Qg=Eee;var Cee=ni(),Aee={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},pR=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=gR(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Lr(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=SO(this.source),n=!_R(t),i="",a=[],l=0,o=0;l<t;l++){var h=void 0,d=void 0,m=void 0,g=this.dimensions[o];if(g&&g.storeDimIndex===l)h=r?g.name:null,d=g.type,m=g.ordinalMeta,o++;else{var _=this.getSourceDimension(l);_&&(h=r?_.name:null,d=_.type)}a.push({property:h,type:d,ordinalMeta:m}),r&&h!=null&&(!g||!g.isCalculationCoord)&&(i+=n?h.replace(/\`/g,"`1").replace(/\$/g,"`2"):h),i+="$",i+=Aee[d]||"f",m&&(i+=m.uid),i+="$"}var x=this.source,E=[x.seriesLayoutBy,x.startIndex,i].join("$$");return{dimensions:a,hash:E}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,a=this.dimensions[n];if(a&&a.storeDimIndex===r)a.isCalculationCoord||(i=a.name),n++;else{var l=this.getSourceDimension(r);l&&(i=l.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function mR(e){return e instanceof pR}function vR(e){for(var t=Ir(),r=0;r<(e||[]).length;r++){var n=e[r],i=ar(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function gR(e){var t=Cee(e);return t.dimNameMap||(t.dimNameMap=vR(e.dimensionsDefine))}function _R(e){return e>30}var $d=ar,wl=nr,Iee=typeof Int32Array>"u"?Array:Int32Array,Pee="e\0\0",QM=-1,Mee=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Dee=["_approximateExtent"],eD,Sg,jd,Hd,Rx,Tg,zx,kee=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;mR(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var a={},l=[],o={},h=!1,d={},m=0;m<n.length;m++){var g=n[m],_=Jt(g)?new Qg({name:g}):g instanceof Qg?g:new Qg(g),x=_.name;_.type=_.type||"float",_.coordDim||(_.coordDim=x,_.coordDimIndex=0);var E=_.otherDims=_.otherDims||{};l.push(x),a[x]=_,d[x]!=null&&(h=!0),_.createInvertedIndices&&(o[x]=[]),E.itemName===0&&(this._nameDimIdx=m),E.itemId===0&&(this._idDimIdx=m),i&&(_.storeDimIndex=m)}if(this.dimensions=l,this._dimInfos=a,this._initGetDimensionInfo(h),this.hostModel=r,this._invertedIndicesMap=o,this._dimOmitted){var M=this._dimIdxToName=Ir();Ce(l,function(P){M.set(a[P].storeDimIndex,P)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(Mn(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,a;if(t instanceof dw&&(a=t),!a){var l=this.dimensions,o=bS(t)||pa(t)?new TO(t,l.length):t;a=new dw;var h=wl(l,function(d){return{type:i._dimInfos[d].type,property:d}});a.initData(o,h,n)}this._store=a,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=wee(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,a=n.end,l=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var o=i;o<a;o++){var h=o-i;this._nameList[o]=r[h],l&&zx(this,o)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Nl&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var a=this._nameList,l=this._idList,o=i.getSource().sourceFormat,h=o===ao;if(h&&!i.pure)for(var d=[],m=t;m<r;m++){var g=i.getItem(m,d);if(!this.hasItemOption&&vZ(g)&&(this.hasItemOption=!0),g){var _=g.name;a[m]==null&&_!=null&&(a[m]=es(_,null));var x=g.id;l[m]==null&&x!=null&&(l[m]=es(x,null))}}if(this._shouldMakeIdFromName())for(var m=t;m<r;m++)zx(this,m);eD(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){$d(t)?Ct(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=jd(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return Sg(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return Gt(t)?i.getValues(wl(t,function(a){return n._getStoreDimIndex(a)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?QM:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Er(t)&&(n=r,r=t,t=[]);var i=n||this,a=wl(Hd(t),this._getStoreDimIndex,this);this._store.each(a,i?Rn(r,i):r)},e.prototype.filterSelf=function(t,r,n){Er(t)&&(n=r,r=t,t=[]);var i=n||this,a=wl(Hd(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,i?Rn(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=Gr(t);return Ce(i,function(a){var l=r._getStoreDimIndex(a);n[l]=t[a]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Er(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var a=n||i||this,l=wl(Hd(t),this._getStoreDimIndex,this),o=Tg(this);return o._store=this._store.map(l,a?Rn(r,a):r),o},e.prototype.modify=function(t,r,n,i){var a=n||i||this,l=wl(Hd(t),this._getStoreDimIndex,this);this._store.modify(l,a?Rn(r,a):r)},e.prototype.downSample=function(t,r,n,i){var a=Tg(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),a},e.prototype.lttbDownSample=function(t,r){var n=Tg(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new Ji(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new xee(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return Sg(t,n)},function(n){return Sg(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},$d(t)?Ct(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var a=i[r];return a==null&&(a=this.getVisual(r),Gt(a)?a=a.slice():$d(a)&&(a=Ct({},a)),i[r]=a),a},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,$d(r)?Ct(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){$d(t)?Ct(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?Ct(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;AX(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){Ce(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:wl(this.dimensions,this._getDimInfo,this),this.hostModel)),Rx(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!Er(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(z2(arguments)))})},e.internalField=function(){eD=function(t){var r=t._invertedIndicesMap;Ce(r,function(n,i){var a=t._dimInfos[i],l=a.ordinalMeta,o=t._store;if(l){n=r[i]=new Iee(l.categories.length);for(var h=0;h<n.length;h++)n[h]=QM;for(var h=0;h<o.count();h++)n[o.get(a.storeDimIndex,h)]=h}})},jd=function(t,r,n){return es(t._getCategory(r,n),null)},Sg=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=jd(t,t._idDimIdx,r)),n==null&&(n=Pee+r),n},Hd=function(t){return Gt(t)||(t=t!=null?[t]:[]),t},Tg=function(t){var r=new e(t._schema?t._schema:wl(t.dimensions,t._getDimInfo,t),t.hostModel);return Rx(r,t),r},Rx=function(t,r){Ce(Mee.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,Ce(Dee,function(n){t[n]=Ur(r[n])}),t._calculationInfo=Ct({},r._calculationInfo)},zx=function(t,r){var n=t._nameList,i=t._idList,a=t._nameDimIdx,l=t._idDimIdx,o=n[r],h=i[r];if(o==null&&a!=null&&(n[r]=o=jd(t,a,r)),h==null&&l!=null&&(i[r]=h=jd(t,l,r)),h==null&&o!=null){var d=t._nameRepeatCount,m=d[o]=(d[o]||0)+1;h=o,m>1&&(h+="__ec__"+m),i[r]=h}}}(),e}();const yR=kee;function Lee(e,t){bS(e)||(e=wS(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=Ir(),a=[],l=Ree(e,r,n,t.dimensionsCount),o=t.canOmitUnusedDimensions&&_R(l),h=n===e.dimensionsDefine,d=h?gR(e):vR(n),m=t.encodeDefine;!m&&t.encodeDefaulter&&(m=t.encodeDefaulter(e,l));for(var g=Ir(m),_=new PO(l),x=0;x<_.length;x++)_[x]=-1;function E(re){var ie=_[re];if(ie<0){var ce=n[re],le=ar(ce)?ce:{name:ce},fe=new Qg,ye=le.name;ye!=null&&d.get(ye)!=null&&(fe.name=fe.displayName=ye),le.type!=null&&(fe.type=le.type),le.displayName!=null&&(fe.displayName=le.displayName);var Ne=a.length;return _[re]=Ne,fe.storeDimIndex=re,a.push(fe),fe}return a[ie]}if(!o)for(var x=0;x<l;x++)E(x);g.each(function(re,ie){var ce=ea(re).slice();if(ce.length===1&&!Jt(ce[0])&&ce[0]<0){g.set(ie,!1);return}var le=g.set(ie,[]);Ce(ce,function(fe,ye){var Ne=Jt(fe)?d.get(fe):fe;Ne!=null&&Ne<l&&(le[ye]=Ne,P(E(Ne),ie,ye))})});var M=0;Ce(r,function(re){var ie,ce,le,fe;if(Jt(re))ie=re,fe={};else{fe=re,ie=fe.name;var ye=fe.ordinalMeta;fe.ordinalMeta=null,fe=Ct({},fe),fe.ordinalMeta=ye,ce=fe.dimsDef,le=fe.otherDims,fe.name=fe.coordDim=fe.coordDimIndex=fe.dimsDef=fe.otherDims=null}var Ne=g.get(ie);if(Ne!==!1){if(Ne=ea(Ne),!Ne.length)for(var be=0;be<(ce&&ce.length||1);be++){for(;M<l&&E(M).coordDim!=null;)M++;M<l&&Ne.push(M++)}Ce(Ne,function(et,tt){var wt=E(et);if(h&&fe.type!=null&&(wt.type=fe.type),P(yn(wt,fe),ie,tt),wt.name==null&&ce){var Rt=ce[tt];!ar(Rt)&&(Rt={name:Rt}),wt.name=wt.displayName=Rt.name,wt.defaultTooltip=Rt.defaultTooltip}le&&yn(wt.otherDims,le)})}});function P(re,ie,ce){fO.get(ie)!=null?re.otherDims[ie]=ce:(re.coordDim=ie,re.coordDimIndex=ce,i.set(ie,!0))}var I=t.generateCoord,D=t.generateCoordCount,O=D!=null;D=I?D||1:0;var F=I||"value";function $(re){re.name==null&&(re.name=re.coordDim)}if(o)Ce(a,function(re){$(re)}),a.sort(function(re,ie){return re.storeDimIndex-ie.storeDimIndex});else for(var q=0;q<l;q++){var K=E(q),Z=K.coordDim;Z==null&&(K.coordDim=zee(F,i,O),K.coordDimIndex=0,(!I||D<=0)&&(K.isExtraCoord=!0),D--),$(K),K.type==null&&(vO(e,q)===Sa.Must||K.isExtraCoord&&(K.otherDims.itemName!=null||K.otherDims.seriesName!=null))&&(K.type="ordinal")}return Oee(a),new pR({source:e,dimensions:a,fullDimensionCount:l,dimensionOmitted:o})}function Oee(e){for(var t=Ir(),r=0;r<e.length;r++){var n=e[r],i=n.name,a=t.get(i)||0;a>0&&(n.name=i+(a-1)),a++,t.set(i,a)}}function Ree(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return Ce(t,function(a){var l;ar(a)&&(l=a.dimsDef)&&(i=Math.max(i,l.length))}),i}function zee(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var Bee=function(){function e(t){this.coordSysDims=[],this.axisMap=Ir(),this.categoryAxisMap=Ir(),this.coordSysName=t}return e}();function Fee(e){var t=e.get("coordinateSystem"),r=new Bee(t),n=Nee[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var Nee={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",So).models[0],a=e.getReferringComponents("yAxis",So).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",a),yh(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),yh(a)&&(n.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",So).models[0];t.coordSysDims=["single"],r.set("single",i),yh(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",So).models[0],a=i.findAxisModel("radiusAxis"),l=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",a),r.set("angle",l),yh(a)&&(n.set("radius",a),t.firstCategoryDimIndex=0),yh(l)&&(n.set("angle",l),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,a=i.getComponent("parallel",e.get("parallelIndex")),l=t.coordSysDims=a.dimensions.slice();Ce(a.parallelAxisIndex,function(o,h){var d=i.getComponent("parallelAxis",o),m=l[h];r.set(m,d),yh(d)&&(n.set(m,d),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=h))})}};function yh(e){return e.get("type")==="category"}function Vee(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,a,l,o;Uee(t)?a=t:(l=t.schema,a=l.dimensions,o=t.store);var h=!!(e&&e.get("stack")),d,m,g,_;if(Ce(a,function(D,O){Jt(D)&&(a[O]=D={name:D}),h&&!D.isExtraCoord&&(!n&&!d&&D.ordinalMeta&&(d=D),!m&&D.type!=="ordinal"&&D.type!=="time"&&(!i||i===D.coordDim)&&(m=D))}),m&&!n&&!d&&(n=!0),m){g="__\0ecstackresult_"+e.id,_="__\0ecstackedover_"+e.id,d&&(d.createInvertedIndices=!0);var x=m.coordDim,E=m.type,M=0;Ce(a,function(D){D.coordDim===x&&M++});var P={name:g,coordDim:x,coordDimIndex:M,type:E,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},I={name:_,coordDim:_,coordDimIndex:M+1,type:E,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};l?(o&&(P.storeDimIndex=o.ensureCalculationDimension(_,E),I.storeDimIndex=o.ensureCalculationDimension(g,E)),l.appendCalculationDimension(P),l.appendCalculationDimension(I)):(a.push(P),a.push(I))}return{stackedDimension:m&&m.name,stackedByDimension:d&&d.name,isStackedByIndex:n,stackedOverDimension:_,stackResultDimension:g}}function Uee(e){return!mR(e.schema)}function Tw(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function $ee(e,t){return Tw(e,t)?e.getCalculationInfo("stackResultDimension"):t}function jee(e,t){var r=e.get("coordinateSystem"),n=xS.get(r),i;return t&&t.coordSysDims&&(i=nr(t.coordSysDims,function(a){var l={name:a},o=t.axisMap.get(a);if(o){var h=o.get("type");l.type=See(h)}return l})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function Hee(e,t,r){var n,i;return r&&Ce(e,function(a,l){var o=a.coordDim,h=r.categoryAxisMap.get(o);h&&(n==null&&(n=l),a.ordinalMeta=h.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function Gee(e,t,r){r=r||{};var n=t.getSourceManager(),i,a=!1;e?(a=!0,i=wS(e)):(i=n.getSource(),a=i.sourceFormat===ao);var l=Fee(t),o=jee(t,l),h=r.useEncodeDefaulter,d=Er(h)?h:h?to(AK,o,t):null,m={coordDimensions:o,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:d,canOmitUnusedDimensions:!a},g=Lee(i,m),_=Hee(g.dimensions,r.createInvertedIndices,l),x=a?null:n.getSharedDataStore(g),E=Vee(t,{schema:g,store:x}),M=new yR(g,t);M.setCalculationInfo(E);var P=_!=null&&qee(i)?function(I,D,O,F){return F===_?O:this.defaultDimValueGetter(I,D,O,F)}:null;return M.hasItemOption=!1,M.initData(a?i:x,null,P),M}function qee(e){if(e.sourceFormat===ao){var t=Wee(e.data||[]);return!Gt(vm(t))}}function Wee(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var xR=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();Ty(xR);const qs=xR;var Zee=0,Xee=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Zee}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&nr(n,Yee);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Jt(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=Ir(this.categories))},e}();function Yee(e){return ar(e)&&e.value!=null?e.value:e+""}const Ew=Xee;function Cw(e){return e.type==="interval"||e.type==="log"}function Kee(e,t,r,n){var i={},a=e[1]-e[0],l=i.interval=jL(a/t,!0);r!=null&&l<r&&(l=i.interval=r),n!=null&&l>n&&(l=i.interval=n);var o=i.intervalPrecision=bR(l),h=i.niceTickExtent=[ri(Math.ceil(e[0]/l)*l,o),ri(Math.floor(e[1]/l)*l,o)];return Jee(h,e),i}function Bx(e){var t=Math.pow(10,W2(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,ri(r*t)}function bR(e){return jp(e)+2}function tD(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Jee(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),tD(e,0,t),tD(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function Uy(e,t){return e>=t[0]&&e<=t[1]}function $y(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function jy(e,t){return e*(t[1]-t[0])+t[0]}var wR=function(e){Vt(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new Ew({})),Gt(i)&&(i=new Ew({categories:nr(i,function(a){return ar(a)?a.value:a})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Jt(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),Uy(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),$y(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(jy(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],l=0,o=this._ordinalMeta.categories.length,h=Math.min(o,n.length);l<h;++l){var d=n[l];i[l]=d,a[d]=l}for(var m=0;l<o;++l){for(;a[m]!=null;)m++;i.push(m),a[m]=l}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(qs);qs.registerClass(wR);const SR=wR;var Zu=ri,TR=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return Uy(r,this._extent)},t.prototype.normalize=function(r){return $y(r,this._extent)},t.prototype.scale=function(r){return jy(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=bR(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,a=this._niceExtent,l=this._intervalPrecision,o=[];if(!n)return o;var h=1e4;i[0]<a[0]&&(r?o.push({value:Zu(a[0]-n,l)}):o.push({value:i[0]}));for(var d=a[0];d<=a[1]&&(o.push({value:d}),d=Zu(d+n,l),d!==o[o.length-1].value);)if(o.length>h)return[];var m=o.length?o[o.length-1].value:a[1];return i[1]>m&&(r?o.push({value:Zu(m+n,l)}):o.push({value:i[1]})),o},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],a=this.getExtent(),l=1;l<n.length;l++){for(var o=n[l],h=n[l-1],d=0,m=[],g=o.value-h.value,_=g/r;d<r-1;){var x=Zu(h.value+(d+1)*_);x>a[0]&&x<a[1]&&m.push(x),d++}i.push(m)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=jp(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var a=Zu(r.value,i,!0);return sO(a)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var a=this._extent,l=a[1]-a[0];if(!!isFinite(l)){l<0&&(l=-l,a.reverse());var o=Kee(a,r,n,i);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=n[0];r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var a=n[1]-n[0];isFinite(a)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var l=this._interval;r.fixMin||(n[0]=Zu(Math.floor(n[0]/l)*l)),r.fixMax||(n[1]=Zu(Math.ceil(n[1]/l)*l))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(qs);qs.registerClass(TR);const bm=TR;var ER=typeof Float32Array<"u",Qee=ER?Float32Array:Array;function ete(e){return Gt(e)?ER?new Float32Array(e):e:new Qee(e)}var tte="__ec_stack_";function CR(e){return e.get("stack")||tte+e.seriesIndex}function AR(e){return e.dim+e.index}function rte(e,t){var r=[];return t.eachSeriesByType(e,function(n){ste(n)&&r.push(n)}),r}function nte(e){var t={};Ce(e,function(h){var d=h.coordinateSystem,m=d.getBaseAxis();if(!(m.type!=="time"&&m.type!=="value"))for(var g=h.getData(),_=m.dim+"_"+m.index,x=g.getDimensionIndex(g.mapDimension(m.dim)),E=g.getStore(),M=0,P=E.count();M<P;++M){var I=E.get(x,M);t[_]?t[_].push(I):t[_]=[I]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(h,d){return h-d});for(var a=null,l=1;l<i.length;++l){var o=i[l]-i[l-1];o>0&&(a=a===null?o:Math.min(a,o))}r[n]=a}}return r}function ite(e){var t=nte(e),r=[];return Ce(e,function(n){var i=n.coordinateSystem,a=i.getBaseAxis(),l=a.getExtent(),o;if(a.type==="category")o=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var h=a.dim+"_"+a.index,d=t[h],m=Math.abs(l[1]-l[0]),g=a.scale.getExtent(),_=Math.abs(g[1]-g[0]);o=d?m/_*d:m}else{var x=n.getData();o=Math.abs(l[1]-l[0])/x.count()}var E=Zi(n.get("barWidth"),o),M=Zi(n.get("barMaxWidth"),o),P=Zi(n.get("barMinWidth")||(lte(n)?.5:1),o),I=n.get("barGap"),D=n.get("barCategoryGap");r.push({bandWidth:o,barWidth:E,barMaxWidth:M,barMinWidth:P,barGap:I,barCategoryGap:D,axisKey:AR(a),stackId:CR(n)})}),ate(r)}function ate(e){var t={};Ce(e,function(n,i){var a=n.axisKey,l=n.bandWidth,o=t[a]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},h=o.stacks;t[a]=o;var d=n.stackId;h[d]||o.autoWidthCount++,h[d]=h[d]||{width:0,maxWidth:0};var m=n.barWidth;m&&!h[d].width&&(h[d].width=m,m=Math.min(o.remainedWidth,m),o.remainedWidth-=m);var g=n.barMaxWidth;g&&(h[d].maxWidth=g);var _=n.barMinWidth;_&&(h[d].minWidth=_);var x=n.barGap;x!=null&&(o.gap=x);var E=n.barCategoryGap;E!=null&&(o.categoryGap=E)});var r={};return Ce(t,function(n,i){r[i]={};var a=n.stacks,l=n.bandWidth,o=n.categoryGap;if(o==null){var h=Gr(a).length;o=Math.max(35-h*4,15)+"%"}var d=Zi(o,l),m=Zi(n.gap,1),g=n.remainedWidth,_=n.autoWidthCount,x=(g-d)/(_+(_-1)*m);x=Math.max(x,0),Ce(a,function(I){var D=I.maxWidth,O=I.minWidth;if(I.width){var F=I.width;D&&(F=Math.min(F,D)),O&&(F=Math.max(F,O)),I.width=F,g-=F+m*F,_--}else{var F=x;D&&D<F&&(F=Math.min(D,g)),O&&O>F&&(F=O),F!==x&&(I.width=F,g-=F+m*F,_--)}}),x=(g-d)/(_+(_-1)*m),x=Math.max(x,0);var E=0,M;Ce(a,function(I,D){I.width||(I.width=x),M=I,E+=I.width*(1+m)}),M&&(E-=M.width*m);var P=-E/2;Ce(a,function(I,D){r[i][D]=r[i][D]||{bandWidth:l,offset:P,width:I.width},P+=I.width*(1+m)})}),r}function ote(e,t,r){if(e&&t){var n=e[AR(t)];return n!=null&&r!=null?n[CR(r)]:n}}function ste(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function lte(e){return e.pipelineContext&&e.pipelineContext.large}var ute=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},IR=function(e){Vt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return ky(r.value,$P[mK($h(this._minLevelUnit))]||$P.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var a=this.getSetting("useUTC"),l=this.getSetting("locale");return vK(r,n,i,l,a)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var a=this.getSetting("useUTC"),l=vte(this._minLevelUnit,this._approxInterval,a,n);return i=i.concat(l),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=Ja,n[1]+=Ja),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-Ja}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var a=this._extent,l=a[1]-a[0];this._approxInterval=l/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var o=Eg.length,h=Math.min(ute(Eg,this._approxInterval,0,o),o-1);this._interval=Eg[h][1],this._minLevelUnit=Eg[Math.max(h-1,0)][0]},t.prototype.parse=function(r){return Mn(r)?r:+Ns(r)},t.prototype.contain=function(r){return Uy(this.parse(r),this._extent)},t.prototype.normalize=function(r){return $y(this.parse(r),this._extent)},t.prototype.scale=function(r){return jy(r,this._extent)},t.type="time",t}(bm),Eg=[["second",dS],["minute",pS],["hour",Sp],["quarter-day",Sp*6],["half-day",Sp*12],["day",Ja*1.2],["half-week",Ja*3.5],["week",Ja*7],["month",Ja*31],["quarter",Ja*95],["half-year",UP/2],["year",UP]];function cte(e,t,r,n){var i=Ns(t),a=Ns(r),l=function(E){return jP(i,E,n)===jP(a,E,n)},o=function(){return l("year")},h=function(){return o()&&l("month")},d=function(){return h()&&l("day")},m=function(){return d()&&l("hour")},g=function(){return m()&&l("minute")},_=function(){return g()&&l("second")},x=function(){return _()&&l("millisecond")};switch(e){case"year":return o();case"month":return h();case"day":return d();case"hour":return m();case"minute":return g();case"second":return _();case"millisecond":return x()}}function hte(e,t){return e/=Ja,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function fte(e){var t=30*Ja;return e/=t,e>6?6:e>3?3:e>2?2:1}function dte(e){return e/=Sp,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function rD(e,t){return e/=t?pS:dS,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function pte(e){return jL(e,!0)}function mte(e,t,r){var n=new Date(e);switch($h(t)){case"year":case"month":n[tO(r)](0);case"day":n[rO(r)](1);case"hour":n[nO(r)](0);case"minute":n[iO(r)](0);case"second":n[aO(r)](0),n[oO(r)](0)}return n.getTime()}function vte(e,t,r,n){var i=1e4,a=Q4,l=0;function o(ie,ce,le,fe,ye,Ne,be){for(var et=new Date(ce),tt=ce,wt=et[fe]();tt<le&&tt<=n[1];)be.push({value:tt}),wt+=ie,et[ye](wt),tt=et.getTime();be.push({value:tt,notAdd:!0})}function h(ie,ce,le){var fe=[],ye=!ce.length;if(!cte($h(ie),n[0],n[1],r)){ye&&(ce=[{value:mte(new Date(n[0]),ie,r)},{value:n[1]}]);for(var Ne=0;Ne<ce.length-1;Ne++){var be=ce[Ne].value,et=ce[Ne+1].value;if(be!==et){var tt=void 0,wt=void 0,Rt=void 0,Qt=!1;switch(ie){case"year":tt=Math.max(1,Math.round(t/Ja/365)),wt=mS(r),Rt=gK(r);break;case"half-year":case"quarter":case"month":tt=fte(t),wt=jh(r),Rt=tO(r);break;case"week":case"half-week":case"day":tt=hte(t),wt=Ly(r),Rt=rO(r),Qt=!0;break;case"half-day":case"quarter-day":case"hour":tt=dte(t),wt=Xp(r),Rt=nO(r);break;case"minute":tt=rD(t,!0),wt=Oy(r),Rt=iO(r);break;case"second":tt=rD(t,!1),wt=Ry(r),Rt=aO(r);break;case"millisecond":tt=pte(t),wt=zy(r),Rt=oO(r);break}o(tt,be,et,wt,Rt,Qt,fe),ie==="year"&&le.length>1&&Ne===0&&le.unshift({value:le[0].value-tt})}}for(var Ne=0;Ne<fe.length;Ne++)le.push(fe[Ne]);return fe}}for(var d=[],m=[],g=0,_=0,x=0;x<a.length&&l++<i;++x){var E=$h(a[x]);if(!!pK(a[x])){h(a[x],d[d.length-1]||[],m);var M=a[x+1]?$h(a[x+1]):null;if(E!==M){if(m.length){_=g,m.sort(function(ie,ce){return ie.value-ce.value});for(var P=[],I=0;I<m.length;++I){var D=m[I].value;(I===0||m[I-1].value!==D)&&(P.push(m[I]),D>=n[0]&&D<=n[1]&&g++)}var O=(n[1]-n[0])/t;if(g>O*1.5&&_>O/1.5||(d.push(P),g>O||e===a[x]))break}m=[]}}}for(var F=Wi(nr(d,function(ie){return Wi(ie,function(ce){return ce.value>=n[0]&&ce.value<=n[1]&&!ce.notAdd})}),function(ie){return ie.length>0}),$=[],q=F.length-1,x=0;x<F.length;++x)for(var K=F[x],Z=0;Z<K.length;++Z)$.push({value:K[Z].value,level:q-x});$.sort(function(ie,ce){return ie.value-ce.value});for(var re=[],x=0;x<$.length;++x)(x===0||$[x].value!==$[x-1].value)&&re.push($[x]);return re}qs.registerClass(IR);const gte=IR;var nD=qs.prototype,Ap=bm.prototype,_te=ri,yte=Math.floor,xte=Math.ceil,Cg=Math.pow,Va=Math.log,zS=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new bm,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,a=n.getExtent(),l=Ap.getTicks.call(this,r);return nr(l,function(o){var h=o.value,d=ri(Cg(this.base,h));return d=h===i[0]&&this._fixMin?Ag(d,a[0]):d,d=h===i[1]&&this._fixMax?Ag(d,a[1]):d,{value:d}},this)},t.prototype.setExtent=function(r,n){var i=this.base;r=Va(r)/Va(i),n=Va(n)/Va(i),Ap.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=nD.getExtent.call(this);n[0]=Cg(r,n[0]),n[1]=Cg(r,n[1]);var i=this._originalScale,a=i.getExtent();return this._fixMin&&(n[0]=Ag(n[0],a[0])),this._fixMax&&(n[1]=Ag(n[1],a[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=Va(r[0])/Va(n),r[1]=Va(r[1])/Va(n),nD.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var a=dZ(i),l=r/i*a;for(l<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var o=[ri(xte(n[0]/a)*a),ri(yte(n[1]/a)*a)];this._interval=a,this._niceExtent=o}},t.prototype.calcNiceExtent=function(r){Ap.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=Va(r)/Va(this.base),Uy(r,this._extent)},t.prototype.normalize=function(r){return r=Va(r)/Va(this.base),$y(r,this._extent)},t.prototype.scale=function(r){return r=jy(r,this._extent),Cg(this.base,r)},t.type="log",t}(qs),PR=zS.prototype;PR.getMinorTicks=Ap.getMinorTicks;PR.getLabel=Ap.getLabel;function Ag(e,t){return _te(e,jp(t))}qs.registerClass(zS);const bte=zS;var wte=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var a=this._modelMinRaw=r.get("min",!0);Er(a)?this._modelMinNum=Ig(t,a({min:n[0],max:n[1]})):a!=="dataMin"&&(this._modelMinNum=Ig(t,a));var l=this._modelMaxRaw=r.get("max",!0);if(Er(l)?this._modelMaxNum=Ig(t,l({min:n[0],max:n[1]})):l!=="dataMax"&&(this._modelMaxNum=Ig(t,l)),i)this._axisDataLen=r.getCategories().length;else{var o=r.get("boundaryGap"),h=Gt(o)?o:[o||0,o||0];typeof h[0]=="boolean"||typeof h[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[vc(h[0],1),vc(h[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,a=this._boundaryGapInner,l=t?null:n-r||Math.abs(r),o=this._modelMinRaw==="dataMin"?r:this._modelMinNum,h=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,d=o!=null,m=h!=null;o==null&&(o=t?i?0:NaN:r-a[0]*l),h==null&&(h=t?i?i-1:NaN:n+a[1]*l),(o==null||!isFinite(o))&&(o=NaN),(h==null||!isFinite(h))&&(h=NaN);var g=P_(o)||P_(h)||t&&!i;this._needCrossZero&&(o>0&&h>0&&!d&&(o=0),o<0&&h<0&&!m&&(h=0));var _=this._determinedMin,x=this._determinedMax;return _!=null&&(o=_,d=!0),x!=null&&(h=x,m=!0),{min:o,max:h,minFixed:d,maxFixed:m,isBlank:g}},e.prototype.modifyDataMinMax=function(t,r){this[Tte[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=Ste[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),Ste={min:"_determinedMin",max:"_determinedMax"},Tte={min:"_dataMin",max:"_dataMax"};function Ete(e,t,r){var n=e.rawExtentInfo;return n||(n=new wte(e,t,r),e.rawExtentInfo=n,n)}function Ig(e,t){return t==null?null:P_(t)?NaN:e.parse(t)}function MR(e,t){var r=e.type,n=Ete(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,a=n.max,l=t.ecModel;if(l&&r==="time"){var o=rte("bar",l),h=!1;if(Ce(o,function(g){h=h||g.getBaseAxis()===t.axis}),h){var d=ite(o),m=Cte(i,a,t,d);i=m.min,a=m.max}}return{extent:[i,a],fixMin:n.minFixed,fixMax:n.maxFixed}}function Cte(e,t,r,n){var i=r.axis.getExtent(),a=i[1]-i[0],l=ote(n,r.axis);if(l===void 0)return{min:e,max:t};var o=1/0;Ce(l,function(x){o=Math.min(x.offset,o)});var h=-1/0;Ce(l,function(x){h=Math.max(x.offset+x.width,h)}),o=Math.abs(o),h=Math.abs(h);var d=o+h,m=t-e,g=1-(o+h)/a,_=m/g-m;return t+=_*(h/d),e-=_*(o/d),{min:e,max:t}}function iD(e,t){var r=t,n=MR(e,r),i=n.extent,a=r.get("splitNumber");e instanceof bte&&(e.base=r.get("logBase"));var l=e.type,o=r.get("interval"),h=l==="interval"||l==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:a,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:h?r.get("minInterval"):null,maxInterval:h?r.get("maxInterval"):null}),o!=null&&e.setInterval&&e.setInterval(o)}function Ate(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new SR({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new gte({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(qs.getClass(t)||bm)}}function Ite(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function wm(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,a){return e.scale.getFormattedLabel(i,a,n)}}(t):Jt(t)?function(n){return function(i){var a=e.scale.getLabel(i),l=n.replace("{value}",a!=null?a:"");return l}}(t):Er(t)?function(n){return function(i,a){return r!=null&&(a=i.value-r),n(BS(e,i),a,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function BS(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function Pte(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,a=r.getExtent();r instanceof SR?i=r.count():(n=r.getTicks(),i=n.length);var l=e.getLabelModel(),o=wm(e),h,d=1;i>40&&(d=Math.ceil(i/40));for(var m=0;m<i;m+=d){var g=n?n[m]:{value:a[0]+m},_=o(g,m),x=l.getTextRect(_),E=Mte(x,l.get("rotate")||0);h?h.union(E):h=E}return h}}function Mte(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,a=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),l=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),o=new _n(e.x,e.y,a,l);return o}function FS(e){var t=e.get("interval");return t==null?"auto":t}function DR(e){return e.type==="category"&&FS(e.getLabelModel())===0}function Dte(e,t){var r={};return Ce(e.mapDimensionsAll(t),function(n){r[$ee(e,n)]=!0}),Gr(r)}var kte=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),aD=[],Lte={registerPreprocessor:hR,registerProcessor:fR,registerPostInit:dee,registerPostUpdate:pee,registerUpdateLifecycle:OS,registerAction:bf,registerCoordinateSystem:mee,registerLayout:vee,registerVisual:Tc,registerTransform:_ee,registerLoading:dR,registerMap:gee,registerImpl:qQ,PRIORITY:oee,ComponentModel:An,ComponentView:ql,SeriesModel:nf,ChartView:dc,registerComponentModel:function(e){An.registerClass(e)},registerComponentView:function(e){ql.registerClass(e)},registerSeriesModel:function(e){nf.registerClass(e)},registerChartView:function(e){dc.registerClass(e)},registerSubTypeDefaulter:function(e,t){An.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){sZ(e,t)}};function af(e){if(Gt(e)){Ce(e,function(t){af(t)});return}gn(aD,e)>=0||(aD.push(e),Er(e)&&(e={install:e}),e.install(Lte))}var rm=ni();function Ote(e){return e.type==="category"?zte(e):Fte(e)}function Rte(e,t){return e.type==="category"?Bte(e,t):{ticks:nr(e.scale.getTicks(),function(r){return r.value})}}function zte(e){var t=e.getLabelModel(),r=kR(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function kR(e,t){var r=LR(e,"labels"),n=FS(t),i=OR(r,n);if(i)return i;var a,l;return Er(n)?a=BR(e,n):(l=n==="auto"?Nte(e):n,a=zR(e,l)),RR(r,n,{labels:a,labelCategoryInterval:l})}function Bte(e,t){var r=LR(e,"ticks"),n=FS(t),i=OR(r,n);if(i)return i;var a,l;if((!t.get("show")||e.scale.isBlank())&&(a=[]),Er(n))a=BR(e,n,!0);else if(n==="auto"){var o=kR(e,e.getLabelModel());l=o.labelCategoryInterval,a=nr(o.labels,function(h){return h.tickValue})}else l=n,a=zR(e,l,!0);return RR(r,n,{ticks:a,tickCategoryInterval:l})}function Fte(e){var t=e.scale.getTicks(),r=wm(e);return{labels:nr(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function LR(e,t){return rm(e)[t]||(rm(e)[t]=[])}function OR(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function RR(e,t,r){return e.push({key:t,value:r}),r}function Nte(e){var t=rm(e).autoInterval;return t!=null?t:rm(e).autoInterval=e.calculateCategoryInterval()}function Vte(e){var t=Ute(e),r=wm(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,a=i.getExtent(),l=i.count();if(a[1]-a[0]<1)return 0;var o=1;l>40&&(o=Math.max(1,Math.floor(l/40)));for(var h=a[0],d=e.dataToCoord(h+1)-e.dataToCoord(h),m=Math.abs(d*Math.cos(n)),g=Math.abs(d*Math.sin(n)),_=0,x=0;h<=a[1];h+=o){var E=0,M=0,P=G2(r({value:h}),t.font,"center","top");E=P.width*1.3,M=P.height*1.3,_=Math.max(_,E,7),x=Math.max(x,M,7)}var I=_/m,D=x/g;isNaN(I)&&(I=1/0),isNaN(D)&&(D=1/0);var O=Math.max(0,Math.floor(Math.min(I,D))),F=rm(e.model),$=e.getExtent(),q=F.lastAutoInterval,K=F.lastTickCount;return q!=null&&K!=null&&Math.abs(q-O)<=1&&Math.abs(K-l)<=1&&q>O&&F.axisExtent0===$[0]&&F.axisExtent1===$[1]?O=q:(F.lastTickCount=l,F.lastAutoInterval=O,F.axisExtent0=$[0],F.axisExtent1=$[1]),O}function Ute(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function zR(e,t,r){var n=wm(e),i=e.scale,a=i.getExtent(),l=e.getLabelModel(),o=[],h=Math.max((t||0)+1,1),d=a[0],m=i.count();d!==0&&h>1&&m/h>2&&(d=Math.round(Math.ceil(d/h)*h));var g=DR(e),_=l.get("showMinLabel")||g,x=l.get("showMaxLabel")||g;_&&d!==a[0]&&M(a[0]);for(var E=d;E<=a[1];E+=h)M(E);x&&E-h!==a[1]&&M(a[1]);function M(P){var I={value:P};o.push(r?P:{formattedLabel:n(I),rawLabel:i.getLabel(I),tickValue:P})}return o}function BR(e,t,r){var n=e.scale,i=wm(e),a=[];return Ce(n.getTicks(),function(l){var o=n.getLabel(l),h=l.value;t(l.value,o)&&a.push(r?h:{formattedLabel:i(l),rawLabel:o,tickValue:h})}),a}var oD=[0,1],$te=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return cZ(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),sD(n,i.count())),YI(t,oD,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),sD(n,i.count()));var a=YI(t,n,oD,r);return this.scale.scale(a)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=Rte(this,r),i=n.ticks,a=nr(i,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),l=r.get("alignWithLabel");return jte(this,a,l,t.clamp),a},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=nr(n,function(a){return nr(a,function(l){return{coord:this.dataToCoord(l),tickValue:l}},this)},this);return i},e.prototype.getViewLabels=function(){return Ote(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return Vte(this)},e}();function sD(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function jte(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var a=e.getExtent(),l,o;if(i===1)t[0].coord=a[0],l=t[1]={coord:a[0]};else{var h=t[i-1].tickValue-t[0].tickValue,d=(t[i-1].coord-t[0].coord)/h;Ce(t,function(x){x.coord-=d/2});var m=e.scale.getExtent();o=1+m[1]-t[i-1].tickValue,l={coord:t[i-1].coord+d*o},t.push(l)}var g=a[0]>a[1];_(t[0].coord,a[0])&&(n?t[0].coord=a[0]:t.shift()),n&&_(a[0],t[0].coord)&&t.unshift({coord:a[0]}),_(a[1],l.coord)&&(n?l.coord=a[1]:t.pop()),n&&_(l.coord,a[1])&&t.push({coord:a[1]});function _(x,E){return x=ri(x),E=ri(E),g?x>E:x<E}}const Hte=$te;function Gte(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,a=i.getComputedTransform(),l=i.getBoundingRect(),o=!a||a[1]<1e-5&&a[2]<1e-5,h=i.style.margin||0,d=l.clone();d.applyTransform(a),d.x-=h/2,d.y-=h/2,d.width+=h,d.height+=h;var m=o?new V_(l,a):null;t.push({label:i,labelLine:n.labelLine,rect:d,localRect:l,obb:m,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:o,transform:a})}}return t}function qte(e){var t=[];e.sort(function(M,P){return P.priority-M.priority});var r=new _n(0,0,0,0);function n(M){if(!M.ignore){var P=M.ensureState("emphasis");P.ignore==null&&(P.ignore=!1)}M.ignore=!0}for(var i=0;i<e.length;i++){var a=e[i],l=a.axisAligned,o=a.localRect,h=a.transform,d=a.label,m=a.labelLine;r.copy(a.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var g=a.obb,_=!1,x=0;x<t.length;x++){var E=t[x];if(!!r.intersect(E.rect)){if(l&&E.axisAligned){_=!0;break}if(E.obb||(E.obb=new V_(E.localRect,E.transform)),g||(g=new V_(o,h)),g.intersect(E.obb)){_=!0;break}}}_?(n(d),m&&n(m)):(d.attr("ignore",a.defaultAttr.ignore),m&&m.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}var Fx=null;function Wte(e){return Fx||(Fx=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),Fx(e)}var Nx=null;function Zte(e){Nx||(Nx=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),Nx(e)}function Xte(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function Pg(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function FR(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function Aw(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(FR(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var Yte='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',Iw=0,e_=null;function Kte(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=ere.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,a=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||K_(e)}),l=Aw(e),o=l.detached,h=l.rendered;e.__resize_observer_triggered__=o===!1&&h===!1,e.__resize_observer__=a,a.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){K_(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(Iw||(e_=Xte(Yte)),tre(e),e.__resize_rendered__=Aw(e).rendered,window.MutationObserver){var d=new MutationObserver(e.__resize_mutation_handler__);d.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=d}}e.__resize_listeners__.push(t),Iw++}function Jte(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",NS),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--Iw&&e_&&e_.parentNode.removeChild(e_)}}function Qte(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,a=e.offsetHeight;return i!==r||a!==n?{width:i,height:a}:null}function ere(){var e=Aw(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(VS(this),this.addEventListener("scroll",NS,!0)),this.__resize_rendered__=t,K_(this))}function NS(){var e=this;VS(this),this.__resize_raf__&&Zte(this.__resize_raf__),this.__resize_raf__=Wte(function(){var t=Qte(e);t&&(e.__resize_last__=t,K_(e))})}function K_(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function tre(e){var t=FR(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=Pg("div",{className:"resize-triggers"}),n=Pg("div",{className:"resize-expand-trigger"}),i=Pg("div"),a=Pg("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(a),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:a},VS(e),e.addEventListener("scroll",NS,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function VS(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,a=i.scrollWidth,l=i.scrollHeight,o=r.offsetWidth,h=r.offsetHeight,d=r.scrollWidth,m=r.scrollHeight;i.scrollLeft=a,i.scrollTop=l,n.style.width=o+1+"px",n.style.height=h+1+"px",r.scrollLeft=d,r.scrollTop=m}var As=function(){return As=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},As.apply(this,arguments)},rre=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function nre(e){return t=Object.create(null),rre.forEach(function(r){t[r]=function(n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var ire={autoresize:Boolean},are={loading:Boolean,loadingOptions:Object},ore=/^on[^a-z]/,sre=function(e){return ore.test(e)},lD=[],Gd=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,a=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var l=lD.indexOf(a);l===-1&&(l=lD.push(a)-1,Gd[l]={}),r=Gd[l]&&Gd[l][n]?Gd[l][n]:Gd[l][n]=o()}else r=o();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function o(){var h=document.createElement("style");if(h.setAttribute("type","text/css"),t.attributes)for(var d=Object.keys(t.attributes),m=0;m<d.length;m++)h.setAttribute(d[m],t.attributes[d[m]]);var g=n==="prepend"?"afterbegin":"beforeend";return a.insertAdjacentElement(g,h),h}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var lre=Pr({name:"echarts",props:As(As({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},ire),are),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=op(),i=op(),a=op(),l=zn("ecTheme",null),o=zn("ecInitOptions",null),h=zn("ecUpdateOptions",null),d=sm(e),m=d.autoresize,g=d.manualUpdate,_=d.loading,x=d.loadingOptions,E=Pt(function(){return a.value||e.option||null}),M=Pt(function(){return e.theme||ht(l)||{}}),P=Pt(function(){return e.initOptions||ht(o)||{}}),I=Pt(function(){return e.updateOptions||ht(h)||{}}),D=Pt(function(){return function(Z){var re={};for(var ie in Z)sre(ie)||(re[ie]=Z[ie]);return re}(r)}),O=uy().proxy.$listeners;function F(Z){if(n.value){var re=i.value=hee(n.value,M.value,P.value);e.group&&(re.group=e.group);var ie=O;ie||(ie={},Object.keys(r).filter(function(le){return le.indexOf("on")===0&&le.length>2}).forEach(function(le){var fe=le.charAt(2).toLowerCase()+le.slice(3);fe.substring(fe.length-4)==="Once"&&(fe="~".concat(fe.substring(0,fe.length-4))),ie[fe]=r[le]})),Object.keys(ie).forEach(function(le){var fe=ie[le];if(fe){var ye=le.toLowerCase();ye.charAt(0)==="~"&&(ye=ye.substring(1),fe.__once__=!0);var Ne=re;if(ye.indexOf("zr:")===0&&(Ne=re.getZr(),ye=ye.substring(3)),fe.__once__){delete fe.__once__;var be=fe;fe=function(){for(var et=[],tt=0;tt<arguments.length;tt++)et[tt]=arguments[tt];be.apply(void 0,et),Ne.off(ye,fe)}}Ne.on(ye,fe)}}),m.value?cf(function(){re&&!re.isDisposed()&&re.resize(),ce()}):ce()}function ce(){var le=Z||E.value;le&&re.setOption(le,I.value)}}function $(){i.value&&(i.value.dispose(),i.value=void 0)}var q=null;Oi(g,function(Z){typeof q=="function"&&(q(),q=null),Z||(q=Oi(function(){return e.option},function(re,ie){re&&(i.value?i.value.setOption(re,As({notMerge:re.value!==(ie==null?void 0:ie.value)},I.value)):F())},{deep:!0}))},{immediate:!0}),Oi([M,P],function(){$(),F()},{deep:!0}),DE(function(){e.group&&i.value&&(i.value.group=e.group)});var K=nre(i);return function(Z,re,ie){var ce=zn("ecLoadingOptions",{}),le=Pt(function(){return As(As({},ht(ce)),ie==null?void 0:ie.value)});DE(function(){var fe=Z.value;fe&&(re.value?fe.showLoading(le.value):fe.hideLoading())})}(i,_,x),function(Z,re,ie){var ce=null;Oi([ie,Z,re],function(le,fe,ye){var Ne=le[0],be=le[1],et=le[2];Ne&&be&&et&&(ce=IS(function(){be.resize()},100),Kte(Ne,ce)),ye(function(){ce&&Ne&&Jte(Ne,ce)})})}(i,m,n),ta(function(){F()}),cm($),As({chart:i,root:n,setOption:function(Z,re){e.manualUpdate&&(a.value=Z),i.value?i.value.setOption(Z,re||{}):F(Z)},nonEventAttrs:D},K)},render:function(){var e=As({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",Ar("x-vue-echarts",e)}}),Vx=Math.sin,Ux=Math.cos,NR=Math.PI,Xu=Math.PI*2,ure=180/NR,cre=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,r){this._add("M",t,r)},e.prototype.lineTo=function(t,r){this._add("L",t,r)},e.prototype.bezierCurveTo=function(t,r,n,i,a,l){this._add("C",t,r,n,i,a,l)},e.prototype.quadraticCurveTo=function(t,r,n,i){this._add("Q",t,r,n,i)},e.prototype.arc=function(t,r,n,i,a,l){this.ellipse(t,r,n,n,0,i,a,l)},e.prototype.ellipse=function(t,r,n,i,a,l,o,h){var d=o-l,m=!h,g=Math.abs(d),_=kl(g-Xu)||(m?d>=Xu:-d>=Xu),x=d>0?d%Xu:d%Xu+Xu,E=!1;_?E=!0:kl(g)?E=!1:E=x>=NR==!!m;var M=t+n*Ux(l),P=r+i*Vx(l);this._start&&this._add("M",M,P);var I=Math.round(a*ure);if(_){var D=1/this._p,O=(m?1:-1)*(Xu-D);this._add("A",n,i,I,1,+m,t+n*Ux(l+O),r+i*Vx(l+O)),D>.01&&this._add("A",n,i,I,0,+m,M,P)}else{var F=t+n*Ux(o),$=r+i*Vx(o);this._add("A",n,i,I,+E,+m,F,$)}},e.prototype.rect=function(t,r,n,i){this._add("M",t,r),this._add("l",n,0),this._add("l",0,i),this._add("l",-n,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,r,n,i,a,l,o,h,d){for(var m=[],g=this._p,_=1;_<arguments.length;_++){var x=arguments[_];if(isNaN(x)){this._invalid=!0;return}m.push(Math.round(x*g)/g)}this._d.push(t+m.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}();const VR=cre;var Ip="none",hre=Math.round;function fre(e){var t=e.fill;return t!=null&&t!==Ip}function dre(e){var t=e.stroke;return t!=null&&t!==Ip}var Pw=["lineCap","miterLimit","lineJoin"],pre=nr(Pw,function(e){return"stroke-"+e.toLowerCase()});function mre(e,t,r,n){var i=t.opacity==null?1:t.opacity;if(r instanceof js){e("opacity",i);return}if(fre(t)){var a=ef(t.fill);e("fill",a.color);var l=t.fillOpacity!=null?t.fillOpacity*a.opacity*i:a.opacity*i;(n||l<1)&&e("fill-opacity",l)}else e("fill",Ip);if(dre(t)){var o=ef(t.stroke);e("stroke",o.color);var h=t.strokeNoScale?r.getLineScale():1,d=h?(t.lineWidth||0)/h:0,m=t.strokeOpacity!=null?t.strokeOpacity*o.opacity*i:o.opacity*i,g=t.strokeFirst;if((n||d!==1)&&e("stroke-width",d),(n||g)&&e("paint-order",g?"stroke":"fill"),(n||m<1)&&e("stroke-opacity",m),t.lineDash){var _=MS(r),x=_[0],E=_[1];x&&(E=hre(E||0),e("stroke-dasharray",x.join(",")),(E||n)&&e("stroke-dashoffset",E))}else n&&e("stroke-dasharray",Ip);for(var M=0;M<Pw.length;M++){var P=Pw[M];if(n||t[P]!==F_[P]){var I=t[P]||F_[P];I&&e(pre[M],I)}}}else n&&e("stroke",Ip)}var UR="http://www.w3.org/2000/svg",$R="http://www.w3.org/1999/xlink",vre="http://www.w3.org/2000/xmlns/",gre="http://www.w3.org/XML/1998/namespace";function jR(e){return document.createElementNS(UR,e)}function ti(e,t,r,n,i){return{tag:e,attrs:r||{},children:n,text:i,key:t}}function _re(e,t){var r=[];if(t)for(var n in t){var i=t[n],a=n;i!==!1&&(i!==!0&&i!=null&&(a+='="'+i+'"'),r.push(a))}return"<"+e+" "+r.join(" ")+">"}function yre(e){return"</"+e+">"}function US(e,t){t=t||{};var r=t.newline?`
`:"";function n(i){var a=i.children,l=i.tag,o=i.attrs;return _re(l,o)+(i.text||"")+(a?""+r+nr(a,function(h){return n(h)}).join(r)+r:"")+yre(l)}return n(e)}function xre(e,t,r){r=r||{};var n=r.newline?`
`:"",i=" {"+n,a=n+"}",l=nr(Gr(e),function(h){return h+i+nr(Gr(e[h]),function(d){return d+":"+e[h][d]+";"}).join(n)+a}).join(n),o=nr(Gr(t),function(h){return"@keyframes "+h+i+nr(Gr(t[h]),function(d){return d+i+nr(Gr(t[h][d]),function(m){var g=t[h][d][m];return m==="d"&&(g='path("'+g+'")'),m+":"+g+";"}).join(n)+a}).join(n)+a}).join(n);return!l&&!o?"":["<![CDATA[",l,o,"]]>"].join(n)}function Mw(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function uD(e,t,r,n){return ti("svg","root",{width:e,height:t,xmlns:UR,"xmlns:xlink":$R,version:"1.1",baseProfile:"full",viewBox:n?"0 0 "+e+" "+t:!1},r)}var cD={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},Qu="transform-origin";function bre(e,t,r){var n=Ct({},e.shape);Ct(n,t),e.buildPath(r,n);var i=new VR;return i.reset(ML(e)),r.rebuildPath(i,1),i.generateStr(),i.getStr()}function wre(e,t){var r=t.originX,n=t.originY;(r||n)&&(e[Qu]=r+"px "+n+"px")}var Sre={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function HR(e,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=e,r}function Tre(e,t,r){var n=e.shape.paths,i={},a,l;if(Ce(n,function(h){var d=Mw(r.zrId);d.animation=!0,Hy(h,{},d,!0);var m=d.cssAnims,g=d.cssNodes,_=Gr(m),x=_.length;if(!!x){l=_[x-1];var E=m[l];for(var M in E){var P=E[M];i[M]=i[M]||{d:""},i[M].d+=P.d||""}for(var I in g){var D=g[I].animation;D.indexOf(l)>=0&&(a=D)}}}),!!a){t.d=!1;var o=HR(i,r);return a.replace(l,o)}}function hD(e){return Jt(e)?cD[e]?"cubic-bezier("+cD[e]+")":N2(e)?e:"":""}function Hy(e,t,r,n){var i=e.animators,a=i.length,l=[];if(e instanceof N4){var o=Tre(e,t,r);if(o)l.push(o);else if(!a)return}else if(!a)return;for(var h={},d=0;d<a;d++){var m=i[d],g=[m.getMaxTime()/1e3+"s"],_=hD(m.getClip().easing),x=m.getDelay();_?g.push(_):g.push("linear"),x&&g.push(x/1e3+"s"),m.getLoop()&&g.push("infinite");var E=g.join(" ");h[E]=h[E]||[E,[]],h[E][1].push(m)}function M(D){var O=D[1],F=O.length,$={},q={},K={},Z="animation-timing-function";function re(dt,Dt,qt){for(var ot=dt.getTracks(),lt=dt.getMaxTime(),oe=0;oe<ot.length;oe++){var ve=ot[oe];if(ve.needsAnimate()){var De=ve.keyframes,Ge=ve.propName;if(qt&&(Ge=qt(Ge)),Ge)for(var Xe=0;Xe<De.length;Xe++){var Ye=De[Xe],qe=Math.round(Ye.time/lt*100)+"%",Qe=hD(Ye.easing),ut=Ye.rawValue;(Jt(ut)||Mn(ut))&&(Dt[qe]=Dt[qe]||{},Dt[qe][Ge]=Ye.rawValue,Qe&&(Dt[qe][Z]=Qe))}}}}for(var ie=0;ie<F;ie++){var ce=O[ie],le=ce.targetName;le?le==="shape"&&re(ce,q):!n&&re(ce,$)}for(var fe in $){var ye={};RL(ye,e),Ct(ye,$[fe]);var Ne=DL(ye),be=$[fe][Z];K[fe]=Ne?{transform:Ne}:{},wre(K[fe],ye),be&&(K[fe][Z]=be)}var et,tt=!0;for(var fe in q){K[fe]=K[fe]||{};var wt=!et,be=q[fe][Z];wt&&(et=new gc);var Rt=et.len();et.reset(),K[fe].d=bre(e,q[fe],et);var Qt=et.len();if(!wt&&Rt!==Qt){tt=!1;break}be&&(K[fe][Z]=be)}if(!tt)for(var fe in K)delete K[fe].d;if(!n)for(var ie=0;ie<F;ie++){var ce=O[ie],le=ce.targetName;le==="style"&&re(ce,K,function(ot){return Sre[ot]})}for(var Ut=Gr(K),vr=!0,yr,ie=1;ie<Ut.length;ie++){var $e=Ut[ie-1],pt=Ut[ie];if(K[$e][Qu]!==K[pt][Qu]){vr=!1;break}yr=K[$e][Qu]}if(vr&&yr){for(var fe in K)K[fe][Qu]&&delete K[fe][Qu];t[Qu]=yr}if(Wi(Ut,function(dt){return Gr(K[dt]).length>0}).length){var it=HR(K,r);return it+" "+D[0]+" both"}}for(var P in h){var o=M(h[P]);o&&l.push(o)}if(l.length){var I=r.zrId+"-cls-"+r.cssClassIdx++;r.cssNodes["."+I]={animation:l.join(",")},t.class=I}}var nm=Math.round;function GR(e){return e&&Jt(e.src)}function qR(e){return e&&Er(e.toDataURL)}function $S(e,t,r,n){mre(function(i,a){var l=i==="fill"||i==="stroke";l&&PW(a)?kre(t,e,i,n):l&&IW(a)?Lre(r,e,i,n):e[i]=a},t,r,!1),Dre(r,e,n)}function fD(e){return kl(e[0]-1)&&kl(e[1])&&kl(e[2])&&kl(e[3]-1)}function Ere(e){return kl(e[4])&&kl(e[5])}function jS(e,t,r){if(t&&!(Ere(t)&&fD(t))){var n=r?10:1e4;e.transform=fD(t)?"translate("+nm(t[4]*n)/n+" "+nm(t[5]*n)/n+")":wW(t)}}function dD(e,t,r){for(var n=e.points,i=[],a=0;a<n.length;a++)i.push(nm(n[a][0]*r)/r),i.push(nm(n[a][1]*r)/r);t.points=i.join(" ")}function pD(e){return!e.smooth}function Cre(e){var t=nr(e,function(r){return typeof r=="string"?[r,r]:r});return function(r,n,i){for(var a=0;a<t.length;a++){var l=t[a],o=r[l[0]];o!=null&&(n[l[1]]=nm(o*i)/i)}}}var Are={circle:[Cre(["cx","cy","r"])],polyline:[dD,pD],polygon:[dD,pD]};function Ire(e){for(var t=e.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function WR(e,t){var r=e.style,n=e.shape,i=Are[e.type],a={},l=t.animation,o="path",h=e.style.strokePercent,d=t.compress&&ML(e)||4;if(i&&!t.willUpdate&&!(i[1]&&!i[1](n))&&!(l&&Ire(e))&&!(h<1)){o=e.type;var m=Math.pow(10,d);i[0](n,a,m)}else{e.path||e.createPathProxy();var g=e.path;e.shapeChanged()&&(g.beginPath(),e.buildPath(g,e.shape),e.pathUpdated());var _=g.getVersion(),x=e,E=x.__svgPathBuilder;(x.__svgPathVersion!==_||!E||h!==x.__svgPathStrokePercent)&&(E||(E=x.__svgPathBuilder=new VR),E.reset(d),g.rebuildPath(E,h),E.generateStr(),x.__svgPathVersion=_,x.__svgPathStrokePercent=h),a.d=E.getStr()}return jS(a,e.transform),$S(a,r,e,t),t.animation&&Hy(e,a,t),ti(o,e.id+"",a)}function Pre(e,t){var r=e.style,n=r.image;if(n&&!Jt(n)&&(GR(n)?n=n.src:qR(n)&&(n=n.toDataURL())),!!n){var i=r.x||0,a=r.y||0,l=r.width,o=r.height,h={href:n,width:l,height:o};return i&&(h.x=i),a&&(h.y=a),jS(h,e.transform),$S(h,r,e,t),t.animation&&Hy(e,h,t),ti("image",e.id+"",h)}}function Mre(e,t){var r=e.style,n=r.text;if(n!=null&&(n+=""),!(!n||isNaN(r.x)||isNaN(r.y))){var i=r.font||Hl,a=r.x||0,l=TW(r.y||0,Sy(i),r.textBaseline),o=SW[r.textAlign]||r.textAlign,h={"dominant-baseline":"central","text-anchor":o};if(c4(r)){var d="",m=r.fontStyle,g=u4(r.fontSize);if(!parseFloat(g))return;var _=r.fontFamily||nL,x=r.fontWeight;d+="font-size:"+g+";font-family:"+_+";",m&&m!=="normal"&&(d+="font-style:"+m+";"),x&&x!=="normal"&&(d+="font-weight:"+x+";"),h.style=d}else h.style="font: "+i;return n.match(/\s/)&&(h["xml:space"]="preserve"),a&&(h.x=a),l&&(h.y=l),jS(h,e.transform),$S(h,r,e,t),t.animation&&Hy(e,h,t),ti("text",e.id+"",h,void 0,n)}}function mD(e,t){if(e instanceof nn)return WR(e,t);if(e instanceof js)return Pre(e,t);if(e instanceof N_)return Mre(e,t)}function Dre(e,t,r){var n=e.style;if(EW(n)){var i=CW(e),a=r.shadowCache,l=a[i];if(!l){var o=e.getGlobalScale(),h=o[0],d=o[1];if(!h||!d)return;var m=n.shadowOffsetX||0,g=n.shadowOffsetY||0,_=n.shadowBlur,x=ef(n.shadowColor),E=x.opacity,M=x.color,P=_/2/h,I=_/2/d,D=P+" "+I;l=r.zrId+"-s"+r.shadowIdx++,r.defs[l]=ti("filter",l,{id:l,x:"-100%",y:"-100%",width:"300%",height:"300%"},[ti("feDropShadow","",{dx:m/h,dy:g/d,stdDeviation:D,"flood-color":M,"flood-opacity":E})]),a[i]=l}t.filter=wy(l)}}function kre(e,t,r,n){var i=e[r],a,l={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(IL(i))a="linearGradient",l.x1=i.x,l.y1=i.y,l.x2=i.x2,l.y2=i.y2;else if(PL(i))a="radialGradient",l.cx=Lr(i.x,.5),l.cy=Lr(i.y,.5),l.r=Lr(i.r,.5);else return;for(var o=i.colorStops,h=[],d=0,m=o.length;d<m;++d){var g=qb(o[d].offset)*100+"%",_=o[d].color,x=ef(_),E=x.color,M=x.opacity,P={offset:g};P["stop-color"]=E,M<1&&(P["stop-opacity"]=M),h.push(ti("stop",d+"",P))}var I=ti(a,"",l,h),D=US(I),O=n.gradientCache,F=O[D];F||(F=n.zrId+"-g"+n.gradientIdx++,O[D]=F,l.id=F,n.defs[F]=ti(a,F,l,h)),t[r]=wy(F)}function Lre(e,t,r,n){var i=e.style[r],a={patternUnits:"userSpaceOnUse"},l;if(AL(i)){var o=i.imageWidth,h=i.imageHeight,d=void 0,m=i.image;if(Jt(m)?d=m:GR(m)?d=m.src:qR(m)&&(d=m.toDataURL()),typeof Image>"u"){var g="Image width/height must been given explictly in svg-ssr renderer.";Ao(o,g),Ao(h,g)}else if(o==null||h==null){var _=function(D,O){if(D){var F=D.elm,$=D.attrs.width=o||O.width,q=D.attrs.height=h||O.height;F&&(F.setAttribute("width",$),F.setAttribute("height",q))}},x=Y2(d,null,e,function(D){_(E,D),_(l,D)});x&&x.width&&x.height&&(o=o||x.width,h=h||x.height)}l=ti("image","img",{href:d,width:o,height:h}),a.width=o,a.height=h}else i.svgElement&&(l=Ur(i.svgElement),a.width=i.svgWidth,a.height=i.svgHeight);if(!!l){a.patternTransform=DL(i);var E=ti("pattern","",a,[l]),M=US(E),P=n.patternCache,I=P[M];I||(I=n.zrId+"-p"+n.patternIdx++,P[M]=I,a.id=I,E=n.defs[I]=ti("pattern",I,a,[l])),t[r]=wy(I)}}function Ore(e,t,r){var n=r.clipPathCache,i=r.defs,a=n[e.id];if(!a){a=r.zrId+"-c"+r.clipPathIdx++;var l={id:a};n[e.id]=a,i[a]=ti("clipPath",a,l,[WR(e,r)])}t["clip-path"]=wy(a)}function vD(e){return document.createTextNode(e)}function nc(e,t,r){e.insertBefore(t,r)}function gD(e,t){e.removeChild(t)}function _D(e,t){e.appendChild(t)}function ZR(e){return e.parentNode}function XR(e){return e.nextSibling}function $x(e,t){e.textContent=t}var yD=58,Rre=120,zre=ti("","");function Dw(e){return e===void 0}function Wo(e){return e!==void 0}function Bre(e,t,r){for(var n={},i=t;i<=r;++i){var a=e[i].key;a!==void 0&&(n[a]=i)}return n}function ip(e,t){var r=e.key===t.key,n=e.tag===t.tag;return n&&r}function im(e){var t,r=e.children,n=e.tag;if(Wo(n)){var i=e.elm=jR(n);if(HS(zre,e),Gt(r))for(t=0;t<r.length;++t){var a=r[t];a!=null&&_D(i,im(a))}else Wo(e.text)&&!ar(e.text)&&_D(i,vD(e.text))}else e.elm=vD(e.text);return e.elm}function YR(e,t,r,n,i){for(;n<=i;++n){var a=r[n];a!=null&&nc(e,im(a),t)}}function J_(e,t,r,n){for(;r<=n;++r){var i=t[r];if(i!=null)if(Wo(i.tag)){var a=ZR(i.elm);gD(a,i.elm)}else gD(e,i.elm)}}function HS(e,t){var r,n=t.elm,i=e&&e.attrs||{},a=t.attrs||{};if(i!==a){for(r in a){var l=a[r],o=i[r];o!==l&&(l===!0?n.setAttribute(r,""):l===!1?n.removeAttribute(r):r.charCodeAt(0)!==Rre?n.setAttribute(r,l):r==="xmlns:xlink"||r==="xmlns"?n.setAttributeNS(vre,r,l):r.charCodeAt(3)===yD?n.setAttributeNS(gre,r,l):r.charCodeAt(5)===yD?n.setAttributeNS($R,r,l):n.setAttribute(r,l))}for(r in i)r in a||n.removeAttribute(r)}}function Fre(e,t,r){for(var n=0,i=0,a=t.length-1,l=t[0],o=t[a],h=r.length-1,d=r[0],m=r[h],g,_,x,E;n<=a&&i<=h;)l==null?l=t[++n]:o==null?o=t[--a]:d==null?d=r[++i]:m==null?m=r[--h]:ip(l,d)?(Ch(l,d),l=t[++n],d=r[++i]):ip(o,m)?(Ch(o,m),o=t[--a],m=r[--h]):ip(l,m)?(Ch(l,m),nc(e,l.elm,XR(o.elm)),l=t[++n],m=r[--h]):ip(o,d)?(Ch(o,d),nc(e,o.elm,l.elm),o=t[--a],d=r[++i]):(Dw(g)&&(g=Bre(t,n,a)),_=g[d.key],Dw(_)?nc(e,im(d),l.elm):(x=t[_],x.tag!==d.tag?nc(e,im(d),l.elm):(Ch(x,d),t[_]=void 0,nc(e,x.elm,l.elm))),d=r[++i]);(n<=a||i<=h)&&(n>a?(E=r[h+1]==null?null:r[h+1].elm,YR(e,E,r,i,h)):J_(e,t,n,a))}function Ch(e,t){var r=t.elm=e.elm,n=e.children,i=t.children;e!==t&&(HS(e,t),Dw(t.text)?Wo(n)&&Wo(i)?n!==i&&Fre(r,n,i):Wo(i)?(Wo(e.text)&&$x(r,""),YR(r,null,i,0,i.length-1)):Wo(n)?J_(r,n,0,n.length-1):Wo(e.text)&&$x(r,""):e.text!==t.text&&(Wo(n)&&J_(r,n,0,n.length-1),$x(r,t.text)))}function Nre(e,t){if(ip(e,t))Ch(e,t);else{var r=e.elm,n=ZR(r);im(t),n!==null&&(nc(n,t.elm,XR(r)),J_(n,[e],0,0))}return t}var Vre=0,Ure=function(){function e(t,r,n){if(this.type="svg",this.refreshHover=xD(),this.configLayer=xD(),this.storage=r,this._opts=n=Ct({},n),this.root=t,this._id="zr"+Vre++,this._oldVNode=uD(n.width,n.height),t&&!n.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=jR("svg");HS(null,this._oldVNode),i.appendChild(a),t.appendChild(i)}this.resize(n.width,n.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",Nre(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return mD(t,Mw(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),n=this._backgroundColor,i=this._width,a=this._height,l=Mw(this._id);l.animation=t.animation,l.willUpdate=t.willUpdate,l.compress=t.compress;var o=[];if(n&&n!=="none"){var h=ef(n),d=h.color,m=h.opacity;this._bgVNode=ti("rect","bg",{width:i,height:a,x:"0",y:"0",id:"0",fill:d,"fill-opacity":m}),o.push(this._bgVNode)}else this._bgVNode=null;var g=t.compress?null:this._mainVNode=ti("g","main",{},[]);this._paintList(r,l,g?g.children:o),g&&o.push(g);var _=nr(Gr(l.defs),function(M){return l.defs[M]});if(_.length&&o.push(ti("defs","defs",{},_)),t.animation){var x=xre(l.cssNodes,l.cssAnims,{newline:!0});if(x){var E=ti("style","stl",{},[],x);o.push(E)}}return uD(i,a,o,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},US(this.renderToVNode({animation:Lr(t.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:Lr(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t;var r=this._bgVNode;if(r&&r.elm){var n=ef(t),i=n.color,a=n.opacity;r.elm.setAttribute("fill",i),a<1&&r.elm.setAttribute("fill-opacity",a)}},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,r,n){for(var i=t.length,a=[],l=0,o,h,d=0,m=0;m<i;m++){var g=t[m];if(!g.invisible){var _=g.__clipPaths,x=_&&_.length||0,E=h&&h.length||0,M=void 0;for(M=Math.max(x-1,E-1);M>=0&&!(_&&h&&_[M]===h[M]);M--);for(var P=E-1;P>M;P--)l--,o=a[l-1];for(var I=M+1;I<x;I++){var D={};Ore(_[I],D,r);var O=ti("g","clip-g-"+d++,D,[]);(o?o.children:n).push(O),a[l++]=O,o=O}h=_;var F=mD(g,r);F&&(o?o.children:n).push(F)}}},e.prototype.resize=function(t,r){var n=this._opts,i=this.root,a=this._viewport;if(t!=null&&(n.width=t),r!=null&&(n.height=r),i&&a&&(a.style.display="none",t=IM(i,0,n),r=IM(i,1,n),a.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,a){var l=a.style;l.width=t+"px",l.height=r+"px"}var o=this._svgDom;o&&(o.setAttribute("width",t),o.setAttribute("height",r))}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var r=encodeURIComponent(this.renderToString()),n="data:image/svg+xml;";return t?(r=MW(r),r&&n+"base64,"+r):n+"charset=UTF-8,"+r},e}();function xD(e){return function(){}}const $re=Ure;function jre(e){e.registerPainter("svg",$re)}function Hre(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=tf(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var a=[],l=0;l<r.length;l++)a.push(tf(e,t,r[l]));return a.join(" ")}}var Gre=function(e){Vt(t,e);function t(r,n,i,a){var l=e.call(this)||this;return l.updateData(r,n,i,a),l}return t.prototype._createSymbol=function(r,n,i,a,l){this.removeAll();var o=xf(r,-1,-1,2,2,null,l);o.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),o.drift=qre,this._symbolType=r,this.add(o)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){qp(this.childAt(0))},t.prototype.downplay=function(){Wp(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,a){this.silent=!1;var l=r.getItemVisual(n,"symbol")||"circle",o=r.hostModel,h=t.getSymbolSize(r,n),d=l!==this._symbolType,m=a&&a.disableAnimation;if(d){var g=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(l,r,n,h,g)}else{var _=this.childAt(0);_.silent=!1;var x={scaleX:h[0]/2,scaleY:h[1]/2};m?_.attr(x):wc(_,x,o,n),DY(_)}if(this._updateCommon(r,n,h,i,a),d){var _=this.childAt(0);if(!m){var x={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:_.style.opacity}};_.scaleX=_.scaleY=0,_.style.opacity=0,xm(_,x,o,n)}}m&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,a,l){var o=this.childAt(0),h=r.hostModel,d,m,g,_,x,E,M,P,I;if(a&&(d=a.emphasisItemStyle,m=a.blurItemStyle,g=a.selectItemStyle,_=a.focus,x=a.blurScope,M=a.labelStatesModels,P=a.hoverScale,I=a.cursorStyle,E=a.emphasisDisabled),!a||r.hasItemOption){var D=a&&a.itemModel?a.itemModel:r.getItemModel(n),O=D.getModel("emphasis");d=O.getModel("itemStyle").getItemStyle(),g=D.getModel(["select","itemStyle"]).getItemStyle(),m=D.getModel(["blur","itemStyle"]).getItemStyle(),_=O.get("focus"),x=O.get("blurScope"),E=O.get("disabled"),M=My(D),P=O.getShallow("scale"),I=D.getShallow("cursor")}var F=r.getItemVisual(n,"symbolRotate");o.attr("rotation",(F||0)*Math.PI/180||0);var $=PS(r.getItemVisual(n,"symbolOffset"),i);$&&(o.x=$[0],o.y=$[1]),I&&o.attr("cursor",I);var q=r.getItemVisual(n,"style"),K=q.fill;if(o instanceof js){var Z=o.style;o.useStyle(Ct({image:Z.image,x:Z.x,y:Z.y,width:Z.width,height:Z.height},q))}else o.__isEmptyBrush?o.useStyle(Ct({},q)):o.useStyle(q),o.style.decal=null,o.setColor(K,l&&l.symbolInnerColor),o.style.strokeNoScale=!0;var re=r.getItemVisual(n,"liftZ"),ie=this._z2;re!=null?ie==null&&(this._z2=o.z2,o.z2+=re):ie!=null&&(o.z2=ie,this._z2=null);var ce=l&&l.useNameLabel;Z4(o,M,{labelFetcher:h,labelDataIndex:n,defaultText:le,inheritColor:K,defaultOpacity:q.opacity});function le(Ne){return ce?r.getName(Ne):Hre(r,Ne)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var fe=o.ensureState("emphasis");if(fe.style=d,o.ensureState("select").style=g,o.ensureState("blur").style=m,P){var ye=Math.max(Mn(P)?P:1.1,3/this._sizeY);fe.scaleX=this._sizeX*ye,fe.scaleY=this._sizeY*ye}this.setSymbolScale(1),rS(this,_,x,E)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var a=this.childAt(0),l=bn(this).dataIndex,o=i&&i.animation;if(this.silent=a.silent=!0,i&&i.fadeLabel){var h=a.getTextContent();h&&U_(h,{style:{opacity:0}},n,{dataIndex:l,removeOpt:o,cb:function(){a.removeTextContent()}})}else a.removeTextContent();U_(a,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:l,cb:r,removeOpt:o})},t.getSymbolSize=function(r,n){return qO(r.getItemVisual(n,"symbolSize"))},t}(bi);function qre(e,t){this.parent.drift(e,t)}const Wre=Gre;function jx(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function bD(e){return e!=null&&!ar(e)&&(e={isIgnore:e}),e||{}}function wD(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:My(t),cursorStyle:t.get("cursor")}}var Zre=function(){function e(t){this.group=new bi,this._SymbolCtor=t||Wre}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=bD(r);var n=this.group,i=t.hostModel,a=this._data,l=this._SymbolCtor,o=r.disableAnimation,h=wD(t),d={disableAnimation:o},m=r.getSymbolPoint||function(g){return t.getItemLayout(g)};a||n.removeAll(),t.diff(a).add(function(g){var _=m(g);if(jx(t,_,g,r)){var x=new l(t,g,h,d);x.setPosition(_),t.setItemGraphicEl(g,x),n.add(x)}}).update(function(g,_){var x=a.getItemGraphicEl(_),E=m(g);if(!jx(t,E,g,r)){n.remove(x);return}var M=t.getItemVisual(g,"symbol")||"circle",P=x&&x.getSymbolType&&x.getSymbolType();if(!x||P&&P!==M)n.remove(x),x=new l(t,g,h,d),x.setPosition(E);else{x.updateData(t,g,h,d);var I={x:E[0],y:E[1]};o?x.attr(I):wc(x,I,i)}n.add(x),t.setItemGraphicEl(g,x)}).remove(function(g){var _=a.getItemGraphicEl(g);_&&_.fadeOut(function(){n.remove(_)},i)}).execute(),this._getSymbolPoint=m,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var a=t._getSymbolPoint(i);n.setPosition(a),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=wD(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=bD(n);function i(h){h.isGroup||(h.incremental=!0,h.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var l=r.getItemLayout(a);if(jx(r,l,a,n)){var o=new this._SymbolCtor(r,a,this._seriesScope);o.traverse(i),o.setPosition(l),this.group.add(o),r.setItemGraphicEl(a,o),this._progressiveEls.push(o)}}},e.prototype.eachRendered=function(t){Iy(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const Xre=Zre;function Yre(e,t,r,n,i){var a=e.getArea(),l=a.x,o=a.y,h=a.width,d=a.height,m=r.get(["lineStyle","width"])||2;l-=m/2,o-=m/2,h+=m,d+=m,l=Math.floor(l),h=Math.round(h);var g=new fa({shape:{x:l,y:o,width:h,height:d}});if(t){var _=e.getBaseAxis(),x=_.isHorizontal(),E=_.inverse;x?(E&&(g.shape.x+=h),g.shape.width=0):(E||(g.shape.y+=d),g.shape.height=0);var M=Er(i)?function(P){i(P,g)}:null;xm(g,{shape:{width:h,height:d,x:l,y:o}},r,null,n,M)}return g}function Kre(e,t,r){var n=e.getArea(),i=ri(n.r0,1),a=ri(n.r,1),l=new iS({shape:{cx:ri(e.cx,1),cy:ri(e.cy,1),r0:i,r:a,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var o=e.getBaseAxis().dim==="angle";o?l.shape.endAngle=n.startAngle:l.shape.r=i,xm(l,{shape:{endAngle:n.endAngle,r:a}},r)}return l}function Jre(e,t,r,n,i){if(e){if(e.type==="polar")return Kre(e,t,r);if(e.type==="cartesian2d")return Yre(e,t,r,n,i)}else return null;return null}function KR(e,t){return{seriesType:e,plan:CS(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,a=r.pipelineContext,l=t||a.large;if(!!i){var o=nr(i.dimensions,function(x){return n.mapDimension(x)}).slice(0,2),h=o.length,d=n.getCalculationInfo("stackResultDimension");Tw(n,o[0])&&(o[0]=d),Tw(n,o[1])&&(o[1]=d);var m=n.getStore(),g=n.getDimensionIndex(o[0]),_=n.getDimensionIndex(o[1]);return h&&{progress:function(x,E){for(var M=x.end-x.start,P=l&&ete(M*h),I=[],D=[],O=x.start,F=0;O<x.end;O++){var $=void 0;if(h===1){var q=m.get(g,O);$=i.dataToPoint(q,null,D)}else I[0]=m.get(g,O),I[1]=m.get(_,O),$=i.dataToPoint(I,null,D);l?(P[F++]=$[0],P[F++]=$[1]):E.setItemLayout(O,$.slice())}l&&E.setLayout("points",P)}}}}}}var Qre=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return Gee(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(nf);const ene=Qre;var JR=4,tne=function(){function e(){}return e}(),rne=function(e){Vt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new tne},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,a=n.size,l=this.symbolProxy,o=l.shape,h=r.getContext?r.getContext():r,d=h&&a[0]<JR,m=this.softClipShape,g;if(d){this._ctx=h;return}for(this._ctx=null,g=this._off;g<i.length;){var _=i[g++],x=i[g++];isNaN(_)||isNaN(x)||m&&!m.contain(_,x)||(o.x=_-a[0]/2,o.y=x-a[1]/2,o.width=a[0],o.height=a[1],l.buildPath(r,o,!0))}this.incremental&&(this._off=g,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,a=this._ctx,l=this.softClipShape,o;if(!!a){for(o=this._off;o<n.length;){var h=n[o++],d=n[o++];isNaN(h)||isNaN(d)||l&&!l.contain(h,d)||a.fillRect(h-i[0]/2,d-i[1]/2,i[0],i[1])}this.incremental&&(this._off=o,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,a=i.points,l=i.size,o=Math.max(l[0],4),h=Math.max(l[1],4),d=a.length/2-1;d>=0;d--){var m=d*2,g=a[m]-o/2,_=a[m+1]-h/2;if(r>=g&&n>=_&&r<=g+o&&n<=_+h)return d}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(r=i[0],n=i[1],a.contain(r,n)){var l=this.hoverDataIdx=this.findDataIndex(r,n);return l>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,a=n.size,l=a[0],o=a[1],h=1/0,d=1/0,m=-1/0,g=-1/0,_=0;_<i.length;){var x=i[_++],E=i[_++];h=Math.min(x,h),m=Math.max(x,m),d=Math.min(E,d),g=Math.max(E,g)}r=this._rect=new _n(h-l/2,d-o/2,m-h+l,g-d+o)}return r},t}(nn),nne=function(){function e(){this.group=new bi}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,a=n.startIndex*4*2;r=new Float32Array(r.buffer,a,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],a=r.getLayout("points"),l=i&&i.shape.points;if(l&&l.length<2e4){var o=l.length,h=new Float32Array(o+a.length);h.set(l),h.set(a,o),i.endIndex=t.end,i.setShape({points:h})}else{this._newAdded=[];var d=this._create();d.startIndex=t.start,d.endIndex=t.end,d.incremental=!0,d.setShape({points:a}),this._setCommon(d,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new rne({cursor:"default"});return this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var a=r.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=n.clipShape||null,t.symbolProxy=xf(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var l=t.shape.size[0]<JR;t.useStyle(i.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var o=r.getVisual("style"),h=o&&o.fill;h&&t.setColor(h);var d=bn(t);d.seriesIndex=i.seriesIndex,t.on("mousemove",function(m){d.dataIndex=null;var g=t.hoverDataIdx;g>=0&&(d.dataIndex=g+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const ine=nne;var ane=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var a=r.getData(),l=this._updateSymbolDraw(a,r);l.updateData(a,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var a=r.getData(),l=this._updateSymbolDraw(a,r);l.incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var a=r.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var l=KR("").reset(r,n,i);l.progress&&l.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,a=n.pipelineContext,l=a.large;return(!i||l!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=l?new ine:new Xre,this._isLargeDraw=l,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(dc);const one=ane;var sne=function(e){Vt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(An);const lne=sne;var kw=function(e){Vt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",So).models[0]},t.type="cartesian2dAxis",t}(An);ns(kw,kte);var QR={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},une=En({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},QR),GS=En({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},QR),cne=En({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},GS),hne=yn({logBase:10},GS);const fne={category:une,value:GS,time:cne,log:hne};var dne={value:1,category:1,time:1,log:1};function SD(e,t,r,n){Ce(dne,function(i,a){var l=En(En({},fne[a],!0),n,!0),o=function(h){Vt(d,h);function d(){var m=h!==null&&h.apply(this,arguments)||this;return m.type=t+"Axis."+a,m}return d.prototype.mergeDefaultAndTheme=function(m,g){var _=Kp(this),x=_?_S(m):{},E=g.getTheme();En(m,E.get(a+"Axis")),En(m,this.getDefaultOption()),m.type=TD(m),_&&Jp(m,x,_)},d.prototype.optionUpdated=function(){var m=this.option;m.type==="category"&&(this.__ordinalMeta=Ew.createByAxisModel(this))},d.prototype.getCategories=function(m){var g=this.option;if(g.type==="category")return m?g.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.type=t+"Axis."+a,d.defaultOption=l,d}(r);e.registerComponentModel(o)}),e.registerSubTypeDefaulter(t+"Axis",TD)}function TD(e){return e.type||(e.data?"category":"value")}var pne=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return nr(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Wi(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const mne=pne;var Lw=["x","y"];function ED(e){return e.type==="interval"||e.type==="time"}var vne=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=Lw,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!ED(r)||!ED(n))){var i=r.getExtent(),a=n.getExtent(),l=this.dataToPoint([i[0],a[0]]),o=this.dataToPoint([i[1],a[1]]),h=i[1]-i[0],d=a[1]-a[0];if(!(!h||!d)){var m=(o[0]-l[0])/h,g=(o[1]-l[1])/d,_=l[0]-i[0]*m,x=l[1]-a[0]*g,E=this._transform=[m,0,0,g,_,x];this._invTransform=j2([],E)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),a=this.dataToPoint(n),l=this.getArea(),o=new _n(i[0],i[1],a[0]-i[0],a[1]-i[1]);return l.intersect(o)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var a=r[0],l=r[1];if(this._transform&&a!=null&&isFinite(a)&&l!=null&&isFinite(l))return ro(i,r,this._transform);var o=this.getAxis("x"),h=this.getAxis("y");return i[0]=o.toGlobalCoord(o.dataToCoord(a,n)),i[1]=h.toGlobalCoord(h.dataToCoord(l,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,a=this.getAxis("y").scale,l=i.getExtent(),o=a.getExtent(),h=i.parse(r[0]),d=a.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(l[0],l[1]),h),Math.max(l[0],l[1])),n[1]=Math.min(Math.max(Math.min(o[0],o[1]),d),Math.max(o[0],o[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return ro(i,r,this._invTransform);var a=this.getAxis("x"),l=this.getAxis("y");return i[0]=a.coordToData(a.toLocalCoord(r[0]),n),i[1]=l.coordToData(l.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),a=Math.min(n[0],n[1]),l=Math.max(r[0],r[1])-i,o=Math.max(n[0],n[1])-a;return new _n(i,a,l,o)},t}(mne),gne=function(e){Vt(t,e);function t(r,n,i,a,l){var o=e.call(this,r,n,i)||this;return o.index=0,o.type=a||"value",o.position=l||"bottom",o}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Hte);const _ne=gne;function Ow(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,a={},l=i.getAxesOnZeroOf()[0],o=i.position,h=l?"onZero":o,d=i.dim,m=n.getRect(),g=[m.x,m.x+m.width,m.y,m.y+m.height],_={left:0,right:1,top:0,bottom:1,onZero:2},x=t.get("offset")||0,E=d==="x"?[g[2]-x,g[3]+x]:[g[0]-x,g[1]+x];if(l){var M=l.toGlobalCoord(l.dataToCoord(0));E[_.onZero]=Math.max(Math.min(M,E[1]),E[0])}a.position=[d==="y"?E[_[h]]:g[0],d==="x"?E[_[h]]:g[3]],a.rotation=Math.PI/2*(d==="x"?0:1);var P={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=P[o],a.labelOffset=l?E[_[o]]-E[_.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),Jh(r.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var I=t.get(["axisLabel","rotate"]);return a.labelRotate=h==="top"?-I:I,a.z2=1,a}function CD(e){return e.get("coordinateSystem")==="cartesian2d"}function AD(e){var t={xAxisModel:null,yAxisModel:null};return Ce(t,function(r,n){var i=n.replace(/Model$/,""),a=e.getReferringComponents(i,So).models[0];t[n]=a}),t}var Hx=Math.log;function yne(e,t,r){var n=bm.prototype,i=n.getTicks.call(r),a=n.getTicks.call(r,!0),l=i.length-1,o=n.getInterval.call(r),h=MR(e,t),d=h.extent,m=h.fixMin,g=h.fixMax;if(e.type==="log"){var _=Hx(e.base);d=[Hx(d[0])/_,Hx(d[1])/_]}e.setExtent(d[0],d[1]),e.calcNiceExtent({splitNumber:l,fixMin:m,fixMax:g});var x=n.getExtent.call(e);m&&(d[0]=x[0]),g&&(d[1]=x[1]);var E=n.getInterval.call(e),M=d[0],P=d[1];if(m&&g)E=(P-M)/l;else if(m)for(P=d[0]+E*l;P<d[1]&&isFinite(P)&&isFinite(d[1]);)E=Bx(E),P=d[0]+E*l;else if(g)for(M=d[1]-E*l;M>d[0]&&isFinite(M)&&isFinite(d[0]);)E=Bx(E),M=d[1]-E*l;else{var I=e.getTicks().length-1;I>l&&(E=Bx(E));var D=E*l;P=Math.ceil(d[1]/E)*E,M=ri(P-D),M<0&&d[0]>=0?(M=0,P=ri(D)):P>0&&d[1]<=0&&(P=0,M=-ri(D))}var O=(i[0].value-a[0].value)/o,F=(i[l].value-a[l].value)/o;n.setExtent.call(e,M+E*O,P+E*F),n.setInterval.call(e,E),(O||F)&&n.setNiceExtent.call(e,M+E,P-E)}var xne=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Lw,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(l){var o,h=Gr(l),d=h.length;if(!!d){for(var m=[],g=d-1;g>=0;g--){var _=+h[g],x=l[_],E=x.model,M=x.scale;Cw(M)&&E.get("alignTicks")&&E.get("interval")==null?m.push(x):(iD(M,E),Cw(M)&&(o=x))}m.length&&(o||(o=m.pop(),iD(o.scale,o.model)),Ce(m,function(P){yne(P.scale,P.model,o.scale)}))}}i(n.x),i(n.y);var a={};Ce(n.x,function(l){ID(n,"y",l,a)}),Ce(n.y,function(l){ID(n,"x",l,a)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),a=!n&&t.get("containLabel"),l=gS(i,{width:r.getWidth(),height:r.getHeight()});this._rect=l;var o=this._axesList;h(),a&&(Ce(o,function(d){if(!d.model.get(["axisLabel","inside"])){var m=Pte(d);if(m){var g=d.isHorizontal()?"height":"width",_=d.model.get(["axisLabel","margin"]);l[g]-=m[g]+_,d.position==="top"?l.y+=m.height+_:d.position==="left"&&(l.x+=m.width+_)}}}),h()),Ce(this._coordsList,function(d){d.calcAffineTransform()});function h(){Ce(o,function(d){var m=d.isHorizontal(),g=m?[0,l.width]:[0,l.height],_=d.inverse?1:0;d.setExtent(g[_],g[1-_]),bne(d,m?l.x:l.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}ar(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,a=this._coordsList;i<a.length;i++)if(a[i].getAxis("x").index===t||a[i].getAxis("y").index===r)return a[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",So).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",So).models[0],a=t.gridModel,l=this._coordsList,o,h;if(r)o=r.coordinateSystem,gn(l,o)<0&&(o=null);else if(n&&i)o=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)h=this.getAxis("x",n.componentIndex);else if(i)h=this.getAxis("y",i.componentIndex);else if(a){var d=a.coordinateSystem;d===this&&(o=this._coordsList[0])}return{cartesian:o,axis:h}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,a=this,l={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},h={x:0,y:0};if(r.eachComponent("xAxis",d("x"),this),r.eachComponent("yAxis",d("y"),this),!h.x||!h.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,Ce(o.x,function(m,g){Ce(o.y,function(_,x){var E="x"+g+"y"+x,M=new vne(E);M.master=i,M.model=t,i._coordsMap[E]=M,i._coordsList.push(M),M.addAxis(m),M.addAxis(_)})});function d(m){return function(g,_){if(!!Gx(g,t)){var x=g.get("position");m==="x"?x!=="top"&&x!=="bottom"&&(x=l.bottom?"top":"bottom"):x!=="left"&&x!=="right"&&(x=l.left?"right":"left"),l[x]=!0;var E=new _ne(m,Ate(g),[0,0],g.get("type"),x),M=E.type==="category";E.onBand=M&&g.get("boundaryGap"),E.inverse=g.get("inverse"),g.axis=E,E.model=g,E.grid=a,E.index=_,a._axesList.push(E),o[m][_]=E,h[m]++}}}},e.prototype._updateScale=function(t,r){Ce(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var a=i.model.get("categorySortInfo");i.scale.setSortInfo(a)}}),t.eachSeries(function(i){if(CD(i)){var a=AD(i),l=a.xAxisModel,o=a.yAxisModel;if(!Gx(l,r)||!Gx(o,r))return;var h=this.getCartesian(l.componentIndex,o.componentIndex),d=i.getData(),m=h.getAxis("x"),g=h.getAxis("y");n(d,m),n(d,g)}},this);function n(i,a){Ce(Dte(i,a.dim),function(l){a.scale.unionExtentFromData(i,l)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return Ce(this.getCartesians(),function(i){var a=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),l=i.getOtherAxis(a);gn(r,a)<0&&r.push(a),gn(n,l)<0&&n.push(l)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,a){var l=new e(i,t,r);l.name="grid_"+a,l.resize(i,r,!0),i.coordinateSystem=l,n.push(l)}),t.eachSeries(function(i){if(!!CD(i)){var a=AD(i),l=a.xAxisModel,o=a.yAxisModel,h=l.getCoordSysModel(),d=h.coordinateSystem;i.coordinateSystem=d.getCartesian(l.componentIndex,o.componentIndex)}}),n},e.dimensions=Lw,e}();function Gx(e,t){return e.getCoordSysModel()===t}function ID(e,t,r,n){r.getAxesOnZeroOf=function(){return a?[a]:[]};var i=e[t],a,l=r.model,o=l.get(["axisLine","onZero"]),h=l.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(h!=null)PD(i[h])&&(a=i[h]);else for(var d in i)if(i.hasOwnProperty(d)&&PD(i[d])&&!n[m(i[d])]){a=i[d];break}a&&(n[m(a)]=!0);function m(g){return g.dim+"_"+g.index}}function PD(e){return e&&e.type!=="category"&&e.type!=="time"&&Ite(e)}function bne(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const wne=xne;var Ll=Math.PI,pc=function(){function e(t,r){this.group=new bi,this.opt=r,this.axisModel=t,yn(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new bi({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!MD[t]},e.prototype.add=function(t){MD[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=$L(r-t),a,l;return z_(i)?(l=n>0?"top":"bottom",a="center"):z_(i-Ll)?(l=n>0?"bottom":"top",a="center"):(l="middle",i>0&&i<Ll?a=n>0?"right":"left":a=n>0?"left":"right"),{rotation:i,textAlign:a,textVerticalAlign:l}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),MD={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var a=t.axis.getExtent(),l=n.transform,o=[a[0],0],h=[a[1],0];l&&(ro(o,o,l),ro(h,h,l));var d=Ct({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),m=new Gl({subPixelOptimize:!0,shape:{x1:o[0],y1:o[1],x2:h[0],y2:h[1]},style:d,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});m.anid="line",r.add(m);var g=t.get(["axisLine","symbol"]);if(g!=null){var _=t.get(["axisLine","symbolSize"]);Jt(g)&&(g=[g,g]),(Jt(_)||Mn(_))&&(_=[_,_]);var x=PS(t.get(["axisLine","symbolOffset"])||0,_),E=_[0],M=_[1];Ce([{rotate:e.rotation+Math.PI/2,offset:x[0],r:0},{rotate:e.rotation-Math.PI/2,offset:x[1],r:Math.sqrt((o[0]-h[0])*(o[0]-h[0])+(o[1]-h[1])*(o[1]-h[1]))}],function(P,I){if(g[I]!=="none"&&g[I]!=null){var D=xf(g[I],-E/2,-M/2,E,M,d.stroke,!0),O=P.r+P.offset;D.attr({rotation:P.rotate,x:o[0]+O*Math.cos(e.rotation),y:o[1]-O*Math.sin(e.rotation),silent:!0,z2:11}),r.add(D)}})}}},axisTickLabel:function(e,t,r,n){var i=Ene(r,n,t,e),a=Ane(r,n,t,e);if(Tne(t,a,i),Cne(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var l=Gte(nr(a,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));qte(l)}},axisName:function(e,t,r,n){var i=Jh(e.axisName,t.get("name"));if(!!i){var a=t.get("nameLocation"),l=e.nameDirection,o=t.getModel("nameTextStyle"),h=t.get("nameGap")||0,d=t.axis.getExtent(),m=d[0]>d[1]?-1:1,g=[a==="start"?d[0]-m*h:a==="end"?d[1]+m*h:(d[0]+d[1])/2,kD(a)?e.labelOffset+l*h:0],_,x=t.get("nameRotate");x!=null&&(x=x*Ll/180);var E;kD(a)?_=pc.innerTextLayout(e.rotation,x!=null?x:e.rotation,l):(_=Sne(e.rotation,a,x||0,d),E=e.axisNameAvailableWidth,E!=null&&(E=Math.abs(E/Math.sin(_.rotation)),!isFinite(E)&&(E=null)));var M=o.getFont(),P=t.get("nameTruncate",!0)||{},I=P.ellipsis,D=Jh(e.nameTruncateMaxWidth,P.maxWidth,E),O=new Io({x:g[0],y:g[1],rotation:_.rotation,silent:pc.isLabelSilent(t),style:_c(o,{text:i,font:M,overflow:"truncate",width:D,ellipsis:I,fill:o.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:o.get("align")||_.textAlign,verticalAlign:o.get("verticalAlign")||_.textVerticalAlign}),z2:1});if(W4({el:O,componentModel:t,itemName:i}),O.__fullText=i,O.anid="name",t.get("triggerEvent")){var F=pc.makeAxisEventDataBase(t);F.targetType="axisName",F.name=i,bn(O).eventData=F}n.add(O),O.updateTransform(),r.add(O),O.decomposeTransform()}}};function Sne(e,t,r,n){var i=$L(r-e),a,l,o=n[0]>n[1],h=t==="start"&&!o||t!=="start"&&o;return z_(i-Ll/2)?(l=h?"bottom":"top",a="center"):z_(i-Ll*1.5)?(l=h?"top":"bottom",a="center"):(l="middle",i<Ll*1.5&&i>Ll/2?a=h?"left":"right":a=h?"right":"left"),{rotation:i,textAlign:a,textVerticalAlign:l}}function Tne(e,t,r){if(!DR(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var a=t[0],l=t[1],o=t[t.length-1],h=t[t.length-2],d=r[0],m=r[1],g=r[r.length-1],_=r[r.length-2];n===!1?(Ua(a),Ua(d)):DD(a,l)&&(n?(Ua(l),Ua(m)):(Ua(a),Ua(d))),i===!1?(Ua(o),Ua(g)):DD(h,o)&&(i?(Ua(h),Ua(_)):(Ua(o),Ua(g)))}}function Ua(e){e&&(e.ignore=!0)}function DD(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=U2([]);return $2(i,i,-e.rotation),r.applyTransform(Uh([],i,e.getLocalTransform())),n.applyTransform(Uh([],i,t.getLocalTransform())),r.intersect(n)}}function kD(e){return e==="middle"||e==="center"}function e6(e,t,r,n,i){for(var a=[],l=[],o=[],h=0;h<e.length;h++){var d=e[h].coord;l[0]=d,l[1]=0,o[0]=d,o[1]=r,t&&(ro(l,l,t),ro(o,o,t));var m=new Gl({subPixelOptimize:!0,shape:{x1:l[0],y1:l[1],x2:o[0],y2:o[1]},style:n,z2:2,autoBatch:!0,silent:!0});m.anid=i+"_"+e[h].tickValue,a.push(m)}return a}function Ene(e,t,r,n){var i=r.axis,a=r.getModel("axisTick"),l=a.get("show");if(l==="auto"&&n.handleAutoShown&&(l=n.handleAutoShown("axisTick")),!(!l||i.scale.isBlank())){for(var o=a.getModel("lineStyle"),h=n.tickDirection*a.get("length"),d=i.getTicksCoords(),m=e6(d,t.transform,h,yn(o.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),g=0;g<m.length;g++)e.add(m[g]);return m}}function Cne(e,t,r,n){var i=r.axis,a=r.getModel("minorTick");if(!(!a.get("show")||i.scale.isBlank())){var l=i.getMinorTicksCoords();if(!!l.length)for(var o=a.getModel("lineStyle"),h=n*a.get("length"),d=yn(o.getLineStyle(),yn(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),m=0;m<l.length;m++)for(var g=e6(l[m],t.transform,h,d,"minorticks_"+m),_=0;_<g.length;_++)e.add(g[_])}}function Ane(e,t,r,n){var i=r.axis,a=Jh(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!a||i.scale.isBlank())){var l=r.getModel("axisLabel"),o=l.get("margin"),h=i.getViewLabels(),d=(Jh(n.labelRotate,l.get("rotate"))||0)*Ll/180,m=pc.innerTextLayout(n.rotation,d,n.labelDirection),g=r.getCategories&&r.getCategories(!0),_=[],x=pc.isLabelSilent(r),E=r.get("triggerEvent");return Ce(h,function(M,P){var I=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(M.tickValue):M.tickValue,D=M.formattedLabel,O=M.rawLabel,F=l;if(g&&g[I]){var $=g[I];ar($)&&$.textStyle&&(F=new Ji($.textStyle,l,r.ecModel))}var q=F.getTextColor()||r.get(["axisLine","lineStyle","color"]),K=i.dataToCoord(I),Z=new Io({x:K,y:n.labelOffset+n.labelDirection*o,rotation:m.rotation,silent:x,z2:10+(M.level||0),style:_c(F,{text:D,align:F.getShallow("align",!0)||m.textAlign,verticalAlign:F.getShallow("verticalAlign",!0)||F.getShallow("baseline",!0)||m.textVerticalAlign,fill:Er(q)?q(i.type==="category"?O:i.type==="value"?I+"":I,P):q})});if(Z.anid="label_"+I,E){var re=pc.makeAxisEventDataBase(r);re.targetType="axisLabel",re.value=O,re.tickIndex=P,i.type==="category"&&(re.dataIndex=I),bn(Z).eventData=re}t.add(Z),Z.updateTransform(),_.push(Z),e.add(Z),Z.decomposeTransform()}),_}}const t6=pc;function Ine(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Pne(r,e,t),r.seriesInvolved&&Dne(r,e),r}function Pne(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),a=i.get("link",!0)||[],l=[];Ce(r.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var h=am(o.model),d=e.coordSysAxesInfo[h]={};e.coordSysMap[h]=o;var m=o.model,g=m.getModel("tooltip",n);if(Ce(o.getAxes(),to(M,!1,null)),o.getTooltipAxes&&n&&g.get("show")){var _=g.get("trigger")==="axis",x=g.get(["axisPointer","type"])==="cross",E=o.getTooltipAxes(g.get(["axisPointer","axis"]));(_||x)&&Ce(E.baseAxes,to(M,x?"cross":!0,_)),x&&Ce(E.otherAxes,to(M,"cross",!1))}function M(P,I,D){var O=D.model.getModel("axisPointer",i),F=O.get("show");if(!(!F||F==="auto"&&!P&&!Rw(O))){I==null&&(I=O.get("triggerTooltip")),O=P?Mne(D,g,i,t,P,I):O;var $=O.get("snap"),q=am(D.model),K=I||$||D.type==="category",Z=e.axesInfo[q]={key:q,axis:D,coordSys:o,axisPointerModel:O,triggerTooltip:I,involveSeries:K,snap:$,useHandle:Rw(O),seriesModels:[],linkGroup:null};d[q]=Z,e.seriesInvolved=e.seriesInvolved||K;var re=kne(a,D);if(re!=null){var ie=l[re]||(l[re]={axesInfo:{}});ie.axesInfo[q]=Z,ie.mapper=a[re].mapper,Z.linkGroup=ie}}}})}function Mne(e,t,r,n,i,a){var l=t.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],h={};Ce(o,function(_){h[_]=Ur(l.get(_))}),h.snap=e.type!=="category"&&!!a,l.get("type")==="cross"&&(h.type="line");var d=h.label||(h.label={});if(d.show==null&&(d.show=!1),i==="cross"){var m=l.get(["label","show"]);if(d.show=m!=null?m:!0,!a){var g=h.lineStyle=l.get("crossStyle");g&&yn(d,g.textStyle)}}return e.model.getModel("axisPointer",new Ji(h,r,n))}function Dne(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),a=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||a===!1||r.get(["axisPointer","show"],!0)===!1||Ce(e.coordSysAxesInfo[am(n.model)],function(l){var o=l.axis;n.getAxis(o.dim)===o&&(l.seriesModels.push(r),l.seriesDataCount==null&&(l.seriesDataCount=0),l.seriesDataCount+=r.getData().count())})})}function kne(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var a=e[i]||{};if(qx(a[n+"AxisId"],r.id)||qx(a[n+"AxisIndex"],r.componentIndex)||qx(a[n+"AxisName"],r.name))return i}}function qx(e,t){return e==="all"||Gt(e)&&gn(e,t)>=0||e===t}function Lne(e){var t=qS(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,a=r.get("status"),l=r.get("value");l!=null&&(l=n.parse(l));var o=Rw(r);a==null&&(i.status=o?"show":"hide");var h=n.getExtent().slice();h[0]>h[1]&&h.reverse(),(l==null||l>h[1])&&(l=h[1]),l<h[0]&&(l=h[0]),i.value=l,o&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function qS(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[am(e)]}function One(e){var t=qS(e);return t&&t.axisPointerModel}function Rw(e){return!!e.get(["handle","show"])}function am(e){return e.type+"||"+e.id}var LD={},Rne=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,a){this.axisPointerClass&&Lne(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,a){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var a=t.getAxisPointerClass(this.axisPointerClass);if(!!a){var l=One(r);l?(this._axisPointer||(this._axisPointer=new a)).render(r,l,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){LD[r]=n},t.getAxisPointerClass=function(r){return r&&LD[r]},t.type="axis",t}(ql);const r6=Rne;var zw=ni();function zne(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitArea"),l=a.getModel("areaStyle"),o=l.get("color"),h=n.coordinateSystem.getRect(),d=i.getTicksCoords({tickModel:a,clamp:!0});if(!!d.length){var m=o.length,g=zw(e).splitAreaColors,_=Ir(),x=0;if(g)for(var E=0;E<d.length;E++){var M=g.get(d[E].tickValue);if(M!=null){x=(M+(m-1)*E)%m;break}}var P=i.toGlobalCoord(d[0].coord),I=l.getAreaStyle();o=Gt(o)?o:[o];for(var E=1;E<d.length;E++){var D=i.toGlobalCoord(d[E].coord),O=void 0,F=void 0,$=void 0,q=void 0;i.isHorizontal()?(O=P,F=h.y,$=D-O,q=h.height,P=O+$):(O=h.x,F=P,$=h.width,q=D-F,P=F+q);var K=d[E-1].tickValue;K!=null&&_.set(K,x),t.add(new fa({anid:K!=null?"area_"+K:null,shape:{x:O,y:F,width:$,height:q},style:yn({fill:o[x]},I),autoBatch:!0,silent:!0})),x=(x+1)%m}zw(e).splitAreaColors=_}}}function Bne(e){zw(e).splitAreaColors=null}var Fne=["axisLine","axisTickLabel","axisName"],Nne=["splitArea","splitLine","minorSplitLine"],n6=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,a){this.group.removeAll();var l=this._axisGroup;if(this._axisGroup=new bi,this.group.add(this._axisGroup),!!r.get("show")){var o=r.getCoordSysModel(),h=Ow(o,r),d=new t6(r,Ct({handleAutoShown:function(g){for(var _=o.coordinateSystem.getCartesians(),x=0;x<_.length;x++)if(Cw(_[x].getOtherAxis(r.axis).scale))return!0;return!1}},h));Ce(Fne,d.add,d),this._axisGroup.add(d.getGroup()),Ce(Nne,function(g){r.get([g,"show"])&&Vne[g](this,this._axisGroup,r,o)},this);var m=a&&a.type==="changeAxisOrder"&&a.isInitSort;m||H4(l,this._axisGroup,r),e.prototype.render.call(this,r,n,i,a)}},t.prototype.remove=function(){Bne(this)},t.type="cartesianAxis",t}(r6),Vne={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var a=r.getModel("splitLine"),l=a.getModel("lineStyle"),o=l.get("color");o=Gt(o)?o:[o];for(var h=n.coordinateSystem.getRect(),d=i.isHorizontal(),m=0,g=i.getTicksCoords({tickModel:a}),_=[],x=[],E=l.getLineStyle(),M=0;M<g.length;M++){var P=i.toGlobalCoord(g[M].coord);d?(_[0]=P,_[1]=h.y,x[0]=P,x[1]=h.y+h.height):(_[0]=h.x,_[1]=P,x[0]=h.x+h.width,x[1]=P);var I=m++%o.length,D=g[M].tickValue;t.add(new Gl({anid:D!=null?"line_"+g[M].tickValue:null,subPixelOptimize:!0,autoBatch:!0,shape:{x1:_[0],y1:_[1],x2:x[0],y2:x[1]},style:yn({stroke:o[I]},E),silent:!0}))}}},minorSplitLine:function(e,t,r,n){var i=r.axis,a=r.getModel("minorSplitLine"),l=a.getModel("lineStyle"),o=n.coordinateSystem.getRect(),h=i.isHorizontal(),d=i.getMinorTicksCoords();if(!!d.length)for(var m=[],g=[],_=l.getLineStyle(),x=0;x<d.length;x++)for(var E=0;E<d[x].length;E++){var M=i.toGlobalCoord(d[x][E].coord);h?(m[0]=M,m[1]=o.y,g[0]=M,g[1]=o.y+o.height):(m[0]=o.x,m[1]=M,g[0]=o.x+o.width,g[1]=M),t.add(new Gl({anid:"minor_line_"+d[x][E].tickValue,subPixelOptimize:!0,autoBatch:!0,shape:{x1:m[0],y1:m[1],x2:g[0],y2:g[1]},style:_,silent:!0}))}},splitArea:function(e,t,r,n){zne(e,t,r,n)}},i6=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(n6),Une=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=i6.type,r}return t.type="yAxis",t}(n6),$ne=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new fa({shape:r.coordinateSystem.getRect(),style:yn({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ql),OD={offset:0};function a6(e){e.registerComponentView($ne),e.registerComponentModel(lne),e.registerCoordinateSystem("cartesian2d",wne),SD(e,"x",kw,OD),SD(e,"y",kw,OD),e.registerComponentView(i6),e.registerComponentView(Une),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function jne(e){af(a6),e.registerSeriesModel(ene),e.registerChartView(one),e.registerLayout(KR("scatter"))}var RD=Gl.prototype,Wx=oS.prototype,o6=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){Vt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(o6);function Zx(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var Hne=function(e){Vt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new o6},t.prototype.buildPath=function(r,n){Zx(n)?RD.buildPath.call(this,r,n):Wx.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return Zx(this.shape)?RD.pointAt.call(this,r):Wx.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=Zx(n)?[n.x2-n.x1,n.y2-n.y1]:Wx.tangentAt.call(this,r);return B2(i,i)},t}(nn);const Gne=Hne;var Xx=["fromSymbol","toSymbol"];function zD(e){return"_"+e+"Type"}function BD(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),a=t.getItemVisual(r,e+"Rotate"),l=t.getItemVisual(r,e+"Offset"),o=t.getItemVisual(r,e+"KeepAspect"),h=qO(i),d=PS(l||0,h),m=xf(n,-h[0]/2+d[0],-h[1]/2+d[1],h[0],h[1],null,o);return m.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,m.name=e,m}}function qne(e){var t=new Gne({name:"line",subPixelOptimize:!0});return Bw(t.shape,e),t}function Bw(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Wne=function(e){Vt(t,e);function t(r,n,i){var a=e.call(this)||this;return a._createLine(r,n,i),a}return t.prototype._createLine=function(r,n,i){var a=r.hostModel,l=r.getItemLayout(n),o=qne(l);o.shape.percent=0,xm(o,{shape:{percent:1}},a,n),this.add(o),Ce(Xx,function(h){var d=BD(h,r,n);this.add(d),this[zD(h)]=r.getItemVisual(n,h)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var a=r.hostModel,l=this.childOfName("line"),o=r.getItemLayout(n),h={shape:{}};Bw(h.shape,o),wc(l,h,a,n),Ce(Xx,function(d){var m=r.getItemVisual(n,d),g=zD(d);if(this[g]!==m){this.remove(this.childOfName(d));var _=BD(d,r,n);this.add(_)}this[g]=m},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var a=r.hostModel,l=this.childOfName("line"),o=i&&i.emphasisLineStyle,h=i&&i.blurLineStyle,d=i&&i.selectLineStyle,m=i&&i.labelStatesModels,g=i&&i.emphasisDisabled,_=i&&i.focus,x=i&&i.blurScope;if(!i||r.hasItemOption){var E=r.getItemModel(n),M=E.getModel("emphasis");o=M.getModel("lineStyle").getLineStyle(),h=E.getModel(["blur","lineStyle"]).getLineStyle(),d=E.getModel(["select","lineStyle"]).getLineStyle(),g=M.get("disabled"),_=M.get("focus"),x=M.get("blurScope"),m=My(E)}var P=r.getItemVisual(n,"style"),I=P.stroke;l.useStyle(P),l.style.fill=null,l.style.strokeNoScale=!0,l.ensureState("emphasis").style=o,l.ensureState("blur").style=h,l.ensureState("select").style=d,Ce(Xx,function(q){var K=this.childOfName(q);if(K){K.setColor(I),K.style.opacity=P.opacity;for(var Z=0;Z<rs.length;Z++){var re=rs[Z],ie=l.getState(re);if(ie){var ce=ie.style||{},le=K.ensureState(re),fe=le.style||(le.style={});ce.stroke!=null&&(fe[K.__isEmptyBrush?"stroke":"fill"]=ce.stroke),ce.opacity!=null&&(fe.opacity=ce.opacity)}}K.markRedraw()}},this);var D=a.getRawValue(n);Z4(this,m,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(q,K){return a.getFormattedLabel(q,K,r.dataType)}},inheritColor:I||"#000",defaultOpacity:P.opacity,defaultText:(D==null?r.getName(n):isFinite(D)?ri(D):D)+""});var O=this.getTextContent();if(O){var F=m.normal;O.__align=O.style.align,O.__verticalAlign=O.style.verticalAlign,O.__position=F.get("position")||"middle";var $=F.get("distance");Gt($)||($=[$,$]),O.__labelDistance=$}this.setTextConfig({position:null,local:!0,inside:!1}),rS(this,_,x,g)},t.prototype.highlight=function(){qp(this)},t.prototype.downplay=function(){Wp(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");Bw(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),a=r.getTextContent();if(!n&&!i&&(!a||a.ignore))return;for(var l=1,o=this.parent;o;)o.scaleX&&(l/=o.scaleX),o=o.parent;var h=r.childOfName("line");if(!this.__dirty&&!h.__dirty)return;var d=h.shape.percent,m=h.pointAt(0),g=h.pointAt(d),_=cL([],g,m);B2(_,_);function x(ie,ce){var le=ie.__specifiedRotation;if(le==null){var fe=h.tangentAt(ce);ie.attr("rotation",(ce===1?-1:1)*Math.PI/2-Math.atan2(fe[1],fe[0]))}else ie.attr("rotation",le)}if(n&&(n.setPosition(m),x(n,0),n.scaleX=n.scaleY=l*d,n.markRedraw()),i&&(i.setPosition(g),x(i,1),i.scaleX=i.scaleY=l*d,i.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var E=void 0,M=void 0,P=a.__labelDistance,I=P[0]*l,D=P[1]*l,O=d/2,F=h.tangentAt(O),$=[F[1],-F[0]],q=h.pointAt(O);$[1]>0&&($[0]=-$[0],$[1]=-$[1]);var K=F[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var Z=-Math.atan2(F[1],F[0]);g[0]<m[0]&&(Z=Math.PI+Z),a.rotation=Z}var re=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":re=-D,M="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":re=D,M="top";break;default:re=0,M="middle"}switch(a.__position){case"end":a.x=_[0]*I+g[0],a.y=_[1]*D+g[1],E=_[0]>.8?"left":_[0]<-.8?"right":"center",M=_[1]>.8?"top":_[1]<-.8?"bottom":"middle";break;case"start":a.x=-_[0]*I+m[0],a.y=-_[1]*D+m[1],E=_[0]>.8?"right":_[0]<-.8?"left":"center",M=_[1]>.8?"bottom":_[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=I*K+m[0],a.y=m[1]+re,E=F[0]<0?"right":"left",a.originX=-I*K,a.originY=-re;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=q[0],a.y=q[1]+re,E="center",a.originY=-re;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-I*K+g[0],a.y=g[1]+re,E=F[0]>=0?"right":"left",a.originX=I*K,a.originY=-re;break}a.scaleX=a.scaleY=l,a.setStyle({verticalAlign:a.__verticalAlign||M,align:a.__align||E})}},t}(bi);const WS=Wne;var Zne=function(){function e(t){this.group=new bi,this._LineCtor=t||WS}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,a=n._lineData;n._lineData=t,a||i.removeAll();var l=FD(t);t.diff(a).add(function(o){r._doAdd(t,o,l)}).update(function(o,h){r._doUpdate(a,t,h,o,l)}).remove(function(o){i.remove(a.getItemGraphicEl(o))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=FD(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(o){!o.isGroup&&!Xne(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var a=r.getItemLayout(i);if(Yx(a)){var l=new this._LineCtor(r,i,this._seriesScope);l.traverse(n),this.group.add(l),r.setItemGraphicEl(i,l),this._progressiveEls.push(l)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){Iy(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!Yx(i)){var a=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,a),this.group.add(a)}},e.prototype._doUpdate=function(t,r,n,i,a){var l=t.getItemGraphicEl(n);if(!Yx(r.getItemLayout(i))){this.group.remove(l);return}l?l.updateData(r,i,a):l=new this._LineCtor(r,i,a),r.setItemGraphicEl(i,l),this.group.add(l)},e}();function Xne(e){return e.animators&&e.animators.length>0}function FD(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:My(t)}}function ND(e){return isNaN(e[0])||isNaN(e[1])}function Yx(e){return e&&!ND(e[0])&&!ND(e[1])}const Yne=Zne;var Kne=function(e){Vt(t,e);function t(r,n,i){var a=e.call(this)||this;return a.add(a.createLine(r,n,i)),a._updateEffectSymbol(r,n),a}return t.prototype.createLine=function(r,n,i){return new WS(r,n,i)},t.prototype._updateEffectSymbol=function(r,n){var i=r.getItemModel(n),a=i.getModel("effect"),l=a.get("symbolSize"),o=a.get("symbol");Gt(l)||(l=[l,l]);var h=r.getItemVisual(n,"style"),d=a.get("color")||h&&h.stroke,m=this.childAt(1);this._symbolType!==o&&(this.remove(m),m=xf(o,-.5,-.5,1,1,d),m.z2=100,m.culling=!0,this.add(m)),m&&(m.setStyle("shadowColor",d),m.setStyle(a.getItemStyle(["color"])),m.scaleX=l[0],m.scaleY=l[1],m.setColor(d),this._symbolType=o,this._symbolScale=l,this._updateEffectAnimation(r,a,n))},t.prototype._updateEffectAnimation=function(r,n,i){var a=this.childAt(1);if(!!a){var l=r.getItemLayout(i),o=n.get("period")*1e3,h=n.get("loop"),d=n.get("constantSpeed"),m=Jh(n.get("delay"),function(_){return _/r.count()*o/3});if(a.ignore=!0,this._updateAnimationPoints(a,l),d>0&&(o=this._getLineLength(a)/d*1e3),o!==this._period||h!==this._loop){a.stopAnimation();var g=void 0;Er(m)?g=m(i):g=m,a.__t>0&&(g=-o*a.__t),this._animateSymbol(a,o,g,h)}this._period=o,this._loop=h}},t.prototype._animateSymbol=function(r,n,i,a){if(n>0){r.__t=0;var l=this,o=r.animate("",a).when(n,{__t:1}).delay(i).during(function(){l._updateSymbolPosition(r)});a||o.done(function(){l.remove(r)}),o.start()}},t.prototype._getLineLength=function(r){return Ph(r.__p1,r.__cp1)+Ph(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,n){r.__p1=n[0],r.__p2=n[1],r.__cp1=n[2]||[(n[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2]},t.prototype.updateData=function(r,n,i){this.childAt(0).updateData(r,n,i),this._updateEffectSymbol(r,n)},t.prototype._updateSymbolPosition=function(r){var n=r.__p1,i=r.__p2,a=r.__cp1,l=r.__t,o=[r.x,r.y],h=o.slice(),d=yi,m=Hb;o[0]=d(n[0],a[0],i[0],l),o[1]=d(n[1],a[1],i[1],l);var g=m(n[0],a[0],i[0],l),_=m(n[1],a[1],i[1],l);r.rotation=-Math.atan2(_,g)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=Ph(h,o)*1.05,l===1&&(o[0]=h[0]+(o[0]-h[0])/2,o[1]=h[1]+(o[1]-h[1])/2)):r.__lastT===1?r.scaleY=2*Ph(n,o):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=o[0],r.y=o[1]},t.prototype.updateLayout=function(r,n){this.childAt(0).updateLayout(r,n);var i=r.getItemModel(n).getModel("effect");this._updateEffectAnimation(r,i,n)},t}(bi);const s6=Kne;var Jne=function(e){Vt(t,e);function t(r,n,i){var a=e.call(this)||this;return a._createPolyline(r,n,i),a}return t.prototype._createPolyline=function(r,n,i){var a=r.getItemLayout(n),l=new aS({shape:{points:a}});this.add(l),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var a=r.hostModel,l=this.childAt(0),o={shape:{points:r.getItemLayout(n)}};wc(l,o,a,n),this._updateCommonStl(r,n,i)},t.prototype._updateCommonStl=function(r,n,i){var a=this.childAt(0),l=r.getItemModel(n),o=i&&i.emphasisLineStyle,h=i&&i.focus,d=i&&i.blurScope,m=i&&i.emphasisDisabled;if(!i||r.hasItemOption){var g=l.getModel("emphasis");o=g.getModel("lineStyle").getLineStyle(),m=g.get("disabled"),h=g.get("focus"),d=g.get("blurScope")}a.useStyle(r.getItemVisual(n,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var _=a.ensureState("emphasis");_.style=o,rS(this,h,d,m)},t.prototype.updateLayout=function(r,n){var i=this.childAt(0);i.setShape("points",r.getItemLayout(n))},t}(bi);const l6=Jne;var Qne=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,n,i){return new l6(r,n,i)},t.prototype._updateAnimationPoints=function(r,n){this._points=n;for(var i=[0],a=0,l=1;l<n.length;l++){var o=n[l-1],h=n[l];a+=Ph(o,h),i.push(a)}if(a===0){this._length=0;return}for(var l=0;l<i.length;l++)i[l]/=a;this._offsets=i,this._length=a},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var n=r.__t,i=this._points,a=this._offsets,l=i.length;if(!!a){var o=this._lastFrame,h;if(n<this._lastFramePercent){var d=Math.min(o+1,l-1);for(h=d;h>=0&&!(a[h]<=n);h--);h=Math.min(h,l-2)}else{for(h=o;h<l&&!(a[h]>n);h++);h=Math.min(h-1,l-2)}var m=(n-a[h])/(a[h+1]-a[h]),g=i[h],_=i[h+1];r.x=g[0]*(1-m)+m*_[0],r.y=g[1]*(1-m)+m*_[1];var x=_[0]-g[0],E=_[1]-g[1];r.rotation=-Math.atan2(E,x)-Math.PI/2,this._lastFrame=h,this._lastFramePercent=n,r.ignore=!1}},t}(s6);const eie=Qne;var tie=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),rie=function(e){Vt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new tie},t.prototype.buildPath=function(r,n){var i=n.segs,a=n.curveness,l;if(n.polyline)for(l=this._off;l<i.length;){var o=i[l++];if(o>0){r.moveTo(i[l++],i[l++]);for(var h=1;h<o;h++)r.lineTo(i[l++],i[l++])}}else for(l=this._off;l<i.length;){var d=i[l++],m=i[l++],g=i[l++],_=i[l++];if(r.moveTo(d,m),a>0){var x=(d+g)/2-(m-_)*a,E=(m+_)/2-(g-d)*a;r.quadraticCurveTo(x,E,g,_)}else r.lineTo(g,_)}this.incremental&&(this._off=l,this.notClear=!0)},t.prototype.findDataIndex=function(r,n){var i=this.shape,a=i.segs,l=i.curveness,o=this.style.lineWidth;if(i.polyline)for(var h=0,d=0;d<a.length;){var m=a[d++];if(m>0)for(var g=a[d++],_=a[d++],x=1;x<m;x++){var E=a[d++],M=a[d++];if(Pl(g,_,E,M,o,r,n))return h}h++}else for(var h=0,d=0;d<a.length;){var g=a[d++],_=a[d++],E=a[d++],M=a[d++];if(l>0){var P=(g+E)/2-(_-M)*l,I=(_+M)/2-(E-g)*l;if(t4(g,_,P,I,E,M,o,r,n))return h}else if(Pl(g,_,E,M,o,r,n))return h;h++}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),a=this.getBoundingRect();if(r=i[0],n=i[1],a.contain(r,n)){var l=this.hoverDataIdx=this.findDataIndex(r,n);return l>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.segs,a=1/0,l=1/0,o=-1/0,h=-1/0,d=0;d<i.length;){var m=i[d++],g=i[d++];a=Math.min(m,a),o=Math.max(m,o),l=Math.min(g,l),h=Math.max(g,h)}r=this._rect=new _n(a,l,o,h)}return r},t}(nn),nie=function(){function e(){this.group=new bi}return e.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,r){var n=this._newAdded[0],i=r.getLayout("linesPoints"),a=n&&n.shape.segs;if(a&&a.length<2e4){var l=a.length,o=new Float32Array(l+i.length);o.set(a),o.set(i,l),n.setShape({segs:o})}else{this._newAdded=[];var h=this._create();h.incremental=!0,h.setShape({segs:i}),this._setCommon(h,r),h.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new rie({cursor:"default"});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var a=r.getVisual("style");a&&a.stroke&&t.setStyle("stroke",a.stroke),t.setStyle("fill",null);var l=bn(t);l.seriesIndex=i.seriesIndex,t.on("mousemove",function(o){l.dataIndex=null;var h=t.hoverDataIdx;h>0&&(l.dataIndex=h+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const iie=nie;var aie={seriesType:"lines",plan:CS(),reset:function(e){var t=e.coordinateSystem;if(!!t){var r=e.get("polyline"),n=e.pipelineContext.large;return{progress:function(i,a){var l=[];if(n){var o=void 0,h=i.end-i.start;if(r){for(var d=0,m=i.start;m<i.end;m++)d+=e.getLineCoordsCount(m);o=new Float32Array(h+d*2)}else o=new Float32Array(h*4);for(var g=0,_=[],m=i.start;m<i.end;m++){var x=e.getLineCoords(m,l);r&&(o[g++]=x);for(var E=0;E<x;E++)_=t.dataToPoint(l[E],!1,_),o[g++]=_[0],o[g++]=_[1]}a.setLayout("linesPoints",o)}else for(var m=i.start;m<i.end;m++){var M=a.getItemModel(m),x=e.getLineCoords(m,l),P=[];if(r)for(var I=0;I<x;I++)P.push(t.dataToPoint(l[I]));else{P[0]=t.dataToPoint(l[0]),P[1]=t.dataToPoint(l[1]);var D=M.get(["lineStyle","curveness"]);+D&&(P[2]=[(P[0][0]+P[1][0])/2-(P[0][1]-P[1][1])*D,(P[0][1]+P[1][1])/2-(P[1][0]-P[0][0])*D])}a.setItemLayout(m,P)}}}}}};const u6=aie;var oie=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var a=r.getData(),l=this._updateLineDraw(a,r),o=r.get("zlevel"),h=r.get(["effect","trailLength"]),d=i.getZr(),m=d.painter.getType()==="svg";m||d.painter.getLayer(o).clear(!0),this._lastZlevel!=null&&!m&&d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&h>0&&(m||d.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(h/10+.9,1),0)})),l.updateData(a);var g=r.get("clip",!0)&&Jre(r.coordinateSystem,!1,r);g?this.group.setClipPath(g):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var a=r.getData(),l=this._updateLineDraw(a,r);l.incrementalPrepareUpdate(a),this._clearLayer(i),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._lineDraw.incrementalUpdate(r,n.getData()),this._finished=r.end===n.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,n,i){var a=r.getData(),l=r.pipelineContext;if(!this._finished||l.large||l.progressiveRender)return{update:!0};var o=u6.reset(r,n,i);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(i)},t.prototype._updateLineDraw=function(r,n){var i=this._lineDraw,a=this._showEffect(n),l=!!n.get("polyline"),o=n.pipelineContext,h=o.large;return(!i||a!==this._hasEffet||l!==this._isPolyline||h!==this._isLargeDraw)&&(i&&i.remove(),i=this._lineDraw=h?new iie:new Yne(l?a?eie:l6:a?s6:WS),this._hasEffet=a,this._isPolyline=l,this._isLargeDraw=h),this.group.add(i.group),i},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var n=r.getZr(),i=n.painter.getType()==="svg";!i&&this._lastZlevel!=null&&n.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,n){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(n)},t.prototype.dispose=function(r,n){this.remove(r,n)},t.type="lines",t}(dc);const sie=oie;var lie=typeof Uint32Array>"u"?Array:Uint32Array,uie=typeof Float64Array>"u"?Array:Float64Array;function VD(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=nr(t,function(r){var n=[r[0].coord,r[1].coord],i={coords:n};return r[0].name&&(i.fromName=r[0].name),r[1].name&&(i.toName=r[1].name),Lq([i,r[0],r[1]])}))}var cie=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],VD(r);var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(VD(r),r.data){var n=this._processFlatCoordsArray(r.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(r.data=new Float32Array(n.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var n=this._processFlatCoordsArray(r.data);n.flatCoords&&(this._flatCoords?(this._flatCoords=Nb(this._flatCoords,n.flatCoords),this._flatCoordsOffset=Nb(this._flatCoordsOffset,n.flatCoordsOffset)):(this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset),r.data=new Float32Array(n.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var n=this.getData().getItemModel(r),i=n.option instanceof Array?n.option:n.getShallow("coords");return i},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,n){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[r*2],a=this._flatCoordsOffset[r*2+1],l=0;l<a;l++)n[l]=n[l]||[],n[l][0]=this._flatCoords[i+l*2],n[l][1]=this._flatCoords[i+l*2+1];return a}else{for(var o=this._getCoordsFromItemModel(r),l=0;l<o.length;l++)n[l]=n[l]||[],n[l][0]=o[l][0],n[l][1]=o[l][1];return o.length}},t.prototype._processFlatCoordsArray=function(r){var n=0;if(this._flatCoords&&(n=this._flatCoords.length),Mn(r[0])){for(var i=r.length,a=new lie(i),l=new uie(i),o=0,h=0,d=0,m=0;m<i;){d++;var g=r[m++];a[h++]=o+n,a[h++]=g;for(var _=0;_<g;_++){var x=r[m++],E=r[m++];l[o++]=x,l[o++]=E}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,h),flatCoords:l,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,n){var i=new yR(["value"],this);return i.hasItemOption=!1,i.initData(r.data,[],function(a,l,o,h){if(a instanceof Array)return NaN;i.hasItemOption=!0;var d=a.value;if(d!=null)return d instanceof Array?d[h]:d}),i},t.prototype.formatTooltip=function(r,n,i){var a=this.getData(),l=a.getItemModel(r),o=l.get("name");if(o)return o;var h=l.get("fromName"),d=l.get("toName"),m=[];return h!=null&&m.push(h),d!=null&&m.push(d),rf("nameValue",{name:m.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?1e4:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?2e4:this.get("progressiveThreshold"):r},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),n=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&n>0?n+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(nf);const hie=cie;function Mg(e){return e instanceof Array||(e=[e,e]),e}var fie={seriesType:"lines",reset:function(e){var t=Mg(e.get("symbol")),r=Mg(e.get("symbolSize")),n=e.getData();n.setVisual("fromSymbol",t&&t[0]),n.setVisual("toSymbol",t&&t[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]);function i(a,l){var o=a.getItemModel(l),h=Mg(o.getShallow("symbol",!0)),d=Mg(o.getShallow("symbolSize",!0));h[0]&&a.setItemVisual(l,"fromSymbol",h[0]),h[1]&&a.setItemVisual(l,"toSymbol",h[1]),d[0]&&a.setItemVisual(l,"fromSymbolSize",d[0]),d[1]&&a.setItemVisual(l,"toSymbolSize",d[1])}return{dataEach:n.hasItemOption?i:null}}};const die=fie;function pie(e){e.registerChartView(sie),e.registerSeriesModel(hie),e.registerLayout(u6),e.registerVisual(die)}var ic=ni(),UD=Ur,Kx=Rn,mie=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var a=r.get("value"),l=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===a&&this._lastStatus===l)){this._lastValue=a,this._lastStatus=l;var o=this._group,h=this._handle;if(!l||l==="hide"){o&&o.hide(),h&&h.hide();return}o&&o.show(),h&&h.show();var d={};this.makeElOption(d,a,t,r,n);var m=d.graphicKey;m!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=m;var g=this._moveAnimation=this.determineAnimation(t,r);if(!o)o=this._group=new bi,this.createPointerEl(o,d,t,r),this.createLabelEl(o,d,t,r),n.getZr().add(o);else{var _=to($D,r,g);this.updatePointerEl(o,d,_),this.updateLabelEl(o,d,_,r)}HD(o,r,!0),this._renderHandle(a)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,a=i.type==="category",l=r.get("snap");if(!l&&!a)return!1;if(n==="auto"||n==null){var o=this.animationThreshold;if(a&&i.getBandWidth()>o)return!0;if(l){var h=qS(t).seriesDataCount,d=i.getExtent();return Math.abs(d[0]-d[1])/h>o}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,a){},e.prototype.createPointerEl=function(t,r,n,i){var a=r.pointer;if(a){var l=ic(t).pointerEl=new WY[a.type](UD(r.pointer));t.add(l)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var a=ic(t).labelEl=new Io(UD(r.label));t.add(a),jD(a,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=ic(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var a=ic(t).labelEl;a&&(a.setStyle(r.label.style),n(a,{x:r.label.x,y:r.label.y}),jD(a,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,a=r.getModel("handle"),l=r.get("status");if(!a.get("show")||!l||l==="hide"){i&&n.remove(i),this._handle=null;return}var o;this._handle||(o=!0,i=this._handle=G4(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){fL(d.event)},onmousedown:Kx(this._onHandleDragMove,this,0,0),drift:Kx(this._onHandleDragMove,this),ondragend:Kx(this._onHandleDragEnd,this)}),n.add(i)),HD(i,r,!1),i.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var h=a.get("size");Gt(h)||(h=[h,h]),i.scaleX=h[0]/2,i.scaleY=h[1]/2,FO(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,o)}},e.prototype._moveHandleToValue=function(t,r){$D(this._axisPointerModel,!r&&this._moveAnimation,this._handle,Jx(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(Jx(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(Jx(i)),ic(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),gw(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function $D(e,t,r,n){c6(ic(r).lastProp,n)||(ic(r).lastProp=n,t?wc(r,n,e):(r.stopAnimation(),r.attr(n)))}function c6(e,t){if(ar(e)&&ar(t)){var r=!0;return Ce(t,function(n,i){r=r&&c6(e[i],n)}),!!r}else return e===t}function jD(e,t){e[t.get(["label","show"])?"show":"hide"]()}function Jx(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function HD(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(a){a.type!=="group"&&(n!=null&&(a.z=n),i!=null&&(a.zlevel=i),a.silent=r)})}const vie=mie;function gie(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function _ie(e,t,r,n,i){var a=r.get("value"),l=h6(a,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),o=r.getModel("label"),h=vS(o.get("padding")||0),d=o.getFont(),m=G2(l,d),g=i.position,_=m.width+h[1]+h[3],x=m.height+h[0]+h[2],E=i.align;E==="right"&&(g[0]-=_),E==="center"&&(g[0]-=_/2);var M=i.verticalAlign;M==="bottom"&&(g[1]-=x),M==="middle"&&(g[1]-=x/2),yie(g,_,x,n);var P=o.get("backgroundColor");(!P||P==="auto")&&(P=t.get(["axisLine","lineStyle","color"])),e.label={x:g[0],y:g[1],style:_c(o,{text:l,font:d,fill:o.getTextColor(),padding:h,backgroundColor:P}),z2:10}}function yie(e,t,r,n){var i=n.getWidth(),a=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,a)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function h6(e,t,r,n,i){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:i.precision}),l=i.formatter;if(l){var o={value:BS(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};Ce(n,function(h){var d=r.getSeriesByIndex(h.seriesIndex),m=h.dataIndexInside,g=d&&d.getDataParams(m);g&&o.seriesData.push(g)}),Jt(l)?a=l.replace("{value}",a):Er(l)&&(a=l(o))}return a}function f6(e,t,r){var n=Up();return $2(n,n,r.rotation),tw(n,n,r.position),cS([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function xie(e,t,r,n,i,a){var l=t6.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),_ie(t,n,i,a,{position:f6(n.axis,e,r),align:l.textAlign,verticalAlign:l.textVerticalAlign})}function bie(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function wie(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var Sie=function(e){Vt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,a,l){var o=i.axis,h=o.grid,d=a.get("type"),m=GD(h,o).getOtherAxis(o).getGlobalExtent(),g=o.toGlobalCoord(o.dataToCoord(n,!0));if(d&&d!=="none"){var _=gie(a),x=Tie[d](o,g,m);x.style=_,r.graphicKey=x.type,r.pointer=x}var E=Ow(h.model,i);xie(n,r,E,i,a,l)},t.prototype.getHandleTransform=function(r,n,i){var a=Ow(n.axis.grid.model,n,{labelInside:!1});a.labelMargin=i.get(["handle","margin"]);var l=f6(n.axis,r,a);return{x:l[0],y:l[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,a){var l=i.axis,o=l.grid,h=l.getGlobalExtent(!0),d=GD(o,l).getOtherAxis(l).getGlobalExtent(),m=l.dim==="x"?0:1,g=[r.x,r.y];g[m]+=n[m],g[m]=Math.min(h[1],g[m]),g[m]=Math.max(h[0],g[m]);var _=(d[1]+d[0])/2,x=[_,_];x[m]=g[m];var E=[{verticalAlign:"middle"},{align:"center"}];return{x:g[0],y:g[1],rotation:r.rotation,cursorPoint:x,tooltipOption:E[m]}},t}(vie);function GD(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var Tie={line:function(e,t,r){var n=bie([t,r[0]],[t,r[1]],qD(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:wie([t-n/2,r[0]],[n,i],qD(e))}}};function qD(e){return e.dim==="x"?0:1}const Eie=Sie;var Cie=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(An);const Aie=Cie;var ks=ni(),Iie=Ce;function d6(e,t,r){if(!Or.node){var n=t.getZr();ks(n).records||(ks(n).records={}),Pie(n,t);var i=ks(n).records[e]||(ks(n).records[e]={});i.handler=r}}function Pie(e,t){if(ks(e).initialized)return;ks(e).initialized=!0,r("click",to(WD,"click")),r("mousemove",to(WD,"mousemove")),r("globalout",Die);function r(n,i){e.on(n,function(a){var l=kie(t);Iie(ks(e).records,function(o){o&&i(o,a,l.dispatchAction)}),Mie(l.pendings,t)})}}function Mie(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function Die(e,t,r){e.handler("leave",null,r)}function WD(e,t,r,n){t.handler(e,r,n)}function kie(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function Fw(e,t){if(!Or.node){var r=t.getZr(),n=(ks(r).records||{})[e];n&&(ks(r).records[e]=null)}}var Lie=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var a=n.getComponent("tooltip"),l=r.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";d6("axisPointer",i,function(o,h,d){l!=="none"&&(o==="leave"||l.indexOf(o)>=0)&&d({type:"updateAxisPointer",currTrigger:o,x:h&&h.offsetX,y:h&&h.offsetY})})},t.prototype.remove=function(r,n){Fw("axisPointer",n)},t.prototype.dispose=function(r,n){Fw("axisPointer",n)},t.type="axisPointer",t}(ql);const Oie=Lie;function p6(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var a=i.getData(),l=gm(a,e);if(l==null||l<0||Gt(l))return{point:[]};var o=a.getItemGraphicEl(l),h=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(l)||[];else if(h&&h.dataToPoint)if(e.isStacked){var d=h.getBaseAxis(),m=h.getOtherAxis(d),g=m.dim,_=d.dim,x=g==="x"||g==="radius"?1:0,E=a.mapDimension(_),M=[];M[x]=a.get(E,l),M[1-x]=a.get(a.getCalculationInfo("stackResultDimension"),l),r=h.dataToPoint(M)||[]}else r=h.dataToPoint(a.getValues(nr(h.dimensions,function(I){return a.mapDimension(I)}),l))||[];else if(o){var P=o.getBoundingRect().clone();P.applyTransform(o.transform),r=[P.x+P.width/2,P.y+P.height/2]}return{point:r,el:o}}var ZD=ni();function Rie(e,t,r){var n=e.currTrigger,i=[e.x,e.y],a=e,l=e.dispatchAction||Rn(r.dispatchAction,r),o=t.getComponent("axisPointer").coordSysAxesInfo;if(!!o){t_(i)&&(i=p6({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var h=t_(i),d=a.axesInfo,m=o.axesInfo,g=n==="leave"||t_(i),_={},x={},E={list:[],map:{}},M={showPointer:to(Bie,x),showTooltip:to(Fie,E)};Ce(o.coordSysMap,function(I,D){var O=h||I.containPoint(i);Ce(o.coordSysAxesInfo[D],function(F,$){var q=F.axis,K=$ie(d,F);if(!g&&O&&(!d||K)){var Z=K&&K.value;Z==null&&!h&&(Z=q.pointToData(i)),Z!=null&&XD(F,Z,M,!1,_)}})});var P={};return Ce(m,function(I,D){var O=I.linkGroup;O&&!x[D]&&Ce(O.axesInfo,function(F,$){var q=x[$];if(F!==I&&q){var K=q.value;O.mapper&&(K=I.axis.scale.parse(O.mapper(K,YD(F),YD(I)))),P[I.key]=K}})}),Ce(P,function(I,D){XD(m[D],I,M,!0,_)}),Nie(x,m,_),Vie(E,i,e,l),Uie(m,l,r),_}}function XD(e,t,r,n,i){var a=e.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var l=zie(t,e),o=l.payloadBatch,h=l.snapToValue;o[0]&&i.seriesIndex==null&&Ct(i,o[0]),!n&&e.snap&&a.containData(h)&&h!=null&&(t=h),r.showPointer(e,t,o),r.showTooltip(e,l,h)}}function zie(e,t){var r=t.axis,n=r.dim,i=e,a=[],l=Number.MAX_VALUE,o=-1;return Ce(t.seriesModels,function(h,d){var m=h.getData().mapDimensionsAll(n),g,_;if(h.getAxisTooltipData){var x=h.getAxisTooltipData(m,e,r);_=x.dataIndices,g=x.nestestValue}else{if(_=h.getData().indicesOfNearest(m[0],e,r.type==="category"?.5:null),!_.length)return;g=h.getData().get(m[0],_[0])}if(!(g==null||!isFinite(g))){var E=e-g,M=Math.abs(E);M<=l&&((M<l||E>=0&&o<0)&&(l=M,o=E,i=g,a.length=0),Ce(_,function(P){a.push({seriesIndex:h.seriesIndex,dataIndexInside:P,dataIndex:h.getData().getRawIndex(P)})}))}}),{payloadBatch:a,snapToValue:i}}function Bie(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function Fie(e,t,r,n){var i=r.payloadBatch,a=t.axis,l=a.model,o=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var h=t.coordSys.model,d=am(h),m=e.map[d];m||(m=e.map[d]={coordSysId:h.id,coordSysIndex:h.componentIndex,coordSysType:h.type,coordSysMainType:h.mainType,dataByAxis:[]},e.list.push(m)),m.dataByAxis.push({axisDim:a.dim,axisIndex:l.componentIndex,axisType:l.type,axisId:l.id,value:n,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Nie(e,t,r){var n=r.axesInfo=[];Ce(t,function(i,a){var l=i.axisPointerModel.option,o=e[a];o?(!i.useHandle&&(l.status="show"),l.value=o.value,l.seriesDataIndices=(o.payloadBatch||[]).slice()):!i.useHandle&&(l.status="hide"),l.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:l.value})})}function Vie(e,t,r,n){if(t_(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function Uie(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",a=ZD(n)[i]||{},l=ZD(n)[i]={};Ce(e,function(d,m){var g=d.axisPointerModel.option;g.status==="show"&&Ce(g.seriesDataIndices,function(_){var x=_.seriesIndex+" | "+_.dataIndex;l[x]=_})});var o=[],h=[];Ce(a,function(d,m){!l[m]&&h.push(d)}),Ce(l,function(d,m){!a[m]&&o.push(d)}),h.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:h}),o.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function $ie(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function YD(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function t_(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function m6(e){r6.registerAxisPointerClass("CartesianAxisPointer",Eie),e.registerComponentModel(Aie),e.registerComponentView(Oie),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!Gt(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=Ine(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Rie)}function jie(e){af(a6),af(m6)}var Hie=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(An);const Gie=Hie;function v6(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function g6(e){if(!!Or.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var _6=g6(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qie=g6(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function y6(e,t){if(!e)return t;t=lO(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function Wie(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var Zie=y6(qie,"transition"),ZS=y6(_6,"transform"),Xie="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Or.transform3dSupported?"will-change:transform;":"");function Yie(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Kie(e,t,r){if(!Jt(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=Yp(t);var a=Yie(r),l=Math.max(Math.round(i)*1.5,6),o="",h=ZS+":",d;gn(["left","right"],a)>-1?(o+="top:50%",h+="translateY(-50%) rotate("+(d=a==="left"?-225:-45)+"deg)"):(o+="left:50%",h+="translateX(-50%) rotate("+(d=a==="top"?225:45)+"deg)");var m=d*Math.PI/180,g=l+i,_=g*Math.abs(Math.cos(m))+g*Math.abs(Math.sin(m)),x=Math.round(((_-Math.SQRT2*i)/2+Math.SQRT2*i-(_-g)/2)*100)/100;o+=";"+a+":-"+x+"px";var E=t+" solid "+i+"px;",M=["position:absolute;width:"+l+"px;height:"+l+"px;",o+";"+h+";","border-bottom:"+E,"border-right:"+E,"background-color:"+n+";"];return'<div style="'+M.join("")+'"></div>'}function Jie(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Or.transformSupported?","+ZS+n:",left"+n+",top"+n),Zie+":"+i}function KD(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Or.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var a=Or.transform3dSupported,l="translate"+(a?"3d":"")+"("+n+","+i+(a?",0":"")+")";return r?"top:0;left:0;"+ZS+":"+l+";":[["top",0],["left",0],[_6,l]]}function Qie(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),a=e.get("textShadowBlur")||0,l=e.get("textShadowOffsetX")||0,o=e.get("textShadowOffsetY")||0;return i&&a&&t.push("text-shadow:"+l+"px "+o+"px "+a+"px "+i),Ce(["decoration","align"],function(h){var d=e.get(h);d&&t.push("text-"+h+":"+d)}),t.join(";")}function eae(e,t,r){var n=[],i=e.get("transitionDuration"),a=e.get("backgroundColor"),l=e.get("shadowBlur"),o=e.get("shadowColor"),h=e.get("shadowOffsetX"),d=e.get("shadowOffsetY"),m=e.getModel("textStyle"),g=zO(e,"html"),_=h+"px "+d+"px "+l+"px "+o;return n.push("box-shadow:"+_),t&&i&&n.push(Jie(i,r)),a&&n.push("background-color:"+a),Ce(["width","color","radius"],function(x){var E="border-"+x,M=lO(E),P=e.get(M);P!=null&&n.push(E+":"+P+(x==="color"?"":"px"))}),n.push(Qie(m)),g!=null&&n.push("padding:"+vS(g).join("px ")+"px"),n.join(";")+";"}function JD(e,t,r,n,i){var a=t&&t.painter;if(r){var l=a&&a.getViewportRoot();l&&Gq(e,l,document.body,n,i)}else{e[0]=n,e[1]=i;var o=a&&a.getViewportRootOffset();o&&(e[0]+=o.offsetLeft,e[1]+=o.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var tae=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Or.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var a=this._zr=r.getZr(),l=this._appendToBody=n&&n.appendToBody;JD(this._styleCoord,a,l,r.getWidth()/2,r.getHeight()/2),l?document.body.appendChild(i):t.appendChild(i),this._container=t;var o=this;i.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},i.onmousemove=function(h){if(h=h||window.event,!o._enterable){var d=a.handler,m=a.painter.getViewportRoot();Ha(m,h,!0),d.dispatch("mousemove",h)}},i.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=Wie(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,a=this._styleCoord;n.innerHTML?i.cssText=Xie+eae(t,!this._firstShow,this._longHide)+KD(a[0],a[1],!0)+("border-color:"+Yp(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,a){var l=this.el;if(t==null){l.innerHTML="";return}var o="";if(Jt(a)&&n.get("trigger")==="item"&&!v6(n)&&(o=Kie(n,i,a)),Jt(t))l.innerHTML=t+o;else if(t){l.innerHTML="",Gt(t)||(t=[t]);for(var h=0;h<t.length;h++)I_(t[h])&&t[h].parentNode!==l&&l.appendChild(t[h]);if(o&&l.childNodes.length){var d=document.createElement("div");d.innerHTML=o,l.appendChild(d)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(JD(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,a=KD(n[0],n[1]);Ce(a,function(l){i[l[0]]=l[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Or.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Rn(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const rae=tae;var nae=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),e5(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,a){var l=this;ar(t)&&ua(""),this.el&&this._zr.remove(this.el);var o=n.getModel("textStyle");this.el=new Io({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:o.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:zO(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),Ce(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){l.el.style[d]=n.get(d)}),Ce(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){l.el.style[d]=o.get(d)||0}),this._zr.add(this.el);var h=this;this.el.on("mouseover",function(){h._enterable&&(clearTimeout(h._hideTimeout),h._show=!0),h._inContent=!0}),this.el.on("mouseout",function(){h._enterable&&h._show&&h.hideLater(h._hideDelay),h._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=QD(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;e5(i,this._zr,t,r),t=i[0],r=i[1];var a=n.style,l=El(a.borderWidth||0),o=QD(a);n.x=t+l+o.left,n.y=r+l+o.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Rn(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function El(e){return Math.max(0,e)}function QD(e){var t=El(e.shadowBlur||0),r=El(e.shadowOffsetX||0),n=El(e.shadowOffsetY||0);return{left:El(t-r),right:El(t+r),top:El(t-n),bottom:El(t+n)}}function e5(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const iae=nae;var aae=new fa({shape:{x:-1,y:-1,width:2,height:2}}),oae=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Or.node||!n.getDom())){var i=r.getComponent("tooltip"),a=this._renderMode=IZ(i.get("renderMode"));this._tooltipContent=a==="richText"?new iae(n):new rae(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Or.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var a=this._tooltipContent;a.update(r),a.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?FO(this,"_updatePosition",50,"fixRate"):gw(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");d6("itemTooltip",this._api,Rn(function(i,a,l){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(a,l):i==="leave"&&this._hide(l))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,a=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var l=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&l.manuallyShowTip(r,n,i,{x:l._lastX,y:l._lastY,dataByCoordSys:l._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,a){if(!(a.from===this.uid||Or.node||!i.getDom())){var l=t5(a,i);this._ticket="";var o=a.dataByCoordSys,h=cae(a,n,i);if(h){var d=h.el.getBoundingRect().clone();d.applyTransform(h.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:h.el,position:a.position,positionDefault:"bottom"},l)}else if(a.tooltip&&a.x!=null&&a.y!=null){var m=aae;m.x=a.x,m.y=a.y,m.update(),bn(m).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:m},l)}else if(o)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:o,tooltipOption:a.tooltipOption},l);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,a))return;var g=p6(a,n),_=g.point[0],x=g.point[1];_!=null&&x!=null&&this._tryShow({offsetX:_,offsetY:x,target:g.el,position:a.position,positionDefault:"bottom"},l)}else a.x!=null&&a.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:i.getZr().findHover(a.x,a.y).target},l))}},t.prototype.manuallyHideTip=function(r,n,i,a){var l=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&l.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(t5(a,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,a){var l=a.seriesIndex,o=a.dataIndex,h=n.getComponent("axisPointer").coordSysAxesInfo;if(!(l==null||o==null||h==null)){var d=n.getSeriesByIndex(l);if(!!d){var m=d.getData(),g=qd([m.getItemModel(o),d,(d.coordinateSystem||{}).model],this._tooltipModel);if(g.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:l,dataIndex:o,position:a.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,a=this._tooltipModel;if(!!a){this._lastX=r.offsetX,this._lastY=r.offsetY;var l=r.dataByCoordSys;if(l&&l.length)this._showAxisTooltip(l,r);else if(i){this._lastDataByCoordSys=null;var o,h;np(i,function(d){if(bn(d).dataIndex!=null)return o=d,!0;if(bn(d).tooltipConfig!=null)return h=d,!0},!0),o?this._showSeriesItemTooltip(r,o,n):h?this._showComponentItemTooltip(r,h,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=Rn(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,a=this._tooltipModel,l=[n.offsetX,n.offsetY],o=qd([n.tooltipOption],a),h=this._renderMode,d=[],m=rf("section",{blocks:[],noHeader:!0}),g=[],_=new Ex;Ce(r,function(D){Ce(D.dataByAxis,function(O){var F=i.getComponent(O.axisDim+"Axis",O.axisIndex),$=O.value;if(!(!F||$==null)){var q=h6($,F.axis,i,O.seriesDataIndices,O.valueLabelOpt),K=rf("section",{header:q,noHeader:!Ko(q),sortBlocks:!0,blocks:[]});m.blocks.push(K),Ce(O.seriesDataIndices,function(Z){var re=i.getSeriesByIndex(Z.seriesIndex),ie=Z.dataIndexInside,ce=re.getDataParams(ie);if(!(ce.dataIndex<0)){ce.axisDim=O.axisDim,ce.axisIndex=O.axisIndex,ce.axisType=O.axisType,ce.axisId=O.axisId,ce.axisValue=BS(F.axis,{value:$}),ce.axisValueLabel=q,ce.marker=_.makeTooltipMarker("item",Yp(ce.color),h);var le=uM(re.formatTooltip(ie,!0,null)),fe=le.frag;if(fe){var ye=qd([re],a).get("valueFormatter");K.blocks.push(ye?Ct({valueFormatter:ye},fe):fe)}le.text&&g.push(le.text),d.push(ce)}})}})}),m.blocks.reverse(),g.reverse();var x=n.position,E=o.get("order"),M=pM(m,_,h,E,i.get("useUTC"),o.get("textStyle"));M&&g.unshift(M);var P=h==="richText"?`

`:"<br/>",I=g.join(P);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(r,d)?this._updatePosition(o,x,l[0],l[1],this._tooltipContent,d):this._showTooltipContent(o,I,d,Math.random()+"",l[0],l[1],x,null,_)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var a=this._ecModel,l=bn(n),o=l.seriesIndex,h=a.getSeriesByIndex(o),d=l.dataModel||h,m=l.dataIndex,g=l.dataType,_=d.getData(g),x=this._renderMode,E=r.positionDefault,M=qd([_.getItemModel(m),d,h&&(h.coordinateSystem||{}).model],this._tooltipModel,E?{position:E}:null),P=M.get("trigger");if(!(P!=null&&P!=="item")){var I=d.getDataParams(m,g),D=new Ex;I.marker=D.makeTooltipMarker("item",Yp(I.color),x);var O=uM(d.formatTooltip(m,!1,g)),F=M.get("order"),$=M.get("valueFormatter"),q=O.frag,K=q?pM($?Ct({valueFormatter:$},q):q,D,x,F,a.get("useUTC"),M.get("textStyle")):O.text,Z="item_"+d.name+"_"+m;this._showOrMove(M,function(){this._showTooltipContent(M,K,I,Z,r.offsetX,r.offsetY,r.position,r.target,D)}),i({type:"showTip",dataIndexInside:m,dataIndex:_.getRawIndex(m),seriesIndex:o,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var a=bn(n),l=a.tooltipConfig,o=l.option||{};if(Jt(o)){var h=o;o={content:h,formatter:h}}var d=[o],m=this._ecModel.getComponent(a.componentMainType,a.componentIndex);m&&d.push(m),d.push({formatter:o.content});var g=r.positionDefault,_=qd(d,this._tooltipModel,g?{position:g}:null),x=_.get("content"),E=Math.random()+"",M=new Ex;this._showOrMove(_,function(){var P=Ur(_.get("formatterParams")||{});this._showTooltipContent(_,x,P,E,r.offsetX,r.offsetY,r.position,n,M)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,a,l,o,h,d,m){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var g=this._tooltipContent;g.setEnterable(r.get("enterable"));var _=r.get("formatter");h=h||r.get("position");var x=n,E=this._getNearestPoint([l,o],i,r.get("trigger"),r.get("borderColor")),M=E.color;if(_)if(Jt(_)){var P=r.ecModel.get("useUTC"),I=Gt(i)?i[0]:i,D=I&&I.axisType&&I.axisType.indexOf("time")>=0;x=_,D&&(x=ky(I.axisValue,x,P)),x=uO(x,i,!0)}else if(Er(_)){var O=Rn(function(F,$){F===this._ticket&&(g.setContent($,m,r,M,h),this._updatePosition(r,h,l,o,g,i,d))},this);this._ticket=a,x=_(i,a,O)}else x=_;g.setContent(x,m,r,M,h),g.show(r,M),this._updatePosition(r,h,l,o,g,i,d)}},t.prototype._getNearestPoint=function(r,n,i,a){if(i==="axis"||Gt(n))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Gt(n))return{color:a||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,a,l,o,h){var d=this._api.getWidth(),m=this._api.getHeight();n=n||r.get("position");var g=l.getSize(),_=r.get("align"),x=r.get("verticalAlign"),E=h&&h.getBoundingRect().clone();if(h&&E.applyTransform(h.transform),Er(n)&&(n=n([i,a],o,l.el,E,{viewSize:[d,m],contentSize:g.slice()})),Gt(n))i=Zi(n[0],d),a=Zi(n[1],m);else if(ar(n)){var M=n;M.width=g[0],M.height=g[1];var P=gS(M,{width:d,height:m});i=P.x,a=P.y,_=null,x=null}else if(Jt(n)&&h){var I=uae(n,E,g,r.get("borderWidth"));i=I[0],a=I[1]}else{var I=sae(i,a,l,d,m,_?null:20,x?null:20);i=I[0],a=I[1]}if(_&&(i-=r5(_)?g[0]/2:_==="right"?g[0]:0),x&&(a-=r5(x)?g[1]/2:x==="bottom"?g[1]:0),v6(r)){var I=lae(i,a,l,d,m);i=I[0],a=I[1]}l.moveTo(i,a)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,a=this._cbParamsList,l=!!i&&i.length===r.length;return l&&Ce(i,function(o,h){var d=o.dataByAxis||[],m=r[h]||{},g=m.dataByAxis||[];l=l&&d.length===g.length,l&&Ce(d,function(_,x){var E=g[x]||{},M=_.seriesDataIndices||[],P=E.seriesDataIndices||[];l=l&&_.value===E.value&&_.axisType===E.axisType&&_.axisId===E.axisId&&M.length===P.length,l&&Ce(M,function(I,D){var O=P[D];l=l&&I.seriesIndex===O.seriesIndex&&I.dataIndex===O.dataIndex}),a&&Ce(_.seriesDataIndices,function(I){var D=I.seriesIndex,O=n[D],F=a[D];O&&F&&F.data!==O.data&&(l=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!l},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Or.node||!n.getDom()||(gw(this,"_updatePosition"),this._tooltipContent.dispose(),Fw("itemTooltip",n))},t.type="tooltip",t}(ql);function qd(e,t,r){var n=t.ecModel,i;r?(i=new Ji(r,n,n),i=new Ji(t.option,i,n)):i=t;for(var a=e.length-1;a>=0;a--){var l=e[a];l&&(l instanceof Ji&&(l=l.get("tooltip",!0)),Jt(l)&&(l={formatter:l}),l&&(i=new Ji(l,i,n)))}return i}function t5(e,t){return e.dispatchAction||Rn(t.dispatchAction,t)}function sae(e,t,r,n,i,a,l){var o=r.getSize(),h=o[0],d=o[1];return a!=null&&(e+h+a+2>n?e-=h+a:e+=a),l!=null&&(t+d+l>i?t-=d+l:t+=l),[e,t]}function lae(e,t,r,n,i){var a=r.getSize(),l=a[0],o=a[1];return e=Math.min(e+l,n)-l,t=Math.min(t+o,i)-o,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function uae(e,t,r,n){var i=r[0],a=r[1],l=Math.ceil(Math.SQRT2*n)+8,o=0,h=0,d=t.width,m=t.height;switch(e){case"inside":o=t.x+d/2-i/2,h=t.y+m/2-a/2;break;case"top":o=t.x+d/2-i/2,h=t.y-a-l;break;case"bottom":o=t.x+d/2-i/2,h=t.y+m+l;break;case"left":o=t.x-i-l,h=t.y+m/2-a/2;break;case"right":o=t.x+d+l,h=t.y+m/2-a/2}return[o,h]}function r5(e){return e==="center"||e==="middle"}function cae(e,t,r){var n=Z2(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var a=_m(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),l=a.models[0];if(!!l){var o=r.getViewOfComponentModel(l),h;if(o.group.traverse(function(d){var m=bn(d).tooltipConfig;if(m&&m.name===e.name)return h=d,!0}),h)return{componentMainType:i,componentIndex:l.componentIndex,el:h}}}}const hae=oae;function fae(e){af(m6),e.registerComponentModel(Gie),e.registerComponentView(hae),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},ha),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},ha)}var dae=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(An),pae=function(e){Vt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var a=this.group,l=r.getModel("textStyle"),o=r.getModel("subtextStyle"),h=r.get("textAlign"),d=Lr(r.get("textBaseline"),r.get("textVerticalAlign")),m=new Io({style:_c(l,{text:r.get("text"),fill:l.getTextColor()},{disableBox:!0}),z2:10}),g=m.getBoundingRect(),_=r.get("subtext"),x=new Io({style:_c(o,{text:_,fill:o.getTextColor(),y:g.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),E=r.get("link"),M=r.get("sublink"),P=r.get("triggerEvent",!0);m.silent=!E&&!P,x.silent=!M&&!P,E&&m.on("click",function(){GP(E,"_"+r.get("target"))}),M&&x.on("click",function(){GP(M,"_"+r.get("subtarget"))}),bn(m).eventData=bn(x).eventData=P?{componentType:"title",componentIndex:r.componentIndex}:null,a.add(m),_&&a.add(x);var I=a.getBoundingRect(),D=r.getBoxLayoutParams();D.width=I.width,D.height=I.height;var O=gS(D,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));h||(h=r.get("left")||r.get("right"),h==="middle"&&(h="center"),h==="right"?O.x+=O.width:h==="center"&&(O.x+=O.width/2)),d||(d=r.get("top")||r.get("bottom"),d==="center"&&(d="middle"),d==="bottom"?O.y+=O.height:d==="middle"&&(O.y+=O.height/2),d=d||"top"),a.x=O.x,a.y=O.y,a.markRedraw();var F={align:h,verticalAlign:d};m.setStyle(F),x.setStyle(F),I=a.getBoundingRect();var $=O.margin,q=r.getItemStyle(["color","opacity"]);q.fill=r.get("backgroundColor");var K=new fa({shape:{x:I.x-$[3],y:I.y-$[0],width:I.width+$[1]+$[3],height:I.height+$[0]+$[2],r:r.get("borderRadius")},style:q,subPixelOptimize:!0,silent:!0});a.add(K)}},t.type="title",t}(ql);function mae(e){e.registerComponentModel(dae),e.registerComponentView(pae)}af([jre,mae,fae,jie,jne,pie]);const vae={name:"BusChartVue",components:{"v-chart":lre},data:()=>({bus_plate_hash:{8371:{plate:"\u7CA4BDF371",route:1},8421:{plate:"\u7CA4BDF421",route:1},8471:{plate:"\u7CA4BDF471",route:1},8147:{plate:"\u7CA4BDF147",route:1},8335:{plate:"\u7CA4BDF335",route:1},8345:{plate:"\u7CA4BDF345",route:1},8365:{plate:"\u7CA4BDF365",route:1},8411:{plate:"\u7CA4BDF411",route:1},8447:{plate:"\u7CA4BDE447",route:1},18447:{plate:"\u7CA4BDF447",route:1},8458:{plate:"\u7CA4BDF458",route:1},8267:{plate:"\u7CA4BDF267",route:1},8338:{plate:"\u7CA4BDF338",route:1},8330:{plate:"\u7CA4BDF330",route:1},298:{plate:"\u7CA4BDF298",route:1},363:{plate:"\u7CA4BDF363",route:1},8040:{plate:"\u7CA4BDF040",route:1},8430:{plate:"\u7CA4BDF430",route:1},8470:{plate:"\u7CA4BDF470",route:1}},lines:[],stops1:[],stops2:[],historyBusData:[],echartsOption:{tooltip:{show:!1},title:[{subtext:`By bilibili@\u4EA4\u901A\u6570\u636E\u5C0F\u65ED\u5B66\u957F
GitHub@ni1o1`,sublink:"https://github.com/ni1o1/nikebus",textAlign:"right",bottom:"2%",left:"98%"}],grid:[{top:"10%",bottom:"0%",left:"0%",right:"10%"}],yAxis:[{inverse:!0,min:-100,max:4500,type:"value",boundaryGap:!1,show:!1,splitLine:{show:!1}}],xAxis:[{position:"top",verticalAlign:"top",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0},type:"category",data:[`1\u53F7\u7EBF
\u5DE5\u5B66\u9662\u65B9\u5411`,`1\u53F7\u7EBF
\u6B23\u56ED\u65B9\u5411`,`2\u53F7\u7EBF
\u79D1\u7814\u697C\u65B9\u5411`,`2\u53F7\u7EBF
\u6B23\u56ED\u65B9\u5411`],splitLine:{show:!1}}],series:[{type:"scatter",label:{fontSize:10,show:!0,color:"#999",position:"right",formatter:"{b}"},data:[]},{type:"lines",coordinateSystem:"cartesian2d",data:[]},{label:{fontSize:11,show:!0,fontWeight:"bold",position:"right",distance:-5,formatter:"{b}"},type:"scatter",name:"bus",data:[]}],stateAnimation:{duration:500}},timer:{},second:0}),methods:{setEchartsOption(e){this.echartsOption=Object.assign({},this.echartsOption,e)},load_data(){qa.all([qa.get("/bus_echart/line1.json"),qa.get("/bus_echart/line1_dir2.json"),qa.get("/bus_echart/line2.json"),qa.get("/bus_echart/stop1.json"),qa.get("/bus_echart/stop2.json")]).then(qa.spread((e,t,r,n,i)=>{const a=e.data,l=t.data,o=r.data,h=n.data,d=i.data;this.lines=[a,o,l],this.stops1=h,this.stops2=d;const m=h.features.map(M=>({value:[1,Uo(a.features[0],M).properties.location*1e3],name:M.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),g=h.features.map(M=>({value:[0,Fa(l.features[0])*1e3-Uo(l.features[0],M).properties.location*1e3],name:M.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),_=d.features.map(M=>({value:[3,Uo(o.features[0],M).properties.location*1e3],name:M.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),x=d.features.map(M=>({value:[2,Fa(o.features[0])*1e3-Uo(o.features[0],M).properties.location*1e3],name:M.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),E={series:[{data:[...m,...g,..._,...x]},{data:[{coords:[[0,0],[0,Fa(l.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[1,0],[1,Fa(a.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[2,0],[2,Fa(o.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}},{coords:[[3,0],[3,Fa(o.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}}]}]};this.setEchartsOption(E)}))},updateBusPos(){this.lines.length>0&&qa.get("https://bus.sustcra.com/api/v2/monitor_osm/").then(e=>{const r=e.data.filter(i=>i.it==0).map(i=>{let a=0;i.route_code==202&&(a=1);const l=hi([i.lng,i.lat]);let o=this.lines[a].features[0],h=Uo(o,l),d=h.properties.location;const m=yq(o,d+1e-4);let g=xq(h,m);g<0&&(g+=360);let _=2;const x=parseInt(i.course)-parseInt(g);if(x<20&&x>-20)return _=1,{value:[_+a*2,d*1e3],name:this.bus_plate_hash[i.id].plate,itemStyle:{color:"#222"},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:i.speed};if(x<-160||x>160){_=0;let E=Fa(o)*1e3-d*1e3;return a==0&&(o=this.lines[2].features[0],h=Uo(o,l),d=h.properties.location,E=Fa(o)*1e3-d*1e3),{value:[_+a*2,E],name:this.bus_plate_hash[i.id].plate,itemStyle:{color:"#222"},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:i.speed}}else if(this.historyBusData.length>0){const E=this.historyBusData.filter(M=>{if(typeof M<"u")return M.name==this.bus_plate_hash[i.id].plate});if(E.length>0)return E[0]}});this.historyBusData=r.filter(i=>typeof i<"u");const n={series:[{},{},{data:r}]};this.setEchartsOption(n)})},refresh(){if(this.second+=1,this.second%10===0)this.updateBusPos();else{const e=this.historyBusData.map(t=>{if(typeof t<"u"){let r=2;t.value[0]==1&&(r=0),t.value[0]==2&&(r=1),t.value[0]==3&&(r=1),t.value[0]==0&&(r=2);let n=t.value[1]+t.speed*.5*1e3/7200;return n>Fa(this.lines[r].features[0])*1e3&&(n=Fa(this.lines[r].features[0])*1e3),{...t,value:[t.value[0],n]}}});this.historyBusData=e.filter(t=>typeof t<"u"),this.setEchartsOption({series:[{},{},{data:e}]}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{let r=t.coords.latitude,n=t.coords.longitude;const i=hi([n,r]),a=dI(i,this.stops1),l=Uo(this.lines[0].features[0],a).properties.location*1e3,o=Fa(this.lines[2].features[0])*1e3-Uo(this.lines[2].features[0],a).properties.location*1e3,h=dI(i,this.stops2),d=Uo(this.lines[1].features[0],h).properties.location*1e3,m=Fa(this.lines[1].features[0])*1e3-Uo(this.lines[1].features[0],h).properties.location*1e3,g=this.historyBusData.filter($=>$.value[0]===0&&$.value[1]<=o).map($=>parseInt((o-$.value[1])/250)),_=this.historyBusData.filter($=>$.value[0]===1&&$.value[1]<=l).map($=>parseInt((l-$.value[1])/250)),x=this.historyBusData.filter($=>$.value[0]===2&&$.value[1]<=m).map($=>parseInt((m-$.value[1])/250)),E=this.historyBusData.filter($=>$.value[0]===3&&$.value[1]<=d).map($=>parseInt((d-$.value[1])/250)),M=g.length>0?`
 \u7EA6`+Math.min(...g)+"\u5206\u949F":"",P=_.length>0?`
  \u7EA6`+Math.min(..._)+"\u5206\u949F":"",I=x.length>0?`
   \u7EA6`+Math.min(...x)+"\u5206\u949F":"",D=E.length>0?`
    \u7EA6`+Math.min(...E)+"\u5206\u949F":"";let O=[],F=[];O=[{name:"\u6700\u8FD1"+P,itemStyle:{color:"#ff881b"},coord:[1,l]},{name:"\u6700\u8FD1"+M,itemStyle:{color:"#ff881b"},coord:[0,o]}],F=[{name:"\u6700\u8FD1"+D,itemStyle:{color:"#379ff4"},coord:[3,d]},{name:"\u6700\u8FD1"+I,itemStyle:{color:"#379ff4"},coord:[2,m]}],this.setEchartsOption({series:[{markPoint:{symbol:"arrow",symbolRotate:-90,symbolOffset:["-50%",0],symbolSize:10,label:{fontSize:10,show:!0,color:"#666",position:"left",formatter:"{b}"},data:[...O,...F]}},{},{}]})})}}},watch:{lines:"updateBusPos"},mounted(){this.load_data(),this.timer=setInterval(()=>{this.refresh()},5e3)},unmounted(){clearInterval(this.timer)}},gae=e=>(k5("data-v-432b7137"),e=e(),L5(),e),_ae=gae(()=>cr("img",{src:"https://visitor-badge.laobi.icu/badge?page_id=nikebus",alt:"visitor badge",class:"visitor-badge"},null,-1));function yae(e,t,r,n,i,a){const l=Xi("v-chart");return ft(),Nt(Hr,null,[lr(l,{class:"chart",option:e.echartsOption,autoresize:!0},null,8,["option"]),_ae],64)}const xae=qr(vae,[["render",yae],["__scopeId","data-v-432b7137"],["__file","BusChartVue.vue"]]),bae=io({enhance({app:e}){e.component("BusTable",CG),e.component("Realtimemap",MG),e.component("WeatherSpan",RG),e.component("BusChartVue",xae)}}),r_=[n7,o7,c7,w7,C7,D7,bU,kj,Rj,Nj,jj,bae];var x6=Pn(g9),b6=Xw({key:"",path:"",title:"",lang:"",frontmatter:{},excerpt:"",headers:[]}),Ps=Pn(b6),zs=()=>Ps;import.meta.webpackHot&&(__VUE_HMR_RUNTIME__.updatePageData=e=>{x6.value[e.key]=()=>Promise.resolve(e),e.key===Ps.value.key&&(Ps.value=e)});var w6=Symbol(""),Bs=()=>{const e=zn(w6);if(!e)throw new Error("usePageFrontmatter() is called without provider.");return e},S6=Symbol(""),wae=()=>{const e=zn(S6);if(!e)throw new Error("usePageHead() is called without provider.");return e},Sae=Symbol(""),T6=Symbol(""),E6=()=>{const e=zn(T6);if(!e)throw new Error("usePageLang() is called without provider.");return e},XS=Symbol(""),Sm=()=>{const e=zn(XS);if(!e)throw new Error("useRouteLocale() is called without provider.");return e},Ol=Pn(q8),YS=()=>Ol;import.meta.webpackHot&&(__VUE_HMR_RUNTIME__.updateSiteData=e=>{Ol.value=e});var C6=Symbol(""),KS=()=>{const e=zn(C6);if(!e)throw new Error("useSiteLocaleData() is called without provider.");return e},Tae=Symbol(""),ec=uf({resolvePageData:async e=>{const t=x6.value[e],r=await(t==null?void 0:t());return r!=null?r:b6},resolvePageFrontmatter:e=>e.frontmatter,resolvePageHead:(e,t,r)=>{const n=rn(t.description)?t.description:r.description,i=[...ir(t.head)?t.head:[],...r.head,["title",{},e],["meta",{name:"description",content:n}]];return Z8(i)},resolvePageHeadTitle:(e,t)=>`${e.title?`${e.title} | `:""}${t.title}`,resolvePageLang:e=>e.lang||"en",resolveRouteLocale:(e,t)=>o3(e,t),resolveSiteLocaleData:(e,t)=>({...e,...e.locales[t]})}),JS=Pr({name:"ClientOnly",setup(e,t){const r=Pn(!1);return ta(()=>{r.value=!0}),()=>{var n,i;return r.value?(i=(n=t.slots).default)==null?void 0:i.call(n):null}}}),Eae=Pr({name:"Content",props:{pageKey:{type:String,required:!1,default:""}},setup(e){const t=zs(),r=Pt(()=>s3[e.pageKey||t.value.key]);return()=>r.value?Ar(r.value):Ar("div","404 Not Found")}}),Cae="Layout",Aae="NotFound",Iae=r_.reduce((e,t)=>({...e,...t.layouts}),{}),n5=Pr({name:"Vuepress",setup(){const e=zs(),t=Pt(()=>{let r;if(e.value.path){const n=e.value.frontmatter.layout;rn(n)?r=n:r=Cae}else r=Aae;return Iae[r]});return()=>Ar(t.value)}}),Gy=e=>fm(e)?e:`${YS().value.base}${a3(e)}`;const Pae=[["v-8daa1a0e","/",{title:"\u{1F4DA}\u5357\u79D1\u624B\u518C"},["/index.html","/README.md"]],["v-74bc627b","/about/",{title:"\u5E2E\u52A9\u6211\u4EEC\u5B8C\u5584"},["/about/index.html","/about/README.md"]],["v-08ae5eba","/calendar/2018-2019.html",{title:"\u6821\u5386 - 2018-2019 \u5B66\u5E74"},["/calendar/2018-2019","/calendar/2018-2019.md"]],["v-93cfbde4","/calendar/2019-2020.html",{title:"\u6821\u5386 - 2019-2020 \u5B66\u5E74"},["/calendar/2019-2020","/calendar/2019-2020.md"]],["v-f917537a","/calendar/2020-2021.html",{title:"\u6821\u5386 - 2020-2021 \u5B66\u5E74"},["/calendar/2020-2021","/calendar/2020-2021.md"]],["v-1a0de1a3","/calendar/2021-2022.html",{title:"\u6821\u5386 - 2021-2022 \u5B66\u5E74\uFF08\u9884\u53D1\u5E03\uFF09"},["/calendar/2021-2022","/calendar/2021-2022.md"]],["v-190ab309","/calendar/2021fall.html",{title:""},["/calendar/2021fall","/calendar/2021fall.md"]],["v-96167c50","/calendar/",{title:"\u{1F4C5}\u6821\u5386"},["/calendar/index.html","/calendar/README.md"]],["v-96536bf0","/contact/",{title:"\u{1F4C7}\u9EC4\u9875"},["/contact/index.html","/contact/README.md"]],["v-dbd38712","/emergency/",{title:"\u5E94\u6025\u5904\u7406"},["/emergency/index.html","/emergency/README.md"]],["v-c73889da","/facility/",{title:"\u{1F3EB}\u5EFA\u7B51\u4E0E\u8BBE\u65BD"},["/facility/index.html","/facility/README.md"]],["v-2c5c0e04","/facility/building-11-elevator.html",{title:"\u5982\u4F55\u201C\u7834\u89E3\u201D11\u680B\u7535\u68AF"},["/facility/building-11-elevator","/facility/building-11-elevator.md"]],["v-104cfa63","/if-you-are-a-freshman/2021.html",{title:"\u5982\u679C\u4F60\u662F\u65B0\u751F..."},["/if-you-are-a-freshman/2021","/if-you-are-a-freshman/2021.md"]],["v-780207b9","/if-you-are-a-freshman/",{title:"\u5982\u679C\u4F60\u662F\u65B0\u751F..."},["/if-you-are-a-freshman/index.html","/if-you-are-a-freshman/README.md"]],["v-14e6315a","/life/",{title:"\u{1F468}\u200D\u{1F393}\u751F\u6D3B\u5728\u5357\u79D1"},["/life/index.html","/life/README.md"]],["v-42f2be94","/life/vehicle-charger.html",{title:"\u5145\u7535\u6869\u5206\u5E03"},["/life/vehicle-charger","/life/vehicle-charger.md"]],["v-ed48bdf8","/media/",{title:"\u{1F4FA}\u5A92\u4F53\u4E0E\u7F51\u7AD9"},["/media/index.html","/media/README.md"]],["v-f4bc5604","/miniapp/",{title:"\u5357\u79D1\u624B\u518C-\u5FAE\u4FE1\u5C0F\u7A0B\u5E8F"},["/miniapp/index.html","/miniapp/README.md"]],["v-1500d063","/news/",{title:"\u66F4\u65B0\u65E5\u5FD7"},["/news/index.html","/news/README.md"]],["v-014445c8","/organizations/",{title:"\u{1F3A1}\u793E\u56E2\u6D3B\u52A8"},["/organizations/index.html","/organizations/README.md"]],["v-461d4a7c","/organizations/registered-organization-2019.html",{title:"\u6CE8\u518C\u793E\u56E2\u5217\u8868\uFF082018-2019\u5E74\u5EA6\uFF09"},["/organizations/registered-organization-2019","/organizations/registered-organization-2019.md"]],["v-6ba7e826","/organizations/registered-organization-2020.html",{title:"\u6CE8\u518C\u793E\u56E2\u5217\u8868\uFF082019-2020\u5E74\u5EA6\uFF09"},["/organizations/registered-organization-2020","/organizations/registered-organization-2020.md"]],["v-6d5cc0c5","/organizations/registered-organization-2021.html",{title:"\u6CE8\u518C\u793E\u56E2\u5217\u8868\uFF082020-2021\u5E74\u5EA6\uFF09"},["/organizations/registered-organization-2021","/organizations/registered-organization-2021.md"]],["v-28ddfa13","/service/",{title:"\u{1F5A5}\u670D\u52A1\u4E0E\u6280\u5DE7"},["/service/index.html","/service/README.md"]],["v-be92ea7e","/site-help/",{title:"\u2753\u7AD9\u70B9\u5E2E\u52A9"},["/site-help/index.html","/site-help/README.md"]],["v-d7188082","/study/",{title:"\u{1F393}\u5B66\u5728\u5357\u79D1"},["/study/index.html","/study/README.md"]],["v-d1061704","/study/paper-tools.html",{title:"\u51E0\u4E2A\u8D76 ddl \u7684\u597D\u7528\u5DE5\u5177\u{1F527}"},["/study/paper-tools","/study/paper-tools.md"]],["v-4322d0a7","/surroundings/",{title:"\u{1F6CD}\u5468\u8FB9"},["/surroundings/index.html","/surroundings/README.md"]],["v-69b23ddf","/transport/",{title:"\u{1F684}\u4EA4\u901A"},["/transport/index.html","/transport/README.md"]],["v-1678dd6f","/transport/bustimer-wx.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB\u65F6\u523B\u8868 SUSTech Campus Bus Info"},["/transport/bustimer-wx","/transport/bustimer-wx.md"]],["v-1630dfb5","/transport/bustimer.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB\u65F6\u523B\u8868 SUSTech Campus Bus Info"},["/transport/bustimer","/transport/bustimer.md"]],["v-6a28f6e0","/transport/holiday.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB - \u8282\u5047\u65E5 (2021\u5E746\u670818\u65E5\u66F4\u65B0)"},["/transport/holiday","/transport/holiday.md"]],["v-48975204","/transport/redirect.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB - \u81EA\u52A8\u8DF3\u8F6C"},["/transport/redirect","/transport/redirect.md"]],["v-8059a7a6","/transport/workday.html",{title:"\u{1F68C}\u6821\u56ED\u5DF4\u58EB - \u5DE5\u4F5C\u65E5 (2021\u5E746\u670818\u65E5\u66F4\u65B0)"},["/transport/workday","/transport/workday.md"]],["v-22cd7d0c","/facility/panolens/",{title:"\u5168\u666F\u770B\u6821\u56ED"},["/facility/panolens/index.html","/facility/panolens/README.md"]],["v-0e92d420","/if-you-are-a-freshman/preview/",{title:"\u84E2\u6751\u62FE\u9057\uFF1A\u5357\u79D1\u5927\u51B7\u77E5\u8BC62021"},["/if-you-are-a-freshman/preview/index.html","/if-you-are-a-freshman/preview/README.md"]],["v-2b8cac58","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7"},["/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87","/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5BBF\u820D\u751F\u6D3B\u7BC7.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.md"]],["v-66965350","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7"},["/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87","/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u6821\u5185\u4ECB\u7ECD\u7BC7.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.md"]],["v-66317da4","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7"},["/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87","/life/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u793E\u56E2\u7BC7.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.md"]],["v-5c3fcdf6","/life/catering/",{title:"\u2615\uFE0F\u9910\u996E"},["/life/catering/index.html","/life/catering/README.md"]],["v-04710004","/life/dormitory/",{title:"\u{1F3E0}\u4F4F\u5728\u5357\u79D1"},["/life/dormitory/index.html","/life/dormitory/README.md"]],["v-5589dd0c","/life/dormitory/dorm-floor-plan.html",{title:"\u5BBF\u820D\u5E73\u9762\u56FE"},["/life/dormitory/dorm-floor-plan","/life/dormitory/dorm-floor-plan.md"]],["v-d42194b6","/life/freshman-register/",{title:"\u65B0\u751F\u62A5\u5230"},["/life/freshman-register/index.html","/life/freshman-register/README.md"]],["v-20383a78","/life/sports-facility/",{title:"\u{1F3CA}\u200D\u2640\uFE0F\u8FD0\u52A8\u8BBE\u65BD"},["/life/sports-facility/index.html","/life/sports-facility/README.md"]],["v-42c1fa44","/service/campus-card/",{title:"\u{1F4B3}\u6821\u56ED\u5361"},["/service/campus-card/index.html","/service/campus-card/README.md"]],["v-76cff034","/service/email/",{title:"\u7535\u5B50\u90AE\u4EF6\u670D\u52A1"},["/service/email/index.html","/service/email/README.md"]],["v-ac3449b2","/service/email/send-receive-email-by-proxy.html",{title:"\u89E3\u51B3\u90AE\u7BB1\u5BB9\u91CF\u4E0D\u8DB3\u7684\u95EE\u9898"},["/service/email/send-receive-email-by-proxy","/service/email/send-receive-email-by-proxy.md"]],["v-29860ed0","/service/mail-and-express/",{title:"\u{1F4E6}\u90AE\u4EF6\u4E0E\u5FEB\u9012\u6536\u53D1"},["/service/mail-and-express/index.html","/service/mail-and-express/README.md"]],["v-622da02f","/service/matlab/",{title:"MATLAB \u6FC0\u6D3B"},["/service/matlab/index.html","/service/matlab/README.md"]],["v-5e590ec6","/service/medical-treatment/",{title:"\u{1F3E5}\u5C31\u533B\u6307\u5357"},["/service/medical-treatment/index.html","/service/medical-treatment/README.md"]],["v-1fa222d4","/service/network/",{title:"\u{1F310}\u7F51\u7EDC\u4E0E\u4FE1\u606F\u4E2D\u5FC3 (its@sustech.edu.cn)"},["/service/network/index.html","/service/network/README.md"]],["v-48519846","/service/sakai/",{title:"Sakai | \u6587\u4EF6\u5206\u4EAB"},["/service/sakai/index.html","/service/sakai/README.md"]],["v-369295b4","/service/sid/",{title:"\u5B66\u53F7\uFF08SID\uFF09"},["/service/sid/index.html","/service/sid/README.md"]],["v-3692bb1f","/service/ssc/",{title:""},["/service/ssc/index.html","/service/ssc/README.md"]],["v-425958ce","/service/student-train-ticket/",{title:"\u706B\u8F66\u7968\u5B66\u751F\u4F18\u60E0\u4F7F\u7528\u6307\u5357"},["/service/student-train-ticket/index.html","/service/student-train-ticket/README.md"]],["v-3692ee77","/service/tax/",{title:"\u5982\u4F55\u7533\u62A5\u9000\u7A0E\uFF1F-- \u5E74\u5EA6\u4E2A\u4EBA\u6240\u5F97\u7A0E\u5E74\u5EA6\u6C47\u7B97"},["/service/tax/index.html","/service/tax/README.md"]],["v-2686552a","/service/unifound/",{title:"\u{1F5A8}\uFE0F\u8054\u521B\u6253\u5370\u7CFB\u7EDF"},["/service/unifound/index.html","/service/unifound/README.md"]],["v-45d74ec0","/service/work-wechat/",{title:"\u4F01\u4E1A\u5FAE\u4FE1"},["/service/work-wechat/index.html","/service/work-wechat/README.md"]],["v-772a5784","/study/borrow-books/",{title:"\u{1F4D7}\u6559\u6750\u4E0E\u56FE\u4E66\u501F\u8FD8"},["/study/borrow-books/index.html","/study/borrow-books/README.md"]],["v-8460eeb8","/study/by-shude-college/advice-on-study.html",{title:"\u{1F4D6}\u5B66\u4E60\u5EFA\u8BAE"},["/study/by-shude-college/advice-on-study","/study/by-shude-college/advice-on-study.md"]],["v-435bd49a","/study/by-shude-college/info-on-study.html",{title:"\u{1F4D6}\u5B66\u4E60\u5236\u5EA6\u4E0E\u4FE1\u606F"},["/study/by-shude-college/info-on-study","/study/by-shude-college/info-on-study.md"]],["v-6323734e","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.html",{title:"\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7"},["/study/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.html","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87","/study/by-zhicheng-college/\u65B0\u751F\u653B\u7565\u4E4B\u5B66\u4E60\u7BC7.md","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.md"]],["v-5eb748bf","/study/cse/innovative-project.html",{title:"\u5357\u65B9\u79D1\u6280\u5927\u5B66\u8BA1\u7B97\u673A\u7CFB\u521B\u65B0\u5B9E\u8DF5\u9879\u76EE\u6C47\u603B"},["/study/cse/innovative-project","/study/cse/innovative-project.md"]],["v-2a23f022","/service/blackboard/retrive-ics-url/",{title:"BB | \u5C06Blackboard\u4E2D\u4F5C\u4E1A\uFF0CDDL\u7B49\u65E5\u7A0B\u6DFB\u52A0\u5230\u7CFB\u7EDF\u65E5\u5386"},["/service/blackboard/retrive-ics-url/index.html","/service/blackboard/retrive-ics-url/README.md"]],["v-66061b92","/service/network/apply-for-vpn/",{title:"\u7533\u8BF7\u56DE\u6821VPN"},["/service/network/apply-for-vpn/index.html","/service/network/apply-for-vpn/README.md"]],["v-89ac2bec","/service/network/choose-a-pad/",{title:"\u9009\u62E9\u4E00\u53F0\u5408\u9002\u7684\u5E73\u677F\u7535\u8111"},["/service/network/choose-a-pad/index.html","/service/network/choose-a-pad/README.md"]],["v-1549b190","/service/network/choose-a-router/",{title:"\u{1F4F6}\u9009\u62E9\u4E00\u53F0\u5408\u9002\u7684\u8DEF\u7531\u5668"},["/service/network/choose-a-router/index.html","/service/network/choose-a-router/README.md"]],["v-9e1961f8","/service/network/eduroam/",{title:"eduroam\uFF08\u5B66\u672F\u7F51\u8DEF\u6F2B\u6E38\uFF09"},["/service/network/eduroam/index.html","/service/network/eduroam/README.md"]],["v-6bba5e58","/service/network/ipv6/",{title:"\u6821\u5185 IPv6 \u8BBE\u7F6E\u6559\u7A0B"},["/service/network/ipv6/index.html","/service/network/ipv6/README.md"]],["v-83a77034","/service/network/remote-desktop/",{title:"\u6821\u5185\u8FDC\u7A0B\u684C\u9762\u4F7F\u7528\u6307\u5317"},["/service/network/remote-desktop/index.html","/service/network/remote-desktop/README.md"]],["v-296d1d15","/service/network/use-vpn/",{title:"\u4F7F\u7528 SSL VPN \u8BF4\u660E"},["/service/network/use-vpn/index.html","/service/network/use-vpn/README.md"]],["v-fb711be8","/study/book-list-by-prof-yuan/2018/",{title:"\u8881\u957F\u5E9A\u8001\u5E08\u4E3A\u65B0\u751F\u63A8\u8350\u7684\u4E66\u5355\uFF082018\uFF09"},["/study/book-list-by-prof-yuan/2018/index.html","/study/book-list-by-prof-yuan/2018/README.md"]],["v-3706649a","/404.html",{title:""},["/404"]]];var Mae=()=>Pae.reduce((e,[t,r,n,i])=>(e.push({name:t,path:r,component:n5,meta:n},...i.map(a=>({path:a,redirect:r}))),e),[{name:"404",path:"/:catchAll(.*)",component:n5}]),Dae=pF,kae=()=>{const e=YF({history:Dae(i3(Ol.value.base)),routes:Mae(),scrollBehavior:(t,r,n)=>n||(t.hash?{el:t.hash}:{top:0})});return e.beforeResolve(async(t,r)=>{var n;(t.path!==r.path||r===Es)&&([Ps.value]=await Promise.all([ec.resolvePageData(t.name),(n=s3[t.name])==null?void 0:n.__asyncLoader()]))}),e},Lae=e=>{e.component("ClientOnly",JS),e.component("Content",Eae)},Oae=(e,t)=>{const r=Pt(()=>ec.resolveRouteLocale(Ol.value.locales,t.currentRoute.value.path)),n=Pt(()=>ec.resolveSiteLocaleData(Ol.value,r.value)),i=Pt(()=>ec.resolvePageFrontmatter(Ps.value)),a=Pt(()=>ec.resolvePageHeadTitle(Ps.value,n.value)),l=Pt(()=>ec.resolvePageHead(a.value,i.value,n.value)),o=Pt(()=>ec.resolvePageLang(Ps.value));return e.provide(XS,r),e.provide(C6,n),e.provide(w6,i),e.provide(Sae,a),e.provide(S6,l),e.provide(T6,o),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get:()=>i.value},$head:{get:()=>l.value},$headTitle:{get:()=>a.value},$lang:{get:()=>o.value},$page:{get:()=>Ps.value},$routeLocale:{get:()=>r.value},$site:{get:()=>Ol.value},$siteLocale:{get:()=>n.value},$withBase:{get:()=>Gy}}),{pageData:Ps,pageFrontmatter:i,pageHead:l,pageHeadTitle:a,pageLang:o,routeLocale:r,siteData:Ol,siteLocaleData:n}},Rae=()=>{const e=Us(),t=wae(),r=E6(),n=Pn([]),i=()=>{t.value.forEach(l=>{const o=zae(l);o&&n.value.push(o)})},a=()=>{document.documentElement.lang=r.value,n.value.forEach(l=>{l.parentNode===document.head&&document.head.removeChild(l)}),n.value.splice(0,n.value.length),t.value.forEach(l=>{const o=Bae(l);o!==null&&(document.head.appendChild(o),n.value.push(o))})};Bl(Tae,a),ta(()=>{i(),a(),Oi(()=>e.path,()=>a())})},zae=([e,t,r=""])=>{const n=Object.entries(t).map(([o,h])=>rn(h)?`[${o}="${h}"]`:h===!0?`[${o}]`:"").join(""),i=`head > ${e}${n}`;return Array.from(document.querySelectorAll(i)).find(o=>o.innerText===r)||null},Bae=([e,t,r])=>{if(!rn(e))return null;const n=document.createElement(e);return n2(t)&&Object.entries(t).forEach(([i,a])=>{rn(a)?n.setAttribute(i,a):a===!0&&n.setAttribute(i,"")}),rn(r)&&n.appendChild(document.createTextNode(r)),n},Fae=H8,Nae=async()=>{var r;const e=Fae({name:"VuepressApp",setup(){var n;Rae();for(const i of r_)(n=i.setup)==null||n.call(i);return()=>[Ar(y3),...r_.flatMap(({rootComponents:i=[]})=>i.map(a=>Ar(a)))]}}),t=kae();Lae(e),Oae(e,t);for(const n of r_)await((r=n.enhance)==null?void 0:r.call(n,{app:e,router:t,siteData:Ol}));return e.use(t),{app:e,router:t}};Nae().then(({app:e,router:t})=>{t.isReady().then(()=>{e.mount("#app")})});export{qr as _,lr as a,Vr as b,Nt as c,Nae as createVueApp,cr as d,$l as e,a8 as f,ft as o,Xi as r,Xn as w};
